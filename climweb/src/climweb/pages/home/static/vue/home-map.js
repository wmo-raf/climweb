(function(){"use strict";try{if(typeof document<"u"){var a=document.createElement("style");a.appendChild(document.createTextNode(`.layer-control[data-v-55faac78]{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#0000004d;border-top-right-radius:20px;border-bottom-right-radius:20px;font-weight:700;color:#fff;padding:0 12px;height:30px;width:fit-content;max-width:100%;white-space:nowrap;cursor:pointer}.layer-control.active[data-v-55faac78]{background-color:var(--primary-color)}.layer-control.mobile[data-v-55faac78]{padding:0}.layer-icon[data-v-55faac78]{background:#fff;border-radius:2em;width:32px;height:32px;position:absolute;left:-15px;overflow:hidden;display:flex;justify-content:center;align-items:center;box-shadow:0 2px 3px #00000040}.layer-icon svg[data-v-55faac78]{height:18px;width:18px;fill:var(--primary-color);color:var(--primary-color)}.layer-title[data-v-55faac78]{padding-left:12px}.time-picker[data-v-f0b81be5]{display:flex;align-items:center;background:#0009;color:#fff;border-radius:4px;font-family:Arial,sans-serif;font-size:14px}.nav-button[data-v-f0b81be5]{background:none;border:none;color:#fff;cursor:pointer;padding:5px}.nav-button[data-v-f0b81be5]:disabled{color:gray;cursor:not-allowed}.date-display[data-v-f0b81be5]{margin:0 10px;font-weight:700}.m-legend-item[data-v-e6813172]{display:flex;flex-direction:column}.legend-title[data-v-e6813172]{font-size:13px;font-weight:600;margin-bottom:4px}.legend-item-type-basic ul[data-v-e6813172]{list-style-type:none;padding:0;margin:0;display:flex;flex-direction:column;gap:4px}.item-wrapper[data-v-e6813172]{display:flex;align-items:center}.item-color[data-v-e6813172]{height:12px;width:12px;border-radius:50%;margin-right:4px}.item-label[data-v-e6813172]{font-size:12px;color:#000;font-weight:400;line-height:1.5;margin:0;padding:0;display:flex;align-items:center;gap:4px}.legend-title[data-v-853a7ec5]{font-size:13px;font-weight:600}.legend-title[data-v-9735ecfd]{font-size:13px;font-weight:600;margin-bottom:4px}table tr th[data-v-9735ecfd]{padding:0;height:12px;width:12px;border:none;box-shadow:0 1px 6px #0000001f,0 1px 4px #0000001f}table tr th span[data-v-9735ecfd]{padding:0;display:inline-block;height:100%;width:100%}table tr td[data-v-9735ecfd]{padding:0 0 4px 8px;font-size:12px;line-height:20px;vertical-align:middle;border-bottom:none}.legend-title[data-v-f4a168ad]{font-size:13px;font-weight:600;margin-bottom:4px}.legend-gradient-icon[data-v-f4a168ad]{display:flex}.icon-gradient[data-v-f4a168ad]{display:block;height:5px;margin-top:10px;margin-bottom:5px;width:100%}.icon-gradient-transparent[data-v-f4a168ad]{display:block;height:5px;margin-top:10px;margin-bottom:5px;background-image:linear-gradient(45deg,rgba(black,.4) 25%,transparent 25%,transparent 75%,rgba(black,.4) 75%,rgba(black,.4)),linear-gradient(45deg,rgba(black,.4) 25%,transparent 25%,transparent 75%,rgba(black,.4) 75%,rgba(black,.4));background-size:4px 4px;background-position:0 0,2px 2px}.legend-title[data-v-7fefba09]{font-size:13px;font-weight:600;margin-bottom:4px}.legend-gradient-icon[data-v-7fefba09]{display:flex}.icon-gradient[data-v-7fefba09]{display:block;width:12px}.icon-gradient-transparent[data-v-7fefba09]{display:block;height:5px;width:12px;margin-bottom:5px;background-image:linear-gradient(45deg,rgba(black,.4) 25%,transparent 25%,transparent 75%,rgba(black,.4) 75%,rgba(black,.4)),linear-gradient(45deg,rgba(black,.4) 25%,transparent 25%,transparent 75%,rgba(black,.4) 75%,rgba(black,.4));background-size:4px 4px;background-position:0 0,2px 2px}ul[data-v-7fefba09]{display:flex;flex-direction:column;margin:0 0 0 8px;padding:0;list-style:none;font-size:12px}li[data-v-7fefba09]{padding:0;margin:0;flex:1 1 auto;height:24px}li :scope[data-v-7fefba09]:before{content:none!important}li .name[data-v-7fefba09]{font-size:12px;display:block;font-family:inherit}.m-legend{min-width:150px}.m-legend-wrapper{z-index:1000;background-color:#fff;box-shadow:0 0 10px #0000001a;border-radius:4px 0 4px 4px}.m-legend-item{padding:10px;border-bottom:1px solid #f0f0f0}.legend-collapse{display:flex;justify-content:center;align-items:center;background-color:#707070cc;border:0;border-radius:2px 2px 0 0;bottom:100%;cursor:pointer;height:20px;position:absolute;right:-1px;transform:translateY(-1px);width:40px;padding:0}.legend-collapse-icon{height:14px;width:14px;fill:#fff}.legend-expand{cursor:pointer;width:100%;display:flex;justify-content:space-between;border:none;padding:10px;background:#fff;font-size:13px;font-weight:600}.legend-expand-icon{height:14px;width:14px;fill:var(--primary-color)}.m-legend.m-legend-collapsed.mobile{min-width:90px}.m-legend.m-legend-collapsed.mobile .legend-expand{padding:10px}.p-checkbox-checked .p-checkbox-box,.p-radiobutton-checked .p-radiobutton-box{border-color:var(--primary-color);background:var(--primary-color)}.map-options[data-v-c04de151]{font-size:14px}.basemap-options[data-v-c04de151]{display:flex;flex-direction:column;gap:4px}.divisor[data-v-c04de151]{width:100%;height:1px;border-top:1px solid rgba(26,28,34,.1);margin:15px 0}.basemap-item[data-v-c04de151]{display:flex;align-items:center;gap:4px}.boundary-label[data-v-c04de151]{margin-left:4px}.zoom-locations[data-v-c04de151]{display:flex;flex-direction:column;margin-bottom:4px}.zoom-locations-label[data-v-c04de151]{margin-bottom:4px;font-weight:500}.popup[data-v-0a2dfbc5]{background-color:#fff;width:200px}.alert-severity[data-v-0a2dfbc5]{font-size:14px;font-weight:700;margin-bottom:5px;position:absolute;top:0;left:0;padding:2px 10px;color:#fff;display:flex;align-items:center}.alert-icon[data-v-0a2dfbc5]{display:flex;justify-content:center;align-items:center;margin-right:5px}.alert-icon svg[data-v-0a2dfbc5]{width:15px;height:15px;fill:#fff}.alert-meta[data-v-0a2dfbc5]{margin-top:20px;display:flex;flex-direction:column;gap:5px}.alert-meta-item[data-v-0a2dfbc5]{display:flex;gap:10px}.alert-meta-label[data-v-0a2dfbc5]{min-width:80px;font-weight:600}.alert-detail[data-v-0a2dfbc5]{margin-top:20px;font-size:14px}.alert-event[data-v-0a2dfbc5]{font-weight:600;margin-bottom:8px}.alert-headline[data-v-0a2dfbc5]{margin-bottom:10px}.alert-link[data-v-0a2dfbc5]{background:var(--primary-color);color:#fff;padding:5px 12px;border-radius:12px}.alert-link[data-v-0a2dfbc5]:hover{text-decoration:underline}.popup[data-v-cc96c7ab]{background-color:#fff;padding:8px;min-width:100px;max-width:250px}.location-name[data-v-cc96c7ab]{font-size:16px;font-weight:700;margin-bottom:5px;position:absolute;top:8px;left:20px}.location-detail-url[data-v-cc96c7ab]{text-decoration:underline}.condition[data-v-cc96c7ab]{display:flex;align-items:center}.condition-icon[data-v-cc96c7ab]{height:80px;margin-right:5px}.condition-icon img[data-v-cc96c7ab]{height:100%;object-fit:fill}.condition-label[data-v-cc96c7ab]{font-size:14px;font-weight:500}.forecast-data-table[data-v-cc96c7ab]{margin-top:4px;font-size:14px}.forecast-data-table td[data-v-cc96c7ab]{padding:2px;border:1px solid #ccc}.forecast-value[data-v-cc96c7ab]{font-weight:500}.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0 0 0/0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px #0000001a}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}@media (hover:hover){.maplibregl-ctrl button:not(:disabled):hover{background-color:#0000000d}}.maplibregl-ctrl button:not(:disabled):active{background-color:#0000000d}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-globe .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%23333' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-globe-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%2333b5e5' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:#ffffff80;margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:#ffffff80;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:#0000000d}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:#000000bf;text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:#ffffffbf;border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:#0000000d}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px #0000001a;padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px #00000059;box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:#0006;color:#fff;display:flex;font-size:1.4em;top:0;right:0;bottom:0;left:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(pointer:coarse){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}.maplibregl-popup-content{box-shadow:0 3px 14px #0006}.map-container[data-v-2eae1d77]{width:100%;height:100%}.zoom-controls[data-v-2eae1d77]{position:absolute;top:10px;right:10px;display:flex;flex-direction:column;gap:5px}.zoom-controls button[data-v-2eae1d77]{width:30px;height:30px;border:none;border-radius:50%;background:gray;color:#fff;font-size:20px;cursor:pointer}.zoom-controls button[data-v-2eae1d77]:hover{background:#666}.basemap-control[data-v-2eae1d77]{position:absolute;top:90px;right:10px;display:flex;flex-direction:column;gap:5px}.basemap-icon[data-v-2eae1d77]{width:30px;height:30px;border-radius:50%;background:gray;cursor:pointer}.basemap-icon svg[data-v-2eae1d77]{height:16px;width:16px;fill:#fff}#datepicker-mobile[data-v-2eae1d77]{position:absolute;top:130px;right:10px}.fixed-layer-control[data-v-2eae1d77]{position:absolute;top:20px;left:24px;display:flex;flex-direction:column;gap:10px}.dynamic-layer-control[data-v-2eae1d77]{position:absolute;bottom:30px;left:24px;display:flex;flex-direction:column;gap:10px}.date-navigator-control[data-v-2eae1d77]{position:absolute;bottom:12px;left:50%;transform:translate(-50%);padding:10px}.legend-control[data-v-2eae1d77]{position:absolute;bottom:12px;right:10px}.overlay-loader[data-v-2eae1d77]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#ffffffb3;z-index:1000;display:flex;align-items:center;justify-content:center}.spinner[data-v-2eae1d77]{border:4px solid rgba(0,0,0,.1);border-top:4px solid #000;border-radius:50%;width:40px;height:40px;animation:spin-2eae1d77 1s linear infinite}@keyframes spin-2eae1d77{0%{transform:rotate(0)}to{transform:rotate(360deg)}}`)),document.head.appendChild(a)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function D_(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const en={},Nc=[],ts=()=>{},US=()=>!1,Op=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),O_=e=>e.startsWith("onUpdate:"),ri=Object.assign,z_=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},ZS=Object.prototype.hasOwnProperty,$r=(e,t)=>ZS.call(e,t),qt=Array.isArray,jc=e=>zp(e)==="[object Map]",Zx=e=>zp(e)==="[object Set]",tr=e=>typeof e=="function",pn=e=>typeof e=="string",Fs=e=>typeof e=="symbol",hn=e=>e!==null&&typeof e=="object",Gx=e=>(hn(e)||tr(e))&&tr(e.then)&&tr(e.catch),Wx=Object.prototype.toString,zp=e=>Wx.call(e),GS=e=>zp(e).slice(8,-1),Hx=e=>zp(e)==="[object Object]",$_=e=>pn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Rd=D_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$p=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},WS=/-(\w)/g,bo=$p(e=>e.replace(WS,(t,i)=>i?i.toUpperCase():"")),HS=/\B([A-Z])/g,xl=$p(e=>e.replace(HS,"-$1").toLowerCase()),Bp=$p(e=>e.charAt(0).toUpperCase()+e.slice(1)),bg=$p(e=>e?`on${Bp(e)}`:""),xa=(e,t)=>!Object.is(e,t),vg=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},qx=(e,t,i,c=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:c,value:i})},qS=e=>{const t=parseFloat(e);return isNaN(t)?e:t},KS=e=>{const t=pn(e)?Number(e):NaN;return isNaN(t)?e:t};let db;const Fp=()=>db||(db=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ns(e){if(qt(e)){const t={};for(let i=0;i<e.length;i++){const c=e[i],p=pn(c)?QS(c):ns(c);if(p)for(const g in p)t[g]=p[g]}return t}else if(pn(e)||hn(e))return e}const YS=/;(?![^(]*\))/g,XS=/:([^]+)/,JS=/\/\*[^]*?\*\//g;function QS(e){const t={};return e.replace(JS,"").split(YS).forEach(i=>{if(i){const c=i.split(XS);c.length>1&&(t[c[0].trim()]=c[1].trim())}}),t}function Ao(e){let t="";if(pn(e))t=e;else if(qt(e))for(let i=0;i<e.length;i++){const c=Ao(e[i]);c&&(t+=c+" ")}else if(hn(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function Kx(e){if(!e)return null;let{class:t,style:i}=e;return t&&!pn(t)&&(e.class=Ao(t)),i&&(e.style=ns(i)),e}const ek="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tk=D_(ek);function Yx(e){return!!e||e===""}const Xx=e=>!!(e&&e.__v_isRef===!0),ar=e=>pn(e)?e:e==null?"":qt(e)||hn(e)&&(e.toString===Wx||!tr(e.toString))?Xx(e)?ar(e.value):JSON.stringify(e,Jx,2):String(e),Jx=(e,t)=>Xx(t)?Jx(e,t.value):jc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[c,p],g)=>(i[xg(c,g)+" =>"]=p,i),{})}:Zx(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>xg(i))}:Fs(t)?xg(t):hn(t)&&!qt(t)&&!Hx(t)?String(t):t,xg=(e,t="")=>{var i;return Fs(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ii;class Qx{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ii,!t&&Ii&&(this.index=(Ii.scopes||(Ii.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=Ii;try{return Ii=this,t()}finally{Ii=i}}}on(){Ii=this}off(){Ii=this.parent}stop(t){if(this._active){this._active=!1;let i,c;for(i=0,c=this.effects.length;i<c;i++)this.effects[i].stop();for(this.effects.length=0,i=0,c=this.cleanups.length;i<c;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,c=this.scopes.length;i<c;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const p=this.parent.scopes.pop();p&&p!==this&&(this.parent.scopes[this.index]=p,p.index=this.index)}this.parent=void 0}}}function B_(e){return new Qx(e)}function F_(){return Ii}function e1(e,t=!1){Ii&&Ii.cleanups.push(e)}let nn;const wg=new WeakSet;class t1{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ii&&Ii.active&&Ii.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wg.has(this)&&(wg.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||n1(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,hb(this),i1(this);const t=nn,i=Ro;nn=this,Ro=!0;try{return this.fn()}finally{o1(this),nn=t,Ro=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)V_(t);this.deps=this.depsTail=void 0,hb(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wg.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){qg(this)&&this.run()}get dirty(){return qg(this)}}let r1=0,Dd,Od;function n1(e,t=!1){if(e.flags|=8,t){e.next=Od,Od=e;return}e.next=Dd,Dd=e}function N_(){r1++}function j_(){if(--r1>0)return;if(Od){let t=Od;for(Od=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;Dd;){let t=Dd;for(Dd=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(c){e||(e=c)}t=i}}if(e)throw e}function i1(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function o1(e){let t,i=e.depsTail,c=i;for(;c;){const p=c.prevDep;c.version===-1?(c===i&&(i=p),V_(c),rk(c)):t=c,c.dep.activeLink=c.prevActiveLink,c.prevActiveLink=void 0,c=p}e.deps=t,e.depsTail=i}function qg(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(s1(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function s1(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ud))return;e.globalVersion=Ud;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!qg(e)){e.flags&=-3;return}const i=nn,c=Ro;nn=e,Ro=!0;try{i1(e);const p=e.fn(e._value);(t.version===0||xa(p,e._value))&&(e._value=p,t.version++)}catch(p){throw t.version++,p}finally{nn=i,Ro=c,o1(e),e.flags&=-3}}function V_(e,t=!1){const{dep:i,prevSub:c,nextSub:p}=e;if(c&&(c.nextSub=p,e.prevSub=void 0),p&&(p.prevSub=c,e.nextSub=void 0),i.subs===e&&(i.subs=c,!c&&i.computed)){i.computed.flags&=-5;for(let g=i.computed.deps;g;g=g.nextDep)V_(g,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function rk(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let Ro=!0;const a1=[];function Ta(){a1.push(Ro),Ro=!1}function Pa(){const e=a1.pop();Ro=e===void 0?!0:e}function hb(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=nn;nn=void 0;try{t()}finally{nn=i}}}let Ud=0;class nk{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class U_{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!nn||!Ro||nn===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==nn)i=this.activeLink=new nk(nn,this),nn.deps?(i.prevDep=nn.depsTail,nn.depsTail.nextDep=i,nn.depsTail=i):nn.deps=nn.depsTail=i,l1(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const c=i.nextDep;c.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=c),i.prevDep=nn.depsTail,i.nextDep=void 0,nn.depsTail.nextDep=i,nn.depsTail=i,nn.deps===i&&(nn.deps=c)}return i}trigger(t){this.version++,Ud++,this.notify(t)}notify(t){N_();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{j_()}}}function l1(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let c=t.deps;c;c=c.nextDep)l1(c)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const fp=new WeakMap,ml=Symbol(""),Kg=Symbol(""),Zd=Symbol("");function gi(e,t,i){if(Ro&&nn){let c=fp.get(e);c||fp.set(e,c=new Map);let p=c.get(i);p||(c.set(i,p=new U_),p.map=c,p.key=i),p.track()}}function Ls(e,t,i,c,p,g){const m=fp.get(e);if(!m){Ud++;return}const l=S=>{S&&S.trigger()};if(N_(),t==="clear")m.forEach(l);else{const S=qt(e),I=S&&$_(i);if(S&&i==="length"){const A=Number(c);m.forEach((O,z)=>{(z==="length"||z===Zd||!Fs(z)&&z>=A)&&l(O)})}else switch((i!==void 0||m.has(void 0))&&l(m.get(i)),I&&l(m.get(Zd)),t){case"add":S?I&&l(m.get("length")):(l(m.get(ml)),jc(e)&&l(m.get(Kg)));break;case"delete":S||(l(m.get(ml)),jc(e)&&l(m.get(Kg)));break;case"set":jc(e)&&l(m.get(ml));break}}j_()}function ik(e,t){const i=fp.get(e);return i&&i.get(t)}function Ec(e){const t=Cr(e);return t===e?t:(gi(t,"iterate",Zd),yo(e)?t:t.map(_i))}function Np(e){return gi(e=Cr(e),"iterate",Zd),e}const ok={__proto__:null,[Symbol.iterator](){return Cg(this,Symbol.iterator,_i)},concat(...e){return Ec(this).concat(...e.map(t=>qt(t)?Ec(t):t))},entries(){return Cg(this,"entries",e=>(e[1]=_i(e[1]),e))},every(e,t){return Ts(this,"every",e,t,void 0,arguments)},filter(e,t){return Ts(this,"filter",e,t,i=>i.map(_i),arguments)},find(e,t){return Ts(this,"find",e,t,_i,arguments)},findIndex(e,t){return Ts(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ts(this,"findLast",e,t,_i,arguments)},findLastIndex(e,t){return Ts(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ts(this,"forEach",e,t,void 0,arguments)},includes(...e){return Sg(this,"includes",e)},indexOf(...e){return Sg(this,"indexOf",e)},join(e){return Ec(this).join(e)},lastIndexOf(...e){return Sg(this,"lastIndexOf",e)},map(e,t){return Ts(this,"map",e,t,void 0,arguments)},pop(){return vd(this,"pop")},push(...e){return vd(this,"push",e)},reduce(e,...t){return fb(this,"reduce",e,t)},reduceRight(e,...t){return fb(this,"reduceRight",e,t)},shift(){return vd(this,"shift")},some(e,t){return Ts(this,"some",e,t,void 0,arguments)},splice(...e){return vd(this,"splice",e)},toReversed(){return Ec(this).toReversed()},toSorted(e){return Ec(this).toSorted(e)},toSpliced(...e){return Ec(this).toSpliced(...e)},unshift(...e){return vd(this,"unshift",e)},values(){return Cg(this,"values",_i)}};function Cg(e,t,i){const c=Np(e),p=c[t]();return c!==e&&!yo(e)&&(p._next=p.next,p.next=()=>{const g=p._next();return g.value&&(g.value=i(g.value)),g}),p}const sk=Array.prototype;function Ts(e,t,i,c,p,g){const m=Np(e),l=m!==e&&!yo(e),S=m[t];if(S!==sk[t]){const O=S.apply(e,g);return l?_i(O):O}let I=i;m!==e&&(l?I=function(O,z){return i.call(this,_i(O),z,e)}:i.length>2&&(I=function(O,z){return i.call(this,O,z,e)}));const A=S.call(m,I,c);return l&&p?p(A):A}function fb(e,t,i,c){const p=Np(e);let g=i;return p!==e&&(yo(e)?i.length>3&&(g=function(m,l,S){return i.call(this,m,l,S,e)}):g=function(m,l,S){return i.call(this,m,_i(l),S,e)}),p[t](g,...c)}function Sg(e,t,i){const c=Cr(e);gi(c,"iterate",Zd);const p=c[t](...i);return(p===-1||p===!1)&&H_(i[0])?(i[0]=Cr(i[0]),c[t](...i)):p}function vd(e,t,i=[]){Ta(),N_();const c=Cr(e)[t].apply(e,i);return j_(),Pa(),c}const ak=D_("__proto__,__v_isRef,__isVue"),c1=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Fs));function lk(e){Fs(e)||(e=String(e));const t=Cr(this);return gi(t,"has",e),t.hasOwnProperty(e)}class u1{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,c){if(i==="__v_skip")return t.__v_skip;const p=this._isReadonly,g=this._isShallow;if(i==="__v_isReactive")return!p;if(i==="__v_isReadonly")return p;if(i==="__v_isShallow")return g;if(i==="__v_raw")return c===(p?g?yk:p1:g?f1:h1).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(c)?t:void 0;const m=qt(t);if(!p){let S;if(m&&(S=ok[i]))return S;if(i==="hasOwnProperty")return lk}const l=Reflect.get(t,i,wn(t)?t:c);return(Fs(i)?c1.has(i):ak(i))||(p||gi(t,"get",i),g)?l:wn(l)?m&&$_(i)?l:l.value:hn(l)?p?G_(l):Xc(l):l}}class d1 extends u1{constructor(t=!1){super(!1,t)}set(t,i,c,p){let g=t[i];if(!this._isShallow){const S=vl(g);if(!yo(c)&&!vl(c)&&(g=Cr(g),c=Cr(c)),!qt(t)&&wn(g)&&!wn(c))return S?!1:(g.value=c,!0)}const m=qt(t)&&$_(i)?Number(i)<t.length:$r(t,i),l=Reflect.set(t,i,c,wn(t)?t:p);return t===Cr(p)&&(m?xa(c,g)&&Ls(t,"set",i,c):Ls(t,"add",i,c)),l}deleteProperty(t,i){const c=$r(t,i);t[i];const p=Reflect.deleteProperty(t,i);return p&&c&&Ls(t,"delete",i,void 0),p}has(t,i){const c=Reflect.has(t,i);return(!Fs(i)||!c1.has(i))&&gi(t,"has",i),c}ownKeys(t){return gi(t,"iterate",qt(t)?"length":ml),Reflect.ownKeys(t)}}class ck extends u1{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const uk=new d1,dk=new ck,hk=new d1(!0);const Yg=e=>e,Uf=e=>Reflect.getPrototypeOf(e);function fk(e,t,i){return function(...c){const p=this.__v_raw,g=Cr(p),m=jc(g),l=e==="entries"||e===Symbol.iterator&&m,S=e==="keys"&&m,I=p[e](...c),A=i?Yg:t?Xg:_i;return!t&&gi(g,"iterate",S?Kg:ml),{next(){const{value:O,done:z}=I.next();return z?{value:O,done:z}:{value:l?[A(O[0]),A(O[1])]:A(O),done:z}},[Symbol.iterator](){return this}}}}function Zf(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function pk(e,t){const i={get(p){const g=this.__v_raw,m=Cr(g),l=Cr(p);e||(xa(p,l)&&gi(m,"get",p),gi(m,"get",l));const{has:S}=Uf(m),I=t?Yg:e?Xg:_i;if(S.call(m,p))return I(g.get(p));if(S.call(m,l))return I(g.get(l));g!==m&&g.get(p)},get size(){const p=this.__v_raw;return!e&&gi(Cr(p),"iterate",ml),Reflect.get(p,"size",p)},has(p){const g=this.__v_raw,m=Cr(g),l=Cr(p);return e||(xa(p,l)&&gi(m,"has",p),gi(m,"has",l)),p===l?g.has(p):g.has(p)||g.has(l)},forEach(p,g){const m=this,l=m.__v_raw,S=Cr(l),I=t?Yg:e?Xg:_i;return!e&&gi(S,"iterate",ml),l.forEach((A,O)=>p.call(g,I(A),I(O),m))}};return ri(i,e?{add:Zf("add"),set:Zf("set"),delete:Zf("delete"),clear:Zf("clear")}:{add(p){!t&&!yo(p)&&!vl(p)&&(p=Cr(p));const g=Cr(this);return Uf(g).has.call(g,p)||(g.add(p),Ls(g,"add",p,p)),this},set(p,g){!t&&!yo(g)&&!vl(g)&&(g=Cr(g));const m=Cr(this),{has:l,get:S}=Uf(m);let I=l.call(m,p);I||(p=Cr(p),I=l.call(m,p));const A=S.call(m,p);return m.set(p,g),I?xa(g,A)&&Ls(m,"set",p,g):Ls(m,"add",p,g),this},delete(p){const g=Cr(this),{has:m,get:l}=Uf(g);let S=m.call(g,p);S||(p=Cr(p),S=m.call(g,p)),l&&l.call(g,p);const I=g.delete(p);return S&&Ls(g,"delete",p,void 0),I},clear(){const p=Cr(this),g=p.size!==0,m=p.clear();return g&&Ls(p,"clear",void 0,void 0),m}}),["keys","values","entries",Symbol.iterator].forEach(p=>{i[p]=fk(p,e,t)}),i}function Z_(e,t){const i=pk(e,t);return(c,p,g)=>p==="__v_isReactive"?!e:p==="__v_isReadonly"?e:p==="__v_raw"?c:Reflect.get($r(i,p)&&p in c?i:c,p,g)}const mk={get:Z_(!1,!1)},gk={get:Z_(!1,!0)},_k={get:Z_(!0,!1)};const h1=new WeakMap,f1=new WeakMap,p1=new WeakMap,yk=new WeakMap;function bk(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vk(e){return e.__v_skip||!Object.isExtensible(e)?0:bk(GS(e))}function Xc(e){return vl(e)?e:W_(e,!1,uk,mk,h1)}function xk(e){return W_(e,!1,hk,gk,f1)}function G_(e){return W_(e,!0,dk,_k,p1)}function W_(e,t,i,c,p){if(!hn(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const g=p.get(e);if(g)return g;const m=vk(e);if(m===0)return e;const l=new Proxy(e,m===2?c:i);return p.set(e,l),l}function wa(e){return vl(e)?wa(e.__v_raw):!!(e&&e.__v_isReactive)}function vl(e){return!!(e&&e.__v_isReadonly)}function yo(e){return!!(e&&e.__v_isShallow)}function H_(e){return e?!!e.__v_raw:!1}function Cr(e){const t=e&&e.__v_raw;return t?Cr(t):e}function q_(e){return!$r(e,"__v_skip")&&Object.isExtensible(e)&&qx(e,"__v_skip",!0),e}const _i=e=>hn(e)?Xc(e):e,Xg=e=>hn(e)?G_(e):e;function wn(e){return e?e.__v_isRef===!0:!1}function on(e){return m1(e,!1)}function Ca(e){return m1(e,!0)}function m1(e,t){return wn(e)?e:new wk(e,t)}class wk{constructor(t,i){this.dep=new U_,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:Cr(t),this._value=i?t:_i(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,c=this.__v_isShallow||yo(t)||vl(t);t=c?t:Cr(t),xa(t,i)&&(this._rawValue=t,this._value=c?t:_i(t),this.dep.trigger())}}function Br(e){return wn(e)?e.value:e}function Sa(e){return tr(e)?e():Br(e)}const Ck={get:(e,t,i)=>t==="__v_raw"?e:Br(Reflect.get(e,t,i)),set:(e,t,i,c)=>{const p=e[t];return wn(p)&&!wn(i)?(p.value=i,!0):Reflect.set(e,t,i,c)}};function g1(e){return wa(e)?e:new Proxy(e,Ck)}function Sk(e){const t=qt(e)?new Array(e.length):{};for(const i in e)t[i]=Tk(e,i);return t}class kk{constructor(t,i,c){this._object=t,this._key=i,this._defaultValue=c,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return ik(Cr(this._object),this._key)}}function Tk(e,t,i){const c=e[t];return wn(c)?c:new kk(e,t,i)}class Pk{constructor(t,i,c){this.fn=t,this.setter=i,this._value=void 0,this.dep=new U_(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ud-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=c}notify(){if(this.flags|=16,!(this.flags&8)&&nn!==this)return n1(this,!0),!0}get value(){const t=this.dep.track();return s1(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ik(e,t,i=!1){let c,p;return tr(e)?c=e:(c=e.get,p=e.set),new Pk(c,p,i)}const Gf={},pp=new WeakMap;let ll;function Mk(e,t=!1,i=ll){if(i){let c=pp.get(i);c||pp.set(i,c=[]),c.push(e)}}function Ek(e,t,i=en){const{immediate:c,deep:p,once:g,scheduler:m,augmentJob:l,call:S}=i,I=X=>p?X:yo(X)||p===!1||p===0?Rs(X,1):Rs(X);let A,O,z,D,H=!1,ue=!1;if(wn(e)?(O=()=>e.value,H=yo(e)):wa(e)?(O=()=>I(e),H=!0):qt(e)?(ue=!0,H=e.some(X=>wa(X)||yo(X)),O=()=>e.map(X=>{if(wn(X))return X.value;if(wa(X))return I(X);if(tr(X))return S?S(X,2):X()})):tr(e)?t?O=S?()=>S(e,2):e:O=()=>{if(z){Ta();try{z()}finally{Pa()}}const X=ll;ll=A;try{return S?S(e,3,[D]):e(D)}finally{ll=X}}:O=ts,t&&p){const X=O,we=p===!0?1/0:p;O=()=>Rs(X(),we)}const ye=F_(),ne=()=>{A.stop(),ye&&ye.active&&z_(ye.effects,A)};if(g&&t){const X=t;t=(...we)=>{X(...we),ne()}}let xe=ue?new Array(e.length).fill(Gf):Gf;const Ce=X=>{if(!(!(A.flags&1)||!A.dirty&&!X))if(t){const we=A.run();if(p||H||(ue?we.some((Oe,ke)=>xa(Oe,xe[ke])):xa(we,xe))){z&&z();const Oe=ll;ll=A;try{const ke=[we,xe===Gf?void 0:ue&&xe[0]===Gf?[]:xe,D];S?S(t,3,ke):t(...ke),xe=we}finally{ll=Oe}}}else A.run()};return l&&l(Ce),A=new t1(O),A.scheduler=m?()=>m(Ce,!1):Ce,D=X=>Mk(X,!1,A),z=A.onStop=()=>{const X=pp.get(A);if(X){if(S)S(X,4);else for(const we of X)we();pp.delete(A)}},t?c?Ce(!0):xe=A.run():m?m(Ce.bind(null,!0),!0):A.run(),ne.pause=A.pause.bind(A),ne.resume=A.resume.bind(A),ne.stop=ne,ne}function Rs(e,t=1/0,i){if(t<=0||!hn(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,wn(e))Rs(e.value,t,i);else if(qt(e))for(let c=0;c<e.length;c++)Rs(e[c],t,i);else if(Zx(e)||jc(e))e.forEach(c=>{Rs(c,t,i)});else if(Hx(e)){for(const c in e)Rs(e[c],t,i);for(const c of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,c)&&Rs(e[c],t,i)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xh(e,t,i,c){try{return c?e(...c):e()}catch(p){jp(p,t,i)}}function Do(e,t,i,c){if(tr(e)){const p=xh(e,t,i,c);return p&&Gx(p)&&p.catch(g=>{jp(g,t,i)}),p}if(qt(e)){const p=[];for(let g=0;g<e.length;g++)p.push(Do(e[g],t,i,c));return p}}function jp(e,t,i,c=!0){const p=t?t.vnode:null,{errorHandler:g,throwUnhandledErrorInProduction:m}=t&&t.appContext.config||en;if(t){let l=t.parent;const S=t.proxy,I=`https://vuejs.org/error-reference/#runtime-${i}`;for(;l;){const A=l.ec;if(A){for(let O=0;O<A.length;O++)if(A[O](e,S,I)===!1)return}l=l.parent}if(g){Ta(),xh(g,null,10,[e,S,I]),Pa();return}}Ak(e,i,p,c,m)}function Ak(e,t,i,c=!0,p=!1){if(p)throw e;console.error(e)}const Mi=[];let Xo=-1;const Vc=[];let ga=null,Rc=0;const _1=Promise.resolve();let mp=null;function wh(e){const t=mp||_1;return e?t.then(this?e.bind(this):e):t}function Lk(e){let t=Xo+1,i=Mi.length;for(;t<i;){const c=t+i>>>1,p=Mi[c],g=Gd(p);g<e||g===e&&p.flags&2?t=c+1:i=c}return t}function K_(e){if(!(e.flags&1)){const t=Gd(e),i=Mi[Mi.length-1];!i||!(e.flags&2)&&t>=Gd(i)?Mi.push(e):Mi.splice(Lk(t),0,e),e.flags|=1,y1()}}function y1(){mp||(mp=_1.then(v1))}function Rk(e){qt(e)?Vc.push(...e):ga&&e.id===-1?ga.splice(Rc+1,0,e):e.flags&1||(Vc.push(e),e.flags|=1),y1()}function pb(e,t,i=Xo+1){for(;i<Mi.length;i++){const c=Mi[i];if(c&&c.flags&2){if(e&&c.id!==e.uid)continue;Mi.splice(i,1),i--,c.flags&4&&(c.flags&=-2),c(),c.flags&4||(c.flags&=-2)}}}function b1(e){if(Vc.length){const t=[...new Set(Vc)].sort((i,c)=>Gd(i)-Gd(c));if(Vc.length=0,ga){ga.push(...t);return}for(ga=t,Rc=0;Rc<ga.length;Rc++){const i=ga[Rc];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}ga=null,Rc=0}}const Gd=e=>e.id==null?e.flags&2?-1:1/0:e.id;function v1(e){try{for(Xo=0;Xo<Mi.length;Xo++){const t=Mi[Xo];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),xh(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Xo<Mi.length;Xo++){const t=Mi[Xo];t&&(t.flags&=-2)}Xo=-1,Mi.length=0,b1(),mp=null,(Mi.length||Vc.length)&&v1()}}let qn=null,x1=null;function gp(e){const t=qn;return qn=e,x1=e&&e.type.__scopeId||null,t}function Jo(e,t=qn,i){if(!t||e._n)return e;const c=(...p)=>{c._d&&Ib(-1);const g=gp(t);let m;try{m=e(...p)}finally{gp(g),c._d&&Ib(1)}return m};return c._n=!0,c._c=!0,c._d=!0,c}function w1(e,t){if(qn===null)return e;const i=Wp(qn),c=e.dirs||(e.dirs=[]);for(let p=0;p<t.length;p++){let[g,m,l,S=en]=t[p];g&&(tr(g)&&(g={mounted:g,updated:g}),g.deep&&Rs(m),c.push({dir:g,instance:i,value:m,oldValue:void 0,arg:l,modifiers:S}))}return e}function il(e,t,i,c){const p=e.dirs,g=t&&t.dirs;for(let m=0;m<p.length;m++){const l=p[m];g&&(l.oldValue=g[m].value);let S=l.dir[c];S&&(Ta(),Do(S,i,8,[e.el,l,e,t]),Pa())}}const C1=Symbol("_vte"),S1=e=>e.__isTeleport,zd=e=>e&&(e.disabled||e.disabled===""),mb=e=>e&&(e.defer||e.defer===""),gb=e=>typeof SVGElement<"u"&&e instanceof SVGElement,_b=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Jg=(e,t)=>{const i=e&&e.to;return pn(i)?t?t(i):null:i},k1={name:"Teleport",__isTeleport:!0,process(e,t,i,c,p,g,m,l,S,I){const{mc:A,pc:O,pbc:z,o:{insert:D,querySelector:H,createText:ue,createComment:ye}}=I,ne=zd(t.props);let{shapeFlag:xe,children:Ce,dynamicChildren:X}=t;if(e==null){const we=t.el=ue(""),Oe=t.anchor=ue("");D(we,i,c),D(Oe,i,c);const ke=(We,ft)=>{xe&16&&(p&&p.isCE&&(p.ce._teleportTarget=We),A(Ce,We,ft,p,g,m,l,S))},Ve=()=>{const We=t.target=Jg(t.props,H),ft=T1(We,t,ue,D);We&&(m!=="svg"&&gb(We)?m="svg":m!=="mathml"&&_b(We)&&(m="mathml"),ne||(ke(We,ft),op(t,!1)))};ne&&(ke(i,Oe),op(t,!0)),mb(t.props)?Pi(()=>{Ve(),t.el.__isMounted=!0},g):Ve()}else{if(mb(t.props)&&!e.el.__isMounted){Pi(()=>{k1.process(e,t,i,c,p,g,m,l,S,I),delete e.el.__isMounted},g);return}t.el=e.el,t.targetStart=e.targetStart;const we=t.anchor=e.anchor,Oe=t.target=e.target,ke=t.targetAnchor=e.targetAnchor,Ve=zd(e.props),We=Ve?i:Oe,ft=Ve?we:ke;if(m==="svg"||gb(Oe)?m="svg":(m==="mathml"||_b(Oe))&&(m="mathml"),X?(z(e.dynamicChildren,X,We,p,g,m,l),ry(e,t,!0)):S||O(e,t,We,ft,p,g,m,l,!1),ne)Ve?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Wf(t,i,we,I,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const Qe=t.target=Jg(t.props,H);Qe&&Wf(t,Qe,null,I,0)}else Ve&&Wf(t,Oe,ke,I,1);op(t,ne)}},remove(e,t,i,{um:c,o:{remove:p}},g){const{shapeFlag:m,children:l,anchor:S,targetStart:I,targetAnchor:A,target:O,props:z}=e;if(O&&(p(I),p(A)),g&&p(S),m&16){const D=g||!zd(z);for(let H=0;H<l.length;H++){const ue=l[H];c(ue,t,i,D,!!ue.dynamicChildren)}}},move:Wf,hydrate:Dk};function Wf(e,t,i,{o:{insert:c},m:p},g=2){g===0&&c(e.targetAnchor,t,i);const{el:m,anchor:l,shapeFlag:S,children:I,props:A}=e,O=g===2;if(O&&c(m,t,i),(!O||zd(A))&&S&16)for(let z=0;z<I.length;z++)p(I[z],t,i,2);O&&c(l,t,i)}function Dk(e,t,i,c,p,g,{o:{nextSibling:m,parentNode:l,querySelector:S,insert:I,createText:A}},O){const z=t.target=Jg(t.props,S);if(z){const D=zd(t.props),H=z._lpa||z.firstChild;if(t.shapeFlag&16)if(D)t.anchor=O(m(e),t,l(e),i,c,p,g),t.targetStart=H,t.targetAnchor=H&&m(H);else{t.anchor=m(e);let ue=H;for(;ue;){if(ue&&ue.nodeType===8){if(ue.data==="teleport start anchor")t.targetStart=ue;else if(ue.data==="teleport anchor"){t.targetAnchor=ue,z._lpa=t.targetAnchor&&m(t.targetAnchor);break}}ue=m(ue)}t.targetAnchor||T1(z,t,A,I),O(H&&m(H),t,z,i,c,p,g)}op(t,D)}return t.anchor&&m(t.anchor)}const Y_=k1;function op(e,t){const i=e.ctx;if(i&&i.ut){let c,p;for(t?(c=e.el,p=e.anchor):(c=e.targetStart,p=e.targetAnchor);c&&c!==p;)c.nodeType===1&&c.setAttribute("data-v-owner",i.uid),c=c.nextSibling;i.ut()}}function T1(e,t,i,c){const p=t.targetStart=i(""),g=t.targetAnchor=i("");return p[C1]=g,e&&(c(p,e),c(g,e)),g}const _a=Symbol("_leaveCb"),Hf=Symbol("_enterCb");function Ok(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ia(()=>{e.isMounted=!0}),D1(()=>{e.isUnmounting=!0}),e}const po=[Function,Array],P1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:po,onEnter:po,onAfterEnter:po,onEnterCancelled:po,onBeforeLeave:po,onLeave:po,onAfterLeave:po,onLeaveCancelled:po,onBeforeAppear:po,onAppear:po,onAfterAppear:po,onAppearCancelled:po},I1=e=>{const t=e.subTree;return t.component?I1(t.component):t},zk={name:"BaseTransition",props:P1,setup(e,{slots:t}){const i=zo(),c=Ok();return()=>{const p=t.default&&A1(t.default(),!0);if(!p||!p.length)return;const g=M1(p),m=Cr(e),{mode:l}=m;if(c.isLeaving)return kg(g);const S=yb(g);if(!S)return kg(g);let I=Qg(S,m,c,i,O=>I=O);S.type!==Ei&&Wd(S,I);let A=i.subTree&&yb(i.subTree);if(A&&A.type!==Ei&&!ul(S,A)&&I1(i).type!==Ei){let O=Qg(A,m,c,i);if(Wd(A,O),l==="out-in"&&S.type!==Ei)return c.isLeaving=!0,O.afterLeave=()=>{c.isLeaving=!1,i.job.flags&8||i.update(),delete O.afterLeave,A=void 0},kg(g);l==="in-out"&&S.type!==Ei?O.delayLeave=(z,D,H)=>{const ue=E1(c,A);ue[String(A.key)]=A,z[_a]=()=>{D(),z[_a]=void 0,delete I.delayedLeave,A=void 0},I.delayedLeave=()=>{H(),delete I.delayedLeave,A=void 0}}:A=void 0}else A&&(A=void 0);return g}}};function M1(e){let t=e[0];if(e.length>1){for(const i of e)if(i.type!==Ei){t=i;break}}return t}const $k=zk;function E1(e,t){const{leavingVNodes:i}=e;let c=i.get(t.type);return c||(c=Object.create(null),i.set(t.type,c)),c}function Qg(e,t,i,c,p){const{appear:g,mode:m,persisted:l=!1,onBeforeEnter:S,onEnter:I,onAfterEnter:A,onEnterCancelled:O,onBeforeLeave:z,onLeave:D,onAfterLeave:H,onLeaveCancelled:ue,onBeforeAppear:ye,onAppear:ne,onAfterAppear:xe,onAppearCancelled:Ce}=t,X=String(e.key),we=E1(i,e),Oe=(We,ft)=>{We&&Do(We,c,9,ft)},ke=(We,ft)=>{const Qe=ft[1];Oe(We,ft),qt(We)?We.every(Ye=>Ye.length<=1)&&Qe():We.length<=1&&Qe()},Ve={mode:m,persisted:l,beforeEnter(We){let ft=S;if(!i.isMounted)if(g)ft=ye||S;else return;We[_a]&&We[_a](!0);const Qe=we[X];Qe&&ul(e,Qe)&&Qe.el[_a]&&Qe.el[_a](),Oe(ft,[We])},enter(We){let ft=I,Qe=A,Ye=O;if(!i.isMounted)if(g)ft=ne||I,Qe=xe||A,Ye=Ce||O;else return;let Xe=!1;const wt=We[Hf]=Kt=>{Xe||(Xe=!0,Kt?Oe(Ye,[We]):Oe(Qe,[We]),Ve.delayedLeave&&Ve.delayedLeave(),We[Hf]=void 0)};ft?ke(ft,[We,wt]):wt()},leave(We,ft){const Qe=String(e.key);if(We[Hf]&&We[Hf](!0),i.isUnmounting)return ft();Oe(z,[We]);let Ye=!1;const Xe=We[_a]=wt=>{Ye||(Ye=!0,ft(),wt?Oe(ue,[We]):Oe(H,[We]),We[_a]=void 0,we[Qe]===e&&delete we[Qe])};we[Qe]=e,D?ke(D,[We,Xe]):Xe()},clone(We){const ft=Qg(We,t,i,c,p);return p&&p(ft),ft}};return Ve}function kg(e){if(Vp(e))return e=ka(e),e.children=null,e}function yb(e){if(!Vp(e))return S1(e.type)&&e.children?M1(e.children):e;const{shapeFlag:t,children:i}=e;if(i){if(t&16)return i[0];if(t&32&&tr(i.default))return i.default()}}function Wd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Wd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function A1(e,t=!1,i){let c=[],p=0;for(let g=0;g<e.length;g++){let m=e[g];const l=i==null?m.key:String(i)+String(m.key!=null?m.key:g);m.type===Ar?(m.patchFlag&128&&p++,c=c.concat(A1(m.children,t,l))):(t||m.type!==Ei)&&c.push(l!=null?ka(m,{key:l}):m)}if(p>1)for(let g=0;g<c.length;g++)c[g].patchFlag=-2;return c}/*! #__NO_SIDE_EFFECTS__ */function X_(e,t){return tr(e)?ri({name:e.name},t,{setup:e}):e}function Bk(){const e=zo();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function L1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function _p(e,t,i,c,p=!1){if(qt(e)){e.forEach((H,ue)=>_p(H,t&&(qt(t)?t[ue]:t),i,c,p));return}if(Uc(c)&&!p){c.shapeFlag&512&&c.type.__asyncResolved&&c.component.subTree.component&&_p(e,t,i,c.component.subTree);return}const g=c.shapeFlag&4?Wp(c.component):c.el,m=p?null:g,{i:l,r:S}=e,I=t&&t.r,A=l.refs===en?l.refs={}:l.refs,O=l.setupState,z=Cr(O),D=O===en?()=>!1:H=>$r(z,H);if(I!=null&&I!==S&&(pn(I)?(A[I]=null,D(I)&&(O[I]=null)):wn(I)&&(I.value=null)),tr(S))xh(S,l,12,[m,A]);else{const H=pn(S),ue=wn(S);if(H||ue){const ye=()=>{if(e.f){const ne=H?D(S)?O[S]:A[S]:S.value;p?qt(ne)&&z_(ne,g):qt(ne)?ne.includes(g)||ne.push(g):H?(A[S]=[g],D(S)&&(O[S]=A[S])):(S.value=[g],e.k&&(A[e.k]=S.value))}else H?(A[S]=m,D(S)&&(O[S]=m)):ue&&(S.value=m,e.k&&(A[e.k]=m))};m?(ye.id=-1,Pi(ye,i)):ye()}}}Fp().requestIdleCallback;Fp().cancelIdleCallback;const Uc=e=>!!e.type.__asyncLoader,Vp=e=>e.type.__isKeepAlive;function Fk(e,t){R1(e,"a",t)}function Nk(e,t){R1(e,"da",t)}function R1(e,t,i=ti){const c=e.__wdc||(e.__wdc=()=>{let p=i;for(;p;){if(p.isDeactivated)return;p=p.parent}return e()});if(Up(t,c,i),i){let p=i.parent;for(;p&&p.parent;)Vp(p.parent.vnode)&&jk(c,t,i,p),p=p.parent}}function jk(e,t,i,c){const p=Up(t,e,c,!0);Zp(()=>{z_(c[t],p)},i)}function Up(e,t,i=ti,c=!1){if(i){const p=i[e]||(i[e]=[]),g=t.__weh||(t.__weh=(...m)=>{Ta();const l=Sh(i),S=Do(t,i,e,m);return l(),Pa(),S});return c?p.unshift(g):p.push(g),g}}const Ns=e=>(t,i=ti)=>{(!Kd||e==="sp")&&Up(e,(...c)=>t(...c),i)},Vk=Ns("bm"),Ia=Ns("m"),Uk=Ns("bu"),Zk=Ns("u"),D1=Ns("bum"),Zp=Ns("um"),Gk=Ns("sp"),Wk=Ns("rtg"),Hk=Ns("rtc");function qk(e,t=ti){Up("ec",e,t)}const J_="components",Kk="directives";function no(e,t){return Q_(J_,e,!0,t)||e}const O1=Symbol.for("v-ndc");function e_(e){return pn(e)?Q_(J_,e,!1)||e:e||O1}function z1(e){return Q_(Kk,e)}function Q_(e,t,i=!0,c=!1){const p=qn||ti;if(p){const g=p.type;if(e===J_){const l=zT(g,!1);if(l&&(l===t||l===bo(t)||l===Bp(bo(t))))return g}const m=bb(p[e]||g[e],t)||bb(p.appContext[e],t);return!m&&c?g:m}}function bb(e,t){return e&&(e[t]||e[bo(t)]||e[Bp(bo(t))])}function Oo(e,t,i,c){let p;const g=i,m=qt(e);if(m||pn(e)){const l=m&&wa(e);let S=!1;l&&(S=!yo(e),e=Np(e)),p=new Array(e.length);for(let I=0,A=e.length;I<A;I++)p[I]=t(S?_i(e[I]):e[I],I,void 0,g)}else if(typeof e=="number"){p=new Array(e);for(let l=0;l<e;l++)p[l]=t(l+1,l,void 0,g)}else if(hn(e))if(e[Symbol.iterator])p=Array.from(e,(l,S)=>t(l,S,void 0,g));else{const l=Object.keys(e);p=new Array(l.length);for(let S=0,I=l.length;S<I;S++){const A=l[S];p[S]=t(e[A],A,S,g)}}else p=[];return p}function Yk(e,t){for(let i=0;i<t.length;i++){const c=t[i];if(qt(c))for(let p=0;p<c.length;p++)e[c[p].name]=c[p].fn;else c&&(e[c.name]=c.key?(...p)=>{const g=c.fn(...p);return g&&(g.key=c.key),g}:c.fn)}return e}function un(e,t,i={},c,p){if(qn.ce||qn.parent&&Uc(qn.parent)&&qn.parent.ce)return t!=="default"&&(i.name=t),_t(),Hn(Ar,null,[br("slot",i,c&&c())],64);let g=e[t];g&&g._c&&(g._d=!1),_t();const m=g&&$1(g(i)),l=i.key||m&&m.key,S=Hn(Ar,{key:(l&&!Fs(l)?l:`_${t}`)+(!m&&c?"_fb":"")},m||(c?c():[]),m&&e._===1?64:-2);return S.scopeId&&(S.slotScopeIds=[S.scopeId+"-s"]),g&&g._c&&(g._d=!0),S}function $1(e){return e.some(t=>qd(t)?!(t.type===Ei||t.type===Ar&&!$1(t.children)):!0)?e:null}const t_=e=>e?nw(e)?Wp(e):t_(e.parent):null,$d=ri(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>t_(e.parent),$root:e=>t_(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>F1(e),$forceUpdate:e=>e.f||(e.f=()=>{K_(e.update)}),$nextTick:e=>e.n||(e.n=wh.bind(e.proxy)),$watch:e=>bT.bind(e)}),Tg=(e,t)=>e!==en&&!e.__isScriptSetup&&$r(e,t),Xk={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:c,data:p,props:g,accessCache:m,type:l,appContext:S}=e;let I;if(t[0]!=="$"){const D=m[t];if(D!==void 0)switch(D){case 1:return c[t];case 2:return p[t];case 4:return i[t];case 3:return g[t]}else{if(Tg(c,t))return m[t]=1,c[t];if(p!==en&&$r(p,t))return m[t]=2,p[t];if((I=e.propsOptions[0])&&$r(I,t))return m[t]=3,g[t];if(i!==en&&$r(i,t))return m[t]=4,i[t];r_&&(m[t]=0)}}const A=$d[t];let O,z;if(A)return t==="$attrs"&&gi(e.attrs,"get",""),A(e);if((O=l.__cssModules)&&(O=O[t]))return O;if(i!==en&&$r(i,t))return m[t]=4,i[t];if(z=S.config.globalProperties,$r(z,t))return z[t]},set({_:e},t,i){const{data:c,setupState:p,ctx:g}=e;return Tg(p,t)?(p[t]=i,!0):c!==en&&$r(c,t)?(c[t]=i,!0):$r(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(g[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:c,appContext:p,propsOptions:g}},m){let l;return!!i[m]||e!==en&&$r(e,m)||Tg(t,m)||(l=g[0])&&$r(l,m)||$r(c,m)||$r($d,m)||$r(p.config.globalProperties,m)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:$r(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function vb(e){return qt(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let r_=!0;function Jk(e){const t=F1(e),i=e.proxy,c=e.ctx;r_=!1,t.beforeCreate&&xb(t.beforeCreate,e,"bc");const{data:p,computed:g,methods:m,watch:l,provide:S,inject:I,created:A,beforeMount:O,mounted:z,beforeUpdate:D,updated:H,activated:ue,deactivated:ye,beforeDestroy:ne,beforeUnmount:xe,destroyed:Ce,unmounted:X,render:we,renderTracked:Oe,renderTriggered:ke,errorCaptured:Ve,serverPrefetch:We,expose:ft,inheritAttrs:Qe,components:Ye,directives:Xe,filters:wt}=t;if(I&&Qk(I,c,null),m)for(const At in m){const Ut=m[At];tr(Ut)&&(c[At]=Ut.bind(i))}if(p){const At=p.call(i,i);hn(At)&&(e.data=Xc(At))}if(r_=!0,g)for(const At in g){const Ut=g[At],et=tr(Ut)?Ut.bind(i,i):tr(Ut.get)?Ut.get.bind(i,i):ts,mt=!tr(Ut)&&tr(Ut.set)?Ut.set.bind(i):ts,nt=Xt({get:et,set:mt});Object.defineProperty(c,At,{enumerable:!0,configurable:!0,get:()=>nt.value,set:bt=>nt.value=bt})}if(l)for(const At in l)B1(l[At],c,i,At);if(S){const At=tr(S)?S.call(i):S;Reflect.ownKeys(At).forEach(Ut=>{oT(Ut,At[Ut])})}A&&xb(A,e,"c");function vt(At,Ut){qt(Ut)?Ut.forEach(et=>At(et.bind(i))):Ut&&At(Ut.bind(i))}if(vt(Vk,O),vt(Ia,z),vt(Uk,D),vt(Zk,H),vt(Fk,ue),vt(Nk,ye),vt(qk,Ve),vt(Hk,Oe),vt(Wk,ke),vt(D1,xe),vt(Zp,X),vt(Gk,We),qt(ft))if(ft.length){const At=e.exposed||(e.exposed={});ft.forEach(Ut=>{Object.defineProperty(At,Ut,{get:()=>i[Ut],set:et=>i[Ut]=et})})}else e.exposed||(e.exposed={});we&&e.render===ts&&(e.render=we),Qe!=null&&(e.inheritAttrs=Qe),Ye&&(e.components=Ye),Xe&&(e.directives=Xe),We&&L1(e)}function Qk(e,t,i=ts){qt(e)&&(e=n_(e));for(const c in e){const p=e[c];let g;hn(p)?"default"in p?g=_l(p.from||c,p.default,!0):g=_l(p.from||c):g=_l(p),wn(g)?Object.defineProperty(t,c,{enumerable:!0,configurable:!0,get:()=>g.value,set:m=>g.value=m}):t[c]=g}}function xb(e,t,i){Do(qt(e)?e.map(c=>c.bind(t.proxy)):e.bind(t.proxy),t,i)}function B1(e,t,i,c){let p=c.includes(".")?X1(i,c):()=>i[c];if(pn(e)){const g=t[e];tr(g)&&Kn(p,g)}else if(tr(e))Kn(p,e.bind(i));else if(hn(e))if(qt(e))e.forEach(g=>B1(g,t,i,c));else{const g=tr(e.handler)?e.handler.bind(i):t[e.handler];tr(g)&&Kn(p,g,e)}}function F1(e){const t=e.type,{mixins:i,extends:c}=t,{mixins:p,optionsCache:g,config:{optionMergeStrategies:m}}=e.appContext,l=g.get(t);let S;return l?S=l:!p.length&&!i&&!c?S=t:(S={},p.length&&p.forEach(I=>yp(S,I,m,!0)),yp(S,t,m)),hn(t)&&g.set(t,S),S}function yp(e,t,i,c=!1){const{mixins:p,extends:g}=t;g&&yp(e,g,i,!0),p&&p.forEach(m=>yp(e,m,i,!0));for(const m in t)if(!(c&&m==="expose")){const l=eT[m]||i&&i[m];e[m]=l?l(e[m],t[m]):t[m]}return e}const eT={data:wb,props:Cb,emits:Cb,methods:Ed,computed:Ed,beforeCreate:ki,created:ki,beforeMount:ki,mounted:ki,beforeUpdate:ki,updated:ki,beforeDestroy:ki,beforeUnmount:ki,destroyed:ki,unmounted:ki,activated:ki,deactivated:ki,errorCaptured:ki,serverPrefetch:ki,components:Ed,directives:Ed,watch:rT,provide:wb,inject:tT};function wb(e,t){return t?e?function(){return ri(tr(e)?e.call(this,this):e,tr(t)?t.call(this,this):t)}:t:e}function tT(e,t){return Ed(n_(e),n_(t))}function n_(e){if(qt(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function ki(e,t){return e?[...new Set([].concat(e,t))]:t}function Ed(e,t){return e?ri(Object.create(null),e,t):t}function Cb(e,t){return e?qt(e)&&qt(t)?[...new Set([...e,...t])]:ri(Object.create(null),vb(e),vb(t??{})):t}function rT(e,t){if(!e)return t;if(!t)return e;const i=ri(Object.create(null),e);for(const c in t)i[c]=ki(e[c],t[c]);return i}function N1(){return{app:null,config:{isNativeTag:US,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nT=0;function iT(e,t){return function(c,p=null){tr(c)||(c=ri({},c)),p!=null&&!hn(p)&&(p=null);const g=N1(),m=new WeakSet,l=[];let S=!1;const I=g.app={_uid:nT++,_component:c,_props:p,_container:null,_context:g,_instance:null,version:BT,get config(){return g.config},set config(A){},use(A,...O){return m.has(A)||(A&&tr(A.install)?(m.add(A),A.install(I,...O)):tr(A)&&(m.add(A),A(I,...O))),I},mixin(A){return g.mixins.includes(A)||g.mixins.push(A),I},component(A,O){return O?(g.components[A]=O,I):g.components[A]},directive(A,O){return O?(g.directives[A]=O,I):g.directives[A]},mount(A,O,z){if(!S){const D=I._ceVNode||br(c,p);return D.appContext=g,z===!0?z="svg":z===!1&&(z=void 0),e(D,A,z),S=!0,I._container=A,A.__vue_app__=I,Wp(D.component)}},onUnmount(A){l.push(A)},unmount(){S&&(Do(l,I._instance,16),e(null,I._container),delete I._container.__vue_app__)},provide(A,O){return g.provides[A]=O,I},runWithContext(A){const O=gl;gl=I;try{return A()}finally{gl=O}}};return I}}let gl=null;function oT(e,t){if(ti){let i=ti.provides;const c=ti.parent&&ti.parent.provides;c===i&&(i=ti.provides=Object.create(c)),i[e]=t}}function _l(e,t,i=!1){const c=ti||qn;if(c||gl){const p=gl?gl._context.provides:c?c.parent==null?c.vnode.appContext&&c.vnode.appContext.provides:c.parent.provides:void 0;if(p&&e in p)return p[e];if(arguments.length>1)return i&&tr(t)?t.call(c&&c.proxy):t}}function ey(){return!!(ti||qn||gl)}const j1={},V1=()=>Object.create(j1),U1=e=>Object.getPrototypeOf(e)===j1;function sT(e,t,i,c=!1){const p={},g=V1();e.propsDefaults=Object.create(null),Z1(e,t,p,g);for(const m in e.propsOptions[0])m in p||(p[m]=void 0);i?e.props=c?p:xk(p):e.type.props?e.props=p:e.props=g,e.attrs=g}function aT(e,t,i,c){const{props:p,attrs:g,vnode:{patchFlag:m}}=e,l=Cr(p),[S]=e.propsOptions;let I=!1;if((c||m>0)&&!(m&16)){if(m&8){const A=e.vnode.dynamicProps;for(let O=0;O<A.length;O++){let z=A[O];if(Gp(e.emitsOptions,z))continue;const D=t[z];if(S)if($r(g,z))D!==g[z]&&(g[z]=D,I=!0);else{const H=bo(z);p[H]=i_(S,l,H,D,e,!1)}else D!==g[z]&&(g[z]=D,I=!0)}}}else{Z1(e,t,p,g)&&(I=!0);let A;for(const O in l)(!t||!$r(t,O)&&((A=xl(O))===O||!$r(t,A)))&&(S?i&&(i[O]!==void 0||i[A]!==void 0)&&(p[O]=i_(S,l,O,void 0,e,!0)):delete p[O]);if(g!==l)for(const O in g)(!t||!$r(t,O))&&(delete g[O],I=!0)}I&&Ls(e.attrs,"set","")}function Z1(e,t,i,c){const[p,g]=e.propsOptions;let m=!1,l;if(t)for(let S in t){if(Rd(S))continue;const I=t[S];let A;p&&$r(p,A=bo(S))?!g||!g.includes(A)?i[A]=I:(l||(l={}))[A]=I:Gp(e.emitsOptions,S)||(!(S in c)||I!==c[S])&&(c[S]=I,m=!0)}if(g){const S=Cr(i),I=l||en;for(let A=0;A<g.length;A++){const O=g[A];i[O]=i_(p,S,O,I[O],e,!$r(I,O))}}return m}function i_(e,t,i,c,p,g){const m=e[i];if(m!=null){const l=$r(m,"default");if(l&&c===void 0){const S=m.default;if(m.type!==Function&&!m.skipFactory&&tr(S)){const{propsDefaults:I}=p;if(i in I)c=I[i];else{const A=Sh(p);c=I[i]=S.call(null,t),A()}}else c=S;p.ce&&p.ce._setProp(i,c)}m[0]&&(g&&!l?c=!1:m[1]&&(c===""||c===xl(i))&&(c=!0))}return c}const lT=new WeakMap;function G1(e,t,i=!1){const c=i?lT:t.propsCache,p=c.get(e);if(p)return p;const g=e.props,m={},l=[];let S=!1;if(!tr(e)){const A=O=>{S=!0;const[z,D]=G1(O,t,!0);ri(m,z),D&&l.push(...D)};!i&&t.mixins.length&&t.mixins.forEach(A),e.extends&&A(e.extends),e.mixins&&e.mixins.forEach(A)}if(!g&&!S)return hn(e)&&c.set(e,Nc),Nc;if(qt(g))for(let A=0;A<g.length;A++){const O=bo(g[A]);Sb(O)&&(m[O]=en)}else if(g)for(const A in g){const O=bo(A);if(Sb(O)){const z=g[A],D=m[O]=qt(z)||tr(z)?{type:z}:ri({},z),H=D.type;let ue=!1,ye=!0;if(qt(H))for(let ne=0;ne<H.length;++ne){const xe=H[ne],Ce=tr(xe)&&xe.name;if(Ce==="Boolean"){ue=!0;break}else Ce==="String"&&(ye=!1)}else ue=tr(H)&&H.name==="Boolean";D[0]=ue,D[1]=ye,(ue||$r(D,"default"))&&l.push(O)}}const I=[m,l];return hn(e)&&c.set(e,I),I}function Sb(e){return e[0]!=="$"&&!Rd(e)}const W1=e=>e[0]==="_"||e==="$stable",ty=e=>qt(e)?e.map(Qo):[Qo(e)],cT=(e,t,i)=>{if(t._n)return t;const c=Jo((...p)=>ty(t(...p)),i);return c._c=!1,c},H1=(e,t,i)=>{const c=e._ctx;for(const p in e){if(W1(p))continue;const g=e[p];if(tr(g))t[p]=cT(p,g,c);else if(g!=null){const m=ty(g);t[p]=()=>m}}},q1=(e,t)=>{const i=ty(t);e.slots.default=()=>i},K1=(e,t,i)=>{for(const c in t)(i||c!=="_")&&(e[c]=t[c])},uT=(e,t,i)=>{const c=e.slots=V1();if(e.vnode.shapeFlag&32){const p=t._;p?(K1(c,t,i),i&&qx(c,"_",p,!0)):H1(t,c)}else t&&q1(e,t)},dT=(e,t,i)=>{const{vnode:c,slots:p}=e;let g=!0,m=en;if(c.shapeFlag&32){const l=t._;l?i&&l===1?g=!1:K1(p,t,i):(g=!t.$stable,H1(t,p)),m=t}else t&&(q1(e,t),m={default:1});if(g)for(const l in p)!W1(l)&&m[l]==null&&delete p[l]},Pi=TT;function hT(e){return fT(e)}function fT(e,t){const i=Fp();i.__VUE__=!0;const{insert:c,remove:p,patchProp:g,createElement:m,createText:l,createComment:S,setText:I,setElementText:A,parentNode:O,nextSibling:z,setScopeId:D=ts,insertStaticContent:H}=e,ue=(ce,ge,Le,ut=null,st=null,ct=null,te=void 0,se=null,Pe=!!ge.dynamicChildren)=>{if(ce===ge)return;ce&&!ul(ce,ge)&&(ut=Yr(ce),bt(ce,st,ct,!0),ce=null),ge.patchFlag===-2&&(Pe=!1,ge.dynamicChildren=null);const{type:Be,ref:xt,shapeFlag:it}=ge;switch(Be){case Ch:ye(ce,ge,Le,ut);break;case Ei:ne(ce,ge,Le,ut);break;case Ig:ce==null&&xe(ge,Le,ut,te);break;case Ar:Ye(ce,ge,Le,ut,st,ct,te,se,Pe);break;default:it&1?we(ce,ge,Le,ut,st,ct,te,se,Pe):it&6?Xe(ce,ge,Le,ut,st,ct,te,se,Pe):(it&64||it&128)&&Be.process(ce,ge,Le,ut,st,ct,te,se,Pe,Gr)}xt!=null&&st&&_p(xt,ce&&ce.ref,ct,ge||ce,!ge)},ye=(ce,ge,Le,ut)=>{if(ce==null)c(ge.el=l(ge.children),Le,ut);else{const st=ge.el=ce.el;ge.children!==ce.children&&I(st,ge.children)}},ne=(ce,ge,Le,ut)=>{ce==null?c(ge.el=S(ge.children||""),Le,ut):ge.el=ce.el},xe=(ce,ge,Le,ut)=>{[ce.el,ce.anchor]=H(ce.children,ge,Le,ut,ce.el,ce.anchor)},Ce=({el:ce,anchor:ge},Le,ut)=>{let st;for(;ce&&ce!==ge;)st=z(ce),c(ce,Le,ut),ce=st;c(ge,Le,ut)},X=({el:ce,anchor:ge})=>{let Le;for(;ce&&ce!==ge;)Le=z(ce),p(ce),ce=Le;p(ge)},we=(ce,ge,Le,ut,st,ct,te,se,Pe)=>{ge.type==="svg"?te="svg":ge.type==="math"&&(te="mathml"),ce==null?Oe(ge,Le,ut,st,ct,te,se,Pe):We(ce,ge,st,ct,te,se,Pe)},Oe=(ce,ge,Le,ut,st,ct,te,se)=>{let Pe,Be;const{props:xt,shapeFlag:it,transition:Me,dirs:Ze}=ce;if(Pe=ce.el=m(ce.type,ct,xt&&xt.is,xt),it&8?A(Pe,ce.children):it&16&&Ve(ce.children,Pe,null,ut,st,Pg(ce,ct),te,se),Ze&&il(ce,null,ut,"created"),ke(Pe,ce,ce.scopeId,te,ut),xt){for(const Nt in xt)Nt!=="value"&&!Rd(Nt)&&g(Pe,Nt,null,xt[Nt],ct,ut);"value"in xt&&g(Pe,"value",null,xt.value,ct),(Be=xt.onVnodeBeforeMount)&&Ko(Be,ut,ce)}Ze&&il(ce,null,ut,"beforeMount");const It=pT(st,Me);It&&Me.beforeEnter(Pe),c(Pe,ge,Le),((Be=xt&&xt.onVnodeMounted)||It||Ze)&&Pi(()=>{Be&&Ko(Be,ut,ce),It&&Me.enter(Pe),Ze&&il(ce,null,ut,"mounted")},st)},ke=(ce,ge,Le,ut,st)=>{if(Le&&D(ce,Le),ut)for(let ct=0;ct<ut.length;ct++)D(ce,ut[ct]);if(st){let ct=st.subTree;if(ge===ct||Q1(ct.type)&&(ct.ssContent===ge||ct.ssFallback===ge)){const te=st.vnode;ke(ce,te,te.scopeId,te.slotScopeIds,st.parent)}}},Ve=(ce,ge,Le,ut,st,ct,te,se,Pe=0)=>{for(let Be=Pe;Be<ce.length;Be++){const xt=ce[Be]=se?ya(ce[Be]):Qo(ce[Be]);ue(null,xt,ge,Le,ut,st,ct,te,se)}},We=(ce,ge,Le,ut,st,ct,te)=>{const se=ge.el=ce.el;let{patchFlag:Pe,dynamicChildren:Be,dirs:xt}=ge;Pe|=ce.patchFlag&16;const it=ce.props||en,Me=ge.props||en;let Ze;if(Le&&ol(Le,!1),(Ze=Me.onVnodeBeforeUpdate)&&Ko(Ze,Le,ge,ce),xt&&il(ge,ce,Le,"beforeUpdate"),Le&&ol(Le,!0),(it.innerHTML&&Me.innerHTML==null||it.textContent&&Me.textContent==null)&&A(se,""),Be?ft(ce.dynamicChildren,Be,se,Le,ut,Pg(ge,st),ct):te||Ut(ce,ge,se,null,Le,ut,Pg(ge,st),ct,!1),Pe>0){if(Pe&16)Qe(se,it,Me,Le,st);else if(Pe&2&&it.class!==Me.class&&g(se,"class",null,Me.class,st),Pe&4&&g(se,"style",it.style,Me.style,st),Pe&8){const It=ge.dynamicProps;for(let Nt=0;Nt<It.length;Nt++){const Ht=It[Nt],Fr=it[Ht],Sr=Me[Ht];(Sr!==Fr||Ht==="value")&&g(se,Ht,Fr,Sr,st,Le)}}Pe&1&&ce.children!==ge.children&&A(se,ge.children)}else!te&&Be==null&&Qe(se,it,Me,Le,st);((Ze=Me.onVnodeUpdated)||xt)&&Pi(()=>{Ze&&Ko(Ze,Le,ge,ce),xt&&il(ge,ce,Le,"updated")},ut)},ft=(ce,ge,Le,ut,st,ct,te)=>{for(let se=0;se<ge.length;se++){const Pe=ce[se],Be=ge[se],xt=Pe.el&&(Pe.type===Ar||!ul(Pe,Be)||Pe.shapeFlag&70)?O(Pe.el):Le;ue(Pe,Be,xt,null,ut,st,ct,te,!0)}},Qe=(ce,ge,Le,ut,st)=>{if(ge!==Le){if(ge!==en)for(const ct in ge)!Rd(ct)&&!(ct in Le)&&g(ce,ct,ge[ct],null,st,ut);for(const ct in Le){if(Rd(ct))continue;const te=Le[ct],se=ge[ct];te!==se&&ct!=="value"&&g(ce,ct,se,te,st,ut)}"value"in Le&&g(ce,"value",ge.value,Le.value,st)}},Ye=(ce,ge,Le,ut,st,ct,te,se,Pe)=>{const Be=ge.el=ce?ce.el:l(""),xt=ge.anchor=ce?ce.anchor:l("");let{patchFlag:it,dynamicChildren:Me,slotScopeIds:Ze}=ge;Ze&&(se=se?se.concat(Ze):Ze),ce==null?(c(Be,Le,ut),c(xt,Le,ut),Ve(ge.children||[],Le,xt,st,ct,te,se,Pe)):it>0&&it&64&&Me&&ce.dynamicChildren?(ft(ce.dynamicChildren,Me,Le,st,ct,te,se),(ge.key!=null||st&&ge===st.subTree)&&ry(ce,ge,!0)):Ut(ce,ge,Le,xt,st,ct,te,se,Pe)},Xe=(ce,ge,Le,ut,st,ct,te,se,Pe)=>{ge.slotScopeIds=se,ce==null?ge.shapeFlag&512?st.ctx.activate(ge,Le,ut,te,Pe):wt(ge,Le,ut,st,ct,te,Pe):Kt(ce,ge,Pe)},wt=(ce,ge,Le,ut,st,ct,te)=>{const se=ce.component=AT(ce,ut,st);if(Vp(ce)&&(se.ctx.renderer=Gr),LT(se,!1,te),se.asyncDep){if(st&&st.registerDep(se,vt,te),!ce.el){const Pe=se.subTree=br(Ei);ne(null,Pe,ge,Le)}}else vt(se,ce,ge,Le,st,ct,te)},Kt=(ce,ge,Le)=>{const ut=ge.component=ce.component;if(ST(ce,ge,Le))if(ut.asyncDep&&!ut.asyncResolved){At(ut,ge,Le);return}else ut.next=ge,ut.update();else ge.el=ce.el,ut.vnode=ge},vt=(ce,ge,Le,ut,st,ct,te)=>{const se=()=>{if(ce.isMounted){let{next:it,bu:Me,u:Ze,parent:It,vnode:Nt}=ce;{const Rn=Y1(ce);if(Rn){it&&(it.el=Nt.el,At(ce,it,te)),Rn.asyncDep.then(()=>{ce.isUnmounted||se()});return}}let Ht=it,Fr;ol(ce,!1),it?(it.el=Nt.el,At(ce,it,te)):it=Nt,Me&&vg(Me),(Fr=it.props&&it.props.onVnodeBeforeUpdate)&&Ko(Fr,It,it,Nt),ol(ce,!0);const Sr=Tb(ce),Ln=ce.subTree;ce.subTree=Sr,ue(Ln,Sr,O(Ln.el),Yr(Ln),ce,st,ct),it.el=Sr.el,Ht===null&&kT(ce,Sr.el),Ze&&Pi(Ze,st),(Fr=it.props&&it.props.onVnodeUpdated)&&Pi(()=>Ko(Fr,It,it,Nt),st)}else{let it;const{el:Me,props:Ze}=ge,{bm:It,m:Nt,parent:Ht,root:Fr,type:Sr}=ce,Ln=Uc(ge);ol(ce,!1),It&&vg(It),!Ln&&(it=Ze&&Ze.onVnodeBeforeMount)&&Ko(it,Ht,ge),ol(ce,!0);{Fr.ce&&Fr.ce._injectChildStyle(Sr);const Rn=ce.subTree=Tb(ce);ue(null,Rn,Le,ut,ce,st,ct),ge.el=Rn.el}if(Nt&&Pi(Nt,st),!Ln&&(it=Ze&&Ze.onVnodeMounted)){const Rn=ge;Pi(()=>Ko(it,Ht,Rn),st)}(ge.shapeFlag&256||Ht&&Uc(Ht.vnode)&&Ht.vnode.shapeFlag&256)&&ce.a&&Pi(ce.a,st),ce.isMounted=!0,ge=Le=ut=null}};ce.scope.on();const Pe=ce.effect=new t1(se);ce.scope.off();const Be=ce.update=Pe.run.bind(Pe),xt=ce.job=Pe.runIfDirty.bind(Pe);xt.i=ce,xt.id=ce.uid,Pe.scheduler=()=>K_(xt),ol(ce,!0),Be()},At=(ce,ge,Le)=>{ge.component=ce;const ut=ce.vnode.props;ce.vnode=ge,ce.next=null,aT(ce,ge.props,ut,Le),dT(ce,ge.children,Le),Ta(),pb(ce),Pa()},Ut=(ce,ge,Le,ut,st,ct,te,se,Pe=!1)=>{const Be=ce&&ce.children,xt=ce?ce.shapeFlag:0,it=ge.children,{patchFlag:Me,shapeFlag:Ze}=ge;if(Me>0){if(Me&128){mt(Be,it,Le,ut,st,ct,te,se,Pe);return}else if(Me&256){et(Be,it,Le,ut,st,ct,te,se,Pe);return}}Ze&8?(xt&16&&lr(Be,st,ct),it!==Be&&A(Le,it)):xt&16?Ze&16?mt(Be,it,Le,ut,st,ct,te,se,Pe):lr(Be,st,ct,!0):(xt&8&&A(Le,""),Ze&16&&Ve(it,Le,ut,st,ct,te,se,Pe))},et=(ce,ge,Le,ut,st,ct,te,se,Pe)=>{ce=ce||Nc,ge=ge||Nc;const Be=ce.length,xt=ge.length,it=Math.min(Be,xt);let Me;for(Me=0;Me<it;Me++){const Ze=ge[Me]=Pe?ya(ge[Me]):Qo(ge[Me]);ue(ce[Me],Ze,Le,null,st,ct,te,se,Pe)}Be>xt?lr(ce,st,ct,!0,!1,it):Ve(ge,Le,ut,st,ct,te,se,Pe,it)},mt=(ce,ge,Le,ut,st,ct,te,se,Pe)=>{let Be=0;const xt=ge.length;let it=ce.length-1,Me=xt-1;for(;Be<=it&&Be<=Me;){const Ze=ce[Be],It=ge[Be]=Pe?ya(ge[Be]):Qo(ge[Be]);if(ul(Ze,It))ue(Ze,It,Le,null,st,ct,te,se,Pe);else break;Be++}for(;Be<=it&&Be<=Me;){const Ze=ce[it],It=ge[Me]=Pe?ya(ge[Me]):Qo(ge[Me]);if(ul(Ze,It))ue(Ze,It,Le,null,st,ct,te,se,Pe);else break;it--,Me--}if(Be>it){if(Be<=Me){const Ze=Me+1,It=Ze<xt?ge[Ze].el:ut;for(;Be<=Me;)ue(null,ge[Be]=Pe?ya(ge[Be]):Qo(ge[Be]),Le,It,st,ct,te,se,Pe),Be++}}else if(Be>Me)for(;Be<=it;)bt(ce[Be],st,ct,!0),Be++;else{const Ze=Be,It=Be,Nt=new Map;for(Be=It;Be<=Me;Be++){const Te=ge[Be]=Pe?ya(ge[Be]):Qo(ge[Be]);Te.key!=null&&Nt.set(Te.key,Be)}let Ht,Fr=0;const Sr=Me-It+1;let Ln=!1,Rn=0;const Hi=new Array(Sr);for(Be=0;Be<Sr;Be++)Hi[Be]=0;for(Be=Ze;Be<=it;Be++){const Te=ce[Be];if(Fr>=Sr){bt(Te,st,ct,!0);continue}let $;if(Te.key!=null)$=Nt.get(Te.key);else for(Ht=It;Ht<=Me;Ht++)if(Hi[Ht-It]===0&&ul(Te,ge[Ht])){$=Ht;break}$===void 0?bt(Te,st,ct,!0):(Hi[$-It]=Be+1,$>=Rn?Rn=$:Ln=!0,ue(Te,ge[$],Le,null,st,ct,te,se,Pe),Fr++)}const Li=Ln?mT(Hi):Nc;for(Ht=Li.length-1,Be=Sr-1;Be>=0;Be--){const Te=It+Be,$=ge[Te],q=Te+1<xt?ge[Te+1].el:ut;Hi[Be]===0?ue(null,$,Le,q,st,ct,te,se,Pe):Ln&&(Ht<0||Be!==Li[Ht]?nt($,Le,q,2):Ht--)}}},nt=(ce,ge,Le,ut,st=null)=>{const{el:ct,type:te,transition:se,children:Pe,shapeFlag:Be}=ce;if(Be&6){nt(ce.component.subTree,ge,Le,ut);return}if(Be&128){ce.suspense.move(ge,Le,ut);return}if(Be&64){te.move(ce,ge,Le,Gr);return}if(te===Ar){c(ct,ge,Le);for(let it=0;it<Pe.length;it++)nt(Pe[it],ge,Le,ut);c(ce.anchor,ge,Le);return}if(te===Ig){Ce(ce,ge,Le);return}if(ut!==2&&Be&1&&se)if(ut===0)se.beforeEnter(ct),c(ct,ge,Le),Pi(()=>se.enter(ct),st);else{const{leave:it,delayLeave:Me,afterLeave:Ze}=se,It=()=>c(ct,ge,Le),Nt=()=>{it(ct,()=>{It(),Ze&&Ze()})};Me?Me(ct,It,Nt):Nt()}else c(ct,ge,Le)},bt=(ce,ge,Le,ut=!1,st=!1)=>{const{type:ct,props:te,ref:se,children:Pe,dynamicChildren:Be,shapeFlag:xt,patchFlag:it,dirs:Me,cacheIndex:Ze}=ce;if(it===-2&&(st=!1),se!=null&&_p(se,null,Le,ce,!0),Ze!=null&&(ge.renderCache[Ze]=void 0),xt&256){ge.ctx.deactivate(ce);return}const It=xt&1&&Me,Nt=!Uc(ce);let Ht;if(Nt&&(Ht=te&&te.onVnodeBeforeUnmount)&&Ko(Ht,ge,ce),xt&6)Qt(ce.component,Le,ut);else{if(xt&128){ce.suspense.unmount(Le,ut);return}It&&il(ce,null,ge,"beforeUnmount"),xt&64?ce.type.remove(ce,ge,Le,Gr,ut):Be&&!Be.hasOnce&&(ct!==Ar||it>0&&it&64)?lr(Be,ge,Le,!1,!0):(ct===Ar&&it&384||!st&&xt&16)&&lr(Pe,ge,Le),ut&&ir(ce)}(Nt&&(Ht=te&&te.onVnodeUnmounted)||It)&&Pi(()=>{Ht&&Ko(Ht,ge,ce),It&&il(ce,null,ge,"unmounted")},Le)},ir=ce=>{const{type:ge,el:Le,anchor:ut,transition:st}=ce;if(ge===Ar){Jt(Le,ut);return}if(ge===Ig){X(ce);return}const ct=()=>{p(Le),st&&!st.persisted&&st.afterLeave&&st.afterLeave()};if(ce.shapeFlag&1&&st&&!st.persisted){const{leave:te,delayLeave:se}=st,Pe=()=>te(Le,ct);se?se(ce.el,ct,Pe):Pe()}else ct()},Jt=(ce,ge)=>{let Le;for(;ce!==ge;)Le=z(ce),p(ce),ce=Le;p(ge)},Qt=(ce,ge,Le)=>{const{bum:ut,scope:st,job:ct,subTree:te,um:se,m:Pe,a:Be}=ce;kb(Pe),kb(Be),ut&&vg(ut),st.stop(),ct&&(ct.flags|=8,bt(te,ce,ge,Le)),se&&Pi(se,ge),Pi(()=>{ce.isUnmounted=!0},ge),ge&&ge.pendingBranch&&!ge.isUnmounted&&ce.asyncDep&&!ce.asyncResolved&&ce.suspenseId===ge.pendingId&&(ge.deps--,ge.deps===0&&ge.resolve())},lr=(ce,ge,Le,ut=!1,st=!1,ct=0)=>{for(let te=ct;te<ce.length;te++)bt(ce[te],ge,Le,ut,st)},Yr=ce=>{if(ce.shapeFlag&6)return Yr(ce.component.subTree);if(ce.shapeFlag&128)return ce.suspense.next();const ge=z(ce.anchor||ce.el),Le=ge&&ge[C1];return Le?z(Le):ge};let tn=!1;const Pr=(ce,ge,Le)=>{ce==null?ge._vnode&&bt(ge._vnode,null,null,!0):ue(ge._vnode||null,ce,ge,null,null,null,Le),ge._vnode=ce,tn||(tn=!0,pb(),b1(),tn=!1)},Gr={p:ue,um:bt,m:nt,r:ir,mt:wt,mc:Ve,pc:Ut,pbc:ft,n:Yr,o:e};return{render:Pr,hydrate:void 0,createApp:iT(Pr)}}function Pg({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function ol({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function pT(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ry(e,t,i=!1){const c=e.children,p=t.children;if(qt(c)&&qt(p))for(let g=0;g<c.length;g++){const m=c[g];let l=p[g];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=p[g]=ya(p[g]),l.el=m.el),!i&&l.patchFlag!==-2&&ry(m,l)),l.type===Ch&&(l.el=m.el)}}function mT(e){const t=e.slice(),i=[0];let c,p,g,m,l;const S=e.length;for(c=0;c<S;c++){const I=e[c];if(I!==0){if(p=i[i.length-1],e[p]<I){t[c]=p,i.push(c);continue}for(g=0,m=i.length-1;g<m;)l=g+m>>1,e[i[l]]<I?g=l+1:m=l;I<e[i[g]]&&(g>0&&(t[c]=i[g-1]),i[g]=c)}}for(g=i.length,m=i[g-1];g-- >0;)i[g]=m,m=t[m];return i}function Y1(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Y1(t)}function kb(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const gT=Symbol.for("v-scx"),_T=()=>_l(gT);function yT(e,t){return ny(e,null,t)}function Kn(e,t,i){return ny(e,t,i)}function ny(e,t,i=en){const{immediate:c,deep:p,flush:g,once:m}=i,l=ri({},i),S=t&&c||!t&&g!=="post";let I;if(Kd){if(g==="sync"){const D=_T();I=D.__watcherHandles||(D.__watcherHandles=[])}else if(!S){const D=()=>{};return D.stop=ts,D.resume=ts,D.pause=ts,D}}const A=ti;l.call=(D,H,ue)=>Do(D,A,H,ue);let O=!1;g==="post"?l.scheduler=D=>{Pi(D,A&&A.suspense)}:g!=="sync"&&(O=!0,l.scheduler=(D,H)=>{H?D():K_(D)}),l.augmentJob=D=>{t&&(D.flags|=4),O&&(D.flags|=2,A&&(D.id=A.uid,D.i=A))};const z=Ek(e,t,l);return Kd&&(I?I.push(z):S&&z()),z}function bT(e,t,i){const c=this.proxy,p=pn(e)?e.includes(".")?X1(c,e):()=>c[e]:e.bind(c,c);let g;tr(t)?g=t:(g=t.handler,i=t);const m=Sh(this),l=ny(p,g.bind(c),i);return m(),l}function X1(e,t){const i=t.split(".");return()=>{let c=e;for(let p=0;p<i.length&&c;p++)c=c[i[p]];return c}}const vT=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${bo(t)}Modifiers`]||e[`${xl(t)}Modifiers`];function xT(e,t,...i){if(e.isUnmounted)return;const c=e.vnode.props||en;let p=i;const g=t.startsWith("update:"),m=g&&vT(c,t.slice(7));m&&(m.trim&&(p=i.map(A=>pn(A)?A.trim():A)),m.number&&(p=i.map(qS)));let l,S=c[l=bg(t)]||c[l=bg(bo(t))];!S&&g&&(S=c[l=bg(xl(t))]),S&&Do(S,e,6,p);const I=c[l+"Once"];if(I){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Do(I,e,6,p)}}function J1(e,t,i=!1){const c=t.emitsCache,p=c.get(e);if(p!==void 0)return p;const g=e.emits;let m={},l=!1;if(!tr(e)){const S=I=>{const A=J1(I,t,!0);A&&(l=!0,ri(m,A))};!i&&t.mixins.length&&t.mixins.forEach(S),e.extends&&S(e.extends),e.mixins&&e.mixins.forEach(S)}return!g&&!l?(hn(e)&&c.set(e,null),null):(qt(g)?g.forEach(S=>m[S]=null):ri(m,g),hn(e)&&c.set(e,m),m)}function Gp(e,t){return!e||!Op(t)?!1:(t=t.slice(2).replace(/Once$/,""),$r(e,t[0].toLowerCase()+t.slice(1))||$r(e,xl(t))||$r(e,t))}function Tb(e){const{type:t,vnode:i,proxy:c,withProxy:p,propsOptions:[g],slots:m,attrs:l,emit:S,render:I,renderCache:A,props:O,data:z,setupState:D,ctx:H,inheritAttrs:ue}=e,ye=gp(e);let ne,xe;try{if(i.shapeFlag&4){const X=p||c,we=X;ne=Qo(I.call(we,X,A,O,D,z,H)),xe=l}else{const X=t;ne=Qo(X.length>1?X(O,{attrs:l,slots:m,emit:S}):X(O,null)),xe=t.props?l:wT(l)}}catch(X){Bd.length=0,jp(X,e,1),ne=br(Ei)}let Ce=ne;if(xe&&ue!==!1){const X=Object.keys(xe),{shapeFlag:we}=Ce;X.length&&we&7&&(g&&X.some(O_)&&(xe=CT(xe,g)),Ce=ka(Ce,xe,!1,!0))}return i.dirs&&(Ce=ka(Ce,null,!1,!0),Ce.dirs=Ce.dirs?Ce.dirs.concat(i.dirs):i.dirs),i.transition&&Wd(Ce,i.transition),ne=Ce,gp(ye),ne}const wT=e=>{let t;for(const i in e)(i==="class"||i==="style"||Op(i))&&((t||(t={}))[i]=e[i]);return t},CT=(e,t)=>{const i={};for(const c in e)(!O_(c)||!(c.slice(9)in t))&&(i[c]=e[c]);return i};function ST(e,t,i){const{props:c,children:p,component:g}=e,{props:m,children:l,patchFlag:S}=t,I=g.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&S>=0){if(S&1024)return!0;if(S&16)return c?Pb(c,m,I):!!m;if(S&8){const A=t.dynamicProps;for(let O=0;O<A.length;O++){const z=A[O];if(m[z]!==c[z]&&!Gp(I,z))return!0}}}else return(p||l)&&(!l||!l.$stable)?!0:c===m?!1:c?m?Pb(c,m,I):!0:!!m;return!1}function Pb(e,t,i){const c=Object.keys(t);if(c.length!==Object.keys(e).length)return!0;for(let p=0;p<c.length;p++){const g=c[p];if(t[g]!==e[g]&&!Gp(i,g))return!0}return!1}function kT({vnode:e,parent:t},i){for(;t;){const c=t.subTree;if(c.suspense&&c.suspense.activeBranch===e&&(c.el=e.el),c===e)(e=t.vnode).el=i,t=t.parent;else break}}const Q1=e=>e.__isSuspense;function TT(e,t){t&&t.pendingBranch?qt(e)?t.effects.push(...e):t.effects.push(e):Rk(e)}const Ar=Symbol.for("v-fgt"),Ch=Symbol.for("v-txt"),Ei=Symbol.for("v-cmt"),Ig=Symbol.for("v-stc"),Bd=[];let oo=null;function _t(e=!1){Bd.push(oo=e?null:[])}function PT(){Bd.pop(),oo=Bd[Bd.length-1]||null}let Hd=1;function Ib(e,t=!1){Hd+=e,e<0&&oo&&t&&(oo.hasOnce=!0)}function ew(e){return e.dynamicChildren=Hd>0?oo||Nc:null,PT(),Hd>0&&oo&&oo.push(e),e}function Tt(e,t,i,c,p,g){return ew(lt(e,t,i,c,p,g,!0))}function Hn(e,t,i,c,p){return ew(br(e,t,i,c,p,!0))}function qd(e){return e?e.__v_isVNode===!0:!1}function ul(e,t){return e.type===t.type&&e.key===t.key}const tw=({key:e})=>e??null,sp=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?pn(e)||wn(e)||tr(e)?{i:qn,r:e,k:t,f:!!i}:e:null);function lt(e,t=null,i=null,c=0,p=null,g=e===Ar?0:1,m=!1,l=!1){const S={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&tw(t),ref:t&&sp(t),scopeId:x1,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:g,patchFlag:c,dynamicProps:p,dynamicChildren:null,appContext:null,ctx:qn};return l?(iy(S,i),g&128&&e.normalize(S)):i&&(S.shapeFlag|=pn(i)?8:16),Hd>0&&!m&&oo&&(S.patchFlag>0||g&6)&&S.patchFlag!==32&&oo.push(S),S}const br=IT;function IT(e,t=null,i=null,c=0,p=null,g=!1){if((!e||e===O1)&&(e=Ei),qd(e)){const l=ka(e,t,!0);return i&&iy(l,i),Hd>0&&!g&&oo&&(l.shapeFlag&6?oo[oo.indexOf(e)]=l:oo.push(l)),l.patchFlag=-2,l}if($T(e)&&(e=e.__vccOpts),t){t=rw(t);let{class:l,style:S}=t;l&&!pn(l)&&(t.class=Ao(l)),hn(S)&&(H_(S)&&!qt(S)&&(S=ri({},S)),t.style=ns(S))}const m=pn(e)?1:Q1(e)?128:S1(e)?64:hn(e)?4:tr(e)?2:0;return lt(e,t,i,c,p,m,g,!0)}function rw(e){return e?H_(e)||U1(e)?ri({},e):e:null}function ka(e,t,i=!1,c=!1){const{props:p,ref:g,patchFlag:m,children:l,transition:S}=e,I=t?Bt(p||{},t):p,A={__v_isVNode:!0,__v_skip:!0,type:e.type,props:I,key:I&&tw(I),ref:t&&t.ref?i&&g?qt(g)?g.concat(sp(t)):[g,sp(t)]:sp(t):g,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ar?m===-1?16:m|16:m,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:S,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ka(e.ssContent),ssFallback:e.ssFallback&&ka(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return S&&c&&Wd(A,S.clone(A)),A}function ap(e=" ",t=0){return br(Ch,null,e,t)}function Lr(e="",t=!1){return t?(_t(),Hn(Ei,null,e)):br(Ei,null,e)}function Qo(e){return e==null||typeof e=="boolean"?br(Ei):qt(e)?br(Ar,null,e.slice()):qd(e)?ya(e):br(Ch,null,String(e))}function ya(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ka(e)}function iy(e,t){let i=0;const{shapeFlag:c}=e;if(t==null)t=null;else if(qt(t))i=16;else if(typeof t=="object")if(c&65){const p=t.default;p&&(p._c&&(p._d=!1),iy(e,p()),p._c&&(p._d=!0));return}else{i=32;const p=t._;!p&&!U1(t)?t._ctx=qn:p===3&&qn&&(qn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else tr(t)?(t={default:t,_ctx:qn},i=32):(t=String(t),c&64?(i=16,t=[ap(t)]):i=8);e.children=t,e.shapeFlag|=i}function Bt(...e){const t={};for(let i=0;i<e.length;i++){const c=e[i];for(const p in c)if(p==="class")t.class!==c.class&&(t.class=Ao([t.class,c.class]));else if(p==="style")t.style=ns([t.style,c.style]);else if(Op(p)){const g=t[p],m=c[p];m&&g!==m&&!(qt(g)&&g.includes(m))&&(t[p]=g?[].concat(g,m):m)}else p!==""&&(t[p]=c[p])}return t}function Ko(e,t,i,c=null){Do(e,t,7,[i,c])}const MT=N1();let ET=0;function AT(e,t,i){const c=e.type,p=(t?t.appContext:e.appContext)||MT,g={uid:ET++,vnode:e,type:c,parent:t,appContext:p,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Qx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(p.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:G1(c,p),emitsOptions:J1(c,p),emit:null,emitted:null,propsDefaults:en,inheritAttrs:c.inheritAttrs,ctx:en,data:en,props:en,attrs:en,slots:en,refs:en,setupState:en,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return g.ctx={_:g},g.root=t?t.root:g,g.emit=xT.bind(null,g),e.ce&&e.ce(g),g}let ti=null;const zo=()=>ti||qn;let bp,o_;{const e=Fp(),t=(i,c)=>{let p;return(p=e[i])||(p=e[i]=[]),p.push(c),g=>{p.length>1?p.forEach(m=>m(g)):p[0](g)}};bp=t("__VUE_INSTANCE_SETTERS__",i=>ti=i),o_=t("__VUE_SSR_SETTERS__",i=>Kd=i)}const Sh=e=>{const t=ti;return bp(e),e.scope.on(),()=>{e.scope.off(),bp(t)}},Mb=()=>{ti&&ti.scope.off(),bp(null)};function nw(e){return e.vnode.shapeFlag&4}let Kd=!1;function LT(e,t=!1,i=!1){t&&o_(t);const{props:c,children:p}=e.vnode,g=nw(e);sT(e,c,g,t),uT(e,p,i);const m=g?RT(e,t):void 0;return t&&o_(!1),m}function RT(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Xk);const{setup:c}=i;if(c){Ta();const p=e.setupContext=c.length>1?OT(e):null,g=Sh(e),m=xh(c,e,0,[e.props,p]),l=Gx(m);if(Pa(),g(),(l||e.sp)&&!Uc(e)&&L1(e),l){if(m.then(Mb,Mb),t)return m.then(S=>{Eb(e,S)}).catch(S=>{jp(S,e,0)});e.asyncDep=m}else Eb(e,m)}else iw(e)}function Eb(e,t,i){tr(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:hn(t)&&(e.setupState=g1(t)),iw(e)}function iw(e,t,i){const c=e.type;e.render||(e.render=c.render||ts);{const p=Sh(e);Ta();try{Jk(e)}finally{Pa(),p()}}}const DT={get(e,t){return gi(e,"get",""),e[t]}};function OT(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,DT),slots:e.slots,emit:e.emit,expose:t}}function Wp(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(g1(q_(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in $d)return $d[i](e)},has(t,i){return i in t||i in $d}})):e.proxy}function zT(e,t=!0){return tr(e)?e.displayName||e.name:e.name||t&&e.__name}function $T(e){return tr(e)&&"__vccOpts"in e}const Xt=(e,t)=>Ik(e,t,Kd);function oy(e,t,i){const c=arguments.length;return c===2?hn(t)&&!qt(t)?qd(t)?br(e,null,[t]):br(e,t):br(e,null,t):(c>3?i=Array.prototype.slice.call(arguments,2):c===3&&qd(i)&&(i=[i]),br(e,t,i))}const BT="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let s_;const Ab=typeof window<"u"&&window.trustedTypes;if(Ab)try{s_=Ab.createPolicy("vue",{createHTML:e=>e})}catch{}const ow=s_?e=>s_.createHTML(e):e=>e,FT="http://www.w3.org/2000/svg",NT="http://www.w3.org/1998/Math/MathML",Es=typeof document<"u"?document:null,Lb=Es&&Es.createElement("template"),jT={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,c)=>{const p=t==="svg"?Es.createElementNS(FT,e):t==="mathml"?Es.createElementNS(NT,e):i?Es.createElement(e,{is:i}):Es.createElement(e);return e==="select"&&c&&c.multiple!=null&&p.setAttribute("multiple",c.multiple),p},createText:e=>Es.createTextNode(e),createComment:e=>Es.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Es.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,c,p,g){const m=i?i.previousSibling:t.lastChild;if(p&&(p===g||p.nextSibling))for(;t.insertBefore(p.cloneNode(!0),i),!(p===g||!(p=p.nextSibling)););else{Lb.innerHTML=ow(c==="svg"?`<svg>${e}</svg>`:c==="mathml"?`<math>${e}</math>`:e);const l=Lb.content;if(c==="svg"||c==="mathml"){const S=l.firstChild;for(;S.firstChild;)l.appendChild(S.firstChild);l.removeChild(S)}t.insertBefore(l,i)}return[m?m.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},ha="transition",xd="animation",Yd=Symbol("_vtc"),sw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},VT=ri({},P1,sw),UT=e=>(e.displayName="Transition",e.props=VT,e),aw=UT((e,{slots:t})=>oy($k,ZT(e),t)),sl=(e,t=[])=>{qt(e)?e.forEach(i=>i(...t)):e&&e(...t)},Rb=e=>e?qt(e)?e.some(t=>t.length>1):e.length>1:!1;function ZT(e){const t={};for(const Ye in e)Ye in sw||(t[Ye]=e[Ye]);if(e.css===!1)return t;const{name:i="v",type:c,duration:p,enterFromClass:g=`${i}-enter-from`,enterActiveClass:m=`${i}-enter-active`,enterToClass:l=`${i}-enter-to`,appearFromClass:S=g,appearActiveClass:I=m,appearToClass:A=l,leaveFromClass:O=`${i}-leave-from`,leaveActiveClass:z=`${i}-leave-active`,leaveToClass:D=`${i}-leave-to`}=e,H=GT(p),ue=H&&H[0],ye=H&&H[1],{onBeforeEnter:ne,onEnter:xe,onEnterCancelled:Ce,onLeave:X,onLeaveCancelled:we,onBeforeAppear:Oe=ne,onAppear:ke=xe,onAppearCancelled:Ve=Ce}=t,We=(Ye,Xe,wt,Kt)=>{Ye._enterCancelled=Kt,al(Ye,Xe?A:l),al(Ye,Xe?I:m),wt&&wt()},ft=(Ye,Xe)=>{Ye._isLeaving=!1,al(Ye,O),al(Ye,D),al(Ye,z),Xe&&Xe()},Qe=Ye=>(Xe,wt)=>{const Kt=Ye?ke:xe,vt=()=>We(Xe,Ye,wt);sl(Kt,[Xe,vt]),Db(()=>{al(Xe,Ye?S:g),Ps(Xe,Ye?A:l),Rb(Kt)||Ob(Xe,c,ue,vt)})};return ri(t,{onBeforeEnter(Ye){sl(ne,[Ye]),Ps(Ye,g),Ps(Ye,m)},onBeforeAppear(Ye){sl(Oe,[Ye]),Ps(Ye,S),Ps(Ye,I)},onEnter:Qe(!1),onAppear:Qe(!0),onLeave(Ye,Xe){Ye._isLeaving=!0;const wt=()=>ft(Ye,Xe);Ps(Ye,O),Ye._enterCancelled?(Ps(Ye,z),Bb()):(Bb(),Ps(Ye,z)),Db(()=>{Ye._isLeaving&&(al(Ye,O),Ps(Ye,D),Rb(X)||Ob(Ye,c,ye,wt))}),sl(X,[Ye,wt])},onEnterCancelled(Ye){We(Ye,!1,void 0,!0),sl(Ce,[Ye])},onAppearCancelled(Ye){We(Ye,!0,void 0,!0),sl(Ve,[Ye])},onLeaveCancelled(Ye){ft(Ye),sl(we,[Ye])}})}function GT(e){if(e==null)return null;if(hn(e))return[Mg(e.enter),Mg(e.leave)];{const t=Mg(e);return[t,t]}}function Mg(e){return KS(e)}function Ps(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e[Yd]||(e[Yd]=new Set)).add(t)}function al(e,t){t.split(/\s+/).forEach(c=>c&&e.classList.remove(c));const i=e[Yd];i&&(i.delete(t),i.size||(e[Yd]=void 0))}function Db(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let WT=0;function Ob(e,t,i,c){const p=e._endId=++WT,g=()=>{p===e._endId&&c()};if(i!=null)return setTimeout(g,i);const{type:m,timeout:l,propCount:S}=HT(e,t);if(!m)return c();const I=m+"end";let A=0;const O=()=>{e.removeEventListener(I,z),g()},z=D=>{D.target===e&&++A>=S&&O()};setTimeout(()=>{A<S&&O()},l+1),e.addEventListener(I,z)}function HT(e,t){const i=window.getComputedStyle(e),c=H=>(i[H]||"").split(", "),p=c(`${ha}Delay`),g=c(`${ha}Duration`),m=zb(p,g),l=c(`${xd}Delay`),S=c(`${xd}Duration`),I=zb(l,S);let A=null,O=0,z=0;t===ha?m>0&&(A=ha,O=m,z=g.length):t===xd?I>0&&(A=xd,O=I,z=S.length):(O=Math.max(m,I),A=O>0?m>I?ha:xd:null,z=A?A===ha?g.length:S.length:0);const D=A===ha&&/\b(transform|all)(,|$)/.test(c(`${ha}Property`).toString());return{type:A,timeout:O,propCount:z,hasTransform:D}}function zb(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,c)=>$b(i)+$b(e[c])))}function $b(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Bb(){return document.body.offsetHeight}function qT(e,t,i){const c=e[Yd];c&&(t=(t?[t,...c]:[...c]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const Fb=Symbol("_vod"),KT=Symbol("_vsh"),YT=Symbol(""),XT=/(^|;)\s*display\s*:/;function JT(e,t,i){const c=e.style,p=pn(i);let g=!1;if(i&&!p){if(t)if(pn(t))for(const m of t.split(";")){const l=m.slice(0,m.indexOf(":")).trim();i[l]==null&&lp(c,l,"")}else for(const m in t)i[m]==null&&lp(c,m,"");for(const m in i)m==="display"&&(g=!0),lp(c,m,i[m])}else if(p){if(t!==i){const m=c[YT];m&&(i+=";"+m),c.cssText=i,g=XT.test(i)}}else t&&e.removeAttribute("style");Fb in e&&(e[Fb]=g?c.display:"",e[KT]&&(c.display="none"))}const Nb=/\s*!important$/;function lp(e,t,i){if(qt(i))i.forEach(c=>lp(e,t,c));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const c=QT(e,t);Nb.test(i)?e.setProperty(xl(c),i.replace(Nb,""),"important"):e[c]=i}}const jb=["Webkit","Moz","ms"],Eg={};function QT(e,t){const i=Eg[t];if(i)return i;let c=bo(t);if(c!=="filter"&&c in e)return Eg[t]=c;c=Bp(c);for(let p=0;p<jb.length;p++){const g=jb[p]+c;if(g in e)return Eg[t]=g}return t}const Vb="http://www.w3.org/1999/xlink";function Ub(e,t,i,c,p,g=tk(t)){c&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(Vb,t.slice(6,t.length)):e.setAttributeNS(Vb,t,i):i==null||g&&!Yx(i)?e.removeAttribute(t):e.setAttribute(t,g?"":Fs(i)?String(i):i)}function Zb(e,t,i,c,p){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?ow(i):i);return}const g=e.tagName;if(t==="value"&&g!=="PROGRESS"&&!g.includes("-")){const l=g==="OPTION"?e.getAttribute("value")||"":e.value,S=i==null?e.type==="checkbox"?"on":"":String(i);(l!==S||!("_value"in e))&&(e.value=S),i==null&&e.removeAttribute(t),e._value=i;return}let m=!1;if(i===""||i==null){const l=typeof e[t];l==="boolean"?i=Yx(i):i==null&&l==="string"?(i="",m=!0):l==="number"&&(i=0,m=!0)}try{e[t]=i}catch{}m&&e.removeAttribute(p||t)}function eP(e,t,i,c){e.addEventListener(t,i,c)}function tP(e,t,i,c){e.removeEventListener(t,i,c)}const Gb=Symbol("_vei");function rP(e,t,i,c,p=null){const g=e[Gb]||(e[Gb]={}),m=g[t];if(c&&m)m.value=c;else{const[l,S]=nP(t);if(c){const I=g[t]=sP(c,p);eP(e,l,I,S)}else m&&(tP(e,l,m,S),g[t]=void 0)}}const Wb=/(?:Once|Passive|Capture)$/;function nP(e){let t;if(Wb.test(e)){t={};let c;for(;c=e.match(Wb);)e=e.slice(0,e.length-c[0].length),t[c[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):xl(e.slice(2)),t]}let Ag=0;const iP=Promise.resolve(),oP=()=>Ag||(iP.then(()=>Ag=0),Ag=Date.now());function sP(e,t){const i=c=>{if(!c._vts)c._vts=Date.now();else if(c._vts<=i.attached)return;Do(aP(c,i.value),t,5,[c])};return i.value=e,i.attached=oP(),i}function aP(e,t){if(qt(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(c=>p=>!p._stopped&&c&&c(p))}else return t}const Hb=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,lP=(e,t,i,c,p,g)=>{const m=p==="svg";t==="class"?qT(e,c,m):t==="style"?JT(e,i,c):Op(t)?O_(t)||rP(e,t,i,c,g):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):cP(e,t,c,m))?(Zb(e,t,c),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ub(e,t,c,m,g,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!pn(c))?Zb(e,bo(t),c,g,t):(t==="true-value"?e._trueValue=c:t==="false-value"&&(e._falseValue=c),Ub(e,t,c,m))};function cP(e,t,i,c){if(c)return!!(t==="innerHTML"||t==="textContent"||t in e&&Hb(t)&&tr(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const p=e.tagName;if(p==="IMG"||p==="VIDEO"||p==="CANVAS"||p==="SOURCE")return!1}return Hb(t)&&pn(i)?!1:t in e}const uP=ri({patchProp:lP},jT);let qb;function dP(){return qb||(qb=hT(uP))}const hP=(...e)=>{const t=dP().createApp(...e),{mount:i}=t;return t.mount=c=>{const p=pP(c);if(!p)return;const g=t._component;!tr(g)&&!g.render&&!g.template&&(g.template=p.innerHTML),p.nodeType===1&&(p.textContent="");const m=i(p,!1,fP(p));return p instanceof Element&&(p.removeAttribute("v-cloak"),p.setAttribute("data-v-app","")),m},t};function fP(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function pP(e){return pn(e)?document.querySelector(e):e}/*!
 * pinia v3.0.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let lw;const Hp=e=>lw=e,cw=Symbol();function a_(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Fd;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Fd||(Fd={}));function mP(){const e=B_(!0),t=e.run(()=>on({}));let i=[],c=[];const p=q_({install(g){Hp(p),p._a=g,g.provide(cw,p),g.config.globalProperties.$pinia=p,c.forEach(m=>i.push(m)),c=[]},use(g){return this._a?i.push(g):c.push(g),this},_p:i,_a:null,_e:e,_s:new Map,state:t});return p}const uw=()=>{};function Kb(e,t,i,c=uw){e.push(t);const p=()=>{const g=e.indexOf(t);g>-1&&(e.splice(g,1),c())};return!i&&F_()&&e1(p),p}function Ac(e,...t){e.slice().forEach(i=>{i(...t)})}const gP=e=>e(),Yb=Symbol(),Lg=Symbol();function l_(e,t){e instanceof Map&&t instanceof Map?t.forEach((i,c)=>e.set(c,i)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const i in t){if(!t.hasOwnProperty(i))continue;const c=t[i],p=e[i];a_(p)&&a_(c)&&e.hasOwnProperty(i)&&!wn(c)&&!wa(c)?e[i]=l_(p,c):e[i]=c}return e}const _P=Symbol();function yP(e){return!a_(e)||!e.hasOwnProperty(_P)}const{assign:ma}=Object;function bP(e){return!!(wn(e)&&e.effect)}function vP(e,t,i,c){const{state:p,actions:g,getters:m}=t,l=i.state.value[e];let S;function I(){l||(i.state.value[e]=p?p():{});const A=Sk(i.state.value[e]);return ma(A,g,Object.keys(m||{}).reduce((O,z)=>(O[z]=q_(Xt(()=>{Hp(i);const D=i._s.get(e);return m[z].call(D,D)})),O),{}))}return S=dw(e,I,t,i,c,!0),S}function dw(e,t,i={},c,p,g){let m;const l=ma({actions:{}},i),S={deep:!0};let I,A,O=[],z=[],D;const H=c.state.value[e];!g&&!H&&(c.state.value[e]={}),on({});let ue;function ye(Ve){let We;I=A=!1,typeof Ve=="function"?(Ve(c.state.value[e]),We={type:Fd.patchFunction,storeId:e,events:D}):(l_(c.state.value[e],Ve),We={type:Fd.patchObject,payload:Ve,storeId:e,events:D});const ft=ue=Symbol();wh().then(()=>{ue===ft&&(I=!0)}),A=!0,Ac(O,We,c.state.value[e])}const ne=g?function(){const{state:We}=i,ft=We?We():{};this.$patch(Qe=>{ma(Qe,ft)})}:uw;function xe(){m.stop(),O=[],z=[],c._s.delete(e)}const Ce=(Ve,We="")=>{if(Yb in Ve)return Ve[Lg]=We,Ve;const ft=function(){Hp(c);const Qe=Array.from(arguments),Ye=[],Xe=[];function wt(At){Ye.push(At)}function Kt(At){Xe.push(At)}Ac(z,{args:Qe,name:ft[Lg],store:we,after:wt,onError:Kt});let vt;try{vt=Ve.apply(this&&this.$id===e?this:we,Qe)}catch(At){throw Ac(Xe,At),At}return vt instanceof Promise?vt.then(At=>(Ac(Ye,At),At)).catch(At=>(Ac(Xe,At),Promise.reject(At))):(Ac(Ye,vt),vt)};return ft[Yb]=!0,ft[Lg]=We,ft},X={_p:c,$id:e,$onAction:Kb.bind(null,z),$patch:ye,$reset:ne,$subscribe(Ve,We={}){const ft=Kb(O,Ve,We.detached,()=>Qe()),Qe=m.run(()=>Kn(()=>c.state.value[e],Ye=>{(We.flush==="sync"?A:I)&&Ve({storeId:e,type:Fd.direct,events:D},Ye)},ma({},S,We)));return ft},$dispose:xe},we=Xc(X);c._s.set(e,we);const ke=(c._a&&c._a.runWithContext||gP)(()=>c._e.run(()=>(m=B_()).run(()=>t({action:Ce}))));for(const Ve in ke){const We=ke[Ve];if(wn(We)&&!bP(We)||wa(We))g||(H&&yP(We)&&(wn(We)?We.value=H[Ve]:l_(We,H[Ve])),c.state.value[e][Ve]=We);else if(typeof We=="function"){const ft=Ce(We,Ve);ke[Ve]=ft,l.actions[Ve]=We}}return ma(we,ke),ma(Cr(we),ke),Object.defineProperty(we,"$state",{get:()=>c.state.value[e],set:Ve=>{ye(We=>{ma(We,Ve)})}}),c._p.forEach(Ve=>{ma(we,m.run(()=>Ve({store:we,app:c._a,pinia:c,options:l})))}),H&&g&&i.hydrate&&i.hydrate(we.$state,H),I=!0,A=!0,we}/*! #__NO_SIDE_EFFECTS__ */function xP(e,t,i){let c;const p=typeof t=="function";c=p?i:t;function g(m,l){const S=ey();return m=m||(S?_l(cw,null):null),m&&Hp(m),m=lw,m._s.has(e)||(p?dw(e,t,c,m):vP(e,c,m)),m._s.get(e)}return g.$id=e,g}/*!
  * shared v10.0.6
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const vp=typeof window<"u",Ma=(e,t=!1)=>t?Symbol.for(e):Symbol(e),wP=(e,t,i)=>CP({l:e,k:t,s:i}),CP=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),En=e=>typeof e=="number"&&isFinite(e),SP=e=>sy(e)==="[object Date]",Hc=e=>sy(e)==="[object RegExp]",qp=e=>ur(e)&&Object.keys(e).length===0,Yn=Object.assign,kP=Object.create,Kr=(e=null)=>kP(e);let Xb;const fl=()=>Xb||(Xb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Kr());function Jb(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const TP=Object.prototype.hasOwnProperty;function Lo(e,t){return TP.call(e,t)}const xn=Array.isArray,dn=e=>typeof e=="function",Lt=e=>typeof e=="string",kr=e=>typeof e=="boolean",Rr=e=>e!==null&&typeof e=="object",PP=e=>Rr(e)&&dn(e.then)&&dn(e.catch),hw=Object.prototype.toString,sy=e=>hw.call(e),ur=e=>sy(e)==="[object Object]",IP=e=>e==null?"":xn(e)||ur(e)&&e.toString===hw?JSON.stringify(e,null,2):String(e);function ay(e,t=""){return e.reduce((i,c,p)=>p===0?i+c:i+t+c,"")}function MP(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const qf=e=>!Rr(e)||xn(e);function cp(e,t){if(qf(e)||qf(t))throw new Error("Invalid value");const i=[{src:e,des:t}];for(;i.length;){const{src:c,des:p}=i.pop();Object.keys(c).forEach(g=>{g!=="__proto__"&&(Rr(c[g])&&!Rr(p[g])&&(p[g]=Array.isArray(c[g])?[]:Kr()),qf(p[g])||qf(c[g])?p[g]=c[g]:i.push({src:c[g],des:p[g]}))})}}/*!
  * message-compiler v10.0.6
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function EP(e,t,i){return{line:e,column:t,offset:i}}function c_(e,t,i){return{start:e,end:t}}const Ur={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},AP=17;function Kp(e,t,i={}){const{domain:c,messages:p,args:g}=i,m=e,l=new SyntaxError(String(m));return l.code=e,t&&(l.location=t),l.domain=c,l}function LP(e){throw e}const Is=" ",RP="\r",Ti=`
`,DP="\u2028",OP="\u2029";function zP(e){const t=e;let i=0,c=1,p=1,g=0;const m=ke=>t[ke]===RP&&t[ke+1]===Ti,l=ke=>t[ke]===Ti,S=ke=>t[ke]===OP,I=ke=>t[ke]===DP,A=ke=>m(ke)||l(ke)||S(ke)||I(ke),O=()=>i,z=()=>c,D=()=>p,H=()=>g,ue=ke=>m(ke)||S(ke)||I(ke)?Ti:t[ke],ye=()=>ue(i),ne=()=>ue(i+g);function xe(){return g=0,A(i)&&(c++,p=0),m(i)&&i++,i++,p++,t[i]}function Ce(){return m(i+g)&&g++,g++,t[i+g]}function X(){i=0,c=1,p=1,g=0}function we(ke=0){g=ke}function Oe(){const ke=i+g;for(;ke!==i;)xe();g=0}return{index:O,line:z,column:D,peekOffset:H,charAt:ue,currentChar:ye,currentPeek:ne,next:xe,peek:Ce,reset:X,resetPeek:we,skipToPeek:Oe}}const fa=void 0,$P=".",Qb="'",BP="tokenizer";function FP(e,t={}){const i=t.location!==!1,c=zP(e),p=()=>c.index(),g=()=>EP(c.line(),c.column(),c.index()),m=g(),l=p(),S={currentType:13,offset:l,startLoc:m,endLoc:m,lastType:13,lastOffset:l,lastStartLoc:m,lastEndLoc:m,braceNest:0,inLinked:!1,text:""},I=()=>S,{onError:A}=t;function O(te,se,Pe,...Be){const xt=I();if(se.column+=Pe,se.offset+=Pe,A){const it=i?c_(xt.startLoc,se):null,Me=Kp(te,it,{domain:BP,args:Be});A(Me)}}function z(te,se,Pe){te.endLoc=g(),te.currentType=se;const Be={type:se};return i&&(Be.loc=c_(te.startLoc,te.endLoc)),Pe!=null&&(Be.value=Pe),Be}const D=te=>z(te,13);function H(te,se){return te.currentChar()===se?(te.next(),se):(O(Ur.EXPECTED_TOKEN,g(),0,se),"")}function ue(te){let se="";for(;te.currentPeek()===Is||te.currentPeek()===Ti;)se+=te.currentPeek(),te.peek();return se}function ye(te){const se=ue(te);return te.skipToPeek(),se}function ne(te){if(te===fa)return!1;const se=te.charCodeAt(0);return se>=97&&se<=122||se>=65&&se<=90||se===95}function xe(te){if(te===fa)return!1;const se=te.charCodeAt(0);return se>=48&&se<=57}function Ce(te,se){const{currentType:Pe}=se;if(Pe!==2)return!1;ue(te);const Be=ne(te.currentPeek());return te.resetPeek(),Be}function X(te,se){const{currentType:Pe}=se;if(Pe!==2)return!1;ue(te);const Be=te.currentPeek()==="-"?te.peek():te.currentPeek(),xt=xe(Be);return te.resetPeek(),xt}function we(te,se){const{currentType:Pe}=se;if(Pe!==2)return!1;ue(te);const Be=te.currentPeek()===Qb;return te.resetPeek(),Be}function Oe(te,se){const{currentType:Pe}=se;if(Pe!==7)return!1;ue(te);const Be=te.currentPeek()===".";return te.resetPeek(),Be}function ke(te,se){const{currentType:Pe}=se;if(Pe!==8)return!1;ue(te);const Be=ne(te.currentPeek());return te.resetPeek(),Be}function Ve(te,se){const{currentType:Pe}=se;if(!(Pe===7||Pe===11))return!1;ue(te);const Be=te.currentPeek()===":";return te.resetPeek(),Be}function We(te,se){const{currentType:Pe}=se;if(Pe!==9)return!1;const Be=()=>{const it=te.currentPeek();return it==="{"?ne(te.peek()):it==="@"||it==="|"||it===":"||it==="."||it===Is||!it?!1:it===Ti?(te.peek(),Be()):Qe(te,!1)},xt=Be();return te.resetPeek(),xt}function ft(te){ue(te);const se=te.currentPeek()==="|";return te.resetPeek(),se}function Qe(te,se=!0){const Pe=(xt=!1,it="")=>{const Me=te.currentPeek();return Me==="{"||Me==="@"||!Me?xt:Me==="|"?!(it===Is||it===Ti):Me===Is?(te.peek(),Pe(!0,Is)):Me===Ti?(te.peek(),Pe(!0,Ti)):!0},Be=Pe();return se&&te.resetPeek(),Be}function Ye(te,se){const Pe=te.currentChar();return Pe===fa?fa:se(Pe)?(te.next(),Pe):null}function Xe(te){const se=te.charCodeAt(0);return se>=97&&se<=122||se>=65&&se<=90||se>=48&&se<=57||se===95||se===36}function wt(te){return Ye(te,Xe)}function Kt(te){const se=te.charCodeAt(0);return se>=97&&se<=122||se>=65&&se<=90||se>=48&&se<=57||se===95||se===36||se===45}function vt(te){return Ye(te,Kt)}function At(te){const se=te.charCodeAt(0);return se>=48&&se<=57}function Ut(te){return Ye(te,At)}function et(te){const se=te.charCodeAt(0);return se>=48&&se<=57||se>=65&&se<=70||se>=97&&se<=102}function mt(te){return Ye(te,et)}function nt(te){let se="",Pe="";for(;se=Ut(te);)Pe+=se;return Pe}function bt(te){let se="";for(;;){const Pe=te.currentChar();if(Pe==="{"||Pe==="}"||Pe==="@"||Pe==="|"||!Pe)break;if(Pe===Is||Pe===Ti)if(Qe(te))se+=Pe,te.next();else{if(ft(te))break;se+=Pe,te.next()}else se+=Pe,te.next()}return se}function ir(te){ye(te);let se="",Pe="";for(;se=vt(te);)Pe+=se;return te.currentChar()===fa&&O(Ur.UNTERMINATED_CLOSING_BRACE,g(),0),Pe}function Jt(te){ye(te);let se="";return te.currentChar()==="-"?(te.next(),se+=`-${nt(te)}`):se+=nt(te),te.currentChar()===fa&&O(Ur.UNTERMINATED_CLOSING_BRACE,g(),0),se}function Qt(te){return te!==Qb&&te!==Ti}function lr(te){ye(te),H(te,"'");let se="",Pe="";for(;se=Ye(te,Qt);)se==="\\"?Pe+=Yr(te):Pe+=se;const Be=te.currentChar();return Be===Ti||Be===fa?(O(Ur.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,g(),0),Be===Ti&&(te.next(),H(te,"'")),Pe):(H(te,"'"),Pe)}function Yr(te){const se=te.currentChar();switch(se){case"\\":case"'":return te.next(),`\\${se}`;case"u":return tn(te,se,4);case"U":return tn(te,se,6);default:return O(Ur.UNKNOWN_ESCAPE_SEQUENCE,g(),0,se),""}}function tn(te,se,Pe){H(te,se);let Be="";for(let xt=0;xt<Pe;xt++){const it=mt(te);if(!it){O(Ur.INVALID_UNICODE_ESCAPE_SEQUENCE,g(),0,`\\${se}${Be}${te.currentChar()}`);break}Be+=it}return`\\${se}${Be}`}function Pr(te){return te!=="{"&&te!=="}"&&te!==Is&&te!==Ti}function Gr(te){ye(te);let se="",Pe="";for(;se=Ye(te,Pr);)Pe+=se;return Pe}function Dr(te){let se="",Pe="";for(;se=wt(te);)Pe+=se;return Pe}function ce(te){const se=Pe=>{const Be=te.currentChar();return Be==="{"||Be==="@"||Be==="|"||Be==="("||Be===")"||!Be||Be===Is?Pe:(Pe+=Be,te.next(),se(Pe))};return se("")}function ge(te){ye(te);const se=H(te,"|");return ye(te),se}function Le(te,se){let Pe=null;switch(te.currentChar()){case"{":return se.braceNest>=1&&O(Ur.NOT_ALLOW_NEST_PLACEHOLDER,g(),0),te.next(),Pe=z(se,2,"{"),ye(te),se.braceNest++,Pe;case"}":return se.braceNest>0&&se.currentType===2&&O(Ur.EMPTY_PLACEHOLDER,g(),0),te.next(),Pe=z(se,3,"}"),se.braceNest--,se.braceNest>0&&ye(te),se.inLinked&&se.braceNest===0&&(se.inLinked=!1),Pe;case"@":return se.braceNest>0&&O(Ur.UNTERMINATED_CLOSING_BRACE,g(),0),Pe=ut(te,se)||D(se),se.braceNest=0,Pe;default:{let xt=!0,it=!0,Me=!0;if(ft(te))return se.braceNest>0&&O(Ur.UNTERMINATED_CLOSING_BRACE,g(),0),Pe=z(se,1,ge(te)),se.braceNest=0,se.inLinked=!1,Pe;if(se.braceNest>0&&(se.currentType===4||se.currentType===5||se.currentType===6))return O(Ur.UNTERMINATED_CLOSING_BRACE,g(),0),se.braceNest=0,st(te,se);if(xt=Ce(te,se))return Pe=z(se,4,ir(te)),ye(te),Pe;if(it=X(te,se))return Pe=z(se,5,Jt(te)),ye(te),Pe;if(Me=we(te,se))return Pe=z(se,6,lr(te)),ye(te),Pe;if(!xt&&!it&&!Me)return Pe=z(se,12,Gr(te)),O(Ur.INVALID_TOKEN_IN_PLACEHOLDER,g(),0,Pe.value),ye(te),Pe;break}}return Pe}function ut(te,se){const{currentType:Pe}=se;let Be=null;const xt=te.currentChar();switch((Pe===7||Pe===8||Pe===11||Pe===9)&&(xt===Ti||xt===Is)&&O(Ur.INVALID_LINKED_FORMAT,g(),0),xt){case"@":return te.next(),Be=z(se,7,"@"),se.inLinked=!0,Be;case".":return ye(te),te.next(),z(se,8,".");case":":return ye(te),te.next(),z(se,9,":");default:return ft(te)?(Be=z(se,1,ge(te)),se.braceNest=0,se.inLinked=!1,Be):Oe(te,se)||Ve(te,se)?(ye(te),ut(te,se)):ke(te,se)?(ye(te),z(se,11,Dr(te))):We(te,se)?(ye(te),xt==="{"?Le(te,se)||Be:z(se,10,ce(te))):(Pe===7&&O(Ur.INVALID_LINKED_FORMAT,g(),0),se.braceNest=0,se.inLinked=!1,st(te,se))}}function st(te,se){let Pe={type:13};if(se.braceNest>0)return Le(te,se)||D(se);if(se.inLinked)return ut(te,se)||D(se);switch(te.currentChar()){case"{":return Le(te,se)||D(se);case"}":return O(Ur.UNBALANCED_CLOSING_BRACE,g(),0),te.next(),z(se,3,"}");case"@":return ut(te,se)||D(se);default:{if(ft(te))return Pe=z(se,1,ge(te)),se.braceNest=0,se.inLinked=!1,Pe;if(Qe(te))return z(se,0,bt(te));break}}return Pe}function ct(){const{currentType:te,offset:se,startLoc:Pe,endLoc:Be}=S;return S.lastType=te,S.lastOffset=se,S.lastStartLoc=Pe,S.lastEndLoc=Be,S.offset=p(),S.startLoc=g(),c.currentChar()===fa?z(S,13):st(c,S)}return{nextToken:ct,currentOffset:p,currentPosition:g,context:I}}const NP="parser",jP=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function VP(e,t,i){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const c=parseInt(t||i,16);return c<=55295||c>=57344?String.fromCodePoint(c):"�"}}}function UP(e={}){const t=e.location!==!1,{onError:i}=e;function c(ne,xe,Ce,X,...we){const Oe=ne.currentPosition();if(Oe.offset+=X,Oe.column+=X,i){const ke=t?c_(Ce,Oe):null,Ve=Kp(xe,ke,{domain:NP,args:we});i(Ve)}}function p(ne,xe,Ce){const X={type:ne};return t&&(X.start=xe,X.end=xe,X.loc={start:Ce,end:Ce}),X}function g(ne,xe,Ce,X){t&&(ne.end=xe,ne.loc&&(ne.loc.end=Ce))}function m(ne,xe){const Ce=ne.context(),X=p(3,Ce.offset,Ce.startLoc);return X.value=xe,g(X,ne.currentOffset(),ne.currentPosition()),X}function l(ne,xe){const Ce=ne.context(),{lastOffset:X,lastStartLoc:we}=Ce,Oe=p(5,X,we);return Oe.index=parseInt(xe,10),ne.nextToken(),g(Oe,ne.currentOffset(),ne.currentPosition()),Oe}function S(ne,xe){const Ce=ne.context(),{lastOffset:X,lastStartLoc:we}=Ce,Oe=p(4,X,we);return Oe.key=xe,ne.nextToken(),g(Oe,ne.currentOffset(),ne.currentPosition()),Oe}function I(ne,xe){const Ce=ne.context(),{lastOffset:X,lastStartLoc:we}=Ce,Oe=p(9,X,we);return Oe.value=xe.replace(jP,VP),ne.nextToken(),g(Oe,ne.currentOffset(),ne.currentPosition()),Oe}function A(ne){const xe=ne.nextToken(),Ce=ne.context(),{lastOffset:X,lastStartLoc:we}=Ce,Oe=p(8,X,we);return xe.type!==11?(c(ne,Ur.UNEXPECTED_EMPTY_LINKED_MODIFIER,Ce.lastStartLoc,0),Oe.value="",g(Oe,X,we),{nextConsumeToken:xe,node:Oe}):(xe.value==null&&c(ne,Ur.UNEXPECTED_LEXICAL_ANALYSIS,Ce.lastStartLoc,0,Yo(xe)),Oe.value=xe.value||"",g(Oe,ne.currentOffset(),ne.currentPosition()),{node:Oe})}function O(ne,xe){const Ce=ne.context(),X=p(7,Ce.offset,Ce.startLoc);return X.value=xe,g(X,ne.currentOffset(),ne.currentPosition()),X}function z(ne){const xe=ne.context(),Ce=p(6,xe.offset,xe.startLoc);let X=ne.nextToken();if(X.type===8){const we=A(ne);Ce.modifier=we.node,X=we.nextConsumeToken||ne.nextToken()}switch(X.type!==9&&c(ne,Ur.UNEXPECTED_LEXICAL_ANALYSIS,xe.lastStartLoc,0,Yo(X)),X=ne.nextToken(),X.type===2&&(X=ne.nextToken()),X.type){case 10:X.value==null&&c(ne,Ur.UNEXPECTED_LEXICAL_ANALYSIS,xe.lastStartLoc,0,Yo(X)),Ce.key=O(ne,X.value||"");break;case 4:X.value==null&&c(ne,Ur.UNEXPECTED_LEXICAL_ANALYSIS,xe.lastStartLoc,0,Yo(X)),Ce.key=S(ne,X.value||"");break;case 5:X.value==null&&c(ne,Ur.UNEXPECTED_LEXICAL_ANALYSIS,xe.lastStartLoc,0,Yo(X)),Ce.key=l(ne,X.value||"");break;case 6:X.value==null&&c(ne,Ur.UNEXPECTED_LEXICAL_ANALYSIS,xe.lastStartLoc,0,Yo(X)),Ce.key=I(ne,X.value||"");break;default:{c(ne,Ur.UNEXPECTED_EMPTY_LINKED_KEY,xe.lastStartLoc,0);const we=ne.context(),Oe=p(7,we.offset,we.startLoc);return Oe.value="",g(Oe,we.offset,we.startLoc),Ce.key=Oe,g(Ce,we.offset,we.startLoc),{nextConsumeToken:X,node:Ce}}}return g(Ce,ne.currentOffset(),ne.currentPosition()),{node:Ce}}function D(ne){const xe=ne.context(),Ce=xe.currentType===1?ne.currentOffset():xe.offset,X=xe.currentType===1?xe.endLoc:xe.startLoc,we=p(2,Ce,X);we.items=[];let Oe=null;do{const We=Oe||ne.nextToken();switch(Oe=null,We.type){case 0:We.value==null&&c(ne,Ur.UNEXPECTED_LEXICAL_ANALYSIS,xe.lastStartLoc,0,Yo(We)),we.items.push(m(ne,We.value||""));break;case 5:We.value==null&&c(ne,Ur.UNEXPECTED_LEXICAL_ANALYSIS,xe.lastStartLoc,0,Yo(We)),we.items.push(l(ne,We.value||""));break;case 4:We.value==null&&c(ne,Ur.UNEXPECTED_LEXICAL_ANALYSIS,xe.lastStartLoc,0,Yo(We)),we.items.push(S(ne,We.value||""));break;case 6:We.value==null&&c(ne,Ur.UNEXPECTED_LEXICAL_ANALYSIS,xe.lastStartLoc,0,Yo(We)),we.items.push(I(ne,We.value||""));break;case 7:{const ft=z(ne);we.items.push(ft.node),Oe=ft.nextConsumeToken||null;break}}}while(xe.currentType!==13&&xe.currentType!==1);const ke=xe.currentType===1?xe.lastOffset:ne.currentOffset(),Ve=xe.currentType===1?xe.lastEndLoc:ne.currentPosition();return g(we,ke,Ve),we}function H(ne,xe,Ce,X){const we=ne.context();let Oe=X.items.length===0;const ke=p(1,xe,Ce);ke.cases=[],ke.cases.push(X);do{const Ve=D(ne);Oe||(Oe=Ve.items.length===0),ke.cases.push(Ve)}while(we.currentType!==13);return Oe&&c(ne,Ur.MUST_HAVE_MESSAGES_IN_PLURAL,Ce,0),g(ke,ne.currentOffset(),ne.currentPosition()),ke}function ue(ne){const xe=ne.context(),{offset:Ce,startLoc:X}=xe,we=D(ne);return xe.currentType===13?we:H(ne,Ce,X,we)}function ye(ne){const xe=FP(ne,Yn({},e)),Ce=xe.context(),X=p(0,Ce.offset,Ce.startLoc);return t&&X.loc&&(X.loc.source=ne),X.body=ue(xe),e.onCacheKey&&(X.cacheKey=e.onCacheKey(ne)),Ce.currentType!==13&&c(xe,Ur.UNEXPECTED_LEXICAL_ANALYSIS,Ce.lastStartLoc,0,ne[Ce.offset]||""),g(X,xe.currentOffset(),xe.currentPosition()),X}return{parse:ye}}function Yo(e){if(e.type===13)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function ZP(e,t={}){const i={ast:e,helpers:new Set};return{context:()=>i,helper:g=>(i.helpers.add(g),g)}}function ev(e,t){for(let i=0;i<e.length;i++)ly(e[i],t)}function ly(e,t){switch(e.type){case 1:ev(e.cases,t),t.helper("plural");break;case 2:ev(e.items,t);break;case 6:{ly(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function GP(e,t={}){const i=ZP(e);i.helper("normalize"),e.body&&ly(e.body,i);const c=i.context();e.helpers=Array.from(c.helpers)}function WP(e){const t=e.body;return t.type===2?tv(t):t.cases.forEach(i=>tv(i)),e}function tv(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let i=0;i<e.items.length;i++){const c=e.items[i];if(!(c.type===3||c.type===9)||c.value==null)break;t.push(c.value)}if(t.length===e.items.length){e.static=ay(t);for(let i=0;i<e.items.length;i++){const c=e.items[i];(c.type===3||c.type===9)&&delete c.value}}}}function Dc(e){switch(e.t=e.type,e.type){case 0:{const t=e;Dc(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,i=t.cases;for(let c=0;c<i.length;c++)Dc(i[c]);t.c=i,delete t.cases;break}case 2:{const t=e,i=t.items;for(let c=0;c<i.length;c++)Dc(i[c]);t.i=i,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;Dc(t.key),t.k=t.key,delete t.key,t.modifier&&(Dc(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}}delete e.type}function HP(e,t){const{filename:i,breakLineCode:c,needIndent:p}=t,g=t.location!==!1,m={filename:i,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:c,needIndent:p,indentLevel:0};g&&e.loc&&(m.source=e.loc.source);const l=()=>m;function S(ue,ye){m.code+=ue}function I(ue,ye=!0){const ne=ye?c:"";S(p?ne+"  ".repeat(ue):ne)}function A(ue=!0){const ye=++m.indentLevel;ue&&I(ye)}function O(ue=!0){const ye=--m.indentLevel;ue&&I(ye)}function z(){I(m.indentLevel)}return{context:l,push:S,indent:A,deindent:O,newline:z,helper:ue=>`_${ue}`,needIndent:()=>m.needIndent}}function qP(e,t){const{helper:i}=e;e.push(`${i("linked")}(`),qc(e,t.key),t.modifier?(e.push(", "),qc(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function KP(e,t){const{helper:i,needIndent:c}=e;e.push(`${i("normalize")}([`),e.indent(c());const p=t.items.length;for(let g=0;g<p&&(qc(e,t.items[g]),g!==p-1);g++)e.push(", ");e.deindent(c()),e.push("])")}function YP(e,t){const{helper:i,needIndent:c}=e;if(t.cases.length>1){e.push(`${i("plural")}([`),e.indent(c());const p=t.cases.length;for(let g=0;g<p&&(qc(e,t.cases[g]),g!==p-1);g++)e.push(", ");e.deindent(c()),e.push("])")}}function XP(e,t){t.body?qc(e,t.body):e.push("null")}function qc(e,t){const{helper:i}=e;switch(t.type){case 0:XP(e,t);break;case 1:YP(e,t);break;case 2:KP(e,t);break;case 6:qP(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${i("interpolate")}(${i("list")}(${t.index}))`,t);break;case 4:e.push(`${i("interpolate")}(${i("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const JP=(e,t={})=>{const i=Lt(t.mode)?t.mode:"normal",c=Lt(t.filename)?t.filename:"message.intl";t.sourceMap;const p=t.breakLineCode!=null?t.breakLineCode:i==="arrow"?";":`
`,g=t.needIndent?t.needIndent:i!=="arrow",m=e.helpers||[],l=HP(e,{filename:c,breakLineCode:p,needIndent:g});l.push(i==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(g),m.length>0&&(l.push(`const { ${ay(m.map(A=>`${A}: _${A}`),", ")} } = ctx`),l.newline()),l.push("return "),qc(l,e),l.deindent(g),l.push("}"),delete e.helpers;const{code:S,map:I}=l.context();return{ast:e,code:S,map:I?I.toJSON():void 0}};function QP(e,t={}){const i=Yn({},t),c=!!i.jit,p=!!i.minify,g=i.optimize==null?!0:i.optimize,l=UP(i).parse(e);return c?(g&&WP(l),p&&Dc(l),{ast:l,code:""}):(GP(l,i),JP(l,i))}/*!
  * core-base v10.0.6
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function eI(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(fl().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(fl().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function Rg(e){return i=>tI(i,e)}function tI(e,t){const i=nI(t);if(i==null)throw Xd(0);if(cy(i)===1){const g=oI(i);return e.plural(g.reduce((m,l)=>[...m,rv(e,l)],[]))}else return rv(e,i)}const rI=["b","body"];function nI(e){return Ea(e,rI)}const iI=["c","cases"];function oI(e){return Ea(e,iI,[])}function rv(e,t){const i=aI(t);if(i!=null)return e.type==="text"?i:e.normalize([i]);{const c=cI(t).reduce((p,g)=>[...p,u_(e,g)],[]);return e.normalize(c)}}const sI=["s","static"];function aI(e){return Ea(e,sI)}const lI=["i","items"];function cI(e){return Ea(e,lI,[])}function u_(e,t){const i=cy(t);switch(i){case 3:return Kf(t,i);case 9:return Kf(t,i);case 4:{const c=t;if(Lo(c,"k")&&c.k)return e.interpolate(e.named(c.k));if(Lo(c,"key")&&c.key)return e.interpolate(e.named(c.key));throw Xd(i)}case 5:{const c=t;if(Lo(c,"i")&&En(c.i))return e.interpolate(e.list(c.i));if(Lo(c,"index")&&En(c.index))return e.interpolate(e.list(c.index));throw Xd(i)}case 6:{const c=t,p=fI(c),g=mI(c);return e.linked(u_(e,g),p?u_(e,p):void 0,e.type)}case 7:return Kf(t,i);case 8:return Kf(t,i);default:throw new Error(`unhandled node on format message part: ${i}`)}}const uI=["t","type"];function cy(e){return Ea(e,uI)}const dI=["v","value"];function Kf(e,t){const i=Ea(e,dI);if(i)return i;throw Xd(t)}const hI=["m","modifier"];function fI(e){return Ea(e,hI)}const pI=["k","key"];function mI(e){const t=Ea(e,pI);if(t)return t;throw Xd(6)}function Ea(e,t,i){for(let c=0;c<t.length;c++){const p=t[c];if(Lo(e,p)&&e[p]!=null)return e[p]}return i}function Xd(e){return new Error(`unhandled node type: ${e}`)}const gI=e=>e;let Yf=Kr();function Kc(e){return Rr(e)&&cy(e)===0&&(Lo(e,"b")||Lo(e,"body"))}function _I(e,t={}){let i=!1;const c=t.onError||LP;return t.onError=p=>{i=!0,c(p)},{...QP(e,t),detectError:i}}function yI(e,t){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&Lt(e)){kr(t.warnHtmlMessage)&&t.warnHtmlMessage;const c=(t.onCacheKey||gI)(e),p=Yf[c];if(p)return p;const{ast:g,detectError:m}=_I(e,{...t,location:!1,jit:!0}),l=Rg(g);return m?l:Yf[c]=l}else{const i=e.cacheKey;if(i){const c=Yf[i];return c||(Yf[i]=Rg(e))}else return Rg(e)}}let Jd=null;function bI(e){Jd=e}function vI(e,t,i){Jd&&Jd.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:i})}const xI=wI("function:translate");function wI(e){return t=>Jd&&Jd.emit(e,t)}const Ds={INVALID_ARGUMENT:AP,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},CI=24;function Os(e){return Kp(e,null,void 0)}function uy(e,t){return t.locale!=null?nv(t.locale):nv(e.locale)}let Dg;function nv(e){if(Lt(e))return e;if(dn(e)){if(e.resolvedOnce&&Dg!=null)return Dg;if(e.constructor.name==="Function"){const t=e();if(PP(t))throw Os(Ds.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Dg=t}else throw Os(Ds.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Os(Ds.NOT_SUPPORT_LOCALE_TYPE)}function SI(e,t,i){return[...new Set([i,...xn(t)?t:Rr(t)?Object.keys(t):Lt(t)?[t]:[i]])]}function fw(e,t,i){const c=Lt(i)?i:Qd,p=e;p.__localeChainCache||(p.__localeChainCache=new Map);let g=p.__localeChainCache.get(c);if(!g){g=[];let m=[i];for(;xn(m);)m=iv(g,m,t);const l=xn(t)||!ur(t)?t:t.default?t.default:null;m=Lt(l)?[l]:l,xn(m)&&iv(g,m,!1),p.__localeChainCache.set(c,g)}return g}function iv(e,t,i){let c=!0;for(let p=0;p<t.length&&kr(c);p++){const g=t[p];Lt(g)&&(c=kI(e,t[p],i))}return c}function kI(e,t,i){let c;const p=t.split("-");do{const g=p.join("-");c=TI(e,g,i),p.splice(-1,1)}while(p.length&&c===!0);return c}function TI(e,t,i){let c=!1;if(!e.includes(t)&&(c=!0,t)){c=t[t.length-1]!=="!";const p=t.replace(/!/g,"");e.push(p),(xn(i)||ur(i))&&i[p]&&(c=i[p])}return c}const Aa=[];Aa[0]={w:[0],i:[3,0],"[":[4],o:[7]};Aa[1]={w:[1],".":[2],"[":[4],o:[7]};Aa[2]={w:[2],i:[3,0],0:[3,0]};Aa[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Aa[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Aa[5]={"'":[4,0],o:8,l:[5,0]};Aa[6]={'"':[4,0],o:8,l:[6,0]};const PI=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function II(e){return PI.test(e)}function MI(e){const t=e.charCodeAt(0),i=e.charCodeAt(e.length-1);return t===i&&(t===34||t===39)?e.slice(1,-1):e}function EI(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function AI(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:II(t)?MI(t):"*"+t}function LI(e){const t=[];let i=-1,c=0,p=0,g,m,l,S,I,A,O;const z=[];z[0]=()=>{m===void 0?m=l:m+=l},z[1]=()=>{m!==void 0&&(t.push(m),m=void 0)},z[2]=()=>{z[0](),p++},z[3]=()=>{if(p>0)p--,c=4,z[0]();else{if(p=0,m===void 0||(m=AI(m),m===!1))return!1;z[1]()}};function D(){const H=e[i+1];if(c===5&&H==="'"||c===6&&H==='"')return i++,l="\\"+H,z[0](),!0}for(;c!==null;)if(i++,g=e[i],!(g==="\\"&&D())){if(S=EI(g),O=Aa[c],I=O[S]||O.l||8,I===8||(c=I[0],I[1]!==void 0&&(A=z[I[1]],A&&(l=g,A()===!1))))return;if(c===7)return t}}const ov=new Map;function RI(e,t){return Rr(e)?e[t]:null}function DI(e,t){if(!Rr(e))return null;let i=ov.get(t);if(i||(i=LI(t),i&&ov.set(t,i)),!i)return null;const c=i.length;let p=e,g=0;for(;g<c;){const m=p[i[g]];if(m===void 0||dn(p))return null;p=m,g++}return p}const OI="10.0.6",Yp=-1,Qd="en-US",sv="",av=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function zI(){return{upper:(e,t)=>t==="text"&&Lt(e)?e.toUpperCase():t==="vnode"&&Rr(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&Lt(e)?e.toLowerCase():t==="vnode"&&Rr(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&Lt(e)?av(e):t==="vnode"&&Rr(e)&&"__v_isVNode"in e?av(e.children):e}}let pw;function $I(e){pw=e}let mw;function BI(e){mw=e}let gw;function FI(e){gw=e}let _w=null;const NI=e=>{_w=e},jI=()=>_w;let yw=null;const lv=e=>{yw=e},VI=()=>yw;let cv=0;function UI(e={}){const t=dn(e.onWarn)?e.onWarn:MP,i=Lt(e.version)?e.version:OI,c=Lt(e.locale)||dn(e.locale)?e.locale:Qd,p=dn(c)?Qd:c,g=xn(e.fallbackLocale)||ur(e.fallbackLocale)||Lt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:p,m=ur(e.messages)?e.messages:Og(p),l=ur(e.datetimeFormats)?e.datetimeFormats:Og(p),S=ur(e.numberFormats)?e.numberFormats:Og(p),I=Yn(Kr(),e.modifiers,zI()),A=e.pluralRules||Kr(),O=dn(e.missing)?e.missing:null,z=kr(e.missingWarn)||Hc(e.missingWarn)?e.missingWarn:!0,D=kr(e.fallbackWarn)||Hc(e.fallbackWarn)?e.fallbackWarn:!0,H=!!e.fallbackFormat,ue=!!e.unresolving,ye=dn(e.postTranslation)?e.postTranslation:null,ne=ur(e.processor)?e.processor:null,xe=kr(e.warnHtmlMessage)?e.warnHtmlMessage:!0,Ce=!!e.escapeParameter,X=dn(e.messageCompiler)?e.messageCompiler:pw,we=dn(e.messageResolver)?e.messageResolver:mw||RI,Oe=dn(e.localeFallbacker)?e.localeFallbacker:gw||SI,ke=Rr(e.fallbackContext)?e.fallbackContext:void 0,Ve=e,We=Rr(Ve.__datetimeFormatters)?Ve.__datetimeFormatters:new Map,ft=Rr(Ve.__numberFormatters)?Ve.__numberFormatters:new Map,Qe=Rr(Ve.__meta)?Ve.__meta:{};cv++;const Ye={version:i,cid:cv,locale:c,fallbackLocale:g,messages:m,modifiers:I,pluralRules:A,missing:O,missingWarn:z,fallbackWarn:D,fallbackFormat:H,unresolving:ue,postTranslation:ye,processor:ne,warnHtmlMessage:xe,escapeParameter:Ce,messageCompiler:X,messageResolver:we,localeFallbacker:Oe,fallbackContext:ke,onWarn:t,__meta:Qe};return Ye.datetimeFormats=l,Ye.numberFormats=S,Ye.__datetimeFormatters=We,Ye.__numberFormatters=ft,__INTLIFY_PROD_DEVTOOLS__&&vI(Ye,i,Qe),Ye}const Og=e=>({[e]:Kr()});function dy(e,t,i,c,p){const{missing:g,onWarn:m}=e;if(g!==null){const l=g(e,i,t,p);return Lt(l)?l:t}else return t}function wd(e,t,i){const c=e;c.__localeChainCache=new Map,e.localeFallbacker(e,i,t)}function ZI(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function GI(e,t){const i=t.indexOf(e);if(i===-1)return!1;for(let c=i+1;c<t.length;c++)if(ZI(e,t[c]))return!0;return!1}function uv(e,...t){const{datetimeFormats:i,unresolving:c,fallbackLocale:p,onWarn:g,localeFallbacker:m}=e,{__datetimeFormatters:l}=e,[S,I,A,O]=d_(...t),z=kr(A.missingWarn)?A.missingWarn:e.missingWarn;kr(A.fallbackWarn)?A.fallbackWarn:e.fallbackWarn;const D=!!A.part,H=uy(e,A),ue=m(e,p,H);if(!Lt(S)||S==="")return new Intl.DateTimeFormat(H,O).format(I);let ye={},ne,xe=null;const Ce="datetime format";for(let Oe=0;Oe<ue.length&&(ne=ue[Oe],ye=i[ne]||{},xe=ye[S],!ur(xe));Oe++)dy(e,S,ne,z,Ce);if(!ur(xe)||!Lt(ne))return c?Yp:S;let X=`${ne}__${S}`;qp(O)||(X=`${X}__${JSON.stringify(O)}`);let we=l.get(X);return we||(we=new Intl.DateTimeFormat(ne,Yn({},xe,O)),l.set(X,we)),D?we.formatToParts(I):we.format(I)}const bw=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function d_(...e){const[t,i,c,p]=e,g=Kr();let m=Kr(),l;if(Lt(t)){const S=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!S)throw Os(Ds.INVALID_ISO_DATE_ARGUMENT);const I=S[3]?S[3].trim().startsWith("T")?`${S[1].trim()}${S[3].trim()}`:`${S[1].trim()}T${S[3].trim()}`:S[1].trim();l=new Date(I);try{l.toISOString()}catch{throw Os(Ds.INVALID_ISO_DATE_ARGUMENT)}}else if(SP(t)){if(isNaN(t.getTime()))throw Os(Ds.INVALID_DATE_ARGUMENT);l=t}else if(En(t))l=t;else throw Os(Ds.INVALID_ARGUMENT);return Lt(i)?g.key=i:ur(i)&&Object.keys(i).forEach(S=>{bw.includes(S)?m[S]=i[S]:g[S]=i[S]}),Lt(c)?g.locale=c:ur(c)&&(m=c),ur(p)&&(m=p),[g.key||"",l,g,m]}function dv(e,t,i){const c=e;for(const p in i){const g=`${t}__${p}`;c.__datetimeFormatters.has(g)&&c.__datetimeFormatters.delete(g)}}function hv(e,...t){const{numberFormats:i,unresolving:c,fallbackLocale:p,onWarn:g,localeFallbacker:m}=e,{__numberFormatters:l}=e,[S,I,A,O]=h_(...t),z=kr(A.missingWarn)?A.missingWarn:e.missingWarn;kr(A.fallbackWarn)?A.fallbackWarn:e.fallbackWarn;const D=!!A.part,H=uy(e,A),ue=m(e,p,H);if(!Lt(S)||S==="")return new Intl.NumberFormat(H,O).format(I);let ye={},ne,xe=null;const Ce="number format";for(let Oe=0;Oe<ue.length&&(ne=ue[Oe],ye=i[ne]||{},xe=ye[S],!ur(xe));Oe++)dy(e,S,ne,z,Ce);if(!ur(xe)||!Lt(ne))return c?Yp:S;let X=`${ne}__${S}`;qp(O)||(X=`${X}__${JSON.stringify(O)}`);let we=l.get(X);return we||(we=new Intl.NumberFormat(ne,Yn({},xe,O)),l.set(X,we)),D?we.formatToParts(I):we.format(I)}const vw=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function h_(...e){const[t,i,c,p]=e,g=Kr();let m=Kr();if(!En(t))throw Os(Ds.INVALID_ARGUMENT);const l=t;return Lt(i)?g.key=i:ur(i)&&Object.keys(i).forEach(S=>{vw.includes(S)?m[S]=i[S]:g[S]=i[S]}),Lt(c)?g.locale=c:ur(c)&&(m=c),ur(p)&&(m=p),[g.key||"",l,g,m]}function fv(e,t,i){const c=e;for(const p in i){const g=`${t}__${p}`;c.__numberFormatters.has(g)&&c.__numberFormatters.delete(g)}}const WI=e=>e,HI=e=>"",qI="text",KI=e=>e.length===0?"":ay(e),YI=IP;function pv(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function XI(e){const t=En(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(En(e.named.count)||En(e.named.n))?En(e.named.count)?e.named.count:En(e.named.n)?e.named.n:t:t}function JI(e,t){t.count||(t.count=e),t.n||(t.n=e)}function QI(e={}){const t=e.locale,i=XI(e),c=Rr(e.pluralRules)&&Lt(t)&&dn(e.pluralRules[t])?e.pluralRules[t]:pv,p=Rr(e.pluralRules)&&Lt(t)&&dn(e.pluralRules[t])?pv:void 0,g=ne=>ne[c(i,ne.length,p)],m=e.list||[],l=ne=>m[ne],S=e.named||Kr();En(e.pluralIndex)&&JI(i,S);const I=ne=>S[ne];function A(ne,xe){const Ce=dn(e.messages)?e.messages(ne,!!xe):Rr(e.messages)?e.messages[ne]:!1;return Ce||(e.parent?e.parent.message(ne):HI)}const O=ne=>e.modifiers?e.modifiers[ne]:WI,z=ur(e.processor)&&dn(e.processor.normalize)?e.processor.normalize:KI,D=ur(e.processor)&&dn(e.processor.interpolate)?e.processor.interpolate:YI,H=ur(e.processor)&&Lt(e.processor.type)?e.processor.type:qI,ye={list:l,named:I,plural:g,linked:(ne,...xe)=>{const[Ce,X]=xe;let we="text",Oe="";xe.length===1?Rr(Ce)?(Oe=Ce.modifier||Oe,we=Ce.type||we):Lt(Ce)&&(Oe=Ce||Oe):xe.length===2&&(Lt(Ce)&&(Oe=Ce||Oe),Lt(X)&&(we=X||we));const ke=A(ne,!0)(ye),Ve=we==="vnode"&&xn(ke)&&Oe?ke[0]:ke;return Oe?O(Oe)(Ve,we):Ve},message:A,type:H,interpolate:D,normalize:z,values:Yn(Kr(),m,S)};return ye}const mv=()=>"",go=e=>dn(e);function gv(e,...t){const{fallbackFormat:i,postTranslation:c,unresolving:p,messageCompiler:g,fallbackLocale:m,messages:l}=e,[S,I]=f_(...t),A=kr(I.missingWarn)?I.missingWarn:e.missingWarn,O=kr(I.fallbackWarn)?I.fallbackWarn:e.fallbackWarn,z=kr(I.escapeParameter)?I.escapeParameter:e.escapeParameter,D=!!I.resolvedMessage,H=Lt(I.default)||kr(I.default)?kr(I.default)?g?S:()=>S:I.default:i?g?S:()=>S:null,ue=i||H!=null&&(Lt(H)||dn(H)),ye=uy(e,I);z&&eM(I);let[ne,xe,Ce]=D?[S,ye,l[ye]||Kr()]:xw(e,S,ye,m,O,A),X=ne,we=S;if(!D&&!(Lt(X)||Kc(X)||go(X))&&ue&&(X=H,we=X),!D&&(!(Lt(X)||Kc(X)||go(X))||!Lt(xe)))return p?Yp:S;let Oe=!1;const ke=()=>{Oe=!0},Ve=go(X)?X:ww(e,S,xe,X,we,ke);if(Oe)return X;const We=nM(e,xe,Ce,I),ft=QI(We),Qe=tM(e,Ve,ft),Ye=c?c(Qe,S):Qe;if(__INTLIFY_PROD_DEVTOOLS__){const Xe={timestamp:Date.now(),key:Lt(S)?S:go(X)?X.key:"",locale:xe||(go(X)?X.locale:""),format:Lt(X)?X:go(X)?X.source:"",message:Ye};Xe.meta=Yn({},e.__meta,jI()||{}),xI(Xe)}return Ye}function eM(e){xn(e.list)?e.list=e.list.map(t=>Lt(t)?Jb(t):t):Rr(e.named)&&Object.keys(e.named).forEach(t=>{Lt(e.named[t])&&(e.named[t]=Jb(e.named[t]))})}function xw(e,t,i,c,p,g){const{messages:m,onWarn:l,messageResolver:S,localeFallbacker:I}=e,A=I(e,c,i);let O=Kr(),z,D=null;const H="translate";for(let ue=0;ue<A.length&&(z=A[ue],O=m[z]||Kr(),(D=S(O,t))===null&&(D=O[t]),!(Lt(D)||Kc(D)||go(D)));ue++)if(!GI(z,A)){const ye=dy(e,t,z,g,H);ye!==t&&(D=ye)}return[D,z,O]}function ww(e,t,i,c,p,g){const{messageCompiler:m,warnHtmlMessage:l}=e;if(go(c)){const I=c;return I.locale=I.locale||i,I.key=I.key||t,I}if(m==null){const I=()=>c;return I.locale=i,I.key=t,I}const S=m(c,rM(e,i,p,c,l,g));return S.locale=i,S.key=t,S.source=c,S}function tM(e,t,i){return t(i)}function f_(...e){const[t,i,c]=e,p=Kr();if(!Lt(t)&&!En(t)&&!go(t)&&!Kc(t))throw Os(Ds.INVALID_ARGUMENT);const g=En(t)?String(t):(go(t),t);return En(i)?p.plural=i:Lt(i)?p.default=i:ur(i)&&!qp(i)?p.named=i:xn(i)&&(p.list=i),En(c)?p.plural=c:Lt(c)?p.default=c:ur(c)&&Yn(p,c),[g,p]}function rM(e,t,i,c,p,g){return{locale:t,key:i,warnHtmlMessage:p,onError:m=>{throw g&&g(m),m},onCacheKey:m=>wP(t,i,m)}}function nM(e,t,i,c){const{modifiers:p,pluralRules:g,messageResolver:m,fallbackLocale:l,fallbackWarn:S,missingWarn:I,fallbackContext:A}=e,z={locale:t,modifiers:p,pluralRules:g,messages:(D,H)=>{let ue=m(i,D);if(ue==null&&(A||H)){const[,,ye]=xw(A||e,D,t,l,S,I);ue=m(ye,D)}if(Lt(ue)||Kc(ue)){let ye=!1;const xe=ww(e,D,t,ue,D,()=>{ye=!0});return ye?mv:xe}else return go(ue)?ue:mv}};return e.processor&&(z.processor=e.processor),c.list&&(z.list=c.list),c.named&&(z.named=c.named),En(c.plural)&&(z.pluralIndex=c.plural),z}eI();/*!
  * vue-i18n v10.0.6
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const iM="10.0.6";function oM(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(fl().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(fl().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(fl().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(fl().__INTLIFY_PROD_DEVTOOLS__=!1)}const Ai={UNEXPECTED_RETURN_TYPE:CI,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function Wi(e,...t){return Kp(e,null,void 0)}const p_=Ma("__translateVNode"),m_=Ma("__datetimeParts"),g_=Ma("__numberParts"),Cw=Ma("__setPluralRules"),Sw=Ma("__injectWithOption"),__=Ma("__dispose");function eh(e){if(!Rr(e))return e;for(const t in e)if(Lo(e,t))if(!t.includes("."))Rr(e[t])&&eh(e[t]);else{const i=t.split("."),c=i.length-1;let p=e,g=!1;for(let m=0;m<c;m++){if(i[m]==="__proto__")throw new Error(`unsafe key: ${i[m]}`);if(i[m]in p||(p[i[m]]=Kr()),!Rr(p[i[m]])){g=!0;break}p=p[i[m]]}g||(p[i[c]]=e[t],delete e[t]),Rr(p[i[c]])&&eh(p[i[c]])}return e}function hy(e,t){const{messages:i,__i18n:c,messageResolver:p,flatJson:g}=t,m=ur(i)?i:xn(c)?Kr():{[e]:Kr()};if(xn(c)&&c.forEach(l=>{if("locale"in l&&"resource"in l){const{locale:S,resource:I}=l;S?(m[S]=m[S]||Kr(),cp(I,m[S])):cp(I,m)}else Lt(l)&&cp(JSON.parse(l),m)}),p==null&&g)for(const l in m)Lo(m,l)&&eh(m[l]);return m}function kw(e){return e.type}function Tw(e,t,i){let c=Rr(t.messages)?t.messages:Kr();"__i18nGlobal"in i&&(c=hy(e.locale.value,{messages:c,__i18n:i.__i18nGlobal}));const p=Object.keys(c);p.length&&p.forEach(g=>{e.mergeLocaleMessage(g,c[g])});{if(Rr(t.datetimeFormats)){const g=Object.keys(t.datetimeFormats);g.length&&g.forEach(m=>{e.mergeDateTimeFormat(m,t.datetimeFormats[m])})}if(Rr(t.numberFormats)){const g=Object.keys(t.numberFormats);g.length&&g.forEach(m=>{e.mergeNumberFormat(m,t.numberFormats[m])})}}}function _v(e){return br(Ch,null,e,0)}const yv="__INTLIFY_META__",bv=()=>[],sM=()=>!1;let vv=0;function xv(e){return(t,i,c,p)=>e(i,c,zo()||void 0,p)}const aM=()=>{const e=zo();let t=null;return e&&(t=kw(e)[yv])?{[yv]:t}:null};function fy(e={}){const{__root:t,__injectWithOption:i}=e,c=t===void 0,p=e.flatJson,g=vp?on:Ca;let m=kr(e.inheritLocale)?e.inheritLocale:!0;const l=g(t&&m?t.locale.value:Lt(e.locale)?e.locale:Qd),S=g(t&&m?t.fallbackLocale.value:Lt(e.fallbackLocale)||xn(e.fallbackLocale)||ur(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:l.value),I=g(hy(l.value,e)),A=g(ur(e.datetimeFormats)?e.datetimeFormats:{[l.value]:{}}),O=g(ur(e.numberFormats)?e.numberFormats:{[l.value]:{}});let z=t?t.missingWarn:kr(e.missingWarn)||Hc(e.missingWarn)?e.missingWarn:!0,D=t?t.fallbackWarn:kr(e.fallbackWarn)||Hc(e.fallbackWarn)?e.fallbackWarn:!0,H=t?t.fallbackRoot:kr(e.fallbackRoot)?e.fallbackRoot:!0,ue=!!e.fallbackFormat,ye=dn(e.missing)?e.missing:null,ne=dn(e.missing)?xv(e.missing):null,xe=dn(e.postTranslation)?e.postTranslation:null,Ce=t?t.warnHtmlMessage:kr(e.warnHtmlMessage)?e.warnHtmlMessage:!0,X=!!e.escapeParameter;const we=t?t.modifiers:ur(e.modifiers)?e.modifiers:{};let Oe=e.pluralRules||t&&t.pluralRules,ke;ke=(()=>{c&&lv(null);const Me={version:iM,locale:l.value,fallbackLocale:S.value,messages:I.value,modifiers:we,pluralRules:Oe,missing:ne===null?void 0:ne,missingWarn:z,fallbackWarn:D,fallbackFormat:ue,unresolving:!0,postTranslation:xe===null?void 0:xe,warnHtmlMessage:Ce,escapeParameter:X,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};Me.datetimeFormats=A.value,Me.numberFormats=O.value,Me.__datetimeFormatters=ur(ke)?ke.__datetimeFormatters:void 0,Me.__numberFormatters=ur(ke)?ke.__numberFormatters:void 0;const Ze=UI(Me);return c&&lv(Ze),Ze})(),wd(ke,l.value,S.value);function We(){return[l.value,S.value,I.value,A.value,O.value]}const ft=Xt({get:()=>l.value,set:Me=>{l.value=Me,ke.locale=l.value}}),Qe=Xt({get:()=>S.value,set:Me=>{S.value=Me,ke.fallbackLocale=S.value,wd(ke,l.value,Me)}}),Ye=Xt(()=>I.value),Xe=Xt(()=>A.value),wt=Xt(()=>O.value);function Kt(){return dn(xe)?xe:null}function vt(Me){xe=Me,ke.postTranslation=Me}function At(){return ye}function Ut(Me){Me!==null&&(ne=xv(Me)),ye=Me,ke.missing=ne}const et=(Me,Ze,It,Nt,Ht,Fr)=>{We();let Sr;try{__INTLIFY_PROD_DEVTOOLS__,c||(ke.fallbackContext=t?VI():void 0),Sr=Me(ke)}finally{__INTLIFY_PROD_DEVTOOLS__,c||(ke.fallbackContext=void 0)}if(It!=="translate exists"&&En(Sr)&&Sr===Yp||It==="translate exists"&&!Sr){const[Ln,Rn]=Ze();return t&&H?Nt(t):Ht(Ln)}else{if(Fr(Sr))return Sr;throw Wi(Ai.UNEXPECTED_RETURN_TYPE)}};function mt(...Me){return et(Ze=>Reflect.apply(gv,null,[Ze,...Me]),()=>f_(...Me),"translate",Ze=>Reflect.apply(Ze.t,Ze,[...Me]),Ze=>Ze,Ze=>Lt(Ze))}function nt(...Me){const[Ze,It,Nt]=Me;if(Nt&&!Rr(Nt))throw Wi(Ai.INVALID_ARGUMENT);return mt(Ze,It,Yn({resolvedMessage:!0},Nt||{}))}function bt(...Me){return et(Ze=>Reflect.apply(uv,null,[Ze,...Me]),()=>d_(...Me),"datetime format",Ze=>Reflect.apply(Ze.d,Ze,[...Me]),()=>sv,Ze=>Lt(Ze))}function ir(...Me){return et(Ze=>Reflect.apply(hv,null,[Ze,...Me]),()=>h_(...Me),"number format",Ze=>Reflect.apply(Ze.n,Ze,[...Me]),()=>sv,Ze=>Lt(Ze))}function Jt(Me){return Me.map(Ze=>Lt(Ze)||En(Ze)||kr(Ze)?_v(String(Ze)):Ze)}const lr={normalize:Jt,interpolate:Me=>Me,type:"vnode"};function Yr(...Me){return et(Ze=>{let It;const Nt=Ze;try{Nt.processor=lr,It=Reflect.apply(gv,null,[Nt,...Me])}finally{Nt.processor=null}return It},()=>f_(...Me),"translate",Ze=>Ze[p_](...Me),Ze=>[_v(Ze)],Ze=>xn(Ze))}function tn(...Me){return et(Ze=>Reflect.apply(hv,null,[Ze,...Me]),()=>h_(...Me),"number format",Ze=>Ze[g_](...Me),bv,Ze=>Lt(Ze)||xn(Ze))}function Pr(...Me){return et(Ze=>Reflect.apply(uv,null,[Ze,...Me]),()=>d_(...Me),"datetime format",Ze=>Ze[m_](...Me),bv,Ze=>Lt(Ze)||xn(Ze))}function Gr(Me){Oe=Me,ke.pluralRules=Oe}function Dr(Me,Ze){return et(()=>{if(!Me)return!1;const It=Lt(Ze)?Ze:l.value,Nt=Le(It),Ht=ke.messageResolver(Nt,Me);return Kc(Ht)||go(Ht)||Lt(Ht)},()=>[Me],"translate exists",It=>Reflect.apply(It.te,It,[Me,Ze]),sM,It=>kr(It))}function ce(Me){let Ze=null;const It=fw(ke,S.value,l.value);for(let Nt=0;Nt<It.length;Nt++){const Ht=I.value[It[Nt]]||{},Fr=ke.messageResolver(Ht,Me);if(Fr!=null){Ze=Fr;break}}return Ze}function ge(Me){const Ze=ce(Me);return Ze??(t?t.tm(Me)||{}:{})}function Le(Me){return I.value[Me]||{}}function ut(Me,Ze){if(p){const It={[Me]:Ze};for(const Nt in It)Lo(It,Nt)&&eh(It[Nt]);Ze=It[Me]}I.value[Me]=Ze,ke.messages=I.value}function st(Me,Ze){I.value[Me]=I.value[Me]||{};const It={[Me]:Ze};if(p)for(const Nt in It)Lo(It,Nt)&&eh(It[Nt]);Ze=It[Me],cp(Ze,I.value[Me]),ke.messages=I.value}function ct(Me){return A.value[Me]||{}}function te(Me,Ze){A.value[Me]=Ze,ke.datetimeFormats=A.value,dv(ke,Me,Ze)}function se(Me,Ze){A.value[Me]=Yn(A.value[Me]||{},Ze),ke.datetimeFormats=A.value,dv(ke,Me,Ze)}function Pe(Me){return O.value[Me]||{}}function Be(Me,Ze){O.value[Me]=Ze,ke.numberFormats=O.value,fv(ke,Me,Ze)}function xt(Me,Ze){O.value[Me]=Yn(O.value[Me]||{},Ze),ke.numberFormats=O.value,fv(ke,Me,Ze)}vv++,t&&vp&&(Kn(t.locale,Me=>{m&&(l.value=Me,ke.locale=Me,wd(ke,l.value,S.value))}),Kn(t.fallbackLocale,Me=>{m&&(S.value=Me,ke.fallbackLocale=Me,wd(ke,l.value,S.value))}));const it={id:vv,locale:ft,fallbackLocale:Qe,get inheritLocale(){return m},set inheritLocale(Me){m=Me,Me&&t&&(l.value=t.locale.value,S.value=t.fallbackLocale.value,wd(ke,l.value,S.value))},get availableLocales(){return Object.keys(I.value).sort()},messages:Ye,get modifiers(){return we},get pluralRules(){return Oe||{}},get isGlobal(){return c},get missingWarn(){return z},set missingWarn(Me){z=Me,ke.missingWarn=z},get fallbackWarn(){return D},set fallbackWarn(Me){D=Me,ke.fallbackWarn=D},get fallbackRoot(){return H},set fallbackRoot(Me){H=Me},get fallbackFormat(){return ue},set fallbackFormat(Me){ue=Me,ke.fallbackFormat=ue},get warnHtmlMessage(){return Ce},set warnHtmlMessage(Me){Ce=Me,ke.warnHtmlMessage=Me},get escapeParameter(){return X},set escapeParameter(Me){X=Me,ke.escapeParameter=Me},t:mt,getLocaleMessage:Le,setLocaleMessage:ut,mergeLocaleMessage:st,getPostTranslationHandler:Kt,setPostTranslationHandler:vt,getMissingHandler:At,setMissingHandler:Ut,[Cw]:Gr};return it.datetimeFormats=Xe,it.numberFormats=wt,it.rt=nt,it.te=Dr,it.tm=ge,it.d=bt,it.n=ir,it.getDateTimeFormat=ct,it.setDateTimeFormat=te,it.mergeDateTimeFormat=se,it.getNumberFormat=Pe,it.setNumberFormat=Be,it.mergeNumberFormat=xt,it[Sw]=i,it[p_]=Yr,it[m_]=Pr,it[g_]=tn,it}function lM(e){const t=Lt(e.locale)?e.locale:Qd,i=Lt(e.fallbackLocale)||xn(e.fallbackLocale)||ur(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,c=dn(e.missing)?e.missing:void 0,p=kr(e.silentTranslationWarn)||Hc(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,g=kr(e.silentFallbackWarn)||Hc(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,m=kr(e.fallbackRoot)?e.fallbackRoot:!0,l=!!e.formatFallbackMessages,S=ur(e.modifiers)?e.modifiers:{},I=e.pluralizationRules,A=dn(e.postTranslation)?e.postTranslation:void 0,O=Lt(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,z=!!e.escapeParameterHtml,D=kr(e.sync)?e.sync:!0;let H=e.messages;if(ur(e.sharedMessages)){const we=e.sharedMessages;H=Object.keys(we).reduce((ke,Ve)=>{const We=ke[Ve]||(ke[Ve]={});return Yn(We,we[Ve]),ke},H||{})}const{__i18n:ue,__root:ye,__injectWithOption:ne}=e,xe=e.datetimeFormats,Ce=e.numberFormats,X=e.flatJson;return{locale:t,fallbackLocale:i,messages:H,flatJson:X,datetimeFormats:xe,numberFormats:Ce,missing:c,missingWarn:p,fallbackWarn:g,fallbackRoot:m,fallbackFormat:l,modifiers:S,pluralRules:I,postTranslation:A,warnHtmlMessage:O,escapeParameter:z,messageResolver:e.messageResolver,inheritLocale:D,__i18n:ue,__root:ye,__injectWithOption:ne}}function y_(e={}){const t=fy(lM(e)),{__extender:i}=e,c={id:t.id,get locale(){return t.locale.value},set locale(p){t.locale.value=p},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(p){t.fallbackLocale.value=p},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get missing(){return t.getMissingHandler()},set missing(p){t.setMissingHandler(p)},get silentTranslationWarn(){return kr(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(p){t.missingWarn=kr(p)?!p:p},get silentFallbackWarn(){return kr(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(p){t.fallbackWarn=kr(p)?!p:p},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(p){t.fallbackFormat=p},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(p){t.setPostTranslationHandler(p)},get sync(){return t.inheritLocale},set sync(p){t.inheritLocale=p},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(p){t.warnHtmlMessage=p!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(p){t.escapeParameter=p},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...p){return Reflect.apply(t.t,t,[...p])},rt(...p){return Reflect.apply(t.rt,t,[...p])},tc(...p){const[g,m,l]=p,S={plural:1};let I=null,A=null;if(!Lt(g))throw Wi(Ai.INVALID_ARGUMENT);const O=g;return Lt(m)?S.locale=m:En(m)?S.plural=m:xn(m)?I=m:ur(m)&&(A=m),Lt(l)?S.locale=l:xn(l)?I=l:ur(l)&&(A=l),Reflect.apply(t.t,t,[O,I||A||{},S])},te(p,g){return t.te(p,g)},tm(p){return t.tm(p)},getLocaleMessage(p){return t.getLocaleMessage(p)},setLocaleMessage(p,g){t.setLocaleMessage(p,g)},mergeLocaleMessage(p,g){t.mergeLocaleMessage(p,g)},d(...p){return Reflect.apply(t.d,t,[...p])},getDateTimeFormat(p){return t.getDateTimeFormat(p)},setDateTimeFormat(p,g){t.setDateTimeFormat(p,g)},mergeDateTimeFormat(p,g){t.mergeDateTimeFormat(p,g)},n(...p){return Reflect.apply(t.n,t,[...p])},getNumberFormat(p){return t.getNumberFormat(p)},setNumberFormat(p,g){t.setNumberFormat(p,g)},mergeNumberFormat(p,g){t.mergeNumberFormat(p,g)}};return c.__extender=i,c}function cM(e,t,i){return{beforeCreate(){const c=zo();if(!c)throw Wi(Ai.UNEXPECTED_ERROR);const p=this.$options;if(p.i18n){const g=p.i18n;if(p.__i18n&&(g.__i18n=p.__i18n),g.__root=t,this===this.$root)this.$i18n=wv(e,g);else{g.__injectWithOption=!0,g.__extender=i.__vueI18nExtend,this.$i18n=y_(g);const m=this.$i18n;m.__extender&&(m.__disposer=m.__extender(this.$i18n))}}else if(p.__i18n)if(this===this.$root)this.$i18n=wv(e,p);else{this.$i18n=y_({__i18n:p.__i18n,__injectWithOption:!0,__extender:i.__vueI18nExtend,__root:t});const g=this.$i18n;g.__extender&&(g.__disposer=g.__extender(this.$i18n))}else this.$i18n=e;p.__i18nGlobal&&Tw(t,p,p),this.$t=(...g)=>this.$i18n.t(...g),this.$rt=(...g)=>this.$i18n.rt(...g),this.$tc=(...g)=>this.$i18n.tc(...g),this.$te=(g,m)=>this.$i18n.te(g,m),this.$d=(...g)=>this.$i18n.d(...g),this.$n=(...g)=>this.$i18n.n(...g),this.$tm=g=>this.$i18n.tm(g),i.__setInstance(c,this.$i18n)},mounted(){},unmounted(){const c=zo();if(!c)throw Wi(Ai.UNEXPECTED_ERROR);const p=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,p.__disposer&&(p.__disposer(),delete p.__disposer,delete p.__extender),i.__deleteInstance(c),delete this.$i18n}}}function wv(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[Cw](t.pluralizationRules||e.pluralizationRules);const i=hy(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(i).forEach(c=>e.mergeLocaleMessage(c,i[c])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(c=>e.mergeDateTimeFormat(c,t.datetimeFormats[c])),t.numberFormats&&Object.keys(t.numberFormats).forEach(c=>e.mergeNumberFormat(c,t.numberFormats[c])),e}const py={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function uM({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((c,p)=>[...c,...p.type===Ar?p.children:[p]],[]):t.reduce((i,c)=>{const p=e[c];return p&&(i[c]=p()),i},Kr())}function Pw(){return Ar}const dM=X_({name:"i18n-t",props:Yn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>En(e)||!isNaN(e)}},py),setup(e,t){const{slots:i,attrs:c}=t,p=e.i18n||Jc({useScope:e.scope,__useComponent:!0});return()=>{const g=Object.keys(i).filter(O=>O!=="_"),m=Kr();e.locale&&(m.locale=e.locale),e.plural!==void 0&&(m.plural=Lt(e.plural)?+e.plural:e.plural);const l=uM(t,g),S=p[p_](e.keypath,l,m),I=Yn(Kr(),c),A=Lt(e.tag)||Rr(e.tag)?e.tag:Pw();return oy(A,I,S)}}}),Cv=dM;function hM(e){return xn(e)&&!Lt(e[0])}function Iw(e,t,i,c){const{slots:p,attrs:g}=t;return()=>{const m={part:!0};let l=Kr();e.locale&&(m.locale=e.locale),Lt(e.format)?m.key=e.format:Rr(e.format)&&(Lt(e.format.key)&&(m.key=e.format.key),l=Object.keys(e.format).reduce((z,D)=>i.includes(D)?Yn(Kr(),z,{[D]:e.format[D]}):z,Kr()));const S=c(e.value,m,l);let I=[m.key];xn(S)?I=S.map((z,D)=>{const H=p[z.type],ue=H?H({[z.type]:z.value,index:D,parts:S}):[z.value];return hM(ue)&&(ue[0].key=`${z.type}-${D}`),ue}):Lt(S)&&(I=[S]);const A=Yn(Kr(),g),O=Lt(e.tag)||Rr(e.tag)?e.tag:Pw();return oy(O,A,I)}}const fM=X_({name:"i18n-n",props:Yn({value:{type:Number,required:!0},format:{type:[String,Object]}},py),setup(e,t){const i=e.i18n||Jc({useScope:e.scope,__useComponent:!0});return Iw(e,t,vw,(...c)=>i[g_](...c))}}),Sv=fM,pM=X_({name:"i18n-d",props:Yn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},py),setup(e,t){const i=e.i18n||Jc({useScope:e.scope,__useComponent:!0});return Iw(e,t,bw,(...c)=>i[m_](...c))}}),kv=pM;function mM(e,t){const i=e;if(e.mode==="composition")return i.__getInstance(t)||e.global;{const c=i.__getInstance(t);return c!=null?c.__composer:e.global.__composer}}function gM(e){const t=m=>{const{instance:l,value:S}=m;if(!l||!l.$)throw Wi(Ai.UNEXPECTED_ERROR);const I=mM(e,l.$),A=Tv(S);return[Reflect.apply(I.t,I,[...Pv(A)]),I]};return{created:(m,l)=>{const[S,I]=t(l);vp&&e.global===I&&(m.__i18nWatcher=Kn(I.locale,()=>{l.instance&&l.instance.$forceUpdate()})),m.__composer=I,m.textContent=S},unmounted:m=>{vp&&m.__i18nWatcher&&(m.__i18nWatcher(),m.__i18nWatcher=void 0,delete m.__i18nWatcher),m.__composer&&(m.__composer=void 0,delete m.__composer)},beforeUpdate:(m,{value:l})=>{if(m.__composer){const S=m.__composer,I=Tv(l);m.textContent=Reflect.apply(S.t,S,[...Pv(I)])}},getSSRProps:m=>{const[l]=t(m);return{textContent:l}}}}function Tv(e){if(Lt(e))return{path:e};if(ur(e)){if(!("path"in e))throw Wi(Ai.REQUIRED_VALUE,"path");return e}else throw Wi(Ai.INVALID_VALUE)}function Pv(e){const{path:t,locale:i,args:c,choice:p,plural:g}=e,m={},l=c||{};return Lt(i)&&(m.locale=i),En(p)&&(m.plural=p),En(g)&&(m.plural=g),[t,l,m]}function _M(e,t,...i){const c=ur(i[0])?i[0]:{};(kr(c.globalInstall)?c.globalInstall:!0)&&([Cv.name,"I18nT"].forEach(g=>e.component(g,Cv)),[Sv.name,"I18nN"].forEach(g=>e.component(g,Sv)),[kv.name,"I18nD"].forEach(g=>e.component(g,kv))),e.directive("t",gM(t))}const yM=Ma("global-vue-i18n");function bM(e={},t){const i=__VUE_I18N_LEGACY_API__&&kr(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,c=kr(e.globalInjection)?e.globalInjection:!0,p=new Map,[g,m]=vM(e,i),l=Ma("");function S(z){return p.get(z)||null}function I(z,D){p.set(z,D)}function A(z){p.delete(z)}const O={get mode(){return __VUE_I18N_LEGACY_API__&&i?"legacy":"composition"},async install(z,...D){if(z.__VUE_I18N_SYMBOL__=l,z.provide(z.__VUE_I18N_SYMBOL__,O),ur(D[0])){const ye=D[0];O.__composerExtend=ye.__composerExtend,O.__vueI18nExtend=ye.__vueI18nExtend}let H=null;!i&&c&&(H=IM(z,O.global)),__VUE_I18N_FULL_INSTALL__&&_M(z,O,...D),__VUE_I18N_LEGACY_API__&&i&&z.mixin(cM(m,m.__composer,O));const ue=z.unmount;z.unmount=()=>{H&&H(),O.dispose(),ue()}},get global(){return m},dispose(){g.stop()},__instances:p,__getInstance:S,__setInstance:I,__deleteInstance:A};return O}function Jc(e={}){const t=zo();if(t==null)throw Wi(Ai.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw Wi(Ai.NOT_INSTALLED);const i=xM(t),c=CM(i),p=kw(t),g=wM(e,p);if(g==="global")return Tw(c,e,p),c;if(g==="parent"){let S=SM(i,t,e.__useComponent);return S==null&&(S=c),S}const m=i;let l=m.__getInstance(t);if(l==null){const S=Yn({},e);"__i18n"in p&&(S.__i18n=p.__i18n),c&&(S.__root=c),l=fy(S),m.__composerExtend&&(l[__]=m.__composerExtend(l)),TM(m,t,l),m.__setInstance(t,l)}return l}function vM(e,t,i){const c=B_(),p=__VUE_I18N_LEGACY_API__&&t?c.run(()=>y_(e)):c.run(()=>fy(e));if(p==null)throw Wi(Ai.UNEXPECTED_ERROR);return[c,p]}function xM(e){const t=_l(e.isCE?yM:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw Wi(e.isCE?Ai.NOT_INSTALLED_WITH_PROVIDE:Ai.UNEXPECTED_ERROR);return t}function wM(e,t){return qp(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function CM(e){return e.mode==="composition"?e.global:e.global.__composer}function SM(e,t,i=!1){let c=null;const p=t.root;let g=kM(t,i);for(;g!=null;){const m=e;if(e.mode==="composition")c=m.__getInstance(g);else if(__VUE_I18N_LEGACY_API__){const l=m.__getInstance(g);l!=null&&(c=l.__composer,i&&c&&!c[Sw]&&(c=null))}if(c!=null||p===g)break;g=g.parent}return c}function kM(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function TM(e,t,i){Ia(()=>{},t),Zp(()=>{const c=i;e.__deleteInstance(t);const p=c[__];p&&(p(),delete c[__])},t)}const PM=["locale","fallbackLocale","availableLocales"],Iv=["t","rt","d","n","tm","te"];function IM(e,t){const i=Object.create(null);return PM.forEach(p=>{const g=Object.getOwnPropertyDescriptor(t,p);if(!g)throw Wi(Ai.UNEXPECTED_ERROR);const m=wn(g.value)?{get(){return g.value.value},set(l){g.value.value=l}}:{get(){return g.get&&g.get()}};Object.defineProperty(i,p,m)}),e.config.globalProperties.$i18n=i,Iv.forEach(p=>{const g=Object.getOwnPropertyDescriptor(t,p);if(!g||!g.value)throw Wi(Ai.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${p}`,g)}),()=>{delete e.config.globalProperties.$i18n,Iv.forEach(p=>{delete e.config.globalProperties[`$${p}`]})}}oM();$I(yI);BI(DI);FI(fw);if(__INTLIFY_PROD_DEVTOOLS__){const e=fl();e.__INTLIFY__=!0,bI(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const MM="csrfToken",Mv="djangoSlot",EM={install(e,t){var c;e.config.globalProperties.$djangoSlots={};for(const p of t.rootElement.children)p instanceof HTMLElement&&Mv in p.dataset&&(e.config.globalProperties.$djangoSlots[p.dataset[Mv]]=p.outerHTML);e.config.globalProperties.$rootElement=t.rootElement;const i=window.vueProvided||{};Object.keys(i).forEach(p=>{e.provide(p,i[p])}),e.provide(MM,(c=window.document.querySelector("[name=csrfmiddlewaretoken]"))==null?void 0:c.value)}},AM=({dataset:e,component:t})=>(Object.keys(e).forEach(function(c){if(c in t.props){const p=t.props[c].type;e[c]=p===Date?new p(e[c]):p(e[c])}}),e);var LM=Object.defineProperty,Ev=Object.getOwnPropertySymbols,RM=Object.prototype.hasOwnProperty,DM=Object.prototype.propertyIsEnumerable,Av=(e,t,i)=>t in e?LM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,OM=(e,t)=>{for(var i in t||(t={}))RM.call(t,i)&&Av(e,i,t[i]);if(Ev)for(var i of Ev(t))DM.call(t,i)&&Av(e,i,t[i]);return e};function kh(e){return e==null||e===""||Array.isArray(e)&&e.length===0||!(e instanceof Date)&&typeof e=="object"&&Object.keys(e).length===0}function b_(e,t,i=new WeakSet){if(e===t)return!0;if(!e||!t||typeof e!="object"||typeof t!="object"||i.has(e)||i.has(t))return!1;i.add(e).add(t);const c=Array.isArray(e),p=Array.isArray(t);let g,m,l;if(c&&p){if(m=e.length,m!=t.length)return!1;for(g=m;g--!==0;)if(!b_(e[g],t[g],i))return!1;return!0}if(c!=p)return!1;const S=e instanceof Date,I=t instanceof Date;if(S!=I)return!1;if(S&&I)return e.getTime()==t.getTime();const A=e instanceof RegExp,O=t instanceof RegExp;if(A!=O)return!1;if(A&&O)return e.toString()==t.toString();const z=Object.keys(e);if(m=z.length,m!==Object.keys(t).length)return!1;for(g=m;g--!==0;)if(!Object.prototype.hasOwnProperty.call(t,z[g]))return!1;for(g=m;g--!==0;)if(l=z[g],!b_(e[l],t[l],i))return!1;return!0}function zM(e,t){return b_(e,t)}function Xp(e){return typeof e=="function"&&"call"in e&&"apply"in e}function xr(e){return!kh(e)}function As(e,t){if(!e||!t)return null;try{const i=e[t];if(xr(i))return i}catch{}if(Object.keys(e).length){if(Xp(t))return t(e);if(t.indexOf(".")===-1)return e[t];{const i=t.split(".");let c=e;for(let p=0,g=i.length;p<g;++p){if(c==null)return null;c=c[i[p]]}return c}}return null}function Th(e,t,i){return i?As(e,i)===As(t,i):zM(e,t)}function $M(e,t){if(e!=null&&t&&t.length){for(const i of t)if(Th(e,i))return!0}return!1}function is(e,t=!0){return e instanceof Object&&e.constructor===Object&&(t||Object.keys(e).length!==0)}function Mw(e={},t={}){const i=OM({},e);return Object.keys(t).forEach(c=>{const p=c;is(t[p])&&p in e&&is(e[p])?i[p]=Mw(e[p],t[p]):i[p]=t[p]}),i}function BM(...e){return e.reduce((t,i,c)=>c===0?i:Mw(t,i),{})}function Lv(e,t){let i=-1;if(xr(e))try{i=e.findLastIndex(t)}catch{i=e.lastIndexOf([...e].reverse().find(t))}return i}function _o(e,...t){return Xp(e)?e(...t):e}function Gi(e,t=!0){return typeof e=="string"&&(t||e!=="")}function es(e){return Gi(e)?e.replace(/(-|_)/g,"").toLowerCase():e}function my(e,t="",i={}){const c=es(t).split("."),p=c.shift();if(p){if(is(e)){const g=Object.keys(e).find(m=>es(m)===p)||"";return my(_o(e[g],i),c.join("."),i)}return}return _o(e,i)}function Jp(e,t=!0){return Array.isArray(e)&&(t||e.length!==0)}function FM(e){return xr(e)&&!isNaN(e)}function NM(e=""){return xr(e)&&e.length===1&&!!e.match(/\S| /)}function zs(e,t){if(t){const i=t.test(e);return t.lastIndex=0,i}return!1}function jM(...e){return BM(...e)}function Nd(e){return e&&e.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!").replace(/: /g,":")}function mo(e){if(e&&/[\xC0-\xFF\u0100-\u017E]/.test(e)){const i={A:/[\xC0-\xC5\u0100\u0102\u0104]/g,AE:/[\xC6]/g,C:/[\xC7\u0106\u0108\u010A\u010C]/g,D:/[\xD0\u010E\u0110]/g,E:/[\xC8-\xCB\u0112\u0114\u0116\u0118\u011A]/g,G:/[\u011C\u011E\u0120\u0122]/g,H:/[\u0124\u0126]/g,I:/[\xCC-\xCF\u0128\u012A\u012C\u012E\u0130]/g,IJ:/[\u0132]/g,J:/[\u0134]/g,K:/[\u0136]/g,L:/[\u0139\u013B\u013D\u013F\u0141]/g,N:/[\xD1\u0143\u0145\u0147\u014A]/g,O:/[\xD2-\xD6\xD8\u014C\u014E\u0150]/g,OE:/[\u0152]/g,R:/[\u0154\u0156\u0158]/g,S:/[\u015A\u015C\u015E\u0160]/g,T:/[\u0162\u0164\u0166]/g,U:/[\xD9-\xDC\u0168\u016A\u016C\u016E\u0170\u0172]/g,W:/[\u0174]/g,Y:/[\xDD\u0176\u0178]/g,Z:/[\u0179\u017B\u017D]/g,a:/[\xE0-\xE5\u0101\u0103\u0105]/g,ae:/[\xE6]/g,c:/[\xE7\u0107\u0109\u010B\u010D]/g,d:/[\u010F\u0111]/g,e:/[\xE8-\xEB\u0113\u0115\u0117\u0119\u011B]/g,g:/[\u011D\u011F\u0121\u0123]/g,i:/[\xEC-\xEF\u0129\u012B\u012D\u012F\u0131]/g,ij:/[\u0133]/g,j:/[\u0135]/g,k:/[\u0137,\u0138]/g,l:/[\u013A\u013C\u013E\u0140\u0142]/g,n:/[\xF1\u0144\u0146\u0148\u014B]/g,p:/[\xFE]/g,o:/[\xF2-\xF6\xF8\u014D\u014F\u0151]/g,oe:/[\u0153]/g,r:/[\u0155\u0157\u0159]/g,s:/[\u015B\u015D\u015F\u0161]/g,t:/[\u0163\u0165\u0167]/g,u:/[\xF9-\xFC\u0169\u016B\u016D\u016F\u0171\u0173]/g,w:/[\u0175]/g,y:/[\xFD\xFF\u0177]/g,z:/[\u017A\u017C\u017E]/g};for(const c in i)e=e.replace(i[c],c)}return e}function VM(e){return Gi(e,!1)?e[0].toUpperCase()+e.slice(1):e}function Ew(e){return Gi(e)?e.replace(/(_)/g,"-").replace(/[A-Z]/g,(t,i)=>i===0?t:"-"+t.toLowerCase()).toLowerCase():e}function Rv(e){return Gi(e)?e.replace(/[A-Z]/g,(t,i)=>i===0?t:"."+t.toLowerCase()).toLowerCase():e}function gy(){const e=new Map;return{on(t,i){let c=e.get(t);return c?c.push(i):c=[i],e.set(t,c),this},off(t,i){const c=e.get(t);return c&&c.splice(c.indexOf(i)>>>0,1),this},emit(t,i){const c=e.get(t);c&&c.forEach(p=>{p(i)})},clear(){e.clear()}}}function Qp(...e){if(e){let t=[];for(let i=0;i<e.length;i++){const c=e[i];if(!c)continue;const p=typeof c;if(p==="string"||p==="number")t.push(c);else if(p==="object"){const g=Array.isArray(c)?[Qp(...c)]:Object.entries(c).map(([m,l])=>l?m:void 0);t=g.length?t.concat(g.filter(m=>!!m)):t}}return t.join(" ").trim()}}function UM(e,t){return e?e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className):!1}function Aw(e,t){if(e&&t){const i=c=>{UM(e,c)||(e.classList?e.classList.add(c):e.className+=" "+c)};[t].flat().filter(Boolean).forEach(c=>c.split(" ").forEach(i))}}function zg(e,t){if(e&&t){const i=c=>{e.classList?e.classList.remove(c):e.className=e.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," ")};[t].flat().filter(Boolean).forEach(c=>c.split(" ").forEach(i))}}function xp(e){for(const t of document==null?void 0:document.styleSheets)try{for(const i of t==null?void 0:t.cssRules)for(const c of i==null?void 0:i.style)if(e.test(c))return{name:c,value:i.style.getPropertyValue(c).trim()}}catch{}return null}function Lw(e){const t={width:0,height:0};return e&&(e.style.visibility="hidden",e.style.display="block",t.width=e.offsetWidth,t.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible"),t}function Rw(){const e=window,t=document,i=t.documentElement,c=t.getElementsByTagName("body")[0],p=e.innerWidth||i.clientWidth||c.clientWidth,g=e.innerHeight||i.clientHeight||c.clientHeight;return{width:p,height:g}}function v_(e){return e?Math.abs(e.scrollLeft):0}function ZM(){const e=document.documentElement;return(window.pageXOffset||v_(e))-(e.clientLeft||0)}function GM(){const e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}function Dw(e,t,i=!0){var c,p,g,m;if(e){const l=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:Lw(e),S=l.height,I=l.width,A=t.offsetHeight,O=t.offsetWidth,z=t.getBoundingClientRect(),D=GM(),H=ZM(),ue=Rw();let ye,ne,xe="top";z.top+A+S>ue.height?(ye=z.top+D-S,xe="bottom",ye<0&&(ye=D)):ye=A+z.top+D,z.left+I>ue.width?ne=Math.max(0,z.left+H+O-I):ne=z.left+H,e.style.top=ye+"px",e.style.insetInlineStart=ne+"px",e.style.transformOrigin=xe,i&&(e.style.marginTop=xe==="bottom"?`calc(${(p=(c=xp(/-anchor-gutter$/))==null?void 0:c.value)!=null?p:"2px"} * -1)`:(m=(g=xp(/-anchor-gutter$/))==null?void 0:g.value)!=null?m:"")}}function Ow(e,t){e&&(typeof t=="string"?e.style.cssText=t:Object.entries(t||{}).forEach(([i,c])=>e.style[i]=c))}function zw(e,t){return e instanceof HTMLElement?e.offsetWidth:0}function WM(e,t,i=!0){var c,p,g,m;if(e){const l=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:Lw(e),S=t.offsetHeight,I=t.getBoundingClientRect(),A=Rw();let O,z,D="top";I.top+S+l.height>A.height?(O=-1*l.height,D="bottom",I.top+O<0&&(O=-1*I.top)):O=S,l.width>A.width?z=I.left*-1:I.left+l.width>A.width?z=(I.left+l.width-A.width)*-1:z=0,e.style.top=O+"px",e.style.insetInlineStart=z+"px",e.style.transformOrigin=D,i&&(e.style.marginTop=D==="bottom"?`calc(${(p=(c=xp(/-anchor-gutter$/))==null?void 0:c.value)!=null?p:"2px"} * -1)`:(m=(g=xp(/-anchor-gutter$/))==null?void 0:g.value)!=null?m:"")}}function $w(e){if(e){let t=e.parentNode;return t&&t instanceof ShadowRoot&&t.host&&(t=t.host),t}return null}function HM(e){return!!(e!==null&&typeof e<"u"&&e.nodeName&&$w(e))}function wl(e){return typeof HTMLElement<"u"?e instanceof HTMLElement:e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.nodeName=="string"}function wp(e,t={}){if(wl(e)){const i=(c,p)=>{var g,m;const l=(g=e==null?void 0:e.$attrs)!=null&&g[c]?[(m=e==null?void 0:e.$attrs)==null?void 0:m[c]]:[];return[p].flat().reduce((S,I)=>{if(I!=null){const A=typeof I;if(A==="string"||A==="number")S.push(I);else if(A==="object"){const O=Array.isArray(I)?i(c,I):Object.entries(I).map(([z,D])=>c==="style"&&(D||D===0)?`${z.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${D}`:D?z:void 0);S=O.length?S.concat(O.filter(z=>!!z)):S}}return S},l)};Object.entries(t).forEach(([c,p])=>{if(p!=null){const g=c.match(/^on(.+)/);g?e.addEventListener(g[1].toLowerCase(),p):c==="p-bind"||c==="pBind"?wp(e,p):(p=c==="class"?[...new Set(i("class",p))].join(" ").trim():c==="style"?i("style",p).join(";").trim():p,(e.$attrs=e.$attrs||{})&&(e.$attrs[c]=p),e.setAttribute(c,p))}})}}function Bw(e,t={},...i){{const c=document.createElement(e);return wp(c,t),c.append(...i),c}}function qM(e,t){return wl(e)?Array.from(e.querySelectorAll(t)):[]}function em(e,t){return wl(e)?e.matches(t)?e:e.querySelector(t):null}function io(e,t){e&&document.activeElement!==e&&e.focus(t)}function KM(e,t){if(wl(e)){const i=e.getAttribute(t);return isNaN(i)?i==="true"||i==="false"?i==="true":i:+i}}function _y(e,t=""){const i=qM(e,`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t}`),c=[];for(const p of i)getComputedStyle(p).display!="none"&&getComputedStyle(p).visibility!="hidden"&&c.push(p);return c}function Oc(e,t){const i=_y(e,t);return i.length>0?i[0]:null}function dl(e){if(e){let t=e.offsetHeight;const i=getComputedStyle(e);return t-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),t}return 0}function Fw(e,t){const i=_y(e,t);return i.length>0?i[i.length-1]:null}function x_(e){if(e){const t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:t.left+(window.pageXOffset||v_(document.documentElement)||v_(document.body)||0)}}return{top:"auto",left:"auto"}}function YM(e,t){return e?e.offsetHeight:0}function Nw(e,t=[]){const i=$w(e);return i===null?t:Nw(i,t.concat([i]))}function XM(e){const t=[];if(e){const i=Nw(e),c=/(auto|scroll)/,p=g=>{try{const m=window.getComputedStyle(g,null);return c.test(m.getPropertyValue("overflow"))||c.test(m.getPropertyValue("overflowX"))||c.test(m.getPropertyValue("overflowY"))}catch{return!1}};for(const g of i){const m=g.nodeType===1&&g.dataset.scrollselectors;if(m){const l=m.split(",");for(const S of l){const I=em(g,S);I&&p(I)&&t.push(I)}}g.nodeType!==9&&p(g)&&t.push(g)}}return t}function hl(e){if(e){let t=e.offsetWidth;const i=getComputedStyle(e);return t-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),t}return 0}function JM(){return/(android)/i.test(navigator.userAgent)}function yy(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Dv(e,t=""){return wl(e)?e.matches(`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},
            [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t}`):!1}function Cp(e){return!!(e&&e.offsetParent!=null)}function jw(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function Vw(e,t="",i){wl(e)&&i!==null&&i!==void 0&&e.setAttribute(t,i)}var Xf={};function QM(e="pui_id_"){return Object.hasOwn(Xf,e)||(Xf[e]=0),Xf[e]++,`${e}${Xf[e]}`}function eE(){let e=[];const t=(m,l,S=999)=>{const I=p(m,l,S),A=I.value+(I.key===m?0:S)+1;return e.push({key:m,value:A}),A},i=m=>{e=e.filter(l=>l.value!==m)},c=(m,l)=>p(m).value,p=(m,l,S=0)=>[...e].reverse().find(I=>!0)||{key:m,value:S},g=m=>m&&parseInt(m.style.zIndex,10)||0;return{get:g,set:(m,l,S)=>{l&&(l.style.zIndex=String(t(m,!0,S)))},clear:m=>{m&&(i(g(m)),m.style.zIndex="")},getCurrent:m=>c(m)}}var Zc=eE(),tE=Object.defineProperty,rE=Object.defineProperties,nE=Object.getOwnPropertyDescriptors,Sp=Object.getOwnPropertySymbols,Uw=Object.prototype.hasOwnProperty,Zw=Object.prototype.propertyIsEnumerable,Ov=(e,t,i)=>t in e?tE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Mo=(e,t)=>{for(var i in t||(t={}))Uw.call(t,i)&&Ov(e,i,t[i]);if(Sp)for(var i of Sp(t))Zw.call(t,i)&&Ov(e,i,t[i]);return e},$g=(e,t)=>rE(e,nE(t)),Ms=(e,t)=>{var i={};for(var c in e)Uw.call(e,c)&&t.indexOf(c)<0&&(i[c]=e[c]);if(e!=null&&Sp)for(var c of Sp(e))t.indexOf(c)<0&&Zw.call(e,c)&&(i[c]=e[c]);return i},iE=gy(),si=iE;function zv(e,t){Jp(e)?e.push(...t||[]):is(e)&&Object.assign(e,t)}function oE(e){return is(e)&&e.hasOwnProperty("$value")&&e.hasOwnProperty("$type")?e.$value:e}function sE(e){return e.replaceAll(/ /g,"").replace(/[^\w]/g,"-")}function w_(e="",t=""){return sE(`${Gi(e,!1)&&Gi(t,!1)?`${e}-`:e}${t}`)}function Gw(e="",t=""){return`--${w_(e,t)}`}function aE(e=""){const t=(e.match(/{/g)||[]).length,i=(e.match(/}/g)||[]).length;return(t+i)%2!==0}function Ww(e,t="",i="",c=[],p){if(Gi(e)){const g=/{([^}]*)}/g,m=e.trim();if(aE(m))return;if(zs(m,g)){const l=m.replaceAll(g,A=>{const z=A.replace(/{|}/g,"").split(".").filter(D=>!c.some(H=>zs(D,H)));return`var(${Gw(i,Ew(z.join("-")))}${xr(p)?`, ${p}`:""})`}),S=/(\d+\s+[\+\-\*\/]\s+\d+)/g,I=/var\([^)]+\)/g;return zs(l.replace(I,"0"),S)?`calc(${l})`:l}return m}else if(FM(e))return e}function lE(e,t,i){Gi(t,!1)&&e.push(`${t}:${i};`)}function zc(e,t){return e?`${e}{${t}}`:""}var cE=e=>{var t;const i=Zr.getTheme(),c=C_(i,e,void 0,"variable"),p=(t=c==null?void 0:c.match(/--[\w-]+/g))==null?void 0:t[0],g=C_(i,e,void 0,"value");return{name:p,variable:c,value:g}},jd=(...e)=>C_(Zr.getTheme(),...e),C_=(e={},t,i,c)=>{if(t){const{variable:p,options:g}=Zr.defaults||{},{prefix:m,transform:l}=(e==null?void 0:e.options)||g||{},I=zs(t,/{([^}]*)}/g)?t:`{${t}}`;return c==="value"||kh(c)&&l==="strict"?Zr.getTokenValue(t):Ww(I,void 0,m,[p.excludedKeyRegex],i)}return""};function uE(e,t={}){const i=Zr.defaults.variable,{prefix:c=i.prefix,selector:p=i.selector,excludedKeyRegex:g=i.excludedKeyRegex}=t,m=(I,A="")=>Object.entries(I).reduce((O,[z,D])=>{const H=zs(z,g)?w_(A):w_(A,Ew(z)),ue=oE(D);if(is(ue)){const{variables:ye,tokens:ne}=m(ue,H);zv(O.tokens,ne),zv(O.variables,ye)}else O.tokens.push((c?H.replace(`${c}-`,""):H).replaceAll("-",".")),lE(O.variables,Gw(H),Ww(ue,H,c,[g]));return O},{variables:[],tokens:[]}),{variables:l,tokens:S}=m(e,c);return{value:l,tokens:S,declarations:l.join(""),css:zc(p,l.join(""))}}var Io={regex:{rules:{class:{pattern:/^\.([a-zA-Z][\w-]*)$/,resolve(e){return{type:"class",selector:e,matched:this.pattern.test(e.trim())}}},attr:{pattern:/^\[(.*)\]$/,resolve(e){return{type:"attr",selector:`:root${e}`,matched:this.pattern.test(e.trim())}}},media:{pattern:/^@media (.*)$/,resolve(e){return{type:"media",selector:`${e}{:root{[CSS]}}`,matched:this.pattern.test(e.trim())}}},system:{pattern:/^system$/,resolve(e){return{type:"system",selector:"@media (prefers-color-scheme: dark){:root{[CSS]}}",matched:this.pattern.test(e.trim())}}},custom:{resolve(e){return{type:"custom",selector:e,matched:!0}}}},resolve(e){const t=Object.keys(this.rules).filter(i=>i!=="custom").map(i=>this.rules[i]);return[e].flat().map(i=>{var c;return(c=t.map(p=>p.resolve(i)).find(p=>p.matched))!=null?c:this.rules.custom.resolve(i)})}},_toVariables(e,t){return uE(e,{prefix:t==null?void 0:t.prefix})},getCommon({name:e="",theme:t={},params:i,set:c,defaults:p}){var g,m,l,S,I,A,O;const{preset:z,options:D}=t;let H,ue,ye,ne,xe,Ce,X;if(xr(z)&&D.transform!=="strict"){const{primitive:we,semantic:Oe,extend:ke}=z,Ve=Oe||{},{colorScheme:We}=Ve,ft=Ms(Ve,["colorScheme"]),Qe=ke||{},{colorScheme:Ye}=Qe,Xe=Ms(Qe,["colorScheme"]),wt=We||{},{dark:Kt}=wt,vt=Ms(wt,["dark"]),At=Ye||{},{dark:Ut}=At,et=Ms(At,["dark"]),mt=xr(we)?this._toVariables({primitive:we},D):{},nt=xr(ft)?this._toVariables({semantic:ft},D):{},bt=xr(vt)?this._toVariables({light:vt},D):{},ir=xr(Kt)?this._toVariables({dark:Kt},D):{},Jt=xr(Xe)?this._toVariables({semantic:Xe},D):{},Qt=xr(et)?this._toVariables({light:et},D):{},lr=xr(Ut)?this._toVariables({dark:Ut},D):{},[Yr,tn]=[(g=mt.declarations)!=null?g:"",mt.tokens],[Pr,Gr]=[(m=nt.declarations)!=null?m:"",nt.tokens||[]],[Dr,ce]=[(l=bt.declarations)!=null?l:"",bt.tokens||[]],[ge,Le]=[(S=ir.declarations)!=null?S:"",ir.tokens||[]],[ut,st]=[(I=Jt.declarations)!=null?I:"",Jt.tokens||[]],[ct,te]=[(A=Qt.declarations)!=null?A:"",Qt.tokens||[]],[se,Pe]=[(O=lr.declarations)!=null?O:"",lr.tokens||[]];H=this.transformCSS(e,Yr,"light","variable",D,c,p),ue=tn;const Be=this.transformCSS(e,`${Pr}${Dr}`,"light","variable",D,c,p),xt=this.transformCSS(e,`${ge}`,"dark","variable",D,c,p);ye=`${Be}${xt}`,ne=[...new Set([...Gr,...ce,...Le])];const it=this.transformCSS(e,`${ut}${ct}color-scheme:light`,"light","variable",D,c,p),Me=this.transformCSS(e,`${se}color-scheme:dark`,"dark","variable",D,c,p);xe=`${it}${Me}`,Ce=[...new Set([...st,...te,...Pe])],X=_o(z.css,{dt:jd})}return{primitive:{css:H,tokens:ue},semantic:{css:ye,tokens:ne},global:{css:xe,tokens:Ce},style:X}},getPreset({name:e="",preset:t={},options:i,params:c,set:p,defaults:g,selector:m}){var l,S,I;let A,O,z;if(xr(t)&&i.transform!=="strict"){const D=e.replace("-directive",""),H=t,{colorScheme:ue,extend:ye,css:ne}=H,xe=Ms(H,["colorScheme","extend","css"]),Ce=ye||{},{colorScheme:X}=Ce,we=Ms(Ce,["colorScheme"]),Oe=ue||{},{dark:ke}=Oe,Ve=Ms(Oe,["dark"]),We=X||{},{dark:ft}=We,Qe=Ms(We,["dark"]),Ye=xr(xe)?this._toVariables({[D]:Mo(Mo({},xe),we)},i):{},Xe=xr(Ve)?this._toVariables({[D]:Mo(Mo({},Ve),Qe)},i):{},wt=xr(ke)?this._toVariables({[D]:Mo(Mo({},ke),ft)},i):{},[Kt,vt]=[(l=Ye.declarations)!=null?l:"",Ye.tokens||[]],[At,Ut]=[(S=Xe.declarations)!=null?S:"",Xe.tokens||[]],[et,mt]=[(I=wt.declarations)!=null?I:"",wt.tokens||[]],nt=this.transformCSS(D,`${Kt}${At}`,"light","variable",i,p,g,m),bt=this.transformCSS(D,et,"dark","variable",i,p,g,m);A=`${nt}${bt}`,O=[...new Set([...vt,...Ut,...mt])],z=_o(ne,{dt:jd})}return{css:A,tokens:O,style:z}},getPresetC({name:e="",theme:t={},params:i,set:c,defaults:p}){var g;const{preset:m,options:l}=t,S=(g=m==null?void 0:m.components)==null?void 0:g[e];return this.getPreset({name:e,preset:S,options:l,params:i,set:c,defaults:p})},getPresetD({name:e="",theme:t={},params:i,set:c,defaults:p}){var g,m;const l=e.replace("-directive",""),{preset:S,options:I}=t,A=((g=S==null?void 0:S.components)==null?void 0:g[l])||((m=S==null?void 0:S.directives)==null?void 0:m[l]);return this.getPreset({name:l,preset:A,options:I,params:i,set:c,defaults:p})},applyDarkColorScheme(e){return!(e.darkModeSelector==="none"||e.darkModeSelector===!1)},getColorSchemeOption(e,t){var i;return this.applyDarkColorScheme(e)?this.regex.resolve(e.darkModeSelector===!0?t.options.darkModeSelector:(i=e.darkModeSelector)!=null?i:t.options.darkModeSelector):[]},getLayerOrder(e,t={},i,c){const{cssLayer:p}=t;return p?`@layer ${_o(p.order||"primeui",i)}`:""},getCommonStyleSheet({name:e="",theme:t={},params:i,props:c={},set:p,defaults:g}){const m=this.getCommon({name:e,theme:t,params:i,set:p,defaults:g}),l=Object.entries(c).reduce((S,[I,A])=>S.push(`${I}="${A}"`)&&S,[]).join(" ");return Object.entries(m||{}).reduce((S,[I,A])=>{if(A!=null&&A.css){const O=Nd(A==null?void 0:A.css),z=`${I}-variables`;S.push(`<style type="text/css" data-primevue-style-id="${z}" ${l}>${O}</style>`)}return S},[]).join("")},getStyleSheet({name:e="",theme:t={},params:i,props:c={},set:p,defaults:g}){var m;const l={name:e,theme:t,params:i,set:p,defaults:g},S=(m=e.includes("-directive")?this.getPresetD(l):this.getPresetC(l))==null?void 0:m.css,I=Object.entries(c).reduce((A,[O,z])=>A.push(`${O}="${z}"`)&&A,[]).join(" ");return S?`<style type="text/css" data-primevue-style-id="${e}-variables" ${I}>${Nd(S)}</style>`:""},createTokens(e={},t,i="",c="",p={}){return Object.entries(e).forEach(([g,m])=>{const l=zs(g,t.variable.excludedKeyRegex)?i:i?`${i}.${Rv(g)}`:Rv(g),S=c?`${c}.${g}`:g;is(m)?this.createTokens(m,t,l,S,p):(p[l]||(p[l]={paths:[],computed(I,A={}){var O,z;return this.paths.length===1?(O=this.paths[0])==null?void 0:O.computed(this.paths[0].scheme,A.binding):I&&I!=="none"?(z=this.paths.find(D=>D.scheme===I))==null?void 0:z.computed(I,A.binding):this.paths.map(D=>D.computed(D.scheme,A[D.scheme]))}}),p[l].paths.push({path:S,value:m,scheme:S.includes("colorScheme.light")?"light":S.includes("colorScheme.dark")?"dark":"none",computed(I,A={}){const O=/{([^}]*)}/g;let z=m;if(A.name=this.path,A.binding||(A.binding={}),zs(m,O)){const H=m.trim().replaceAll(O,ne=>{var xe;const Ce=ne.replace(/{|}/g,""),X=(xe=p[Ce])==null?void 0:xe.computed(I,A);return Jp(X)&&X.length===2?`light-dark(${X[0].value},${X[1].value})`:X==null?void 0:X.value}),ue=/(\d+\w*\s+[\+\-\*\/]\s+\d+\w*)/g,ye=/var\([^)]+\)/g;z=zs(H.replace(ye,"0"),ue)?`calc(${H})`:H}return kh(A.binding)&&delete A.binding,{colorScheme:I,path:this.path,paths:A,value:z.includes("undefined")?void 0:z}}}))}),p},getTokenValue(e,t,i){var c;const g=(S=>S.split(".").filter(A=>!zs(A.toLowerCase(),i.variable.excludedKeyRegex)).join("."))(t),m=t.includes("colorScheme.light")?"light":t.includes("colorScheme.dark")?"dark":void 0,l=[(c=e[g])==null?void 0:c.computed(m)].flat().filter(S=>S);return l.length===1?l[0].value:l.reduce((S={},I)=>{const A=I,{colorScheme:O}=A,z=Ms(A,["colorScheme"]);return S[O]=z,S},void 0)},getSelectorRule(e,t,i,c){return i==="class"||i==="attr"?zc(xr(t)?`${e}${t},${e} ${t}`:e,c):zc(e,xr(t)?zc(t,c):c)},transformCSS(e,t,i,c,p={},g,m,l){if(xr(t)){const{cssLayer:S}=p;if(c!=="style"){const I=this.getColorSchemeOption(p,m);t=i==="dark"?I.reduce((A,{type:O,selector:z})=>(xr(z)&&(A+=z.includes("[CSS]")?z.replace("[CSS]",t):this.getSelectorRule(z,l,O,t)),A),""):zc(l??":root",t)}if(S){const I={name:"primeui"};is(S)&&(I.name=_o(S.name,{name:e,type:c})),xr(I.name)&&(t=zc(`@layer ${I.name}`,t),g==null||g.layerNames(I.name))}return t}return""}},Zr={defaults:{variable:{prefix:"p",selector:":root",excludedKeyRegex:/^(primitive|semantic|components|directives|variables|colorscheme|light|dark|common|root|states|extend|css)$/gi},options:{prefix:"p",darkModeSelector:"system",cssLayer:!1}},_theme:void 0,_layerNames:new Set,_loadedStyleNames:new Set,_loadingStyles:new Set,_tokens:{},update(e={}){const{theme:t}=e;t&&(this._theme=$g(Mo({},t),{options:Mo(Mo({},this.defaults.options),t.options)}),this._tokens=Io.createTokens(this.preset,this.defaults),this.clearLoadedStyleNames())},get theme(){return this._theme},get preset(){var e;return((e=this.theme)==null?void 0:e.preset)||{}},get options(){var e;return((e=this.theme)==null?void 0:e.options)||{}},get tokens(){return this._tokens},getTheme(){return this.theme},setTheme(e){this.update({theme:e}),si.emit("theme:change",e)},getPreset(){return this.preset},setPreset(e){this._theme=$g(Mo({},this.theme),{preset:e}),this._tokens=Io.createTokens(e,this.defaults),this.clearLoadedStyleNames(),si.emit("preset:change",e),si.emit("theme:change",this.theme)},getOptions(){return this.options},setOptions(e){this._theme=$g(Mo({},this.theme),{options:e}),this.clearLoadedStyleNames(),si.emit("options:change",e),si.emit("theme:change",this.theme)},getLayerNames(){return[...this._layerNames]},setLayerNames(e){this._layerNames.add(e)},getLoadedStyleNames(){return this._loadedStyleNames},isStyleNameLoaded(e){return this._loadedStyleNames.has(e)},setLoadedStyleName(e){this._loadedStyleNames.add(e)},deleteLoadedStyleName(e){this._loadedStyleNames.delete(e)},clearLoadedStyleNames(){this._loadedStyleNames.clear()},getTokenValue(e){return Io.getTokenValue(this.tokens,e,this.defaults)},getCommon(e="",t){return Io.getCommon({name:e,theme:this.theme,params:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getComponent(e="",t){const i={name:e,theme:this.theme,params:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Io.getPresetC(i)},getDirective(e="",t){const i={name:e,theme:this.theme,params:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Io.getPresetD(i)},getCustomPreset(e="",t,i,c){const p={name:e,preset:t,options:this.options,selector:i,params:c,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Io.getPreset(p)},getLayerOrderCSS(e=""){return Io.getLayerOrder(e,this.options,{names:this.getLayerNames()},this.defaults)},transformCSS(e="",t,i="style",c){return Io.transformCSS(e,t,c,i,this.options,{layerNames:this.setLayerNames.bind(this)},this.defaults)},getCommonStyleSheet(e="",t,i={}){return Io.getCommonStyleSheet({name:e,theme:this.theme,params:t,props:i,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getStyleSheet(e,t,i={}){return Io.getStyleSheet({name:e,theme:this.theme,params:t,props:i,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},onStyleMounted(e){this._loadingStyles.add(e)},onStyleUpdated(e){this._loadingStyles.add(e)},onStyleLoaded(e,{name:t}){this._loadingStyles.size&&(this._loadingStyles.delete(t),si.emit(`theme:${t}:load`,e),!this._loadingStyles.size&&si.emit("theme:load"))}},mi={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"};function $v(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=dE(e))||t){i&&(e=i);var c=0,p=function(){};return{s:p,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(I){throw I},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g,m=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var I=i.next();return m=I.done,I},e:function(I){l=!0,g=I},f:function(){try{m||i.return==null||i.return()}finally{if(l)throw g}}}}function dE(e,t){if(e){if(typeof e=="string")return Bv(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Bv(e,t):void 0}}function Bv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,c=Array(t);i<t;i++)c[i]=e[i];return c}var hE={filter:function(t,i,c,p,g){var m=[];if(!t)return m;var l=$v(t),S;try{for(l.s();!(S=l.n()).done;){var I=S.value;if(typeof I=="string"){if(this.filters[p](I,c,g)){m.push(I);continue}}else{var A=$v(i),O;try{for(A.s();!(O=A.n()).done;){var z=O.value,D=As(I,z);if(this.filters[p](D,c,g)){m.push(I);break}}}catch(H){A.e(H)}finally{A.f()}}}}catch(H){l.e(H)}finally{l.f()}return m},filters:{startsWith:function(t,i,c){if(i==null||i==="")return!0;if(t==null)return!1;var p=mo(i.toString()).toLocaleLowerCase(c),g=mo(t.toString()).toLocaleLowerCase(c);return g.slice(0,p.length)===p},contains:function(t,i,c){if(i==null||i==="")return!0;if(t==null)return!1;var p=mo(i.toString()).toLocaleLowerCase(c),g=mo(t.toString()).toLocaleLowerCase(c);return g.indexOf(p)!==-1},notContains:function(t,i,c){if(i==null||i==="")return!0;if(t==null)return!1;var p=mo(i.toString()).toLocaleLowerCase(c),g=mo(t.toString()).toLocaleLowerCase(c);return g.indexOf(p)===-1},endsWith:function(t,i,c){if(i==null||i==="")return!0;if(t==null)return!1;var p=mo(i.toString()).toLocaleLowerCase(c),g=mo(t.toString()).toLocaleLowerCase(c);return g.indexOf(p,g.length-p.length)!==-1},equals:function(t,i,c){return i==null||i===""?!0:t==null?!1:t.getTime&&i.getTime?t.getTime()===i.getTime():mo(t.toString()).toLocaleLowerCase(c)==mo(i.toString()).toLocaleLowerCase(c)},notEquals:function(t,i,c){return i==null||i===""?!1:t==null?!0:t.getTime&&i.getTime?t.getTime()!==i.getTime():mo(t.toString()).toLocaleLowerCase(c)!=mo(i.toString()).toLocaleLowerCase(c)},in:function(t,i){if(i==null||i.length===0)return!0;for(var c=0;c<i.length;c++)if(Th(t,i[c]))return!0;return!1},between:function(t,i){return i==null||i[0]==null||i[1]==null?!0:t==null?!1:t.getTime?i[0].getTime()<=t.getTime()&&t.getTime()<=i[1].getTime():i[0]<=t&&t<=i[1]},lt:function(t,i){return i==null?!0:t==null?!1:t.getTime&&i.getTime?t.getTime()<i.getTime():t<i},lte:function(t,i){return i==null?!0:t==null?!1:t.getTime&&i.getTime?t.getTime()<=i.getTime():t<=i},gt:function(t,i){return i==null?!0:t==null?!1:t.getTime&&i.getTime?t.getTime()>i.getTime():t>i},gte:function(t,i){return i==null?!0:t==null?!1:t.getTime&&i.getTime?t.getTime()>=i.getTime():t>=i},dateIs:function(t,i){return i==null?!0:t==null?!1:t.toDateString()===i.toDateString()},dateIsNot:function(t,i){return i==null?!0:t==null?!1:t.toDateString()!==i.toDateString()},dateBefore:function(t,i){return i==null?!0:t==null?!1:t.getTime()<i.getTime()},dateAfter:function(t,i){return i==null?!0:t==null?!1:t.getTime()>i.getTime()}},register:function(t,i){this.filters[t]=i}},fE=({dt:e})=>`
*,
::before,
::after {
    box-sizing: border-box;
}

/* Non vue overlay animations */
.p-connected-overlay {
    opacity: 0;
    transform: scaleY(0.8);
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-visible {
    opacity: 1;
    transform: scaleY(1);
}

.p-connected-overlay-hidden {
    opacity: 0;
    transform: scaleY(1);
    transition: opacity 0.1s linear;
}

/* Vue based overlay animations */
.p-connected-overlay-enter-from {
    opacity: 0;
    transform: scaleY(0.8);
}

.p-connected-overlay-leave-to {
    opacity: 0;
}

.p-connected-overlay-enter-active {
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1),
        opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-connected-overlay-leave-active {
    transition: opacity 0.1s linear;
}

/* Toggleable Content */
.p-toggleable-content-enter-from,
.p-toggleable-content-leave-to {
    max-height: 0;
}

.p-toggleable-content-enter-to,
.p-toggleable-content-leave-from {
    max-height: 1000px;
}

.p-toggleable-content-leave-active {
    overflow: hidden;
    transition: max-height 0.45s cubic-bezier(0, 1, 0, 1);
}

.p-toggleable-content-enter-active {
    overflow: hidden;
    transition: max-height 1s ease-in-out;
}

.p-disabled,
.p-disabled * {
    cursor: default;
    pointer-events: none;
    user-select: none;
}

.p-disabled,
.p-component:disabled {
    opacity: ${e("disabled.opacity")};
}

.pi {
    font-size: ${e("icon.size")};
}

.p-icon {
    width: ${e("icon.size")};
    height: ${e("icon.size")};
}

.p-overlay-mask {
    background: ${e("mask.background")};
    color: ${e("mask.color")};
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-overlay-mask-enter {
    animation: p-overlay-mask-enter-animation ${e("mask.transition.duration")} forwards;
}

.p-overlay-mask-leave {
    animation: p-overlay-mask-leave-animation ${e("mask.transition.duration")} forwards;
}

@keyframes p-overlay-mask-enter-animation {
    from {
        background: transparent;
    }
    to {
        background: ${e("mask.background")};
    }
}
@keyframes p-overlay-mask-leave-animation {
    from {
        background: ${e("mask.background")};
    }
    to {
        background: transparent;
    }
}
`;function th(e){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(e)}function Fv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,c)}return i}function Nv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Fv(Object(i),!0).forEach(function(c){pE(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Fv(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function pE(e,t,i){return(t=mE(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mE(e){var t=gE(e,"string");return th(t)=="symbol"?t:t+""}function gE(e,t){if(th(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(th(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _E(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;zo()?Ia(e):t?e():wh(e)}var yE=0;function bE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=on(!1),c=on(e),p=on(null),g=yy()?window.document:void 0,m=t.document,l=m===void 0?g:m,S=t.immediate,I=S===void 0?!0:S,A=t.manual,O=A===void 0?!1:A,z=t.name,D=z===void 0?"style_".concat(++yE):z,H=t.id,ue=H===void 0?void 0:H,ye=t.media,ne=ye===void 0?void 0:ye,xe=t.nonce,Ce=xe===void 0?void 0:xe,X=t.first,we=X===void 0?!1:X,Oe=t.onMounted,ke=Oe===void 0?void 0:Oe,Ve=t.onUpdated,We=Ve===void 0?void 0:Ve,ft=t.onLoad,Qe=ft===void 0?void 0:ft,Ye=t.props,Xe=Ye===void 0?{}:Ye,wt=function(){},Kt=function(Ut){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(l){var mt=Nv(Nv({},Xe),et),nt=mt.name||D,bt=mt.id||ue,ir=mt.nonce||Ce;p.value=l.querySelector('style[data-primevue-style-id="'.concat(nt,'"]'))||l.getElementById(bt)||l.createElement("style"),p.value.isConnected||(c.value=Ut||e,wp(p.value,{type:"text/css",id:bt,media:ne,nonce:ir}),we?l.head.prepend(p.value):l.head.appendChild(p.value),Vw(p.value,"data-primevue-style-id",nt),wp(p.value,mt),p.value.onload=function(Jt){return Qe==null?void 0:Qe(Jt,{name:nt})},ke==null||ke(nt)),!i.value&&(wt=Kn(c,function(Jt){p.value.textContent=Jt,We==null||We(nt)},{immediate:!0}),i.value=!0)}},vt=function(){!l||!i.value||(wt(),HM(p.value)&&l.head.removeChild(p.value),i.value=!1)};return I&&!O&&_E(Kt),{id:ue,name:D,el:p,css:c,unload:vt,load:Kt,isLoaded:G_(i)}}function rh(e){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(e)}function jv(e,t){return CE(e)||wE(e,t)||xE(e,t)||vE()}function vE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xE(e,t){if(e){if(typeof e=="string")return Vv(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Vv(e,t):void 0}}function Vv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,c=Array(t);i<t;i++)c[i]=e[i];return c}function wE(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var c,p,g,m,l=[],S=!0,I=!1;try{if(g=(i=i.call(e)).next,t!==0)for(;!(S=(c=g.call(i)).done)&&(l.push(c.value),l.length!==t);S=!0);}catch(A){I=!0,p=A}finally{try{if(!S&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(I)throw p}}return l}}function CE(e){if(Array.isArray(e))return e}function Uv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,c)}return i}function Bg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Uv(Object(i),!0).forEach(function(c){SE(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Uv(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function SE(e,t,i){return(t=kE(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function kE(e){var t=TE(e,"string");return rh(t)=="symbol"?t:t+""}function TE(e,t){if(rh(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(rh(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PE=function(t){var i=t.dt;return`
.p-hidden-accessible {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    opacity: 0;
    overflow: hidden;
    padding: 0;
    pointer-events: none;
    position: absolute;
    white-space: nowrap;
    width: 1px;
}

.p-overflow-hidden {
    overflow: hidden;
    padding-right: `.concat(i("scrollbar.width"),`;
}
`)},IE={},ME={},Er={name:"base",css:PE,style:fE,classes:IE,inlineStyles:ME,load:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(g){return g},p=c(_o(t,{dt:jd}));return xr(p)?bE(Nd(p),Bg({name:this.name},i)):{}},loadCSS:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.load(this.css,t)},loadStyle:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return this.load(this.style,i,function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Zr.transformCSS(i.name||t.name,"".concat(p).concat(c))})},getCommonTheme:function(t){return Zr.getCommon(this.name,t)},getComponentTheme:function(t){return Zr.getComponent(this.name,t)},getDirectiveTheme:function(t){return Zr.getDirective(this.name,t)},getPresetTheme:function(t,i,c){return Zr.getCustomPreset(this.name,t,i,c)},getLayerOrderThemeCSS:function(){return Zr.getLayerOrderCSS(this.name)},getStyleSheet:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.css){var c=_o(this.css,{dt:jd})||"",p=Nd("".concat(c).concat(t)),g=Object.entries(i).reduce(function(m,l){var S=jv(l,2),I=S[0],A=S[1];return m.push("".concat(I,'="').concat(A,'"'))&&m},[]).join(" ");return xr(p)?'<style type="text/css" data-primevue-style-id="'.concat(this.name,'" ').concat(g,">").concat(p,"</style>"):""}return""},getCommonThemeStyleSheet:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Zr.getCommonStyleSheet(this.name,t,i)},getThemeStyleSheet:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=[Zr.getStyleSheet(this.name,t,i)];if(this.style){var p=this.name==="base"?"global-style":"".concat(this.name,"-style"),g=_o(this.style,{dt:jd}),m=Nd(Zr.transformCSS(p,g)),l=Object.entries(i).reduce(function(S,I){var A=jv(I,2),O=A[0],z=A[1];return S.push("".concat(O,'="').concat(z,'"'))&&S},[]).join(" ");xr(m)&&c.push('<style type="text/css" data-primevue-style-id="'.concat(p,'" ').concat(l,">").concat(m,"</style>"))}return c.join("")},extend:function(t){return Bg(Bg({},this),{},{css:void 0,style:void 0},t)}},va=gy();function nh(e){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nh(e)}function Zv(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,c)}return i}function Jf(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Zv(Object(i),!0).forEach(function(c){EE(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Zv(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function EE(e,t,i){return(t=AE(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function AE(e){var t=LE(e,"string");return nh(t)=="symbol"?t:t+""}function LE(e,t){if(nh(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(nh(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RE={ripple:!1,inputStyle:null,inputVariant:null,locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",completed:"Completed",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",today:"Today",weekHeader:"Wk",firstDayOfWeek:0,showMonthAfterYear:!1,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",fileChosenMessage:"{0} files",noFileChosenMessage:"No file chosen",emptyMessage:"No available options",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"Page {page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List"}},filterMatchModeOptions:{text:[mi.STARTS_WITH,mi.CONTAINS,mi.NOT_CONTAINS,mi.ENDS_WITH,mi.EQUALS,mi.NOT_EQUALS],numeric:[mi.EQUALS,mi.NOT_EQUALS,mi.LESS_THAN,mi.LESS_THAN_OR_EQUAL_TO,mi.GREATER_THAN,mi.GREATER_THAN_OR_EQUAL_TO],date:[mi.DATE_IS,mi.DATE_IS_NOT,mi.DATE_BEFORE,mi.DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100},theme:void 0,unstyled:!1,pt:void 0,ptOptions:{mergeSections:!0,mergeProps:!1},csp:{nonce:void 0}},DE=Symbol();function OE(e,t){var i={config:Xc(t)};return e.config.globalProperties.$primevue=i,e.provide(DE,i),zE(),$E(e,i),i}var $c=[];function zE(){si.clear(),$c.forEach(function(e){return e==null?void 0:e()}),$c=[]}function $E(e,t){var i=on(!1),c=function(){var I;if(((I=t.config)===null||I===void 0?void 0:I.theme)!=="none"&&!Zr.isStyleNameLoaded("common")){var A,O,z=((A=Er.getCommonTheme)===null||A===void 0?void 0:A.call(Er))||{},D=z.primitive,H=z.semantic,ue=z.global,ye=z.style,ne={nonce:(O=t.config)===null||O===void 0||(O=O.csp)===null||O===void 0?void 0:O.nonce};Er.load(D==null?void 0:D.css,Jf({name:"primitive-variables"},ne)),Er.load(H==null?void 0:H.css,Jf({name:"semantic-variables"},ne)),Er.load(ue==null?void 0:ue.css,Jf({name:"global-variables"},ne)),Er.loadStyle(Jf({name:"global-style"},ne),ye),Zr.setLoadedStyleName("common")}};si.on("theme:change",function(S){i.value||(e.config.globalProperties.$primevue.config.theme=S,i.value=!0)});var p=Kn(t.config,function(S,I){va.emit("config:change",{newValue:S,oldValue:I})},{immediate:!0,deep:!0}),g=Kn(function(){return t.config.ripple},function(S,I){va.emit("config:ripple:change",{newValue:S,oldValue:I})},{immediate:!0,deep:!0}),m=Kn(function(){return t.config.theme},function(S,I){i.value||Zr.setTheme(S),t.config.unstyled||c(),i.value=!1,va.emit("config:theme:change",{newValue:S,oldValue:I})},{immediate:!0,deep:!1}),l=Kn(function(){return t.config.unstyled},function(S,I){!S&&t.config.theme&&c(),va.emit("config:unstyled:change",{newValue:S,oldValue:I})},{immediate:!0,deep:!0});$c.push(p),$c.push(g),$c.push(m),$c.push(l)}var BE={install:function(t,i){var c=jM(RE,i);OE(t,c)}},FE={transitionDuration:"{transition.duration}"},NE={borderWidth:"0 0 1px 0",borderColor:"{content.border.color}"},jE={color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",padding:"1.125rem",fontWeight:"600",borderRadius:"0",borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",hoverBackground:"{content.background}",activeBackground:"{content.background}",activeHoverBackground:"{content.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",activeHoverColor:"{text.color}"},first:{topBorderRadius:"{content.border.radius}",borderWidth:"0"},last:{bottomBorderRadius:"{content.border.radius}",activeBottomBorderRadius:"0"}},VE={borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",color:"{text.color}",padding:"0 1.125rem 1.125rem 1.125rem"},UE={root:FE,panel:NE,header:jE,content:VE},ZE={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},GE={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},WE={padding:"{list.padding}",gap:"{list.gap}"},HE={focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},qE={background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},KE={width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},YE={borderRadius:"{border.radius.sm}"},XE={padding:"{list.option.padding}"},JE={light:{chip:{focusBackground:"{surface.200}",focusColor:"{surface.800}"},dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",focusColor:"{surface.0}"},dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"}}},QE={root:ZE,overlay:GE,list:WE,option:HE,optionGroup:qE,dropdown:KE,chip:YE,emptyMessage:XE,colorScheme:JE},eA={width:"2rem",height:"2rem",fontSize:"1rem",background:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},tA={size:"1rem"},rA={borderColor:"{content.background}",offset:"-0.75rem"},nA={width:"3rem",height:"3rem",fontSize:"1.5rem",icon:{size:"1.5rem"},group:{offset:"-1rem"}},iA={width:"4rem",height:"4rem",fontSize:"2rem",icon:{size:"2rem"},group:{offset:"-1.5rem"}},oA={root:eA,icon:tA,group:rA,lg:nA,xl:iA},sA={borderRadius:"{border.radius.md}",padding:"0 0.5rem",fontSize:"0.75rem",fontWeight:"700",minWidth:"1.5rem",height:"1.5rem"},aA={size:"0.5rem"},lA={fontSize:"0.625rem",minWidth:"1.25rem",height:"1.25rem"},cA={fontSize:"0.875rem",minWidth:"1.75rem",height:"1.75rem"},uA={fontSize:"1rem",minWidth:"2rem",height:"2rem"},dA={light:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.500}",color:"{surface.0}"},info:{background:"{sky.500}",color:"{surface.0}"},warn:{background:"{orange.500}",color:"{surface.0}"},danger:{background:"{red.500}",color:"{surface.0}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"{green.400}",color:"{green.950}"},info:{background:"{sky.400}",color:"{sky.950}"},warn:{background:"{orange.400}",color:"{orange.950}"},danger:{background:"{red.400}",color:"{red.950}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}},hA={root:sA,dot:aA,sm:lA,lg:cA,xl:uA,colorScheme:dA},fA={borderRadius:{none:"0",xs:"2px",sm:"4px",md:"6px",lg:"8px",xl:"12px"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"}},pA={transitionDuration:"0.2s",focusRing:{width:"1px",style:"solid",color:"{primary.color}",offset:"2px",shadow:"none"},disabledOpacity:"0.6",iconSize:"1rem",anchorGutter:"2px",primary:{50:"{emerald.50}",100:"{emerald.100}",200:"{emerald.200}",300:"{emerald.300}",400:"{emerald.400}",500:"{emerald.500}",600:"{emerald.600}",700:"{emerald.700}",800:"{emerald.800}",900:"{emerald.900}",950:"{emerald.950}"},formField:{paddingX:"0.75rem",paddingY:"0.5rem",sm:{fontSize:"0.875rem",paddingX:"0.625rem",paddingY:"0.375rem"},lg:{fontSize:"1.125rem",paddingX:"0.875rem",paddingY:"0.625rem"},borderRadius:"{border.radius.md}",focusRing:{width:"0",style:"none",color:"transparent",offset:"0",shadow:"none"},transitionDuration:"{transition.duration}"},list:{padding:"0.25rem 0.25rem",gap:"2px",header:{padding:"0.5rem 1rem 0.25rem 1rem"},option:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}"},optionGroup:{padding:"0.5rem 0.75rem",fontWeight:"600"}},content:{borderRadius:"{border.radius.md}"},mask:{transitionDuration:"0.15s"},navigation:{list:{padding:"0.25rem 0.25rem",gap:"2px"},item:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}",gap:"0.5rem"},submenuLabel:{padding:"0.5rem 0.75rem",fontWeight:"600"},submenuIcon:{size:"0.875rem"}},overlay:{select:{borderRadius:"{border.radius.md}",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},popover:{borderRadius:"{border.radius.md}",padding:"0.75rem",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},modal:{borderRadius:"{border.radius.xl}",padding:"1.25rem",shadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},navigation:{shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"}},colorScheme:{light:{surface:{0:"#ffffff",50:"{slate.50}",100:"{slate.100}",200:"{slate.200}",300:"{slate.300}",400:"{slate.400}",500:"{slate.500}",600:"{slate.600}",700:"{slate.700}",800:"{slate.800}",900:"{slate.900}",950:"{slate.950}"},primary:{color:"{primary.500}",contrastColor:"#ffffff",hoverColor:"{primary.600}",activeColor:"{primary.700}"},highlight:{background:"{primary.50}",focusBackground:"{primary.100}",color:"{primary.700}",focusColor:"{primary.800}"},mask:{background:"rgba(0,0,0,0.4)",color:"{surface.200}"},formField:{background:"{surface.0}",disabledBackground:"{surface.200}",filledBackground:"{surface.50}",filledHoverBackground:"{surface.50}",filledFocusBackground:"{surface.50}",borderColor:"{surface.300}",hoverBorderColor:"{surface.400}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.400}",color:"{surface.700}",disabledColor:"{surface.500}",placeholderColor:"{surface.500}",invalidPlaceholderColor:"{red.600}",floatLabelColor:"{surface.500}",floatLabelFocusColor:"{primary.600}",floatLabelActiveColor:"{surface.500}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.700}",hoverColor:"{surface.800}",mutedColor:"{surface.500}",hoverMutedColor:"{surface.600}"},content:{background:"{surface.0}",hoverBackground:"{surface.100}",borderColor:"{surface.200}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},popover:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},modal:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.100}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.100}",activeBackground:"{surface.100}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}}},dark:{surface:{0:"#ffffff",50:"{zinc.50}",100:"{zinc.100}",200:"{zinc.200}",300:"{zinc.300}",400:"{zinc.400}",500:"{zinc.500}",600:"{zinc.600}",700:"{zinc.700}",800:"{zinc.800}",900:"{zinc.900}",950:"{zinc.950}"},primary:{color:"{primary.400}",contrastColor:"{surface.900}",hoverColor:"{primary.300}",activeColor:"{primary.200}"},highlight:{background:"color-mix(in srgb, {primary.400}, transparent 84%)",focusBackground:"color-mix(in srgb, {primary.400}, transparent 76%)",color:"rgba(255,255,255,.87)",focusColor:"rgba(255,255,255,.87)"},mask:{background:"rgba(0,0,0,0.6)",color:"{surface.200}"},formField:{background:"{surface.950}",disabledBackground:"{surface.700}",filledBackground:"{surface.800}",filledHoverBackground:"{surface.800}",filledFocusBackground:"{surface.800}",borderColor:"{surface.600}",hoverBorderColor:"{surface.500}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.300}",color:"{surface.0}",disabledColor:"{surface.400}",placeholderColor:"{surface.400}",invalidPlaceholderColor:"{red.400}",floatLabelColor:"{surface.400}",floatLabelFocusColor:"{primary.color}",floatLabelActiveColor:"{surface.400}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.0}",hoverColor:"{surface.0}",mutedColor:"{surface.400}",hoverMutedColor:"{surface.300}"},content:{background:"{surface.900}",hoverBackground:"{surface.800}",borderColor:"{surface.700}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},popover:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},modal:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.800}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.800}",activeBackground:"{surface.800}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}}}}},mA={primitive:fA,semantic:pA},gA={borderRadius:"{content.border.radius}"},_A={root:gA},yA={padding:"1rem",background:"{content.background}",gap:"0.5rem",transitionDuration:"{transition.duration}"},bA={color:"{text.muted.color}",hoverColor:"{text.color}",borderRadius:"{content.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",hoverColor:"{navigation.item.icon.focus.color}"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},vA={color:"{navigation.item.icon.color}"},xA={root:yA,item:bA,separator:vA},wA={borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",gap:"0.5rem",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",iconOnlyWidth:"2.5rem",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}",iconOnlyWidth:"2rem"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}",iconOnlyWidth:"3rem"},label:{fontWeight:"500"},raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"},badgeSize:"1rem",transitionDuration:"{form.field.transition.duration}"},CA={light:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",borderColor:"{surface.100}",hoverBorderColor:"{surface.200}",activeBorderColor:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}",focusRing:{color:"{surface.600}",shadow:"none"}},info:{background:"{sky.500}",hoverBackground:"{sky.600}",activeBackground:"{sky.700}",borderColor:"{sky.500}",hoverBorderColor:"{sky.600}",activeBorderColor:"{sky.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{sky.500}",shadow:"none"}},success:{background:"{green.500}",hoverBackground:"{green.600}",activeBackground:"{green.700}",borderColor:"{green.500}",hoverBorderColor:"{green.600}",activeBorderColor:"{green.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{green.500}",shadow:"none"}},warn:{background:"{orange.500}",hoverBackground:"{orange.600}",activeBackground:"{orange.700}",borderColor:"{orange.500}",hoverBorderColor:"{orange.600}",activeBorderColor:"{orange.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{orange.500}",shadow:"none"}},help:{background:"{purple.500}",hoverBackground:"{purple.600}",activeBackground:"{purple.700}",borderColor:"{purple.500}",hoverBorderColor:"{purple.600}",activeBorderColor:"{purple.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{purple.500}",shadow:"none"}},danger:{background:"{red.500}",hoverBackground:"{red.600}",activeBackground:"{red.700}",borderColor:"{red.500}",hoverBorderColor:"{red.600}",activeBorderColor:"{red.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{red.500}",shadow:"none"}},contrast:{background:"{surface.950}",hoverBackground:"{surface.900}",activeBackground:"{surface.800}",borderColor:"{surface.950}",hoverBorderColor:"{surface.900}",activeBorderColor:"{surface.800}",color:"{surface.0}",hoverColor:"{surface.0}",activeColor:"{surface.0}",focusRing:{color:"{surface.950}",shadow:"none"}}},outlined:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",borderColor:"{primary.200}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",borderColor:"{green.200}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",borderColor:"{sky.200}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",borderColor:"{orange.200}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",borderColor:"{purple.200}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",borderColor:"{red.200}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.700}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.700}"}},text:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.700}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}},dark:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",borderColor:"{surface.800}",hoverBorderColor:"{surface.700}",activeBorderColor:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}",focusRing:{color:"{surface.300}",shadow:"none"}},info:{background:"{sky.400}",hoverBackground:"{sky.300}",activeBackground:"{sky.200}",borderColor:"{sky.400}",hoverBorderColor:"{sky.300}",activeBorderColor:"{sky.200}",color:"{sky.950}",hoverColor:"{sky.950}",activeColor:"{sky.950}",focusRing:{color:"{sky.400}",shadow:"none"}},success:{background:"{green.400}",hoverBackground:"{green.300}",activeBackground:"{green.200}",borderColor:"{green.400}",hoverBorderColor:"{green.300}",activeBorderColor:"{green.200}",color:"{green.950}",hoverColor:"{green.950}",activeColor:"{green.950}",focusRing:{color:"{green.400}",shadow:"none"}},warn:{background:"{orange.400}",hoverBackground:"{orange.300}",activeBackground:"{orange.200}",borderColor:"{orange.400}",hoverBorderColor:"{orange.300}",activeBorderColor:"{orange.200}",color:"{orange.950}",hoverColor:"{orange.950}",activeColor:"{orange.950}",focusRing:{color:"{orange.400}",shadow:"none"}},help:{background:"{purple.400}",hoverBackground:"{purple.300}",activeBackground:"{purple.200}",borderColor:"{purple.400}",hoverBorderColor:"{purple.300}",activeBorderColor:"{purple.200}",color:"{purple.950}",hoverColor:"{purple.950}",activeColor:"{purple.950}",focusRing:{color:"{purple.400}",shadow:"none"}},danger:{background:"{red.400}",hoverBackground:"{red.300}",activeBackground:"{red.200}",borderColor:"{red.400}",hoverBorderColor:"{red.300}",activeBorderColor:"{red.200}",color:"{red.950}",hoverColor:"{red.950}",activeColor:"{red.950}",focusRing:{color:"{red.400}",shadow:"none"}},contrast:{background:"{surface.0}",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{surface.0}",hoverBorderColor:"{surface.100}",activeBorderColor:"{surface.200}",color:"{surface.950}",hoverColor:"{surface.950}",activeColor:"{surface.950}",focusRing:{color:"{surface.0}",shadow:"none"}}},outlined:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",borderColor:"{primary.700}",color:"{primary.color}"},secondary:{hoverBackground:"rgba(255,255,255,0.04)",activeBackground:"rgba(255,255,255,0.16)",borderColor:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",borderColor:"{green.700}",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",borderColor:"{sky.700}",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",borderColor:"{orange.700}",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",borderColor:"{purple.700}",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",borderColor:"{red.700}",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.500}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.600}",color:"{surface.0}"}},text:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",color:"{primary.color}"},secondary:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}}},SA={root:wA,colorScheme:CA},kA={background:"{content.background}",borderRadius:"{border.radius.xl}",color:"{content.color}",shadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)"},TA={padding:"1.25rem",gap:"0.5rem"},PA={gap:"0.5rem"},IA={fontSize:"1.25rem",fontWeight:"500"},MA={color:"{text.muted.color}"},EA={root:kA,body:TA,caption:PA,title:IA,subtitle:MA},AA={transitionDuration:"{transition.duration}"},LA={gap:"0.25rem"},RA={padding:"1rem",gap:"0.5rem"},DA={width:"2rem",height:"0.5rem",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},OA={light:{indicator:{background:"{surface.200}",hoverBackground:"{surface.300}",activeBackground:"{primary.color}"}},dark:{indicator:{background:"{surface.700}",hoverBackground:"{surface.600}",activeBackground:"{primary.color}"}}},zA={root:AA,content:LA,indicatorList:RA,indicator:DA,colorScheme:OA},$A={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},BA={width:"2.5rem",color:"{form.field.icon.color}"},FA={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},NA={padding:"{list.padding}",gap:"{list.gap}",mobileIndent:"1rem"},jA={focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",icon:{color:"{list.option.icon.color}",focusColor:"{list.option.icon.focus.color}",size:"0.875rem"}},VA={color:"{form.field.icon.color}"},UA={root:$A,dropdown:BA,overlay:FA,list:NA,option:jA,clearIcon:VA},ZA={borderRadius:"{border.radius.sm}",width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},GA={size:"0.875rem",color:"{form.field.color}",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.75rem"},lg:{size:"1rem"}},WA={root:ZA,icon:GA},HA={borderRadius:"16px",paddingX:"0.75rem",paddingY:"0.5rem",gap:"0.5rem",transitionDuration:"{transition.duration}"},qA={width:"2rem",height:"2rem"},KA={size:"1rem"},YA={size:"1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"}},XA={light:{root:{background:"{surface.100}",color:"{surface.800}"},icon:{color:"{surface.800}"},removeIcon:{color:"{surface.800}"}},dark:{root:{background:"{surface.800}",color:"{surface.0}"},icon:{color:"{surface.0}"},removeIcon:{color:"{surface.0}"}}},JA={root:HA,image:qA,icon:KA,removeIcon:YA,colorScheme:XA},QA={transitionDuration:"{transition.duration}"},e5={width:"1.5rem",height:"1.5rem",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},t5={shadow:"{overlay.popover.shadow}",borderRadius:"{overlay.popover.borderRadius}"},r5={light:{panel:{background:"{surface.800}",borderColor:"{surface.900}"},handle:{color:"{surface.0}"}},dark:{panel:{background:"{surface.900}",borderColor:"{surface.700}"},handle:{color:"{surface.0}"}}},n5={root:QA,preview:e5,panel:t5,colorScheme:r5},i5={size:"2rem",color:"{overlay.modal.color}"},o5={gap:"1rem"},s5={icon:i5,content:o5},a5={background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},l5={padding:"{overlay.popover.padding}",gap:"1rem"},c5={size:"1.5rem",color:"{overlay.popover.color}"},u5={gap:"0.5rem",padding:"0 {overlay.popover.padding} {overlay.popover.padding} {overlay.popover.padding}"},d5={root:a5,content:l5,icon:c5,footer:u5},h5={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},f5={padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},p5={focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},m5={mobileIndent:"1rem"},g5={size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},_5={borderColor:"{content.border.color}"},y5={root:h5,list:f5,item:p5,submenu:m5,submenuIcon:g5,separator:_5},b5={transitionDuration:"{transition.duration}"},v5={background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},x5={background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{datatable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},w5={fontWeight:"600"},C5={background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},S5={borderColor:"{datatable.border.color}",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},k5={background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},T5={fontWeight:"600"},P5={background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},I5={color:"{primary.color}"},M5={width:"0.5rem"},E5={width:"1px",color:"{primary.color}"},A5={color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},L5={size:"2rem"},R5={hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},D5={inlineGap:"0.5rem",overlaySelect:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},overlayPopover:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}",gap:"0.5rem"},rule:{borderColor:"{content.border.color}"},constraintList:{padding:"{list.padding}",gap:"{list.gap}"},constraint:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",separator:{borderColor:"{content.border.color}"},padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"}},O5={borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},z5={borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},$5={light:{root:{borderColor:"{content.border.color}"},row:{stripedBackground:"{surface.50}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},row:{stripedBackground:"{surface.950}"},bodyCell:{selectedBorderColor:"{primary.900}"}}},B5={root:b5,header:v5,headerCell:x5,columnTitle:w5,row:C5,bodyCell:S5,footerCell:k5,columnFooter:T5,footer:P5,dropPoint:I5,columnResizer:M5,resizeIndicator:E5,sortIcon:A5,loadingIcon:L5,rowToggleButton:R5,filter:D5,paginatorTop:O5,paginatorBottom:z5,colorScheme:$5},F5={borderColor:"transparent",borderWidth:"0",borderRadius:"0",padding:"0"},N5={background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",borderRadius:"0"},j5={background:"{content.background}",color:"{content.color}",borderColor:"transparent",borderWidth:"0",padding:"0",borderRadius:"0"},V5={background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"1px 0 0 0",padding:"0.75rem 1rem",borderRadius:"0"},U5={borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},Z5={borderColor:"{content.border.color}",borderWidth:"1px 0 0 0"},G5={root:F5,header:N5,content:j5,footer:V5,paginatorTop:U5,paginatorBottom:Z5},W5={transitionDuration:"{transition.duration}"},H5={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}"},q5={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",padding:"0 0 0.5rem 0"},K5={gap:"0.5rem",fontWeight:"500"},Y5={width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},X5={color:"{form.field.icon.color}"},J5={hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},Q5={hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},eL={borderColor:"{content.border.color}",gap:"{overlay.popover.padding}"},tL={margin:"0.5rem 0 0 0"},rL={padding:"0.25rem",fontWeight:"500",color:"{content.color}"},nL={hoverBackground:"{content.hover.background}",selectedBackground:"{primary.color}",rangeSelectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{primary.contrast.color}",rangeSelectedColor:"{highlight.color}",width:"2rem",height:"2rem",borderRadius:"50%",padding:"0.25rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},iL={margin:"0.5rem 0 0 0"},oL={padding:"0.375rem",borderRadius:"{content.border.radius}"},sL={margin:"0.5rem 0 0 0"},aL={padding:"0.375rem",borderRadius:"{content.border.radius}"},lL={padding:"0.5rem 0 0 0",borderColor:"{content.border.color}"},cL={padding:"0.5rem 0 0 0",borderColor:"{content.border.color}",gap:"0.5rem",buttonGap:"0.25rem"},uL={light:{dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"},today:{background:"{surface.200}",color:"{surface.900}"}},dark:{dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"},today:{background:"{surface.700}",color:"{surface.0}"}}},dL={root:W5,panel:H5,header:q5,title:K5,dropdown:Y5,inputIcon:X5,selectMonth:J5,selectYear:Q5,group:eL,dayView:tL,weekDay:rL,date:nL,monthView:iL,month:oL,yearView:sL,year:aL,buttonbar:lL,timePicker:cL,colorScheme:uL},hL={background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",borderRadius:"{overlay.modal.border.radius}",shadow:"{overlay.modal.shadow}"},fL={padding:"{overlay.modal.padding}",gap:"0.5rem"},pL={fontSize:"1.25rem",fontWeight:"600"},mL={padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},gL={padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}",gap:"0.5rem"},_L={root:hL,header:fL,title:pL,content:mL,footer:gL},yL={borderColor:"{content.border.color}"},bL={background:"{content.background}",color:"{text.color}"},vL={margin:"1rem 0",padding:"0 1rem",content:{padding:"0 0.5rem"}},xL={margin:"0 1rem",padding:"0.5rem 0",content:{padding:"0.5rem 0"}},wL={root:yL,content:bL,horizontal:vL,vertical:xL},CL={background:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.2)",padding:"0.5rem",borderRadius:"{border.radius.xl}"},SL={borderRadius:"{content.border.radius}",padding:"0.5rem",size:"3rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},kL={root:CL,item:SL},TL={background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",shadow:"{overlay.modal.shadow}"},PL={padding:"{overlay.modal.padding}"},IL={fontSize:"1.5rem",fontWeight:"600"},ML={padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},EL={padding:"{overlay.modal.padding}"},AL={root:TL,header:PL,title:IL,content:ML,footer:EL},LL={background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}"},RL={color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},DL={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}",padding:"{list.padding}"},OL={focusBackground:"{list.option.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},zL={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},$L={toolbar:LL,toolbarItem:RL,overlay:DL,overlayOption:OL,content:zL},BL={background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",padding:"0 1.125rem 1.125rem 1.125rem",transitionDuration:"{transition.duration}"},FL={background:"{content.background}",hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",borderRadius:"{content.border.radius}",borderWidth:"1px",borderColor:"transparent",padding:"0.5rem 0.75rem",gap:"0.5rem",fontWeight:"600",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},NL={color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}"},jL={padding:"0"},VL={root:BL,legend:FL,toggleIcon:NL,content:jL},UL={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},ZL={background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"unset",borderWidth:"0",borderRadius:"0",gap:"0.5rem"},GL={highlightBorderColor:"{primary.color}",padding:"0 1.125rem 1.125rem 1.125rem",gap:"1rem"},WL={padding:"1rem",gap:"1rem",borderColor:"{content.border.color}",info:{gap:"0.5rem"}},HL={gap:"0.5rem"},qL={height:"0.25rem"},KL={gap:"0.5rem"},YL={root:UL,header:ZL,content:GL,file:WL,fileList:HL,progressbar:qL,basic:KL},XL={color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",activeColor:"{form.field.float.label.active.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",positionY:"{form.field.padding.y}",fontWeight:"500",active:{fontSize:"0.75rem",fontWeight:"400"}},JL={active:{top:"-1.25rem"}},QL={input:{paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"},active:{top:"{form.field.padding.y}"}},eR={borderRadius:"{border.radius.xs}",active:{background:"{form.field.background}",padding:"0 0.125rem"}},tR={root:XL,over:JL,in:QL,on:eR},rR={borderWidth:"1px",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},nR={background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.100}",hoverColor:"{surface.0}",size:"3rem",gutter:"0.5rem",prev:{borderRadius:"50%"},next:{borderRadius:"50%"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},iR={size:"1.5rem"},oR={background:"{content.background}",padding:"1rem 0.25rem"},sR={size:"2rem",borderRadius:"{content.border.radius}",gutter:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},aR={size:"1rem"},lR={background:"rgba(0, 0, 0, 0.5)",color:"{surface.100}",padding:"1rem"},cR={gap:"0.5rem",padding:"1rem"},uR={width:"1rem",height:"1rem",activeBackground:"{primary.color}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},dR={background:"rgba(0, 0, 0, 0.5)"},hR={background:"rgba(255, 255, 255, 0.4)",hoverBackground:"rgba(255, 255, 255, 0.6)",activeBackground:"rgba(255, 255, 255, 0.9)"},fR={size:"3rem",gutter:"0.5rem",background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.50}",hoverColor:"{surface.0}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},pR={size:"1.5rem"},mR={light:{thumbnailNavButton:{hoverBackground:"{surface.100}",color:"{surface.600}",hoverColor:"{surface.700}"},indicatorButton:{background:"{surface.200}",hoverBackground:"{surface.300}"}},dark:{thumbnailNavButton:{hoverBackground:"{surface.700}",color:"{surface.400}",hoverColor:"{surface.0}"},indicatorButton:{background:"{surface.700}",hoverBackground:"{surface.600}"}}},gR={root:rR,navButton:nR,navIcon:iR,thumbnailsContent:oR,thumbnailNavButton:sR,thumbnailNavButtonIcon:aR,caption:lR,indicatorList:cR,indicatorButton:uR,insetIndicatorList:dR,insetIndicatorButton:hR,closeButton:fR,closeButtonIcon:pR,colorScheme:mR},_R={color:"{form.field.icon.color}"},yR={icon:_R},bR={color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",top:"{form.field.padding.y}",fontSize:"0.75rem",fontWeight:"400"},vR={paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"},xR={root:bR,input:vR},wR={transitionDuration:"{transition.duration}"},CR={icon:{size:"1.5rem"},mask:{background:"{mask.background}",color:"{mask.color}"}},SR={position:{left:"auto",right:"1rem",top:"1rem",bottom:"auto"},blur:"8px",background:"rgba(255,255,255,0.1)",borderColor:"rgba(255,255,255,0.2)",borderWidth:"1px",borderRadius:"30px",padding:".5rem",gap:"0.5rem"},kR={hoverBackground:"rgba(255,255,255,0.1)",color:"{surface.50}",hoverColor:"{surface.0}",size:"3rem",iconSize:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},TR={root:wR,preview:CR,toolbar:SR,action:kR},PR={size:"15px",hoverSize:"30px",background:"rgba(255,255,255,0.3)",hoverBackground:"rgba(255,255,255,0.3)",borderColor:"unset",hoverBorderColor:"unset",borderWidth:"0",borderRadius:"50%",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"rgba(255,255,255,0.3)",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},IR={handle:PR},MR={padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",gap:"0.5rem"},ER={fontWeight:"500"},AR={size:"1rem"},LR={light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}}},RR={root:MR,text:ER,icon:AR,colorScheme:LR},DR={padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{transition.duration}"},OR={hoverBackground:"{content.hover.background}",hoverColor:"{content.hover.color}"},zR={root:DR,display:OR},$R={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},BR={borderRadius:"{border.radius.sm}"},FR={light:{chip:{focusBackground:"{surface.200}",color:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",color:"{surface.0}"}}},NR={root:$R,chip:BR,colorScheme:FR},jR={background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.icon.color}",borderRadius:"{form.field.border.radius}",padding:"0.5rem",minWidth:"2.5rem"},VR={addon:jR},UR={transitionDuration:"{transition.duration}"},ZR={width:"2.5rem",borderRadius:"{form.field.border.radius}",verticalPadding:"{form.field.padding.y}"},GR={light:{button:{background:"transparent",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.500}",activeColor:"{surface.600}"}},dark:{button:{background:"transparent",hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.300}",activeColor:"{surface.200}"}}},WR={root:UR,button:ZR,colorScheme:GR},HR={gap:"0.5rem"},qR={width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"}},KR={root:HR,input:qR},YR={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},XR={root:YR},JR={transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},QR={background:"{primary.color}"},eD={background:"{content.border.color}"},tD={color:"{text.muted.color}"},rD={root:JR,value:QR,range:eD,text:tD},nD={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",borderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",shadow:"{form.field.shadow}",borderRadius:"{form.field.border.radius}",transitionDuration:"{form.field.transition.duration}"},iD={padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},oD={focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},sD={background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},aD={color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},lD={padding:"{list.option.padding}"},cD={light:{option:{stripedBackground:"{surface.50}"}},dark:{option:{stripedBackground:"{surface.900}"}}},uD={root:nD,list:iD,option:oD,optionGroup:sD,checkmark:aD,emptyMessage:lD,colorScheme:cD},dD={background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",verticalOrientation:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},horizontalOrientation:{padding:"0.5rem 0.75rem",gap:"0.5rem"},transitionDuration:"{transition.duration}"},hD={borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},fD={focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},pD={padding:"0",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",shadow:"{overlay.navigation.shadow}",gap:"0.5rem"},mD={padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},gD={padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background.}",color:"{navigation.submenu.label.color}"},_D={size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},yD={borderColor:"{content.border.color}"},bD={borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},vD={root:dD,baseItem:hD,item:fD,overlay:pD,submenu:mD,submenuLabel:gD,submenuIcon:_D,separator:yD,mobileButton:bD},xD={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},wD={padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},CD={focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},SD={padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background}",color:"{navigation.submenu.label.color}"},kD={borderColor:"{content.border.color}"},TD={root:xD,list:wD,item:CD,submenuLabel:SD,separator:kD},PD={background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.5rem 0.75rem",transitionDuration:"{transition.duration}"},ID={borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},MD={focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},ED={padding:"{navigation.list.padding}",gap:"{navigation.list.gap}",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",mobileIndent:"1rem",icon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"}},AD={borderColor:"{content.border.color}"},LD={borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},RD={root:PD,baseItem:ID,item:MD,submenu:ED,separator:AD,mobileButton:LD},DD={borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},OD={padding:"0.5rem 0.75rem",gap:"0.5rem",sm:{padding:"0.375rem 0.625rem"},lg:{padding:"0.625rem 0.875rem"}},zD={fontSize:"1rem",fontWeight:"500",sm:{fontSize:"0.875rem"},lg:{fontSize:"1.125rem"}},$D={size:"1.125rem",sm:{size:"1rem"},lg:{size:"1.25rem"}},BD={width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},FD={size:"1rem",sm:{size:"0.875rem"},lg:{size:"1.125rem"}},ND={root:{borderWidth:"1px"}},jD={content:{padding:"0"}},VD={light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}},outlined:{color:"{blue.600}",borderColor:"{blue.600}"},simple:{color:"{blue.600}"}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}},outlined:{color:"{green.600}",borderColor:"{green.600}"},simple:{color:"{green.600}"}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}},outlined:{color:"{yellow.600}",borderColor:"{yellow.600}"},simple:{color:"{yellow.600}"}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}},outlined:{color:"{red.600}",borderColor:"{red.600}"},simple:{color:"{red.600}"}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}},outlined:{color:"{surface.500}",borderColor:"{surface.500}"},simple:{color:"{surface.500}"}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}},outlined:{color:"{surface.950}",borderColor:"{surface.950}"},simple:{color:"{surface.950}"}}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}},outlined:{color:"{blue.500}",borderColor:"{blue.500}"},simple:{color:"{blue.500}"}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}},outlined:{color:"{green.500}",borderColor:"{green.500}"},simple:{color:"{green.500}"}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}},outlined:{color:"{yellow.500}",borderColor:"{yellow.500}"},simple:{color:"{yellow.500}"}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}},outlined:{color:"{red.500}",borderColor:"{red.500}"},simple:{color:"{red.500}"}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}},outlined:{color:"{surface.400}",borderColor:"{surface.400}"},simple:{color:"{surface.400}"}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}},outlined:{color:"{surface.0}",borderColor:"{surface.0}"},simple:{color:"{surface.0}"}}}},UD={root:DD,content:OD,text:zD,icon:$D,closeButton:BD,closeIcon:FD,outlined:ND,simple:jD,colorScheme:VD},ZD={borderRadius:"{content.border.radius}",gap:"1rem"},GD={background:"{content.border.color}",size:"0.5rem"},WD={gap:"0.5rem"},HD={size:"0.5rem"},qD={size:"1rem"},KD={verticalGap:"0.5rem",horizontalGap:"1rem"},YD={root:ZD,meters:GD,label:WD,labelMarker:HD,labelIcon:qD,labelList:KD},XD={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},JD={width:"2.5rem",color:"{form.field.icon.color}"},QD={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},eO={padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},tO={focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",gap:"0.5rem"},rO={background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},nO={color:"{form.field.icon.color}"},iO={borderRadius:"{border.radius.sm}"},oO={padding:"{list.option.padding}"},sO={root:XD,dropdown:JD,overlay:QD,list:eO,option:tO,optionGroup:rO,chip:iO,clearIcon:nO,emptyMessage:oO},aO={gap:"1.125rem"},lO={gap:"0.5rem"},cO={root:aO,controls:lO},uO={gutter:"0.75rem",transitionDuration:"{transition.duration}"},dO={background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{content.border.color}",color:"{content.color}",selectedColor:"{highlight.color}",hoverColor:"{content.hover.color}",padding:"0.75rem 1rem",toggleablePadding:"0.75rem 1rem 1.25rem 1rem",borderRadius:"{content.border.radius}"},hO={background:"{content.background}",hoverBackground:"{content.hover.background}",borderColor:"{content.border.color}",color:"{text.muted.color}",hoverColor:"{text.color}",size:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},fO={color:"{content.border.color}",borderRadius:"{content.border.radius}",height:"24px"},pO={root:uO,node:dO,nodeToggleButton:hO,connector:fO},mO={outline:{width:"2px",color:"{content.background}"}},gO={root:mO},_O={padding:"0.5rem 1rem",gap:"0.25rem",borderRadius:"{content.border.radius}",background:"{content.background}",color:"{content.color}",transitionDuration:"{transition.duration}"},yO={background:"transparent",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}",width:"2.5rem",height:"2.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},bO={color:"{text.muted.color}"},vO={maxWidth:"2.5rem"},xO={root:_O,navButton:yO,currentPageReport:bO,jumpToPageInput:vO},wO={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},CO={background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"{content.border.color}",borderWidth:"0",borderRadius:"0"},SO={padding:"0.375rem 1.125rem"},kO={fontWeight:"600"},TO={padding:"0 1.125rem 1.125rem 1.125rem"},PO={padding:"0 1.125rem 1.125rem 1.125rem"},IO={root:wO,header:CO,toggleableHeader:SO,title:kO,content:TO,footer:PO},MO={gap:"0.5rem",transitionDuration:"{transition.duration}"},EO={background:"{content.background}",borderColor:"{content.border.color}",borderWidth:"1px",color:"{content.color}",padding:"0.25rem 0.25rem",borderRadius:"{content.border.radius}",first:{borderWidth:"1px",topBorderRadius:"{content.border.radius}"},last:{borderWidth:"1px",bottomBorderRadius:"{content.border.radius}"}},AO={focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",gap:"0.5rem",padding:"{navigation.item.padding}",borderRadius:"{content.border.radius}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},LO={indent:"1rem"},RO={color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}"},DO={root:MO,panel:EO,item:AO,submenu:LO,submenuIcon:RO},OO={background:"{content.border.color}",borderRadius:"{content.border.radius}",height:".75rem"},zO={color:"{form.field.icon.color}"},$O={background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",padding:"{overlay.popover.padding}",shadow:"{overlay.popover.shadow}"},BO={gap:"0.5rem"},FO={light:{strength:{weakBackground:"{red.500}",mediumBackground:"{amber.500}",strongBackground:"{green.500}"}},dark:{strength:{weakBackground:"{red.400}",mediumBackground:"{amber.400}",strongBackground:"{green.400}"}}},NO={meter:OO,icon:zO,overlay:$O,content:BO,colorScheme:FO},jO={gap:"1.125rem"},VO={gap:"0.5rem"},UO={root:jO,controls:VO},ZO={background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},GO={padding:"{overlay.popover.padding}"},WO={root:ZO,content:GO},HO={background:"{content.border.color}",borderRadius:"{content.border.radius}",height:"1.25rem"},qO={background:"{primary.color}"},KO={color:"{primary.contrast.color}",fontSize:"0.75rem",fontWeight:"600"},YO={root:HO,value:qO,label:KO},XO={light:{root:{colorOne:"{red.500}",colorTwo:"{blue.500}",colorThree:"{green.500}",colorFour:"{yellow.500}"}},dark:{root:{colorOne:"{red.400}",colorTwo:"{blue.400}",colorThree:"{green.400}",colorFour:"{yellow.400}"}}},JO={colorScheme:XO},QO={width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},ez={size:"0.75rem",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.5rem"},lg:{size:"1rem"}},tz={root:QO,icon:ez},rz={gap:"0.25rem",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},nz={size:"1rem",color:"{text.muted.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"},iz={root:rz,icon:nz},oz={light:{root:{background:"rgba(0,0,0,0.1)"}},dark:{root:{background:"rgba(255,255,255,0.3)"}}},sz={colorScheme:oz},az={transitionDuration:"{transition.duration}"},lz={size:"9px",borderRadius:"{border.radius.sm}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},cz={light:{bar:{background:"{surface.100}"}},dark:{bar:{background:"{surface.800}"}}},uz={root:az,bar:lz,colorScheme:cz},dz={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},hz={width:"2.5rem",color:"{form.field.icon.color}"},fz={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},pz={padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},mz={focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},gz={background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},_z={color:"{form.field.icon.color}"},yz={color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},bz={padding:"{list.option.padding}"},vz={root:dz,dropdown:hz,overlay:fz,list:pz,option:mz,optionGroup:gz,clearIcon:_z,checkmark:yz,emptyMessage:bz},xz={borderRadius:"{form.field.border.radius}"},wz={light:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}},dark:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}}},Cz={root:xz,colorScheme:wz},Sz={borderRadius:"{content.border.radius}"},kz={light:{root:{background:"{surface.200}",animationBackground:"rgba(255,255,255,0.4)"}},dark:{root:{background:"rgba(255, 255, 255, 0.06)",animationBackground:"rgba(255, 255, 255, 0.04)"}}},Tz={root:Sz,colorScheme:kz},Pz={transitionDuration:"{transition.duration}"},Iz={background:"{content.border.color}",borderRadius:"{content.border.radius}",size:"3px"},Mz={background:"{primary.color}"},Ez={width:"20px",height:"20px",borderRadius:"50%",background:"{content.border.color}",hoverBackground:"{content.border.color}",content:{borderRadius:"50%",hoverBackground:"{content.background}",width:"16px",height:"16px",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.08), 0px 1px 1px 0px rgba(0, 0, 0, 0.14)"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},Az={light:{handle:{content:{background:"{surface.0}"}}},dark:{handle:{content:{background:"{surface.950}"}}}},Lz={root:Pz,track:Iz,range:Mz,handle:Ez,colorScheme:Az},Rz={gap:"0.5rem",transitionDuration:"{transition.duration}"},Dz={root:Rz},Oz={borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"},zz={root:Oz},$z={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",transitionDuration:"{transition.duration}"},Bz={background:"{content.border.color}"},Fz={size:"24px",background:"transparent",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},Nz={root:$z,gutter:Bz,handle:Fz},jz={transitionDuration:"{transition.duration}"},Vz={background:"{content.border.color}",activeBackground:"{primary.color}",margin:"0 0 0 1.625rem",size:"2px"},Uz={padding:"0.5rem",gap:"1rem"},Zz={padding:"0",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},Gz={color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},Wz={background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"},Hz={padding:"0.875rem 0.5rem 1.125rem 0.5rem"},qz={background:"{content.background}",color:"{content.color}",padding:"0",indent:"1rem"},Kz={root:jz,separator:Vz,step:Uz,stepHeader:Zz,stepTitle:Gz,stepNumber:Wz,steppanels:Hz,steppanel:qz},Yz={transitionDuration:"{transition.duration}"},Xz={background:"{content.border.color}"},Jz={borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},Qz={color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},e$={background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"},t$={root:Yz,separator:Xz,itemLink:Jz,itemLabel:Qz,itemNumber:e$},r$={transitionDuration:"{transition.duration}"},n$={borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},i$={background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},o$={color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},s$={height:"1px",bottom:"-1px",background:"{primary.color}"},a$={root:r$,tablist:n$,item:i$,itemIcon:o$,activeBar:s$},l$={transitionDuration:"{transition.duration}"},c$={borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},u$={background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},d$={background:"{content.background}",color:"{content.color}",padding:"0.875rem 1.125rem 1.125rem 1.125rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"inset {focus.ring.shadow}"}},h$={background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",width:"2.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},f$={height:"1px",bottom:"-1px",background:"{primary.color}"},p$={light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}},m$={root:l$,tablist:c$,tab:u$,tabpanel:d$,navButton:h$,activeBar:f$,colorScheme:p$},g$={transitionDuration:"{transition.duration}"},_$={background:"{content.background}",borderColor:"{content.border.color}"},y$={borderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},b$={background:"{content.background}",color:"{content.color}"},v$={background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}"},x$={light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}},w$={root:g$,tabList:_$,tab:y$,tabPanel:b$,navButton:v$,colorScheme:x$},C$={fontSize:"0.875rem",fontWeight:"700",padding:"0.25rem 0.5rem",gap:"0.25rem",borderRadius:"{content.border.radius}",roundedBorderRadius:"{border.radius.xl}"},S$={size:"0.75rem"},k$={light:{primary:{background:"{primary.100}",color:"{primary.700}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.100}",color:"{green.700}"},info:{background:"{sky.100}",color:"{sky.700}"},warn:{background:"{orange.100}",color:"{orange.700}"},danger:{background:"{red.100}",color:"{red.700}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"color-mix(in srgb, {primary.500}, transparent 84%)",color:"{primary.300}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",color:"{green.300}"},info:{background:"color-mix(in srgb, {sky.500}, transparent 84%)",color:"{sky.300}"},warn:{background:"color-mix(in srgb, {orange.500}, transparent 84%)",color:"{orange.300}"},danger:{background:"color-mix(in srgb, {red.500}, transparent 84%)",color:"{red.300}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}},T$={root:C$,icon:S$,colorScheme:k$},P$={background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.color}",height:"18rem",padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{form.field.border.radius}"},I$={gap:"0.25rem"},M$={margin:"2px 0"},E$={root:P$,prompt:I$,commandResponse:M$},A$={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},L$={root:A$},R$={background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},D$={padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},O$={focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},z$={mobileIndent:"1rem"},$$={size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},B$={borderColor:"{content.border.color}"},F$={root:R$,list:D$,item:O$,submenu:z$,submenuIcon:$$,separator:B$},N$={minHeight:"5rem"},j$={eventContent:{padding:"1rem 0"}},V$={eventContent:{padding:"0 1rem"}},U$={size:"1.125rem",borderRadius:"50%",borderWidth:"2px",background:"{content.background}",borderColor:"{content.border.color}",content:{borderRadius:"50%",size:"0.375rem",background:"{primary.color}",insetShadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"}},Z$={color:"{content.border.color}",size:"2px"},G$={event:N$,horizontal:j$,vertical:V$,eventMarker:U$,eventConnector:Z$},W$={width:"25rem",borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},H$={size:"1.125rem"},q$={padding:"{overlay.popover.padding}",gap:"0.5rem"},K$={gap:"0.5rem"},Y$={fontWeight:"500",fontSize:"1rem"},X$={fontWeight:"500",fontSize:"0.875rem"},J$={width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},Q$={size:"1rem"},e3={light:{blur:"1.5px",info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}}}},dark:{blur:"10px",info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",detailColor:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}}}}},t3={root:W$,icon:H$,content:q$,text:K$,summary:Y$,detail:X$,closeButton:J$,closeIcon:Q$,colorScheme:e3},r3={padding:"0.25rem",borderRadius:"{content.border.radius}",gap:"0.5rem",fontWeight:"500",disabledBackground:"{form.field.disabled.background}",disabledBorderColor:"{form.field.disabled.background}",disabledColor:"{form.field.disabled.color}",invalidBorderColor:"{form.field.invalid.border.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",padding:"0.25rem"},lg:{fontSize:"{form.field.lg.font.size}",padding:"0.25rem"}},n3={disabledColor:"{form.field.disabled.color}"},i3={padding:"0.25rem 0.75rem",borderRadius:"{content.border.radius}",checkedShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.02), 0px 1px 2px 0px rgba(0, 0, 0, 0.04)",sm:{padding:"0.25rem 0.75rem"},lg:{padding:"0.25rem 0.75rem"}},o3={light:{root:{background:"{surface.100}",checkedBackground:"{surface.100}",hoverBackground:"{surface.100}",borderColor:"{surface.100}",color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}",checkedBorderColor:"{surface.100}"},content:{checkedBackground:"{surface.0}"},icon:{color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}"}},dark:{root:{background:"{surface.950}",checkedBackground:"{surface.950}",hoverBackground:"{surface.950}",borderColor:"{surface.950}",color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}",checkedBorderColor:"{surface.950}"},content:{checkedBackground:"{surface.800}"},icon:{color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}"}}},s3={root:r3,icon:n3,content:i3,colorScheme:o3},a3={width:"2.5rem",height:"1.5rem",borderRadius:"30px",gap:"0.25rem",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},borderWidth:"1px",borderColor:"transparent",hoverBorderColor:"transparent",checkedBorderColor:"transparent",checkedHoverBorderColor:"transparent",invalidBorderColor:"{form.field.invalid.border.color}",transitionDuration:"{form.field.transition.duration}",slideDuration:"0.2s"},l3={borderRadius:"50%",size:"1rem"},c3={light:{root:{background:"{surface.300}",disabledBackground:"{form.field.disabled.background}",hoverBackground:"{surface.400}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.0}",disabledBackground:"{form.field.disabled.color}",hoverBackground:"{surface.0}",checkedBackground:"{surface.0}",checkedHoverBackground:"{surface.0}",color:"{text.muted.color}",hoverColor:"{text.color}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}},dark:{root:{background:"{surface.700}",disabledBackground:"{surface.600}",hoverBackground:"{surface.600}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.400}",disabledBackground:"{surface.900}",hoverBackground:"{surface.300}",checkedBackground:"{surface.900}",checkedHoverBackground:"{surface.900}",color:"{surface.900}",hoverColor:"{surface.800}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}}},u3={root:a3,handle:l3,colorScheme:c3},d3={background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.75rem"},h3={root:d3},f3={maxWidth:"12.5rem",gutter:"0.25rem",shadow:"{overlay.popover.shadow}",padding:"0.5rem 0.75rem",borderRadius:"{overlay.popover.border.radius}"},p3={light:{root:{background:"{surface.700}",color:"{surface.0}"}},dark:{root:{background:"{surface.700}",color:"{surface.0}"}}},m3={root:f3,colorScheme:p3},g3={background:"{content.background}",color:"{content.color}",padding:"1rem",gap:"2px",indent:"1rem",transitionDuration:"{transition.duration}"},_3={padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.color}",hoverColor:"{text.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},gap:"0.25rem"},y3={color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}"},b3={borderRadius:"50%",size:"1.75rem",hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedHoverColor:"{primary.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},v3={size:"2rem"},x3={margin:"0 0 0.5rem 0"},w3={root:g3,node:_3,nodeIcon:y3,nodeToggleButton:b3,loadingIcon:v3,filter:x3},C3={background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},S3={width:"2.5rem",color:"{form.field.icon.color}"},k3={background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},T3={padding:"{list.padding}"},P3={padding:"{list.option.padding}"},I3={borderRadius:"{border.radius.sm}"},M3={color:"{form.field.icon.color}"},E3={root:C3,dropdown:S3,overlay:k3,tree:T3,emptyMessage:P3,chip:I3,clearIcon:M3},A3={transitionDuration:"{transition.duration}"},L3={background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},R3={background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{treetable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},D3={fontWeight:"600"},O3={background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},z3={borderColor:"{treetable.border.color}",padding:"0.75rem 1rem",gap:"0.5rem"},$3={background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",padding:"0.75rem 1rem"},B3={fontWeight:"600"},F3={background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},N3={width:"0.5rem"},j3={width:"1px",color:"{primary.color}"},V3={color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},U3={size:"2rem"},Z3={hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},G3={borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},W3={borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},H3={light:{root:{borderColor:"{content.border.color}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},bodyCell:{selectedBorderColor:"{primary.900}"}}},q3={root:A3,header:L3,headerCell:R3,columnTitle:D3,row:O3,bodyCell:z3,footerCell:$3,columnFooter:B3,footer:F3,columnResizer:N3,resizeIndicator:j3,sortIcon:V3,loadingIcon:U3,nodeToggleButton:Z3,paginatorTop:G3,paginatorBottom:W3,colorScheme:H3},K3={mask:{background:"{content.background}",color:"{text.muted.color}"},icon:{size:"2rem"}},Y3={loader:K3},X3=Object.defineProperty,J3=Object.defineProperties,Q3=Object.getOwnPropertyDescriptors,Gv=Object.getOwnPropertySymbols,eB=Object.prototype.hasOwnProperty,tB=Object.prototype.propertyIsEnumerable,Wv=(e,t,i)=>t in e?X3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Hv,rB=(Hv=((e,t)=>{for(var i in t||(t={}))eB.call(t,i)&&Wv(e,i,t[i]);if(Gv)for(var i of Gv(t))tB.call(t,i)&&Wv(e,i,t[i]);return e})({},mA),J3(Hv,Q3({components:{accordion:UE,autocomplete:QE,avatar:oA,badge:hA,blockui:_A,breadcrumb:xA,button:SA,card:EA,carousel:zA,cascadeselect:UA,checkbox:WA,chip:JA,colorpicker:n5,confirmdialog:s5,confirmpopup:d5,contextmenu:y5,datatable:B5,dataview:G5,datepicker:dL,dialog:_L,divider:wL,dock:kL,drawer:AL,editor:$L,fieldset:VL,fileupload:YL,floatlabel:tR,galleria:gR,iconfield:yR,iftalabel:xR,image:TR,imagecompare:IR,inlinemessage:RR,inplace:zR,inputchips:NR,inputgroup:VR,inputnumber:WR,inputotp:KR,inputtext:XR,knob:rD,listbox:uD,megamenu:vD,menu:TD,menubar:RD,message:UD,metergroup:YD,multiselect:sO,orderlist:cO,organizationchart:pO,overlaybadge:gO,paginator:xO,panel:IO,panelmenu:DO,password:NO,picklist:UO,popover:WO,progressbar:YO,progressspinner:JO,radiobutton:tz,rating:iz,ripple:sz,scrollpanel:uz,select:vz,selectbutton:Cz,skeleton:Tz,slider:Lz,speeddial:Dz,splitbutton:zz,splitter:Nz,stepper:Kz,steps:t$,tabmenu:a$,tabs:m$,tabview:w$,tag:T$,terminal:E$,textarea:L$,tieredmenu:F$,timeline:G$,toast:t3,togglebutton:s3,toggleswitch:u3,toolbar:h3,tooltip:m3,tree:w3,treeselect:E3,treetable:q3,virtualscroller:Y3}})));function nB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var up={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.2.0/LICENSE.txt
 */var iB=up.exports,qv;function oB(){return qv||(qv=1,function(e,t){(function(i,c){e.exports=c()})(iB,function(){var i={},c={};function p(m,l,S){if(c[m]=S,m==="index"){var I="var sharedModule = {}; ("+c.shared+")(sharedModule); ("+c.worker+")(sharedModule);",A={};return c.shared(A),c.index(i,A),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([I],{type:"text/javascript"}))),i}}p("shared",["exports"],function(m){function l(s,n,a,u){return new(a||(a=Promise))(function(f,b){function v(P){try{k(u.next(P))}catch(E){b(E)}}function w(P){try{k(u.throw(P))}catch(E){b(E)}}function k(P){var E;P.done?f(P.value):(E=P.value,E instanceof a?E:new a(function(L){L(E)})).then(v,w)}k((u=u.apply(s,n||[])).next())})}function S(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var I,A;function O(){if(A)return I;function s(n,a){this.x=n,this.y=a}return A=1,I=s,s.prototype={clone:function(){return new s(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,a){return this.clone()._rotateAround(n,a)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var a=n.x-this.x,u=n.y-this.y;return a*a+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,a){return Math.atan2(this.x*a-this.y*n,this.x*n+this.y*a)},_matMult:function(n){var a=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=a,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var a=Math.cos(n),u=Math.sin(n),f=u*this.x+a*this.y;return this.x=a*this.x-u*this.y,this.y=f,this},_rotateAround:function(n,a){var u=Math.cos(n),f=Math.sin(n),b=a.y+f*(this.x-a.x)+u*(this.y-a.y);return this.x=a.x+u*(this.x-a.x)-f*(this.y-a.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(n){return n instanceof s?n:Array.isArray(n)?new s(n[0],n[1]):n},I}typeof SuppressedError=="function"&&SuppressedError;var z,D,H=S(O()),ue=function(){if(D)return z;function s(n,a,u,f){this.cx=3*n,this.bx=3*(u-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(f-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=a,this.p2x=u,this.p2y=f}return D=1,z=s,s.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,a){if(a===void 0&&(a=1e-6),n<0)return 0;if(n>1)return 1;for(var u=n,f=0;f<8;f++){var b=this.sampleCurveX(u)-n;if(Math.abs(b)<a)return u;var v=this.sampleCurveDerivativeX(u);if(Math.abs(v)<1e-6)break;u-=b/v}var w=0,k=1;for(u=n,f=0;f<20&&(b=this.sampleCurveX(u),!(Math.abs(b-n)<a));f++)n>b?w=u:k=u,u=.5*(k-w)+w;return u},solve:function(n,a){return this.sampleCurveY(this.solveCurveX(n,a))}},z}(),ye=S(ue);let ne,xe;function Ce(){return ne==null&&(ne=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ne}function X(){if(xe==null&&(xe=!1,Ce())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let u=0;u<5*5;u++){const f=4*u;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(u%5,Math.floor(u/5),1,1)}const a=n.getImageData(0,0,5,5).data;for(let u=0;u<5*5*4;u++)if(u%4!=3&&a[u]!==u){xe=!0;break}}}return xe||!1}var we,Oe=1e-6,ke=typeof Float32Array<"u"?Float32Array:Array;function Ve(){var s=new ke(9);return ke!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function We(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function ft(){var s=new ke(3);return ke!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function Qe(s,n,a){var u=new ke(3);return u[0]=s,u[1]=n,u[2]=a,u}function Ye(s,n,a){var u=n[0],f=n[1],b=n[2],v=n[3];return s[0]=a[0]*u+a[4]*f+a[8]*b+a[12]*v,s[1]=a[1]*u+a[5]*f+a[9]*b+a[13]*v,s[2]=a[2]*u+a[6]*f+a[10]*b+a[14]*v,s[3]=a[3]*u+a[7]*f+a[11]*b+a[15]*v,s}function Xe(){var s=new ke(4);return ke!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function wt(){var s=new ke(2);return ke!=Float32Array&&(s[0]=0,s[1]=0),s}function Kt(s,n){var a=new ke(2);return a[0]=s,a[1]=n,a}Math.hypot||(Math.hypot=function(){for(var s=0,n=arguments.length;n--;)s+=arguments[n]*arguments[n];return Math.sqrt(s)}),ft(),we=new ke(4),ke!=Float32Array&&(we[0]=0,we[1]=0,we[2]=0,we[3]=0),ft(),Qe(1,0,0),Qe(0,1,0),Xe(),Xe(),Ve(),wt();const vt=8192;function At(s,n,a){return n*(vt/(s.tileSize*Math.pow(2,a-s.tileID.overscaledZ)))}function Ut(s,n){return(s%n+n)%n}function et(s,n,a){return s*(1-a)+n*a}function mt(s){if(s<=0)return 0;if(s>=1)return 1;const n=s*s,a=n*s;return 4*(s<.5?a:3*(s-n)+a-.75)}function nt(s,n,a,u){const f=new ye(s,n,a,u);return b=>f.solve(b)}const bt=nt(.25,.1,.25,1);function ir(s,n,a){return Math.min(a,Math.max(n,s))}function Jt(s,n,a){const u=a-n,f=((s-n)%u+u)%u+n;return f===n?a:f}function Qt(s,...n){for(const a of n)for(const u in a)s[u]=a[u];return s}let lr=1;function Yr(s,n,a){const u={};for(const f in s)u[f]=n.call(this,s[f],f,s);return u}function tn(s,n,a){const u={};for(const f in s)n.call(this,s[f],f,s)&&(u[f]=s[f]);return u}function Pr(s){return Array.isArray(s)?s.map(Pr):typeof s=="object"&&s?Yr(s,Pr):s}const Gr={};function Dr(s){Gr[s]||(typeof console<"u"&&console.warn(s),Gr[s]=!0)}function ce(s,n,a){return(a.y-s.y)*(n.x-s.x)>(n.y-s.y)*(a.x-s.x)}function ge(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Le=null;function ut(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const st="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ct(s,n,a,u,f){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const b=new VideoFrame(s,{timestamp:0});try{const v=b==null?void 0:b.format;if(!v||!v.startsWith("BGR")&&!v.startsWith("RGB"))throw new Error(`Unrecognized format ${v}`);const w=v.startsWith("BGR"),k=new Uint8ClampedArray(u*f*4);if(yield b.copyTo(k,function(P,E,L,N,V){const U=4*Math.max(1,0),G=(Math.max(0,L)-L)*N*4+U,Y=4*N,ie=Math.max(0,E),be=Math.max(0,L);return{rect:{x:ie,y:be,width:Math.min(P.width,E+N)-ie,height:Math.min(P.height,L+V)-be},layout:[{offset:G,stride:Y}]}}(s,n,a,u,f)),w)for(let P=0;P<k.length;P+=4){const E=k[P];k[P]=k[P+2],k[P+2]=E}return k}finally{b.close()}})}let te,se;function Pe(s,n,a,u){return s.addEventListener(n,a,u),{unsubscribe:()=>{s.removeEventListener(n,a,u)}}}function Be(s){return s/Math.PI*180}const xt="AbortError";function it(){return new Error(xt)}const Me={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ze(s){return Me.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const It="global-dispatcher";class Nt extends Error{constructor(n,a,u,f){super(`AJAXError: ${a} (${n}): ${u}`),this.status=n,this.statusText=a,this.url=u,this.body=f}}const Ht=()=>ge(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Fr=function(s,n){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const u=Ze(s.url);if(u)return u(s,n);if(ge(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:It},n)}if(!(/^file:/.test(a=s.url)||/^file:/.test(Ht())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(u,f){return l(this,void 0,void 0,function*(){const b=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,cache:u.cache,referrer:Ht(),signal:f.signal});let v,w;u.type!=="json"||b.headers.has("Accept")||b.headers.set("Accept","application/json");try{v=yield fetch(b)}catch(P){throw new Nt(0,P.message,u.url,new Blob)}if(!v.ok){const P=yield v.blob();throw new Nt(v.status,v.statusText,u.url,P)}w=u.type==="arrayBuffer"||u.type==="image"?v.arrayBuffer():u.type==="json"?v.json():v.text();const k=yield w;if(f.signal.aborted)throw it();return{data:k,cacheControl:v.headers.get("Cache-Control"),expires:v.headers.get("Expires")}})}(s,n);if(ge(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:It},n)}var a;return function(u,f){return new Promise((b,v)=>{var w;const k=new XMLHttpRequest;k.open(u.method||"GET",u.url,!0),u.type!=="arrayBuffer"&&u.type!=="image"||(k.responseType="arraybuffer");for(const P in u.headers)k.setRequestHeader(P,u.headers[P]);u.type==="json"&&(k.responseType="text",!((w=u.headers)===null||w===void 0)&&w.Accept||k.setRequestHeader("Accept","application/json")),k.withCredentials=u.credentials==="include",k.onerror=()=>{v(new Error(k.statusText))},k.onload=()=>{if(!f.signal.aborted)if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let P=k.response;if(u.type==="json")try{P=JSON.parse(k.response)}catch(E){return void v(E)}b({data:P,cacheControl:k.getResponseHeader("Cache-Control"),expires:k.getResponseHeader("Expires")})}else{const P=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});v(new Nt(k.status,k.statusText,u.url,P))}},f.signal.addEventListener("abort",()=>{k.abort(),v(it())}),k.send(u.body)})}(s,n)};function Sr(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const n=new URL(s),a=window.location;return n.protocol===a.protocol&&n.host===a.host}function Ln(s,n,a){a[s]&&a[s].indexOf(n)!==-1||(a[s]=a[s]||[],a[s].push(n))}function Rn(s,n,a){if(a&&a[s]){const u=a[s].indexOf(n);u!==-1&&a[s].splice(u,1)}}class Hi{constructor(n,a={}){Qt(this,a),this.type=n}}class Li extends Hi{constructor(n,a={}){super("error",Qt({error:n},a))}}class Te{on(n,a){return this._listeners=this._listeners||{},Ln(n,a,this._listeners),{unsubscribe:()=>{this.off(n,a)}}}off(n,a){return Rn(n,a,this._listeners),Rn(n,a,this._oneTimeListeners),this}once(n,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Ln(n,a,this._oneTimeListeners),this):new Promise(u=>this.once(n,u))}fire(n,a){typeof n=="string"&&(n=new Hi(n,a||{}));const u=n.type;if(this.listens(u)){n.target=this;const f=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const w of f)w.call(this,n);const b=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const w of b)Rn(u,w,this._oneTimeListeners),w.call(this,n);const v=this._eventedParent;v&&(Qt(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(n))}else n instanceof Li&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var $={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const q=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function J(s,n){const a={};for(const u in s)u!=="ref"&&(a[u]=s[u]);return q.forEach(u=>{u in n&&(a[u]=n[u])}),a}function oe(s,n){if(Array.isArray(s)){if(!Array.isArray(n)||s.length!==n.length)return!1;for(let a=0;a<s.length;a++)if(!oe(s[a],n[a]))return!1;return!0}if(typeof s=="object"&&s!==null&&n!==null){if(typeof n!="object"||Object.keys(s).length!==Object.keys(n).length)return!1;for(const a in s)if(!oe(s[a],n[a]))return!1;return!0}return s===n}function pe(s,n){s.push(n)}function Ie(s,n,a){pe(a,{command:"addSource",args:[s,n[s]]})}function $e(s,n,a){pe(n,{command:"removeSource",args:[s]}),a[s]=!0}function Se(s,n,a,u){$e(s,a,u),Ie(s,n,a)}function He(s,n,a){let u;for(u in s[a])if(Object.prototype.hasOwnProperty.call(s[a],u)&&u!=="data"&&!oe(s[a][u],n[a][u]))return!1;for(u in n[a])if(Object.prototype.hasOwnProperty.call(n[a],u)&&u!=="data"&&!oe(s[a][u],n[a][u]))return!1;return!0}function Ne(s,n,a,u,f,b){s=s||{},n=n||{};for(const v in s)Object.prototype.hasOwnProperty.call(s,v)&&(oe(s[v],n[v])||a.push({command:b,args:[u,v,n[v],f]}));for(const v in n)Object.prototype.hasOwnProperty.call(n,v)&&!Object.prototype.hasOwnProperty.call(s,v)&&(oe(s[v],n[v])||a.push({command:b,args:[u,v,n[v],f]}))}function Ee(s){return s.id}function tt(s,n){return s[n.id]=n,s}class Ae{constructor(n,a,u,f){this.message=(n?`${n}: `:"")+u,f&&(this.identifier=f),a!=null&&a.__line__&&(this.line=a.__line__)}}function yt(s,...n){for(const a of n)for(const u in a)s[u]=a[u];return s}class Rt extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}class Wt{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[u,f]of a)this.bindings[u]=f}concat(n){return new Wt(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Zt={kind:"null"},Je={kind:"number"},Pt={kind:"string"},kt={kind:"boolean"},er={kind:"color"},Gt={kind:"projectionDefinition"},rr={kind:"object"},zt={kind:"value"},os={kind:"collator"},yn={kind:"formatted"},Cn={kind:"padding"},Wr={kind:"resolvedImage"},Sl={kind:"variableAnchorOffsetCollection"};function ci(s,n){return{kind:"array",itemType:s,N:n}}function Or(s){if(s.kind==="array"){const n=Or(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}const Eh=[Zt,Je,Pt,kt,er,Gt,yn,rr,ci(zt),Cn,Wr,Sl];function La(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!La(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(const a of Eh)if(!La(a,n))return null}}return`Expected ${Or(s)} but found ${Or(n)} instead.`}function eu(s,n){return n.some(a=>a.kind===s.kind)}function Fo(s,n){return n.some(a=>a==="null"?s===null:a==="array"?Array.isArray(s):a==="object"?s&&!Array.isArray(s)&&typeof s=="object":a===typeof s)}function js(s,n){return s.kind==="array"&&n.kind==="array"?s.itemType.kind===n.itemType.kind&&typeof s.N=="number":s.kind===n.kind}const tu=.96422,Ah=.82521,Lh=4/29,Vs=6/29,Rh=3*Vs*Vs,sm=Vs*Vs*Vs,am=Math.PI/180,lm=180/Math.PI;function ru(s){return(s%=360)<0&&(s+=360),s}function Us([s,n,a,u]){let f,b;const v=iu((.2225045*(s=nu(s))+.7168786*(n=nu(n))+.0606169*(a=nu(a)))/1);s===n&&n===a?f=b=v:(f=iu((.4360747*s+.3850649*n+.1430804*a)/tu),b=iu((.0139322*s+.0971045*n+.7141733*a)/Ah));const w=116*v-16;return[w<0?0:w,500*(f-v),200*(v-b),u]}function nu(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function iu(s){return s>sm?Math.pow(s,1/3):s/Rh+Lh}function Zs([s,n,a,u]){let f=(s+16)/116,b=isNaN(n)?f:f+n/500,v=isNaN(a)?f:f-a/200;return f=1*su(f),b=tu*su(b),v=Ah*su(v),[ou(3.1338561*b-1.6168667*f-.4906146*v),ou(-.9787684*b+1.9161415*f+.033454*v),ou(.0719453*b-.2289914*f+1.4052427*v),u]}function ou(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function su(s){return s>Vs?s*s*s:Rh*(s-Lh)}function kl(s){return parseInt(s.padEnd(2,s),16)/255}function au(s,n){return ss(n?s/100:s,0,1)}function ss(s,n,a){return Math.min(Math.max(n,s),a)}function qi(s){return!s.some(Number.isNaN)}const hr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function yi(s,n,a){return s+a*(n-s)}function Ri(s,n,a){return s.map((u,f)=>yi(u,n[f],a))}class fr{constructor(n,a,u,f=1,b=!0){this.r=n,this.g=a,this.b=u,this.a=f,b||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,a,u,f]))}static parse(n){if(n instanceof fr)return n;if(typeof n!="string")return;const a=function(u){if((u=u.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=hr[u];if(f){const[v,w,k]=f;return[v/255,w/255,k/255,1]}if(u.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(u)){const v=u.length<6?1:2;let w=1;return[kl(u.slice(w,w+=v)),kl(u.slice(w,w+=v)),kl(u.slice(w,w+=v)),kl(u.slice(w,w+v)||"ff")]}if(u.startsWith("rgb")){const v=u.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[w,k,P,E,L,N,V,U,G,Y,ie,be]=v,le=[E||" ",V||" ",Y].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const j=[P,N,G].join(""),K=j==="%%%"?100:j===""?255:0;if(K){const de=[ss(+k/K,0,1),ss(+L/K,0,1),ss(+U/K,0,1),ie?au(+ie,be):1];if(qi(de))return de}}return}}const b=u.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[v,w,k,P,E,L,N,V,U]=b,G=[k||" ",E||" ",N].join("");if(G==="  "||G==="  /"||G===",,"||G===",,,"){const Y=[+w,ss(+P,0,100),ss(+L,0,100),V?au(+V,U):1];if(qi(Y))return function([ie,be,le,j]){function K(de){const De=(de+ie/30)%12,rt=be*Math.min(le,1-le);return le-rt*Math.max(-1,Math.min(De-3,9-De,1))}return ie=ru(ie),be/=100,le/=100,[K(0),K(8),K(4),j]}(Y)}}}(n);return a?new fr(...a,!1):void 0}get rgb(){const{r:n,g:a,b:u,a:f}=this,b=f||1/0;return this.overwriteGetter("rgb",[n/b,a/b,u/b,f])}get hcl(){return this.overwriteGetter("hcl",function(n){const[a,u,f,b]=Us(n),v=Math.sqrt(u*u+f*f);return[Math.round(1e4*v)?ru(Math.atan2(f,u)*lm):NaN,v,a,b]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Us(this.rgb))}overwriteGetter(n,a){return Object.defineProperty(this,n,{value:a}),a}toString(){const[n,a,u,f]=this.rgb;return`rgba(${[n,a,u].map(b=>Math.round(255*b)).join(",")},${f})`}static interpolate(n,a,u,f="rgb"){switch(f){case"rgb":{const[b,v,w,k]=Ri(n.rgb,a.rgb,u);return new fr(b,v,w,k,!1)}case"hcl":{const[b,v,w,k]=n.hcl,[P,E,L,N]=a.hcl;let V,U;if(isNaN(b)||isNaN(P))isNaN(b)?isNaN(P)?V=NaN:(V=P,w!==1&&w!==0||(U=E)):(V=b,L!==1&&L!==0||(U=v));else{let le=P-b;P>b&&le>180?le-=360:P<b&&b-P>180&&(le+=360),V=b+u*le}const[G,Y,ie,be]=function([le,j,K,de]){return le=isNaN(le)?0:le*am,Zs([K,Math.cos(le)*j,Math.sin(le)*j,de])}([V,U??yi(v,E,u),yi(w,L,u),yi(k,N,u)]);return new fr(G,Y,ie,be,!1)}case"lab":{const[b,v,w,k]=Zs(Ri(n.lab,a.lab,u));return new fr(b,v,w,k,!1)}}}}fr.black=new fr(0,0,0,1),fr.white=new fr(1,1,1,1),fr.transparent=new fr(0,0,0,0),fr.red=new fr(1,0,0,1);class Tl{constructor(n,a,u){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const lu=["bottom","center","top"];class Di{constructor(n,a,u,f,b,v){this.text=n,this.image=a,this.scale=u,this.fontStack=f,this.textColor=b,this.verticalAlign=v}}class Vn{constructor(n){this.sections=n}static fromString(n){return new Vn([new Di(n,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Vn?n:Vn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Dn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Dn)return n;if(typeof n=="number")return new Dn([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const a of n)if(typeof a!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Dn(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,a,u){return new Dn(Ri(n.values,a.values,u))}}class sn{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const cu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class On{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof On)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let a=0;a<n.length;a+=2){const u=n[a],f=n[a+1];if(typeof u!="string"||!cu.has(u)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new On(n)}}toString(){return JSON.stringify(this.values)}static interpolate(n,a,u){const f=n.values,b=a.values;if(f.length!==b.length)throw new sn(`Cannot interpolate values of different length. from: ${n.toString()}, to: ${a.toString()}`);const v=[];for(let w=0;w<f.length;w+=2){if(f[w]!==b[w])throw new sn(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${f[w]}, to[${w}]: ${b[w]}`);v.push(f[w]);const[k,P]=f[w+1],[E,L]=b[w+1];v.push([yi(k,E,u),yi(P,L,u)])}return new On(v)}}class ii{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ii({name:n,available:!1}):null}}class ui{constructor(n,a,u){this.from=n,this.to=a,this.transition=u}static interpolate(n,a,u){return new ui(n,a,u)}static parse(n){return n instanceof ui?n:Array.isArray(n)&&n.length===3&&typeof n[0]=="string"&&typeof n[1]=="string"&&typeof n[2]=="number"?new ui(n[0],n[1],n[2]):typeof n=="object"&&typeof n.from=="string"&&typeof n.to=="string"&&typeof n.transition=="number"?new ui(n.from,n.to,n.transition):typeof n=="string"?new ui(n,n,1):void 0}}function Pl(s,n,a,u){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[s,n,a,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[s,n,a,u]:[s,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ki(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof ui||s instanceof fr||s instanceof Tl||s instanceof Vn||s instanceof Dn||s instanceof On||s instanceof ii)return!0;if(Array.isArray(s)){for(const n of s)if(!Ki(n))return!1;return!0}if(typeof s=="object"){for(const n in s)if(!Ki(s[n]))return!1;return!0}return!1}function bn(s){if(s===null)return Zt;if(typeof s=="string")return Pt;if(typeof s=="boolean")return kt;if(typeof s=="number")return Je;if(s instanceof fr)return er;if(s instanceof ui)return Gt;if(s instanceof Tl)return os;if(s instanceof Vn)return yn;if(s instanceof Dn)return Cn;if(s instanceof On)return Sl;if(s instanceof ii)return Wr;if(Array.isArray(s)){const n=s.length;let a;for(const u of s){const f=bn(u);if(a){if(a===f)continue;a=zt;break}a=f}return ci(a||zt,n)}return rr}function No(s){const n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof fr||s instanceof ui||s instanceof Vn||s instanceof Dn||s instanceof On||s instanceof ii?s.toString():JSON.stringify(s)}class Oi{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ki(n[1]))return a.error("invalid value");const u=n[1];let f=bn(u);const b=a.expectedType;return f.kind!=="array"||f.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(f=b),new Oi(f,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ra={string:Pt,number:Je,boolean:kt,object:rr};class zi{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let u,f=1;const b=n[0];if(b==="array"){let w,k;if(n.length>2){const P=n[1];if(typeof P!="string"||!(P in Ra)||P==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);w=Ra[P],f++}else w=zt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);k=n[2],f++}u=ci(w,k)}else{if(!Ra[b])throw new Error(`Types doesn't contain name = ${b}`);u=Ra[b]}const v=[];for(;f<n.length;f++){const w=a.parse(n[f],f,zt);if(!w)return null;v.push(w)}return new zi(u,v)}evaluate(n){for(let a=0;a<this.args.length;a++){const u=this.args[a].evaluate(n);if(!La(this.type,bn(u)))return u;if(a===this.args.length-1)throw new sn(`Expected value to be of type ${Or(this.type)}, but found ${Or(bn(u))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const uu={"to-boolean":kt,"to-color":er,"to-number":Je,"to-string":Pt};class Yi{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const u=n[0];if(!uu[u])throw new Error(`Can't parse ${u} as it is not part of the known types`);if((u==="to-boolean"||u==="to-string")&&n.length!==2)return a.error("Expected one argument.");const f=uu[u],b=[];for(let v=1;v<n.length;v++){const w=a.parse(n[v],v,zt);if(!w)return null;b.push(w)}return new Yi(f,b)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let a,u;for(const f of this.args){if(a=f.evaluate(n),u=null,a instanceof fr)return a;if(typeof a=="string"){const b=n.parseColor(a);if(b)return b}else if(Array.isArray(a)&&(u=a.length<3||a.length>4?`Invalid rgba value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Pl(a[0],a[1],a[2],a[3]),!u))return new fr(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new sn(u||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const u of this.args){a=u.evaluate(n);const f=Dn.parse(a);if(f)return f}throw new sn(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const u of this.args){a=u.evaluate(n);const f=On.parse(a);if(f)return f}throw new sn(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const u of this.args){if(a=u.evaluate(n),a===null)return 0;const f=Number(a);if(!isNaN(f))return f}throw new sn(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return Vn.fromString(No(this.args[0].evaluate(n)));case"resolvedImage":return ii.fromString(No(this.args[0].evaluate(n)));case"projectionDefinition":return this.args[0].evaluate(n);default:return No(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Xr=["Unknown","Point","LineString","Polygon"];class Il{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=fr.parse(n)),a}}class cr{constructor(n,a,u=[],f,b=new Wt,v=[]){this.registry=n,this.path=u,this.key=u.map(w=>`[${w}]`).join(""),this.scope=b,this.errors=v,this.expectedType=f,this._isConstant=a}parse(n,a,u,f,b={}){return a?this.concat(a,u,f)._parse(n,b):this._parse(n,b)}_parse(n,a){function u(f,b,v){return v==="assert"?new zi(b,[f]):v==="coerce"?new Yi(b,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[f];if(b){let v=b.parse(n,this);if(!v)return null;if(this.expectedType){const w=this.expectedType,k=v.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||k.kind!=="value")if(w.kind!=="projectionDefinition"||k.kind!=="string"&&k.kind!=="array")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string")if(w.kind!=="padding"||k.kind!=="value"&&k.kind!=="number"&&k.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||k.kind!=="value"&&k.kind!=="array"){if(this.checkSubtype(w,k))return null}else v=u(v,w,a.typeAnnotation||"coerce");else v=u(v,w,a.typeAnnotation||"coerce");else v=u(v,w,a.typeAnnotation||"coerce");else v=u(v,w,a.typeAnnotation||"coerce");else v=u(v,w,a.typeAnnotation||"assert")}if(!(v instanceof Oi)&&v.type.kind!=="resolvedImage"&&this._isConstant(v)){const w=new Il;try{v=new Oi(v.type,v.evaluate(w))}catch(k){return this.error(k.message),null}}return v}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,u){const f=typeof n=="number"?this.path.concat(n):this.path,b=u?this.scope.concat(u):this.scope;return new cr(this.registry,this._isConstant,f,a||null,b,this.errors)}error(n,...a){const u=`${this.key}${a.map(f=>`[${f}]`).join("")}`;this.errors.push(new Rt(u,n))}checkSubtype(n,a){const u=La(n,a);return u&&this.error(u),u}}class Yt{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const u=[];for(let b=1;b<n.length-1;b+=2){const v=n[b];if(typeof v!="string")return a.error(`Expected string, but found ${typeof v} instead.`,b);if(/[^a-zA-Z0-9_]/.test(v))return a.error("Variable names must contain only alphanumeric characters or '_'.",b);const w=a.parse(n[b+1],b+1);if(!w)return null;u.push([v,w])}const f=a.parse(n[n.length-1],n.length-1,a.expectedType,u);return f?new Yt(u,f):null}outputDefined(){return this.result.outputDefined()}}class Gs{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const u=n[1];return a.scope.has(u)?new Gs(u,a.scope.get(u)):a.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class dr{constructor(n,a,u){this.type=n,this.index=a,this.input=u}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,Je),f=a.parse(n[2],2,ci(a.expectedType||zt));return u&&f?new dr(f.type.itemType,u,f):null}evaluate(n){const a=this.index.evaluate(n),u=this.input.evaluate(n);if(a<0)throw new sn(`Array index out of bounds: ${a} < 0.`);if(a>=u.length)throw new sn(`Array index out of bounds: ${a} > ${u.length-1}.`);if(a!==Math.floor(a))throw new sn(`Array index must be an integer, but found ${a} instead.`);return u[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Da{constructor(n,a){this.type=kt,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,zt),f=a.parse(n[2],2,zt);return u&&f?eu(u.type,[kt,Pt,Je,Zt,zt])?new Da(u,f):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Or(u.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(!u)return!1;if(!Fo(a,["boolean","string","number","null"]))throw new sn(`Expected first argument to be of type boolean, string, number or null, but found ${Or(bn(a))} instead.`);if(!Fo(u,["string","array"]))throw new sn(`Expected second argument to be of type array or string, but found ${Or(bn(u))} instead.`);return u.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class $i{constructor(n,a,u){this.type=Je,this.needle=n,this.haystack=a,this.fromIndex=u}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,zt),f=a.parse(n[2],2,zt);if(!u||!f)return null;if(!eu(u.type,[kt,Pt,Je,Zt,zt]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Or(u.type)} instead`);if(n.length===4){const b=a.parse(n[3],3,Je);return b?new $i(u,f,b):null}return new $i(u,f)}evaluate(n){const a=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(!Fo(a,["boolean","string","number","null"]))throw new sn(`Expected first argument to be of type boolean, string, number or null, but found ${Or(bn(a))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(n)),Fo(u,["string"])){const b=u.indexOf(a,f);return b===-1?-1:[...u.slice(0,b)].length}if(Fo(u,["array"]))return u.indexOf(a,f);throw new sn(`Expected second argument to be of type array or string, but found ${Or(bn(u))} instead.`)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Oa{constructor(n,a,u,f,b,v){this.inputType=n,this.type=a,this.input=u,this.cases=f,this.outputs=b,this.otherwise=v}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let u,f;a.expectedType&&a.expectedType.kind!=="value"&&(f=a.expectedType);const b={},v=[];for(let P=2;P<n.length-1;P+=2){let E=n[P];const L=n[P+1];Array.isArray(E)||(E=[E]);const N=a.concat(P);if(E.length===0)return N.error("Expected at least one branch label.");for(const U of E){if(typeof U!="number"&&typeof U!="string")return N.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return N.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof U=="number"&&Math.floor(U)!==U)return N.error("Numeric branch labels must be integer values.");if(u){if(N.checkSubtype(u,bn(U)))return null}else u=bn(U);if(b[String(U)]!==void 0)return N.error("Branch labels must be unique.");b[String(U)]=v.length}const V=a.parse(L,P,f);if(!V)return null;f=f||V.type,v.push(V)}const w=a.parse(n[1],1,zt);if(!w)return null;const k=a.parse(n[n.length-1],n.length-1,f);return k?w.type.kind!=="value"&&a.concat(1).checkSubtype(u,w.type)?null:new Oa(u,f,w,b,v,k):null}evaluate(n){const a=this.input.evaluate(n);return(bn(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Ml{constructor(n,a,u){this.type=n,this.branches=a,this.otherwise=u}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let u;a.expectedType&&a.expectedType.kind!=="value"&&(u=a.expectedType);const f=[];for(let v=1;v<n.length-1;v+=2){const w=a.parse(n[v],v,kt);if(!w)return null;const k=a.parse(n[v+1],v+1,u);if(!k)return null;f.push([w,k]),u=u||k.type}const b=a.parse(n[n.length-1],n.length-1,u);if(!b)return null;if(!u)throw new Error("Can't infer output type");return new Ml(u,f,b)}evaluate(n){for(const[a,u]of this.branches)if(a.evaluate(n))return u.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,u]of this.branches)n(a),n(u);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class za{constructor(n,a,u,f){this.type=n,this.input=a,this.beginIndex=u,this.endIndex=f}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,zt),f=a.parse(n[2],2,Je);if(!u||!f)return null;if(!eu(u.type,[ci(zt),Pt,zt]))return a.error(`Expected first argument to be of type array or string, but found ${Or(u.type)} instead`);if(n.length===4){const b=a.parse(n[3],3,Je);return b?new za(u.type,u,f,b):null}return new za(u.type,u,f)}evaluate(n){const a=this.input.evaluate(n),u=this.beginIndex.evaluate(n);let f;if(this.endIndex&&(f=this.endIndex.evaluate(n)),Fo(a,["string"]))return[...a].slice(u,f).join("");if(Fo(a,["array"]))return a.slice(u,f);throw new sn(`Expected first argument to be of type array or string, but found ${Or(bn(a))} instead.`)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Ws(s,n){const a=s.length-1;let u,f,b=0,v=a,w=0;for(;b<=v;)if(w=Math.floor((b+v)/2),u=s[w],f=s[w+1],u<=n){if(w===a||n<f)return w;b=w+1}else{if(!(u>n))throw new sn("Input is not a number.");v=w-1}return 0}class Hs{constructor(n,a,u){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[f,b]of u)this.labels.push(f),this.outputs.push(b)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const u=a.parse(n[1],1,Je);if(!u)return null;const f=[];let b=null;a.expectedType&&a.expectedType.kind!=="value"&&(b=a.expectedType);for(let v=1;v<n.length;v+=2){const w=v===1?-1/0:n[v],k=n[v+1],P=v,E=v+1;if(typeof w!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(f.length&&f[f.length-1][0]>=w)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const L=a.parse(k,E,b);if(!L)return null;b=b||L.type,f.push([w,L])}return new Hs(b,u,f)}evaluate(n){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(n);const f=this.input.evaluate(n);if(f<=a[0])return u[0].evaluate(n);const b=a.length;return f>=a[b-1]?u[b-1].evaluate(n):u[Ws(a,f)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function cm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var El,du,$a=function(){if(du)return El;function s(n,a,u,f){this.cx=3*n,this.bx=3*(u-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(f-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=a,this.p2x=u,this.p2y=f}return du=1,El=s,s.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,a){if(a===void 0&&(a=1e-6),n<0)return 0;if(n>1)return 1;for(var u=n,f=0;f<8;f++){var b=this.sampleCurveX(u)-n;if(Math.abs(b)<a)return u;var v=this.sampleCurveDerivativeX(u);if(Math.abs(v)<1e-6)break;u-=b/v}var w=0,k=1;for(u=n,f=0;f<20&&(b=this.sampleCurveX(u),!(Math.abs(b-n)<a));f++)n>b?w=u:k=u,u=.5*(k-w)+w;return u},solve:function(n,a){return this.sampleCurveY(this.solveCurveX(n,a))}},El}(),Xn=cm($a);class Jn{constructor(n,a,u,f,b){this.type=n,this.operator=a,this.interpolation=u,this.input=f,this.labels=[],this.outputs=[];for(const[v,w]of b)this.labels.push(v),this.outputs.push(w)}static interpolationFactor(n,a,u,f){let b=0;if(n.name==="exponential")b=Al(a,n.base,u,f);else if(n.name==="linear")b=Al(a,1,u,f);else if(n.name==="cubic-bezier"){const v=n.controlPoints;b=new Xn(v[0],v[1],v[2],v[3]).solve(Al(a,1,u,f))}return b}static parse(n,a){let[u,f,b,...v]=n;if(!Array.isArray(f)||f.length===0)return a.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const P=f[1];if(typeof P!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:P}}else{if(f[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const P=f.slice(1);if(P.length!==4||P.some(E=>typeof E!="number"||E<0||E>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:P}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(b=a.parse(b,2,Je),!b)return null;const w=[];let k=null;u==="interpolate-hcl"||u==="interpolate-lab"?k=er:a.expectedType&&a.expectedType.kind!=="value"&&(k=a.expectedType);for(let P=0;P<v.length;P+=2){const E=v[P],L=v[P+1],N=P+3,V=P+4;if(typeof E!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(w.length&&w[w.length-1][0]>=E)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',N);const U=a.parse(L,V,k);if(!U)return null;k=k||U.type,w.push([E,U])}return js(k,Je)||js(k,Gt)||js(k,er)||js(k,Cn)||js(k,Sl)||js(k,ci(Je))?new Jn(k,u,f,b,w):a.error(`Type ${Or(k)} is not interpolatable.`)}evaluate(n){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(n);const f=this.input.evaluate(n);if(f<=a[0])return u[0].evaluate(n);const b=a.length;if(f>=a[b-1])return u[b-1].evaluate(n);const v=Ws(a,f),w=Jn.interpolationFactor(this.interpolation,f,a[v],a[v+1]),k=u[v].evaluate(n),P=u[v+1].evaluate(n);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return yi(k,P,w);case"color":return fr.interpolate(k,P,w);case"padding":return Dn.interpolate(k,P,w);case"variableAnchorOffsetCollection":return On.interpolate(k,P,w);case"array":return Ri(k,P,w);case"projectionDefinition":return ui.interpolate(k,P,w)}case"interpolate-hcl":return fr.interpolate(k,P,w,"hcl");case"interpolate-lab":return fr.interpolate(k,P,w,"lab")}}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Al(s,n,a,u){const f=u-a,b=s-a;return f===0?0:n===1?b/f:(Math.pow(n,b)-1)/(Math.pow(n,f)-1)}const bi={color:fr.interpolate,number:yi,padding:Dn.interpolate,variableAnchorOffsetCollection:On.interpolate,array:Ri};class mn{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let u=null;const f=a.expectedType;f&&f.kind!=="value"&&(u=f);const b=[];for(const w of n.slice(1)){const k=a.parse(w,1+b.length,u,void 0,{typeAnnotation:"omit"});if(!k)return null;u=u||k.type,b.push(k)}if(!u)throw new Error("No output type");const v=f&&b.some(w=>La(f,w.type));return new mn(v?zt:u,b)}evaluate(n){let a,u=null,f=0;for(const b of this.args)if(f++,u=b.evaluate(n),u&&u instanceof ii&&!u.available&&(a||(a=u.name),u=null,f===this.args.length&&(u=a)),u!==null)break;return u}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function hu(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Ll(s,n,a,u){return u.compare(n,a)===0}function as(s,n,a){const u=s!=="=="&&s!=="!=";return class Hw{constructor(b,v,w){this.type=kt,this.lhs=b,this.rhs=v,this.collator=w,this.hasUntypedArgument=b.type.kind==="value"||v.type.kind==="value"}static parse(b,v){if(b.length!==3&&b.length!==4)return v.error("Expected two or three arguments.");const w=b[0];let k=v.parse(b[1],1,zt);if(!k)return null;if(!hu(w,k.type))return v.concat(1).error(`"${w}" comparisons are not supported for type '${Or(k.type)}'.`);let P=v.parse(b[2],2,zt);if(!P)return null;if(!hu(w,P.type))return v.concat(2).error(`"${w}" comparisons are not supported for type '${Or(P.type)}'.`);if(k.type.kind!==P.type.kind&&k.type.kind!=="value"&&P.type.kind!=="value")return v.error(`Cannot compare types '${Or(k.type)}' and '${Or(P.type)}'.`);u&&(k.type.kind==="value"&&P.type.kind!=="value"?k=new zi(P.type,[k]):k.type.kind!=="value"&&P.type.kind==="value"&&(P=new zi(k.type,[P])));let E=null;if(b.length===4){if(k.type.kind!=="string"&&P.type.kind!=="string"&&k.type.kind!=="value"&&P.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(E=v.parse(b[3],3,os),!E)return null}return new Hw(k,P,E)}evaluate(b){const v=this.lhs.evaluate(b),w=this.rhs.evaluate(b);if(u&&this.hasUntypedArgument){const k=bn(v),P=bn(w);if(k.kind!==P.kind||k.kind!=="string"&&k.kind!=="number")throw new sn(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${k.kind}, ${P.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const k=bn(v),P=bn(w);if(k.kind!=="string"||P.kind!=="string")return n(b,v,w)}return this.collator?a(b,v,w,this.collator.evaluate(b)):n(b,v,w)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}const um=as("==",function(s,n,a){return n===a},Ll),Rl=as("!=",function(s,n,a){return n!==a},function(s,n,a,u){return!Ll(0,n,a,u)}),fu=as("<",function(s,n,a){return n<a},function(s,n,a,u){return u.compare(n,a)<0}),dm=as(">",function(s,n,a){return n>a},function(s,n,a,u){return u.compare(n,a)>0}),Dl=as("<=",function(s,n,a){return n<=a},function(s,n,a,u){return u.compare(n,a)<=0}),Ol=as(">=",function(s,n,a){return n>=a},function(s,n,a,u){return u.compare(n,a)>=0});class di{constructor(n,a,u){this.type=os,this.locale=u,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const u=n[1];if(typeof u!="object"||Array.isArray(u))return a.error("Collator options argument must be an object.");const f=a.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,kt);if(!f)return null;const b=a.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,kt);if(!b)return null;let v=null;return u.locale&&(v=a.parse(u.locale,1,Pt),!v)?null:new di(f,b,v)}evaluate(n){return new Tl(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class zl{constructor(n,a,u,f,b){this.type=Pt,this.number=n,this.locale=a,this.currency=u,this.minFractionDigits=f,this.maxFractionDigits=b}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const u=a.parse(n[1],1,Je);if(!u)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return a.error("NumberFormat options argument must be an object.");let b=null;if(f.locale&&(b=a.parse(f.locale,1,Pt),!b))return null;let v=null;if(f.currency&&(v=a.parse(f.currency,1,Pt),!v))return null;let w=null;if(f["min-fraction-digits"]&&(w=a.parse(f["min-fraction-digits"],1,Je),!w))return null;let k=null;return f["max-fraction-digits"]&&(k=a.parse(f["max-fraction-digits"],1,Je),!k)?null:new zl(u,b,v,w,k)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class ls{constructor(n){this.type=yn,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const u=n[1];if(!Array.isArray(u)&&typeof u=="object")return a.error("First argument must be an image or text section.");const f=[];let b=!1;for(let v=1;v<=n.length-1;++v){const w=n[v];if(b&&typeof w=="object"&&!Array.isArray(w)){b=!1;let k=null;if(w["font-scale"]&&(k=a.parse(w["font-scale"],1,Je),!k))return null;let P=null;if(w["text-font"]&&(P=a.parse(w["text-font"],1,ci(Pt)),!P))return null;let E=null;if(w["text-color"]&&(E=a.parse(w["text-color"],1,er),!E))return null;let L=null;if(w["vertical-align"]){if(typeof w["vertical-align"]=="string"&&!lu.includes(w["vertical-align"]))return a.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${w["vertical-align"]}' instead.`);if(L=a.parse(w["vertical-align"],1,Pt),!L)return null}const N=f[f.length-1];N.scale=k,N.font=P,N.textColor=E,N.verticalAlign=L}else{const k=a.parse(n[v],1,zt);if(!k)return null;const P=k.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,f.push({content:k,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ls(f)}evaluate(n){return new Vn(this.sections.map(a=>{const u=a.content.evaluate(n);return bn(u)===Wr?new Di("",u,null,null,null,a.verticalAlign?a.verticalAlign.evaluate(n):null):new Di(No(u),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null,a.verticalAlign?a.verticalAlign.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor),a.verticalAlign&&n(a.verticalAlign)}outputDefined(){return!1}}class pu{constructor(n){this.type=Wr,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const u=a.parse(n[1],1,Pt);return u?new pu(u):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),u=ii.fromString(a);return u&&n.availableImages&&(u.available=n.availableImages.indexOf(a)>-1),u}eachChild(n){n(this.input)}outputDefined(){return!1}}class Ba{constructor(n){this.type=Je,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const u=a.parse(n[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Or(u.type)} instead.`):new Ba(u):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string")return[...a].length;if(Array.isArray(a))return a.length;throw new sn(`Expected value to be of type string or array, but found ${Or(bn(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const so=8192;function hm(s,n){const a=(180+s[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(a*f*so),Math.round(u*f*so)]}function mu(s,n){const a=Math.pow(2,n.z);return[(f=(s[0]/so+n.x)/a,360*f-180),(u=(s[1]/so+n.y)/a,360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90)];var u,f}function Fa(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function jo(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function fm(s,n,a){const u=s[0]-n[0],f=s[1]-n[1],b=s[0]-a[0],v=s[1]-a[1];return u*v-b*f==0&&u*b<=0&&f*v<=0}function Na(s,n,a,u){return(f=[u[0]-a[0],u[1]-a[1]])[0]*(b=[n[0]-s[0],n[1]-s[1]])[1]-f[1]*b[0]!=0&&!(!$h(s,n,a,u)||!$h(a,u,s,n));var f,b}function Dh(s,n,a){for(const u of a)for(let f=0;f<u.length-1;++f)if(Na(s,n,u[f],u[f+1]))return!0;return!1}function qs(s,n,a=!1){let u=!1;for(const w of n)for(let k=0;k<w.length-1;k++){if(fm(s,w[k],w[k+1]))return a;(b=w[k])[1]>(f=s)[1]!=(v=w[k+1])[1]>f[1]&&f[0]<(v[0]-b[0])*(f[1]-b[1])/(v[1]-b[1])+b[0]&&(u=!u)}var f,b,v;return u}function Oh(s,n){for(const a of n)if(qs(s,a))return!0;return!1}function zh(s,n){for(const a of s)if(!qs(a,n))return!1;for(let a=0;a<s.length-1;++a)if(Dh(s[a],s[a+1],n))return!1;return!0}function pm(s,n){for(const a of n)if(zh(s,a))return!0;return!1}function $h(s,n,a,u){const f=u[0]-a[0],b=u[1]-a[1],v=(s[0]-a[0])*b-f*(s[1]-a[1]),w=(n[0]-a[0])*b-f*(n[1]-a[1]);return v>0&&w<0||v<0&&w>0}function gu(s,n,a){const u=[];for(let f=0;f<s.length;f++){const b=[];for(let v=0;v<s[f].length;v++){const w=hm(s[f][v],a);Fa(n,w),b.push(w)}u.push(b)}return u}function Bh(s,n,a){const u=[];for(let f=0;f<s.length;f++){const b=gu(s[f],n,a);u.push(b)}return u}function _u(s,n,a,u){if(s[0]<a[0]||s[0]>a[2]){const f=.5*u;let b=s[0]-a[0]>f?-u:a[0]-s[0]>f?u:0;b===0&&(b=s[0]-a[2]>f?-u:a[2]-s[0]>f?u:0),s[0]+=b}Fa(n,s)}function yu(s,n,a,u){const f=Math.pow(2,u.z)*so,b=[u.x*so,u.y*so],v=[];for(const w of s)for(const k of w){const P=[k.x+b[0],k.y+b[1]];_u(P,n,a,f),v.push(P)}return v}function bu(s,n,a,u){const f=Math.pow(2,u.z)*so,b=[u.x*so,u.y*so],v=[];for(const k of s){const P=[];for(const E of k){const L=[E.x+b[0],E.y+b[1]];Fa(n,L),P.push(L)}v.push(P)}if(n[2]-n[0]<=f/2){(w=n)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const k of v)for(const P of k)_u(P,n,a,f)}var w;return v}class cs{constructor(n,a){this.type=kt,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ki(n[1])){const u=n[1];if(u.type==="FeatureCollection"){const f=[];for(const b of u.features){const{type:v,coordinates:w}=b.geometry;v==="Polygon"&&f.push(w),v==="MultiPolygon"&&f.push(...w)}if(f.length)return new cs(u,{type:"MultiPolygon",coordinates:f})}else if(u.type==="Feature"){const f=u.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new cs(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new cs(u,u)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,u){const f=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],v=a.canonicalID();if(u.type==="Polygon"){const w=gu(u.coordinates,b,v),k=yu(a.geometry(),f,b,v);if(!jo(f,b))return!1;for(const P of k)if(!qs(P,w))return!1}if(u.type==="MultiPolygon"){const w=Bh(u.coordinates,b,v),k=yu(a.geometry(),f,b,v);if(!jo(f,b))return!1;for(const P of k)if(!Oh(P,w))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,u){const f=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],v=a.canonicalID();if(u.type==="Polygon"){const w=gu(u.coordinates,b,v),k=bu(a.geometry(),f,b,v);if(!jo(f,b))return!1;for(const P of k)if(!zh(P,w))return!1}if(u.type==="MultiPolygon"){const w=Bh(u.coordinates,b,v),k=bu(a.geometry(),f,b,v);if(!jo(f,b))return!1;for(const P of k)if(!pm(P,w))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Fh=class{constructor(s=[],n=(a,u)=>a<u?-1:a>u?1:0){if(this.data=s,this.length=this.data.length,this.compare=n,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:n,compare:a}=this,u=n[s];for(;s>0;){const f=s-1>>1,b=n[f];if(a(u,b)>=0)break;n[s]=b,s=f}n[s]=u}_down(s){const{data:n,compare:a}=this,u=this.length>>1,f=n[s];for(;s<u;){let b=1+(s<<1);const v=b+1;if(v<this.length&&a(n[v],n[b])<0&&(b=v),a(n[b],f)>=0)break;n[s]=n[b],s=b}n[s]=f}};function Nh(s,n,a=0,u=s.length-1,f=mm){for(;u>a;){if(u-a>600){const k=u-a+1,P=n-a+1,E=Math.log(k),L=.5*Math.exp(2*E/3),N=.5*Math.sqrt(E*L*(k-L)/k)*(P-k/2<0?-1:1);Nh(s,n,Math.max(a,Math.floor(n-P*L/k+N)),Math.min(u,Math.floor(n+(k-P)*L/k+N)),f)}const b=s[n];let v=a,w=u;for(us(s,a,n),f(s[u],b)>0&&us(s,a,u);v<w;){for(us(s,v,w),v++,w--;f(s[v],b)<0;)v++;for(;f(s[w],b)>0;)w--}f(s[a],b)===0?us(s,a,w):(w++,us(s,w,u)),w<=n&&(a=w+1),n<=w&&(u=w-1)}}function us(s,n,a){const u=s[n];s[n]=s[a],s[a]=u}function mm(s,n){return s<n?-1:s>n?1:0}function $l(s,n){if(s.length<=1)return[s];const a=[];let u,f;for(const b of s){const v=jh(b);v!==0&&(b.area=Math.abs(v),f===void 0&&(f=v<0),f===v<0?(u&&a.push(u),u=[b]):u.push(b))}if(u&&a.push(u),n>1)for(let b=0;b<a.length;b++)a[b].length<=n||(Nh(a[b],n,1,a[b].length-1,gm),a[b]=a[b].slice(0,n));return a}function gm(s,n){return n.area-s.area}function jh(s){let n=0;for(let a,u,f=0,b=s.length,v=b-1;f<b;v=f++)a=s[f],u=s[v],n+=(u.x-a.x)*(a.y+u.y);return n}const vu=1/298.257223563,Vh=vu*(2-vu),Uh=Math.PI/180;class Bl{constructor(n){const a=6378.137*Uh*1e3,u=Math.cos(n*Uh),f=1/(1-Vh*(1-u*u)),b=Math.sqrt(f);this.kx=a*b*u,this.ky=a*b*f*(1-Vh)}distance(n,a){const u=this.wrap(n[0]-a[0])*this.kx,f=(n[1]-a[1])*this.ky;return Math.sqrt(u*u+f*f)}pointOnLine(n,a){let u,f,b,v,w=1/0;for(let k=0;k<n.length-1;k++){let P=n[k][0],E=n[k][1],L=this.wrap(n[k+1][0]-P)*this.kx,N=(n[k+1][1]-E)*this.ky,V=0;L===0&&N===0||(V=(this.wrap(a[0]-P)*this.kx*L+(a[1]-E)*this.ky*N)/(L*L+N*N),V>1?(P=n[k+1][0],E=n[k+1][1]):V>0&&(P+=L/this.kx*V,E+=N/this.ky*V)),L=this.wrap(a[0]-P)*this.kx,N=(a[1]-E)*this.ky;const U=L*L+N*N;U<w&&(w=U,u=P,f=E,b=k,v=V)}return{point:[u,f],index:b,t:Math.max(0,Math.min(1,v))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function xu(s,n){return n[0]-s[0]}function Fl(s){return s[1]-s[0]+1}function xo(s,n){return s[1]>=s[0]&&s[1]<n}function wu(s,n){if(s[0]>s[1])return[null,null];const a=Fl(s);if(n){if(a===2)return[s,null];const f=Math.floor(a/2);return[[s[0],s[0]+f],[s[0]+f,s[1]]]}if(a===1)return[s,null];const u=Math.floor(a/2)-1;return[[s[0],s[0]+u],[s[0]+u+1,s[1]]]}function Nl(s,n){if(!xo(n,s.length))return[1/0,1/0,-1/0,-1/0];const a=[1/0,1/0,-1/0,-1/0];for(let u=n[0];u<=n[1];++u)Fa(a,s[u]);return a}function Cu(s){const n=[1/0,1/0,-1/0,-1/0];for(const a of s)for(const u of a)Fa(n,u);return n}function Zh(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Su(s,n,a){if(!Zh(s)||!Zh(n))return NaN;let u=0,f=0;return s[2]<n[0]&&(u=n[0]-s[2]),s[0]>n[2]&&(u=s[0]-n[2]),s[1]>n[3]&&(f=s[1]-n[3]),s[3]<n[1]&&(f=n[1]-s[3]),a.distance([0,0],[u,f])}function ds(s,n,a){const u=a.pointOnLine(n,s);return a.distance(s,u.point)}function gr(s,n,a,u,f){const b=Math.min(ds(s,[a,u],f),ds(n,[a,u],f)),v=Math.min(ds(a,[s,n],f),ds(u,[s,n],f));return Math.min(b,v)}function _m(s,n,a,u,f){if(!xo(n,s.length)||!xo(u,a.length))return 1/0;let b=1/0;for(let v=n[0];v<n[1];++v){const w=s[v],k=s[v+1];for(let P=u[0];P<u[1];++P){const E=a[P],L=a[P+1];if(Na(w,k,E,L))return 0;b=Math.min(b,gr(w,k,E,L,f))}}return b}function ym(s,n,a,u,f){if(!xo(n,s.length)||!xo(u,a.length))return NaN;let b=1/0;for(let v=n[0];v<=n[1];++v)for(let w=u[0];w<=u[1];++w)if(b=Math.min(b,f.distance(s[v],a[w])),b===0)return b;return b}function bm(s,n,a){if(qs(s,n,!0))return 0;let u=1/0;for(const f of n){const b=f[0],v=f[f.length-1];if(b!==v&&(u=Math.min(u,ds(s,[v,b],a)),u===0))return u;const w=a.pointOnLine(f,s);if(u=Math.min(u,a.distance(s,w.point)),u===0)return u}return u}function vm(s,n,a,u){if(!xo(n,s.length))return NaN;for(let b=n[0];b<=n[1];++b)if(qs(s[b],a,!0))return 0;let f=1/0;for(let b=n[0];b<n[1];++b){const v=s[b],w=s[b+1];for(const k of a)for(let P=0,E=k.length,L=E-1;P<E;L=P++){const N=k[L],V=k[P];if(Na(v,w,N,V))return 0;f=Math.min(f,gr(v,w,N,V,u))}}return f}function Gh(s,n){for(const a of s)for(const u of a)if(qs(u,n,!0))return!0;return!1}function xm(s,n,a,u=1/0){const f=Cu(s),b=Cu(n);if(u!==1/0&&Su(f,b,a)>=u)return u;if(jo(f,b)){if(Gh(s,n))return 0}else if(Gh(n,s))return 0;let v=1/0;for(const w of s)for(let k=0,P=w.length,E=P-1;k<P;E=k++){const L=w[E],N=w[k];for(const V of n)for(let U=0,G=V.length,Y=G-1;U<G;Y=U++){const ie=V[Y],be=V[U];if(Na(L,N,ie,be))return 0;v=Math.min(v,gr(L,N,ie,be,a))}}return v}function Wh(s,n,a,u,f,b){if(!b)return;const v=Su(Nl(u,b),f,a);v<n&&s.push([v,b,[0,0]])}function jl(s,n,a,u,f,b,v){if(!b||!v)return;const w=Su(Nl(u,b),Nl(f,v),a);w<n&&s.push([w,b,v])}function Vl(s,n,a,u,f=1/0){let b=Math.min(u.distance(s[0],a[0][0]),f);if(b===0)return b;const v=new Fh([[0,[0,s.length-1],[0,0]]],xu),w=Cu(a);for(;v.length>0;){const k=v.pop();if(k[0]>=b)continue;const P=k[1],E=n?50:100;if(Fl(P)<=E){if(!xo(P,s.length))return NaN;if(n){const L=vm(s,P,a,u);if(isNaN(L)||L===0)return L;b=Math.min(b,L)}else for(let L=P[0];L<=P[1];++L){const N=bm(s[L],a,u);if(b=Math.min(b,N),b===0)return 0}}else{const L=wu(P,n);Wh(v,b,u,s,w,L[0]),Wh(v,b,u,s,w,L[1])}}return b}function Ul(s,n,a,u,f,b=1/0){let v=Math.min(b,f.distance(s[0],a[0]));if(v===0)return v;const w=new Fh([[0,[0,s.length-1],[0,a.length-1]]],xu);for(;w.length>0;){const k=w.pop();if(k[0]>=v)continue;const P=k[1],E=k[2],L=n?50:100,N=u?50:100;if(Fl(P)<=L&&Fl(E)<=N){if(!xo(P,s.length)&&xo(E,a.length))return NaN;let V;if(n&&u)V=_m(s,P,a,E,f),v=Math.min(v,V);else if(n&&!u){const U=s.slice(P[0],P[1]+1);for(let G=E[0];G<=E[1];++G)if(V=ds(a[G],U,f),v=Math.min(v,V),v===0)return v}else if(!n&&u){const U=a.slice(E[0],E[1]+1);for(let G=P[0];G<=P[1];++G)if(V=ds(s[G],U,f),v=Math.min(v,V),v===0)return v}else V=ym(s,P,a,E,f),v=Math.min(v,V)}else{const V=wu(P,n),U=wu(E,u);jl(w,v,f,s,a,V[0],U[0]),jl(w,v,f,s,a,V[0],U[1]),jl(w,v,f,s,a,V[1],U[0]),jl(w,v,f,s,a,V[1],U[1])}}return v}function ku(s){return s.type==="MultiPolygon"?s.coordinates.map(n=>({type:"Polygon",coordinates:n})):s.type==="MultiLineString"?s.coordinates.map(n=>({type:"LineString",coordinates:n})):s.type==="MultiPoint"?s.coordinates.map(n=>({type:"Point",coordinates:n})):[s]}class hs{constructor(n,a){this.type=Je,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ki(n[1])){const u=n[1];if(u.type==="FeatureCollection")return new hs(u,u.features.map(f=>ku(f.geometry)).flat());if(u.type==="Feature")return new hs(u,ku(u.geometry));if("type"in u&&"coordinates"in u)return new hs(u,ku(u))}return a.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,u){const f=a.geometry(),b=f.flat().map(k=>mu([k.x,k.y],a.canonical));if(f.length===0)return NaN;const v=new Bl(b[0][1]);let w=1/0;for(const k of u){switch(k.type){case"Point":w=Math.min(w,Ul(b,!1,[k.coordinates],!1,v,w));break;case"LineString":w=Math.min(w,Ul(b,!1,k.coordinates,!0,v,w));break;case"Polygon":w=Math.min(w,Vl(b,!1,k.coordinates,v,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,u){const f=a.geometry(),b=f.flat().map(k=>mu([k.x,k.y],a.canonical));if(f.length===0)return NaN;const v=new Bl(b[0][1]);let w=1/0;for(const k of u){switch(k.type){case"Point":w=Math.min(w,Ul(b,!0,[k.coordinates],!1,v,w));break;case"LineString":w=Math.min(w,Ul(b,!0,k.coordinates,!0,v,w));break;case"Polygon":w=Math.min(w,Vl(b,!0,k.coordinates,v,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="Polygon")return function(a,u){const f=a.geometry();if(f.length===0||f[0].length===0)return NaN;const b=$l(f,0).map(k=>k.map(P=>P.map(E=>mu([E.x,E.y],a.canonical)))),v=new Bl(b[0][0][0][1]);let w=1/0;for(const k of u)for(const P of b){switch(k.type){case"Point":w=Math.min(w,Vl([k.coordinates],!1,P,v,w));break;case"LineString":w=Math.min(w,Vl(k.coordinates,!0,P,v,w));break;case"Polygon":w=Math.min(w,xm(P,k.coordinates,v,w))}if(w===0)return w}return w}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ks={"==":um,"!=":Rl,">":dm,"<":fu,">=":Ol,"<=":Dl,array:zi,at:dr,boolean:zi,case:Ml,coalesce:mn,collator:di,format:ls,image:pu,in:Da,"index-of":$i,interpolate:Jn,"interpolate-hcl":Jn,"interpolate-lab":Jn,length:Ba,let:Yt,literal:Oi,match:Oa,number:zi,"number-format":zl,object:zi,slice:za,step:Hs,string:zi,"to-boolean":Yi,"to-color":Yi,"to-number":Yi,"to-string":Yi,var:Gs,within:cs,distance:hs};class Bi{constructor(n,a,u,f){this.name=n,this.type=a,this._evaluate=u,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,a){const u=n[0],f=Bi.definitions[u];if(!f)return a.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(f)?f[0]:f.type,v=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,w=v.filter(([P])=>!Array.isArray(P)||P.length===n.length-1);let k=null;for(const[P,E]of w){k=new cr(a.registry,Zl,a.path,null,a.scope);const L=[];let N=!1;for(let V=1;V<n.length;V++){const U=n[V],G=Array.isArray(P)?P[V-1]:P.type,Y=k.parse(U,1+L.length,G);if(!Y){N=!0;break}L.push(Y)}if(!N)if(Array.isArray(P)&&P.length!==L.length)k.error(`Expected ${P.length} arguments, but found ${L.length} instead.`);else{for(let V=0;V<L.length;V++){const U=Array.isArray(P)?P[V]:P.type,G=L[V];k.concat(V+1).checkSubtype(U,G.type)}if(k.errors.length===0)return new Bi(u,b,E,L)}}if(w.length===1)a.errors.push(...k.errors);else{const P=(w.length?w:v).map(([L])=>{return N=L,Array.isArray(N)?`(${N.map(Or).join(", ")})`:`(${Or(N.type)}...)`;var N}).join(" | "),E=[];for(let L=1;L<n.length;L++){const N=a.parse(n[L],1+E.length);if(!N)return null;E.push(Or(N.type))}a.error(`Expected arguments of type ${P}, but found (${E.join(", ")}) instead.`)}return null}static register(n,a){Bi.definitions=a;for(const u in a)n[u]=Bi}}function Hh(s,[n,a,u,f]){n=n.evaluate(s),a=a.evaluate(s),u=u.evaluate(s);const b=f?f.evaluate(s):1,v=Pl(n,a,u,b);if(v)throw new sn(v);return new fr(n/255,a/255,u/255,b,!1)}function qh(s,n){return s in n}function Tu(s,n){const a=n[s];return a===void 0?null:a}function fs(s){return{type:s}}function Zl(s){if(s instanceof Gs)return Zl(s.boundExpression);if(s instanceof Bi&&s.name==="error"||s instanceof di||s instanceof cs||s instanceof hs)return!1;const n=s instanceof Yi||s instanceof zi;let a=!0;return s.eachChild(u=>{a=n?a&&Zl(u):a&&u instanceof Oi}),!!a&&Gl(s)&&Wl(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Gl(s){if(s instanceof Bi&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof cs||s instanceof hs)return!1;let n=!0;return s.eachChild(a=>{n&&!Gl(a)&&(n=!1)}),n}function ja(s){if(s instanceof Bi&&s.name==="feature-state")return!1;let n=!0;return s.eachChild(a=>{n&&!ja(a)&&(n=!1)}),n}function Wl(s,n){if(s instanceof Bi&&n.indexOf(s.name)>=0)return!1;let a=!0;return s.eachChild(u=>{a&&!Wl(u,n)&&(a=!1)}),a}function Kh(s){return{result:"success",value:s}}function Ys(s){return{result:"error",value:s}}function Xs(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Yh(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Pu(s){return!!s.expression&&s.expression.interpolated}function pr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Hl(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function wm(s){return s}function Xh(s,n){const a=n.type==="color",u=s.stops&&typeof s.stops[0][0]=="object",f=u||!(u||s.property!==void 0),b=s.type||(Pu(n)?"exponential":"interval");if(a||n.type==="padding"){const E=a?fr.parse:Dn.parse;(s=yt({},s)).stops&&(s.stops=s.stops.map(L=>[L[0],E(L[1])])),s.default=E(s.default?s.default:n.default)}if(s.colorSpace&&(v=s.colorSpace)!=="rgb"&&v!=="hcl"&&v!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var v;let w,k,P;if(b==="exponential")w=Jh;else if(b==="interval")w=Sm;else if(b==="categorical"){w=Cm,k=Object.create(null);for(const E of s.stops)k[E[0]]=E[1];P=typeof s.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);w=Qh}if(u){const E={},L=[];for(let U=0;U<s.stops.length;U++){const G=s.stops[U],Y=G[0].zoom;E[Y]===void 0&&(E[Y]={zoom:Y,type:s.type,property:s.property,default:s.default,stops:[]},L.push(Y)),E[Y].stops.push([G[0].value,G[1]])}const N=[];for(const U of L)N.push([E[U].zoom,Xh(E[U],n)]);const V={name:"linear"};return{kind:"composite",interpolationType:V,interpolationFactor:Jn.interpolationFactor.bind(void 0,V),zoomStops:N.map(U=>U[0]),evaluate:({zoom:U},G)=>Jh({stops:N,base:s.base},n,U).evaluate(U,G)}}if(f){const E=b==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:Jn.interpolationFactor.bind(void 0,E),zoomStops:s.stops.map(L=>L[0]),evaluate:({zoom:L})=>w(s,n,L,k,P)}}return{kind:"source",evaluate(E,L){const N=L&&L.properties?L.properties[s.property]:void 0;return N===void 0?ps(s.default,n.default):w(s,n,N,k,P)}}}function ps(s,n,a){return s!==void 0?s:n!==void 0?n:a!==void 0?a:void 0}function Cm(s,n,a,u,f){return ps(typeof a===f?u[a]:void 0,s.default,n.default)}function Sm(s,n,a){if(pr(a)!=="number")return ps(s.default,n.default);const u=s.stops.length;if(u===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[u-1][0])return s.stops[u-1][1];const f=Ws(s.stops.map(b=>b[0]),a);return s.stops[f][1]}function Jh(s,n,a){const u=s.base!==void 0?s.base:1;if(pr(a)!=="number")return ps(s.default,n.default);const f=s.stops.length;if(f===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[f-1][0])return s.stops[f-1][1];const b=Ws(s.stops.map(E=>E[0]),a),v=function(E,L,N,V){const U=V-N,G=E-N;return U===0?0:L===1?G/U:(Math.pow(L,G)-1)/(Math.pow(L,U)-1)}(a,u,s.stops[b][0],s.stops[b+1][0]),w=s.stops[b][1],k=s.stops[b+1][1],P=bi[n.type]||wm;return typeof w.evaluate=="function"?{evaluate(...E){const L=w.evaluate.apply(void 0,E),N=k.evaluate.apply(void 0,E);if(L!==void 0&&N!==void 0)return P(L,N,v,s.colorSpace)}}:P(w,k,v,s.colorSpace)}function Qh(s,n,a){switch(n.type){case"color":a=fr.parse(a);break;case"formatted":a=Vn.fromString(a.toString());break;case"resolvedImage":a=ii.fromString(a.toString());break;case"padding":a=Dn.parse(a);break;default:pr(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0)}return ps(a,s.default,n.default)}Bi.register(Ks,{error:[{kind:"error"},[Pt],(s,[n])=>{throw new sn(n.evaluate(s))}],typeof:[Pt,[zt],(s,[n])=>Or(bn(n.evaluate(s)))],"to-rgba":[ci(Je,4),[er],(s,[n])=>{const[a,u,f,b]=n.evaluate(s).rgb;return[255*a,255*u,255*f,b]}],rgb:[er,[Je,Je,Je],Hh],rgba:[er,[Je,Je,Je,Je],Hh],has:{type:kt,overloads:[[[Pt],(s,[n])=>qh(n.evaluate(s),s.properties())],[[Pt,rr],(s,[n,a])=>qh(n.evaluate(s),a.evaluate(s))]]},get:{type:zt,overloads:[[[Pt],(s,[n])=>Tu(n.evaluate(s),s.properties())],[[Pt,rr],(s,[n,a])=>Tu(n.evaluate(s),a.evaluate(s))]]},"feature-state":[zt,[Pt],(s,[n])=>Tu(n.evaluate(s),s.featureState||{})],properties:[rr,[],s=>s.properties()],"geometry-type":[Pt,[],s=>s.geometryType()],id:[zt,[],s=>s.id()],zoom:[Je,[],s=>s.globals.zoom],"heatmap-density":[Je,[],s=>s.globals.heatmapDensity||0],"line-progress":[Je,[],s=>s.globals.lineProgress||0],accumulated:[zt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Je,fs(Je),(s,n)=>{let a=0;for(const u of n)a+=u.evaluate(s);return a}],"*":[Je,fs(Je),(s,n)=>{let a=1;for(const u of n)a*=u.evaluate(s);return a}],"-":{type:Je,overloads:[[[Je,Je],(s,[n,a])=>n.evaluate(s)-a.evaluate(s)],[[Je],(s,[n])=>-n.evaluate(s)]]},"/":[Je,[Je,Je],(s,[n,a])=>n.evaluate(s)/a.evaluate(s)],"%":[Je,[Je,Je],(s,[n,a])=>n.evaluate(s)%a.evaluate(s)],ln2:[Je,[],()=>Math.LN2],pi:[Je,[],()=>Math.PI],e:[Je,[],()=>Math.E],"^":[Je,[Je,Je],(s,[n,a])=>Math.pow(n.evaluate(s),a.evaluate(s))],sqrt:[Je,[Je],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[Je,[Je],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[Je,[Je],(s,[n])=>Math.log(n.evaluate(s))],log2:[Je,[Je],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[Je,[Je],(s,[n])=>Math.sin(n.evaluate(s))],cos:[Je,[Je],(s,[n])=>Math.cos(n.evaluate(s))],tan:[Je,[Je],(s,[n])=>Math.tan(n.evaluate(s))],asin:[Je,[Je],(s,[n])=>Math.asin(n.evaluate(s))],acos:[Je,[Je],(s,[n])=>Math.acos(n.evaluate(s))],atan:[Je,[Je],(s,[n])=>Math.atan(n.evaluate(s))],min:[Je,fs(Je),(s,n)=>Math.min(...n.map(a=>a.evaluate(s)))],max:[Je,fs(Je),(s,n)=>Math.max(...n.map(a=>a.evaluate(s)))],abs:[Je,[Je],(s,[n])=>Math.abs(n.evaluate(s))],round:[Je,[Je],(s,[n])=>{const a=n.evaluate(s);return a<0?-Math.round(-a):Math.round(a)}],floor:[Je,[Je],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[Je,[Je],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[kt,[Pt,zt],(s,[n,a])=>s.properties()[n.value]===a.value],"filter-id-==":[kt,[zt],(s,[n])=>s.id()===n.value],"filter-type-==":[kt,[Pt],(s,[n])=>s.geometryType()===n.value],"filter-<":[kt,[Pt,zt],(s,[n,a])=>{const u=s.properties()[n.value],f=a.value;return typeof u==typeof f&&u<f}],"filter-id-<":[kt,[zt],(s,[n])=>{const a=s.id(),u=n.value;return typeof a==typeof u&&a<u}],"filter->":[kt,[Pt,zt],(s,[n,a])=>{const u=s.properties()[n.value],f=a.value;return typeof u==typeof f&&u>f}],"filter-id->":[kt,[zt],(s,[n])=>{const a=s.id(),u=n.value;return typeof a==typeof u&&a>u}],"filter-<=":[kt,[Pt,zt],(s,[n,a])=>{const u=s.properties()[n.value],f=a.value;return typeof u==typeof f&&u<=f}],"filter-id-<=":[kt,[zt],(s,[n])=>{const a=s.id(),u=n.value;return typeof a==typeof u&&a<=u}],"filter->=":[kt,[Pt,zt],(s,[n,a])=>{const u=s.properties()[n.value],f=a.value;return typeof u==typeof f&&u>=f}],"filter-id->=":[kt,[zt],(s,[n])=>{const a=s.id(),u=n.value;return typeof a==typeof u&&a>=u}],"filter-has":[kt,[zt],(s,[n])=>n.value in s.properties()],"filter-has-id":[kt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[kt,[ci(Pt)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[kt,[ci(zt)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[kt,[Pt,ci(zt)],(s,[n,a])=>a.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[kt,[Pt,ci(zt)],(s,[n,a])=>function(u,f,b,v){for(;b<=v;){const w=b+v>>1;if(f[w]===u)return!0;f[w]>u?v=w-1:b=w+1}return!1}(s.properties()[n.value],a.value,0,a.value.length-1)],all:{type:kt,overloads:[[[kt,kt],(s,[n,a])=>n.evaluate(s)&&a.evaluate(s)],[fs(kt),(s,n)=>{for(const a of n)if(!a.evaluate(s))return!1;return!0}]]},any:{type:kt,overloads:[[[kt,kt],(s,[n,a])=>n.evaluate(s)||a.evaluate(s)],[fs(kt),(s,n)=>{for(const a of n)if(a.evaluate(s))return!0;return!1}]]},"!":[kt,[kt],(s,[n])=>!n.evaluate(s)],"is-supported-script":[kt,[Pt],(s,[n])=>{const a=s.globals&&s.globals.isSupportedScript;return!a||a(n.evaluate(s))}],upcase:[Pt,[Pt],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[Pt,[Pt],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[Pt,fs(zt),(s,n)=>n.map(a=>No(a.evaluate(s))).join("")],"resolved-locale":[Pt,[os],(s,[n])=>n.evaluate(s).resolvedLocale()]});class Iu{constructor(n,a){var u;this.expression=n,this._warningHistory={},this._evaluator=new Il,this._defaultValue=a?(u=a).type==="color"&&Hl(u.default)?new fr(0,0,0,0):u.type==="color"?fr.parse(u.default)||null:u.type==="padding"?Dn.parse(u.default)||null:u.type==="variableAnchorOffsetCollection"?On.parse(u.default)||null:u.type==="projectionDefinition"?ui.parse(u.default)||null:u.default===void 0?null:u.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,u,f,b,v){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=u,this._evaluator.canonical=f,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)}evaluate(n,a,u,f,b,v){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=u||null,this._evaluator.canonical=f,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=v||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new sn(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function ql(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Ks}function ms(s,n){const a=new cr(Ks,Zl,[],n?function(f){const b={color:er,string:Pt,number:Je,enum:Pt,boolean:kt,formatted:yn,padding:Cn,projectionDefinition:Gt,resolvedImage:Wr,variableAnchorOffsetCollection:Sl};return f.type==="array"?ci(b[f.value]||zt,f.length):b[f.type]}(n):void 0),u=a.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Kh(new Iu(u,n)):Ys(a.errors)}class Kl{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!ja(a.expression)}evaluateWithoutErrorHandling(n,a,u,f,b,v){return this._styleExpression.evaluateWithoutErrorHandling(n,a,u,f,b,v)}evaluate(n,a,u,f,b,v){return this._styleExpression.evaluate(n,a,u,f,b,v)}}class Mu{constructor(n,a,u,f){this.kind=n,this.zoomStops=u,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!ja(a.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,a,u,f,b,v){return this._styleExpression.evaluateWithoutErrorHandling(n,a,u,f,b,v)}evaluate(n,a,u,f,b,v){return this._styleExpression.evaluate(n,a,u,f,b,v)}interpolationFactor(n,a,u){return this.interpolationType?Jn.interpolationFactor(this.interpolationType,n,a,u):0}}function ef(s,n){const a=ms(s,n);if(a.result==="error")return a;const u=a.value.expression,f=Gl(u);if(!f&&!Xs(n))return Ys([new Rt("","data expressions not supported")]);const b=Wl(u,["zoom"]);if(!b&&!Yh(n))return Ys([new Rt("","zoom expressions not supported")]);const v=Xl(u);return v||b?v instanceof Rt?Ys([v]):v instanceof Jn&&!Pu(n)?Ys([new Rt("",'"interpolate" expressions cannot be used with this property')]):Kh(v?new Mu(f?"camera":"composite",a.value,v.labels,v instanceof Jn?v.interpolation:void 0):new Kl(f?"constant":"source",a.value)):Ys([new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Yl{constructor(n,a){this._parameters=n,this._specification=a,yt(this,Xh(this._parameters,this._specification))}static deserialize(n){return new Yl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Xl(s){let n=null;if(s instanceof Yt)n=Xl(s.result);else if(s instanceof mn){for(const a of s.args)if(n=Xl(a),n)break}else(s instanceof Hs||s instanceof Jn)&&s.input instanceof Bi&&s.input.name==="zoom"&&(n=s);return n instanceof Rt||s.eachChild(a=>{const u=Xl(a);u instanceof Rt?n=u:!n&&u?n=new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&u&&n!==u&&(n=new Rt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Eu(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const n of s.slice(1))if(!Eu(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const tf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Jl(s){if(s==null)return{filter:()=>!0,needGeometry:!1};Eu(s)||(s=Va(s));const n=ms(s,tf);if(n.result==="error")throw new Error(n.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,u,f)=>n.value.evaluate(a,u,{},f),needGeometry:rf(s)}}function km(s,n){return s<n?-1:s>n?1:0}function rf(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let n=1;n<s.length;n++)if(rf(s[n]))return!0;return!1}function Va(s){if(!s)return!0;const n=s[0];return s.length<=1?n!=="any":n==="=="?Ql(s[1],s[2],"=="):n==="!="?Js(Ql(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Ql(s[1],s[2],n):n==="any"?(a=s.slice(1),["any"].concat(a.map(Va))):n==="all"?["all"].concat(s.slice(1).map(Va)):n==="none"?["all"].concat(s.slice(1).map(Va).map(Js)):n==="in"?Au(s[1],s.slice(2)):n==="!in"?Js(Au(s[1],s.slice(2))):n==="has"?Lu(s[1]):n!=="!has"||Js(Lu(s[1]));var a}function Ql(s,n,a){switch(s){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,s,n]}}function Au(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",s,["literal",n.sort(km)]]:["filter-in-small",s,["literal",n]]}}function Lu(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Js(s){return["!",s]}function Ua(s){const n=typeof s;if(n==="number"||n==="boolean"||n==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let f="[";for(const b of s)f+=`${Ua(b)},`;return`${f}]`}const a=Object.keys(s).sort();let u="{";for(let f=0;f<a.length;f++)u+=`${JSON.stringify(a[f])}:${Ua(s[a[f]])},`;return`${u}}`}function Ru(s){let n="";for(const a of q)n+=`/${Ua(s[a])}`;return n}function Za(s){const n=s.value;return n?[new Ae(s.key,n,"constants have been deprecated as of v8")]:[]}function fn(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function gs(s){if(Array.isArray(s))return s.map(gs);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const n={};for(const a in s)n[a]=gs(s[a]);return n}return fn(s)}function Fi(s){const n=s.key,a=s.value,u=s.valueSpec||{},f=s.objectElementValidators||{},b=s.style,v=s.styleSpec,w=s.validateSpec;let k=[];const P=pr(a);if(P!=="object")return[new Ae(n,a,`object expected, ${P} found`)];for(const E in a){const L=E.split(".")[0],N=u[L]||u["*"];let V;if(f[L])V=f[L];else if(u[L])V=w;else if(f["*"])V=f["*"];else{if(!u["*"]){k.push(new Ae(n,a[E],`unknown property "${E}"`));continue}V=w}k=k.concat(V({key:(n&&`${n}.`)+E,value:a[E],valueSpec:N,style:b,styleSpec:v,object:a,objectKey:E,validateSpec:w},a))}for(const E in u)f[E]||u[E].required&&u[E].default===void 0&&a[E]===void 0&&k.push(new Ae(n,a,`missing required property "${E}"`));return k}function Du(s){const n=s.value,a=s.valueSpec,u=s.style,f=s.styleSpec,b=s.key,v=s.arrayElementValidator||s.validateSpec;if(pr(n)!=="array")return[new Ae(b,n,`array expected, ${pr(n)} found`)];if(a.length&&n.length!==a.length)return[new Ae(b,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new Ae(b,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let w={type:a.value,values:a.values};f.$version<7&&(w.function=a.function),pr(a.value)==="object"&&(w=a.value);let k=[];for(let P=0;P<n.length;P++)k=k.concat(v({array:n,arrayIndex:P,value:n[P],valueSpec:w,validateSpec:s.validateSpec,style:u,styleSpec:f,key:`${b}[${P}]`}));return k}function Ou(s){const n=s.key,a=s.value,u=s.valueSpec;let f=pr(a);return f==="number"&&a!=a&&(f="NaN"),f!=="number"?[new Ae(n,a,`number expected, ${f} found`)]:"minimum"in u&&a<u.minimum?[new Ae(n,a,`${a} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&a>u.maximum?[new Ae(n,a,`${a} is greater than the maximum value ${u.maximum}`)]:[]}function nf(s){const n=s.valueSpec,a=fn(s.value.type);let u,f,b,v={};const w=a!=="categorical"&&s.value.property===void 0,k=!w,P=pr(s.value.stops)==="array"&&pr(s.value.stops[0])==="array"&&pr(s.value.stops[0][0])==="object",E=Fi({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(V){if(a==="identity")return[new Ae(V.key,V.value,'identity function may not have a "stops" property')];let U=[];const G=V.value;return U=U.concat(Du({key:V.key,value:G,valueSpec:V.valueSpec,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec,arrayElementValidator:L})),pr(G)==="array"&&G.length===0&&U.push(new Ae(V.key,G,"array must have at least one stop")),U},default:function(V){return V.validateSpec({key:V.key,value:V.value,valueSpec:n,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec})}}});return a==="identity"&&w&&E.push(new Ae(s.key,s.value,'missing required property "property"')),a==="identity"||s.value.stops||E.push(new Ae(s.key,s.value,'missing required property "stops"')),a==="exponential"&&s.valueSpec.expression&&!Pu(s.valueSpec)&&E.push(new Ae(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(k&&!Xs(s.valueSpec)?E.push(new Ae(s.key,s.value,"property functions not supported")):w&&!Yh(s.valueSpec)&&E.push(new Ae(s.key,s.value,"zoom functions not supported"))),a!=="categorical"&&!P||s.value.property!==void 0||E.push(new Ae(s.key,s.value,'"property" property is required')),E;function L(V){let U=[];const G=V.value,Y=V.key;if(pr(G)!=="array")return[new Ae(Y,G,`array expected, ${pr(G)} found`)];if(G.length!==2)return[new Ae(Y,G,`array length 2 expected, length ${G.length} found`)];if(P){if(pr(G[0])!=="object")return[new Ae(Y,G,`object expected, ${pr(G[0])} found`)];if(G[0].zoom===void 0)return[new Ae(Y,G,"object stop key must have zoom")];if(G[0].value===void 0)return[new Ae(Y,G,"object stop key must have value")];if(b&&b>fn(G[0].zoom))return[new Ae(Y,G[0].zoom,"stop zoom values must appear in ascending order")];fn(G[0].zoom)!==b&&(b=fn(G[0].zoom),f=void 0,v={}),U=U.concat(Fi({key:`${Y}[0]`,value:G[0],valueSpec:{zoom:{}},validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec,objectElementValidators:{zoom:Ou,value:N}}))}else U=U.concat(N({key:`${Y}[0]`,value:G[0],validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec},G));return ql(gs(G[1]))?U.concat([new Ae(`${Y}[1]`,G[1],"expressions are not allowed in function stops.")]):U.concat(V.validateSpec({key:`${Y}[1]`,value:G[1],valueSpec:n,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec}))}function N(V,U){const G=pr(V.value),Y=fn(V.value),ie=V.value!==null?V.value:U;if(u){if(G!==u)return[new Ae(V.key,ie,`${G} stop domain type must match previous stop domain type ${u}`)]}else u=G;if(G!=="number"&&G!=="string"&&G!=="boolean")return[new Ae(V.key,ie,"stop domain value must be a number, string, or boolean")];if(G!=="number"&&a!=="categorical"){let be=`number expected, ${G} found`;return Xs(n)&&a===void 0&&(be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ae(V.key,ie,be)]}return a!=="categorical"||G!=="number"||isFinite(Y)&&Math.floor(Y)===Y?a!=="categorical"&&G==="number"&&f!==void 0&&Y<f?[new Ae(V.key,ie,"stop domain values must appear in ascending order")]:(f=Y,a==="categorical"&&Y in v?[new Ae(V.key,ie,"stop domain values must be unique")]:(v[Y]=!0,[])):[new Ae(V.key,ie,`integer expected, found ${Y}`)]}}function _s(s){const n=(s.expressionContext==="property"?ef:ms)(gs(s.value),s.valueSpec);if(n.result==="error")return n.value.map(u=>new Ae(`${s.key}${u.key}`,s.value,u.message));const a=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!a.outputDefined())return[new Ae(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!ja(a))return[new Ae(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!ja(a))return[new Ae(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Wl(a,["zoom","feature-state"]))return[new Ae(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Gl(a))return[new Ae(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qs(s){const n=s.key,a=s.value,u=s.valueSpec,f=[];return Array.isArray(u.values)?u.values.indexOf(fn(a))===-1&&f.push(new Ae(n,a,`expected one of [${u.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(u.values).indexOf(fn(a))===-1&&f.push(new Ae(n,a,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(a)} found`)),f}function ea(s){return Eu(gs(s.value))?_s(yt({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):of(s)}function of(s){const n=s.value,a=s.key;if(pr(n)!=="array")return[new Ae(a,n,`array expected, ${pr(n)} found`)];const u=s.styleSpec;let f,b=[];if(n.length<1)return[new Ae(a,n,"filter array must have at least 1 element")];switch(b=b.concat(Qs({key:`${a}[0]`,value:n[0],valueSpec:u.filter_operator,style:s.style,styleSpec:s.styleSpec})),fn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&fn(n[1])==="$type"&&b.push(new Ae(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&b.push(new Ae(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=pr(n[1]),f!=="string"&&b.push(new Ae(`${a}[1]`,n[1],`string expected, ${f} found`)));for(let v=2;v<n.length;v++)f=pr(n[v]),fn(n[1])==="$type"?b=b.concat(Qs({key:`${a}[${v}]`,value:n[v],valueSpec:u.geometry_type,style:s.style,styleSpec:s.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&b.push(new Ae(`${a}[${v}]`,n[v],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let v=1;v<n.length;v++)b=b.concat(of({key:`${a}[${v}]`,value:n[v],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":f=pr(n[1]),n.length!==2?b.push(new Ae(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&b.push(new Ae(`${a}[1]`,n[1],`string expected, ${f} found`))}return b}function zu(s,n){const a=s.key,u=s.validateSpec,f=s.style,b=s.styleSpec,v=s.value,w=s.objectKey,k=b[`${n}_${s.layerType}`];if(!k)return[];const P=w.match(/^(.*)-transition$/);if(n==="paint"&&P&&k[P[1]]&&k[P[1]].transition)return u({key:a,value:v,valueSpec:b.transition,style:f,styleSpec:b});const E=s.valueSpec||k[w];if(!E)return[new Ae(a,v,`unknown property "${w}"`)];let L;if(pr(v)==="string"&&Xs(E)&&!E.tokens&&(L=/^{([^}]+)}$/.exec(v)))return[new Ae(a,v,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(L[1])} }\`.`)];const N=[];return s.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&N.push(new Ae(a,v,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Hl(gs(v))&&fn(v.type)==="identity"&&N.push(new Ae(a,v,'"text-font" does not support identity functions'))),N.concat(u({key:s.key,value:v,valueSpec:E,style:f,styleSpec:b,expressionContext:"property",propertyType:n,propertyKey:w}))}function $u(s){return zu(s,"paint")}function sf(s){return zu(s,"layout")}function Bu(s){let n=[];const a=s.value,u=s.key,f=s.style,b=s.styleSpec;a.type||a.ref||n.push(new Ae(u,a,'either "type" or "ref" is required'));let v=fn(a.type);const w=fn(a.ref);if(a.id){const k=fn(a.id);for(let P=0;P<s.arrayIndex;P++){const E=f.layers[P];fn(E.id)===k&&n.push(new Ae(u,a.id,`duplicate layer id "${a.id}", previously used at line ${E.id.__line__}`))}}if("ref"in a){let k;["type","source","source-layer","filter","layout"].forEach(P=>{P in a&&n.push(new Ae(u,a[P],`"${P}" is prohibited for ref layers`))}),f.layers.forEach(P=>{fn(P.id)===w&&(k=P)}),k?k.ref?n.push(new Ae(u,a.ref,"ref cannot reference another ref layer")):v=fn(k.type):n.push(new Ae(u,a.ref,`ref layer "${w}" not found`))}else if(v!=="background")if(a.source){const k=f.sources&&f.sources[a.source],P=k&&fn(k.type);k?P==="vector"&&v==="raster"?n.push(new Ae(u,a.source,`layer "${a.id}" requires a raster source`)):P!=="raster-dem"&&v==="hillshade"?n.push(new Ae(u,a.source,`layer "${a.id}" requires a raster-dem source`)):P==="raster"&&v!=="raster"?n.push(new Ae(u,a.source,`layer "${a.id}" requires a vector source`)):P!=="vector"||a["source-layer"]?P==="raster-dem"&&v!=="hillshade"?n.push(new Ae(u,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!a.paint||!a.paint["line-gradient"]||P==="geojson"&&k.lineMetrics||n.push(new Ae(u,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Ae(u,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new Ae(u,a.source,`source "${a.source}" not found`))}else n.push(new Ae(u,a,'missing required property "source"'));return n=n.concat(Fi({key:u,value:a,valueSpec:b.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${u}.type`,value:a.type,valueSpec:b.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:a,objectKey:"type"}),filter:ea,layout:k=>Fi({layer:a,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":P=>sf(yt({layerType:v},P))}}),paint:k=>Fi({layer:a,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":P=>$u(yt({layerType:v},P))}})}})),n}function Vo(s){const n=s.value,a=s.key,u=pr(n);return u!=="string"?[new Ae(a,n,`string expected, ${u} found`)]:[]}const ta={promoteId:function({key:s,value:n}){if(pr(n)==="string")return Vo({key:s,value:n});{const a=[];for(const u in n)a.push(...Vo({key:`${s}.${u}`,value:n[u]}));return a}}};function af(s){const n=s.value,a=s.key,u=s.styleSpec,f=s.style,b=s.validateSpec;if(!n.type)return[new Ae(a,n,'"type" is required')];const v=fn(n.type);let w;switch(v){case"vector":case"raster":return w=Fi({key:a,value:n,valueSpec:u[`source_${v.replace("-","_")}`],style:s.style,styleSpec:u,objectElementValidators:ta,validateSpec:b}),w;case"raster-dem":return w=function(k){var P;const E=(P=k.sourceName)!==null&&P!==void 0?P:"",L=k.value,N=k.styleSpec,V=N.source_raster_dem,U=k.style;let G=[];const Y=pr(L);if(L===void 0)return G;if(Y!=="object")return G.push(new Ae("source_raster_dem",L,`object expected, ${Y} found`)),G;const ie=fn(L.encoding)==="custom",be=["redFactor","greenFactor","blueFactor","baseShift"],le=k.value.encoding?`"${k.value.encoding}"`:"Default";for(const j in L)!ie&&be.includes(j)?G.push(new Ae(j,L[j],`In "${E}": "${j}" is only valid when "encoding" is set to "custom". ${le} encoding found`)):V[j]?G=G.concat(k.validateSpec({key:j,value:L[j],valueSpec:V[j],validateSpec:k.validateSpec,style:U,styleSpec:N})):G.push(new Ae(j,L[j],`unknown property "${j}"`));return G}({sourceName:a,value:n,style:s.style,styleSpec:u,validateSpec:b}),w;case"geojson":if(w=Fi({key:a,value:n,valueSpec:u.source_geojson,style:f,styleSpec:u,validateSpec:b,objectElementValidators:ta}),n.cluster)for(const k in n.clusterProperties){const[P,E]=n.clusterProperties[k],L=typeof P=="string"?[P,["accumulated"],["get",k]]:P;w.push(..._s({key:`${a}.${k}.map`,value:E,expressionContext:"cluster-map"})),w.push(..._s({key:`${a}.${k}.reduce`,value:L,expressionContext:"cluster-reduce"}))}return w;case"video":return Fi({key:a,value:n,valueSpec:u.source_video,style:f,validateSpec:b,styleSpec:u});case"image":return Fi({key:a,value:n,valueSpec:u.source_image,style:f,validateSpec:b,styleSpec:u});case"canvas":return[new Ae(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qs({key:`${a}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function lf(s){const n=s.value,a=s.styleSpec,u=a.light,f=s.style;let b=[];const v=pr(n);if(n===void 0)return b;if(v!=="object")return b=b.concat([new Ae("light",n,`object expected, ${v} found`)]),b;for(const w in n){const k=w.match(/^(.*)-transition$/);b=b.concat(k&&u[k[1]]&&u[k[1]].transition?s.validateSpec({key:w,value:n[w],valueSpec:a.transition,validateSpec:s.validateSpec,style:f,styleSpec:a}):u[w]?s.validateSpec({key:w,value:n[w],valueSpec:u[w],validateSpec:s.validateSpec,style:f,styleSpec:a}):[new Ae(w,n[w],`unknown property "${w}"`)])}return b}function cf(s){const n=s.value,a=s.styleSpec,u=a.sky,f=s.style,b=pr(n);if(n===void 0)return[];if(b!=="object")return[new Ae("sky",n,`object expected, ${b} found`)];let v=[];for(const w in n)v=v.concat(u[w]?s.validateSpec({key:w,value:n[w],valueSpec:u[w],style:f,styleSpec:a}):[new Ae(w,n[w],`unknown property "${w}"`)]);return v}function uf(s){const n=s.value,a=s.styleSpec,u=a.terrain,f=s.style;let b=[];const v=pr(n);if(n===void 0)return b;if(v!=="object")return b=b.concat([new Ae("terrain",n,`object expected, ${v} found`)]),b;for(const w in n)b=b.concat(u[w]?s.validateSpec({key:w,value:n[w],valueSpec:u[w],validateSpec:s.validateSpec,style:f,styleSpec:a}):[new Ae(w,n[w],`unknown property "${w}"`)]);return b}function df(s){let n=[];const a=s.value,u=s.key;if(Array.isArray(a)){const f=[],b=[];for(const v in a)a[v].id&&f.includes(a[v].id)&&n.push(new Ae(u,a,`all the sprites' ids must be unique, but ${a[v].id} is duplicated`)),f.push(a[v].id),a[v].url&&b.includes(a[v].url)&&n.push(new Ae(u,a,`all the sprites' URLs must be unique, but ${a[v].url} is duplicated`)),b.push(a[v].url),n=n.concat(Fi({key:`${u}[${v}]`,value:a[v],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return n}return Vo({key:u,value:a})}const hf={"*":()=>[],array:Du,boolean:function(s){const n=s.value,a=s.key,u=pr(n);return u!=="boolean"?[new Ae(a,n,`boolean expected, ${u} found`)]:[]},number:Ou,color:function(s){const n=s.key,a=s.value,u=pr(a);return u!=="string"?[new Ae(n,a,`color expected, ${u} found`)]:fr.parse(String(a))?[]:[new Ae(n,a,`color expected, "${a}" found`)]},constants:Za,enum:Qs,filter:ea,function:nf,layer:Bu,object:Fi,source:af,light:lf,sky:cf,terrain:uf,projection:function(s){const n=s.value,a=s.styleSpec,u=a.projection,f=s.style,b=pr(n);if(n===void 0)return[];if(b!=="object")return[new Ae("projection",n,`object expected, ${b} found`)];let v=[];for(const w in n)v=v.concat(u[w]?s.validateSpec({key:w,value:n[w],valueSpec:u[w],style:f,styleSpec:a}):[new Ae(w,n[w],`unknown property "${w}"`)]);return v},projectionDefinition:function(s){const n=s.key;let a=s.value;a=a instanceof String?a.valueOf():a;const u=pr(a);return u!=="array"||function(f){return Array.isArray(f)&&f.length===3&&typeof f[0]=="string"&&typeof f[1]=="string"&&typeof f[2]=="number"}(a)||function(f){return!!["interpolate","step","literal"].includes(f[0])}(a)?["array","string"].includes(u)?[]:[new Ae(n,a,`projection expected, invalid type "${u}" found`)]:[new Ae(n,a,`projection expected, invalid array ${JSON.stringify(a)} found`)]},string:Vo,formatted:function(s){return Vo(s).length===0?[]:_s(s)},resolvedImage:function(s){return Vo(s).length===0?[]:_s(s)},padding:function(s){const n=s.key,a=s.value;if(pr(a)==="array"){if(a.length<1||a.length>4)return[new Ae(n,a,`padding requires 1 to 4 values; ${a.length} values found`)];const u={type:"number"};let f=[];for(let b=0;b<a.length;b++)f=f.concat(s.validateSpec({key:`${n}[${b}]`,value:a[b],validateSpec:s.validateSpec,valueSpec:u}));return f}return Ou({key:n,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const n=s.key,a=s.value,u=pr(a),f=s.styleSpec;if(u!=="array"||a.length<1||a.length%2!=0)return[new Ae(n,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let v=0;v<a.length;v+=2)b=b.concat(Qs({key:`${n}[${v}]`,value:a[v],valueSpec:f.layout_symbol["text-anchor"]})),b=b.concat(Du({key:`${n}[${v+1}]`,value:a[v+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:f}));return b},sprite:df};function Uo(s){const n=s.value,a=s.valueSpec,u=s.styleSpec;return s.validateSpec=Uo,a.expression&&Hl(fn(n))?nf(s):a.expression&&ql(gs(n))?_s(s):a.type&&hf[a.type]?hf[a.type](s):Fi(yt({},s,{valueSpec:a.type?u[a.type]:a}))}function ra(s){const n=s.value,a=s.key,u=Vo(s);return u.length||(n.indexOf("{fontstack}")===-1&&u.push(new Ae(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&u.push(new Ae(a,n,'"glyphs" url must include a "{range}" token'))),u}function an(s,n=$){let a=[];return a=a.concat(Uo({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,validateSpec:Uo,objectElementValidators:{glyphs:ra,"*":()=>[]}})),s.constants&&(a=a.concat(Za({key:"constants",value:s.constants}))),Fu(a)}function hi(s){return function(n){return s({...n,validateSpec:Uo})}}function Fu(s){return[].concat(s).sort((n,a)=>n.line-a.line)}function ao(s){return function(...n){return Fu(s.apply(this,n))}}an.source=ao(hi(af)),an.sprite=ao(hi(df)),an.glyphs=ao(hi(ra)),an.light=ao(hi(lf)),an.sky=ao(hi(cf)),an.terrain=ao(hi(uf)),an.layer=ao(hi(Bu)),an.filter=ao(hi(ea)),an.paintProperty=ao(hi($u)),an.layoutProperty=ao(hi(sf));const na=an,Ga=na.light,ff=na.sky,Nu=na.paintProperty,Tm=na.layoutProperty;function ec(s,n){let a=!1;if(n&&n.length)for(const u of n)s.fire(new Li(new Error(u.message))),a=!0;return a}class Wa{constructor(n,a,u){const f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const v=new Int32Array(this.arrayBuffer);n=v[0],this.d=(a=v[1])+2*(u=v[2]);for(let k=0;k<this.d*this.d;k++){const P=v[3+k],E=v[3+k+1];f.push(P===E?null:v.subarray(P,E))}const w=v[3+f.length+1];this.keys=v.subarray(v[3+f.length],w),this.bboxes=v.subarray(w),this.insert=this._insertReadonly}else{this.d=a+2*u;for(let v=0;v<this.d*this.d;v++)f.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=n,this.padding=u,this.scale=a/n,this.uid=0;const b=u/a*n;this.min=-b,this.max=n+b}insert(n,a,u,f,b){this._forEachCell(a,u,f,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,a,u,f,b,v){this.cells[b].push(v)}query(n,a,u,f,b){const v=this.min,w=this.max;if(n<=v&&a<=v&&w<=u&&w<=f&&!b)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(n,a,u,f,this._queryCell,k,{},b),k}}_queryCell(n,a,u,f,b,v,w,k){const P=this.cells[b];if(P!==null){const E=this.keys,L=this.bboxes;for(let N=0;N<P.length;N++){const V=P[N];if(w[V]===void 0){const U=4*V;(k?k(L[U+0],L[U+1],L[U+2],L[U+3]):n<=L[U+2]&&a<=L[U+3]&&u>=L[U+0]&&f>=L[U+1])?(w[V]=!0,v.push(E[V])):w[V]=!1}}}}_forEachCell(n,a,u,f,b,v,w,k){const P=this._convertToCellCoord(n),E=this._convertToCellCoord(a),L=this._convertToCellCoord(u),N=this._convertToCellCoord(f);for(let V=P;V<=L;V++)for(let U=E;U<=N;U++){const G=this.d*U+V;if((!k||k(this._convertFromCellCoord(V),this._convertFromCellCoord(U),this._convertFromCellCoord(V+1),this._convertFromCellCoord(U+1)))&&b.call(this,n,a,u,f,G,v,w,k))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,a=3+this.cells.length+1+1;let u=0;for(let v=0;v<this.cells.length;v++)u+=this.cells[v].length;const f=new Int32Array(a+u+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let b=a;for(let v=0;v<n.length;v++){const w=n[v];f[3+v]=b,f.set(w,b),b+=w.length}return f[3+n.length]=b,f.set(this.keys,b),b+=this.keys.length,f[3+n.length+1]=b,f.set(this.bboxes,b),b+=this.bboxes.length,f.buffer}static serialize(n,a){const u=n.toArrayBuffer();return a&&a.push(u),{buffer:u}}static deserialize(n){return new Wa(n.buffer)}}const vi={};function Ct(s,n,a={}){if(vi[s])throw new Error(`${s} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:s,writeable:!1}),vi[s]={klass:n,omit:a.omit||[],shallow:a.shallow||[]}}Ct("Object",Object),Ct("TransferableGridIndex",Wa),Ct("Color",fr),Ct("Error",Error),Ct("AJAXError",Nt),Ct("ResolvedImage",ii),Ct("StylePropertyFunction",Yl),Ct("StyleExpression",Iu,{omit:["_evaluator"]}),Ct("ZoomDependentExpression",Mu),Ct("ZoomConstantExpression",Kl),Ct("CompoundExpression",Bi,{omit:["_evaluate"]});for(const s in Ks)Ks[s]._classRegistryKey||Ct(`Expression_${s}`,Ks[s]);function ia(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function ju(s){return s.$name||s.constructor._classRegistryKey}function pf(s){return!function(n){if(n===null||typeof n!="object")return!1;const a=ju(n);return!(!a||a==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||ia(s)||ut(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function Zo(s,n){if(pf(s))return(ia(s)||ut(s))&&n&&n.push(s),ArrayBuffer.isView(s)&&n&&n.push(s.buffer),s instanceof ImageData&&n&&n.push(s.data.buffer),s;if(Array.isArray(s)){const b=[];for(const v of s)b.push(Zo(v,n));return b}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const a=ju(s);if(!a)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!vi[a])throw new Error(`${a} is not registered.`);const{klass:u}=vi[a],f=u.serialize?u.serialize(s,n):{};if(u.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const b in s){if(!s.hasOwnProperty(b)||vi[a].omit.indexOf(b)>=0)continue;const v=s[b];f[b]=vi[a].shallow.indexOf(b)>=0?v:Zo(v,n)}s instanceof Error&&(f.message=s.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(f.$name=a),f}function Ha(s){if(pf(s))return s;if(Array.isArray(s))return s.map(Ha);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const n=ju(s)||"Object";if(!vi[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:a}=vi[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(s);const u=Object.create(a.prototype);for(const f of Object.keys(s)){if(f==="$name")continue;const b=s[f];u[f]=vi[n].shallow.indexOf(f)>=0?b:Ha(b)}return u}class tc{constructor(){this.first=!0}update(n,a){const u=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=u,!0))}}const nr={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Hangul Syllables":s=>s>=44032&&s<=55215,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function rc(s){for(const n of s)if(Zu(n.charCodeAt(0)))return!0;return!1}function mf(s){for(const n of s)if(!Vu(n.charCodeAt(0)))return!1;return!0}function nc(s){const n=s.map(a=>{try{return new RegExp(`\\p{sc=${a}}`,"u").source}catch{return null}}).filter(a=>a);return new RegExp(n.join("|"),"u")}const gf=nc(["Arab","Dupl","Mong","Ougr","Syrc"]);function Vu(s){return!gf.test(String.fromCodePoint(s))}const Uu=nc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Zu(s){return!(s!==746&&s!==747&&(s<4352||!(nr["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||nr["CJK Compatibility"](s)||nr["CJK Strokes"](s)||!(!nr["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||nr["Enclosed CJK Letters and Months"](s)||nr["Ideographic Description Characters"](s)||nr.Kanbun(s)||nr.Katakana(s)&&s!==12540||!(!nr["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!nr["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||nr["Vertical Forms"](s)||nr["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||Uu.test(String.fromCodePoint(s)))))}function Gu(s){return!(Zu(s)||function(n){return!!(nr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||nr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||nr["Letterlike Symbols"](n)||nr["Number Forms"](n)||nr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||nr["Control Pictures"](n)&&n!==9251||nr["Optical Character Recognition"](n)||nr["Enclosed Alphanumerics"](n)||nr["Geometric Shapes"](n)||nr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||nr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||nr["CJK Symbols and Punctuation"](n)||nr.Katakana(n)||nr["Private Use Area"](n)||nr["CJK Compatibility Forms"](n)||nr["Small Form Variants"](n)||nr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(s))}const Pm=nc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Wu(s){return Pm.test(String.fromCodePoint(s))}function _f(s,n){return!(!n&&Wu(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||nr.Khmer(s))}function yf(s){for(const n of s)if(Wu(n.charCodeAt(0)))return!0;return!1}const Go=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(Go.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,n){return l(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;const a=s.pluginURL,u=new Promise(b=>{this.loadScriptResolve=b});n(a);const f=new Promise(b=>setTimeout(()=>b(),this.TIMEOUT));if(yield Promise.race([u,f]),this.isParsed()){const b={pluginStatus:"loaded",pluginURL:a};return this.setState(b),b}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${a}`)})}};class Jr{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new tc,this.transition={})}isSupportedScript(n){return function(a,u){for(const f of a)if(!_f(f.charCodeAt(0),u))return!1;return!0}(n,Go.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,a=n-Math.floor(n),u=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*a}}}class qa{constructor(n,a){this.property=n,this.value=a,this.expression=function(u,f){if(Hl(u))return new Yl(u,f);if(ql(u)){const b=ef(u,f);if(b.result==="error")throw new Error(b.value.map(v=>`${v.key}: ${v.message}`).join(", "));return b.value}{let b=u;return f.type==="color"&&typeof u=="string"?b=fr.parse(u):f.type!=="padding"||typeof u!="number"&&!Array.isArray(u)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(u)?b=On.parse(u):f.type==="projectionDefinition"&&typeof u=="string"&&(b=ui.parse(u)):b=Dn.parse(u),{kind:"constant",evaluate:()=>b}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,u){return this.property.possiblyEvaluate(this,n,a,u)}}class ic{constructor(n){this.property=n,this.value=new qa(n,void 0)}transitioned(n,a){return new qu(this.property,this.value,a,Qt({},n.transition,this.transition),n.now)}untransitioned(){return new qu(this.property,this.value,null,{},0)}}class Hu{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Pr(this._values[n].value.value)}setValue(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ic(this._values[n].property)),this._values[n].value=new qa(this._values[n].property,a===null?void 0:Pr(a))}getTransition(n){return Pr(this._values[n].transition)}setTransition(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ic(this._values[n].property)),this._values[n].transition=Pr(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(n[a]=u);const f=this.getTransition(a);f!==void 0&&(n[`${a}-transition`]=f)}return n}transitioned(n,a){const u=new Ka(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].transitioned(n,a._values[f]);return u}untransitioned(){const n=new Ka(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class qu{constructor(n,a,u,f,b){this.property=n,this.value=a,this.begin=b+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=u)}possiblyEvaluate(n,a,u){const f=n.now||0,b=this.value.possiblyEvaluate(n,a,u),v=this.prior;if(v){if(f>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(f<this.begin)return v.possiblyEvaluate(n,a,u);{const w=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(n,a,u),b,mt(w))}}return b}}class Ka{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,u){const f=new oc(this._properties);for(const b of Object.keys(this._values))f._values[b]=this._values[b].possiblyEvaluate(n,a,u);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Im{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Pr(this._values[n].value)}setValue(n,a){this._values[n]=new qa(this._values[n].property,a===null?void 0:Pr(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(n[a]=u)}return n}possiblyEvaluate(n,a,u){const f=new oc(this._properties);for(const b of Object.keys(this._values))f._values[b]=this._values[b].possiblyEvaluate(n,a,u);return f}}class Ni{constructor(n,a,u){this.property=n,this.value=a,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,u,f){return this.property.evaluate(this.value,this.parameters,n,a,u,f)}}class oc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Dt{constructor(n){this.specification=n}possiblyEvaluate(n,a){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(a)}interpolate(n,a,u){const f=bi[this.specification.type];return f?f(n,a,u):n}}class jt{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,u,f){return new Ni(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},u,f)}:n.expression,a)}interpolate(n,a,u){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new Ni(this,{kind:"constant",value:void 0},n.parameters);const f=bi[this.specification.type];if(f){const b=f(n.value.value,a.value.value,u);return new Ni(this,{kind:"constant",value:b},n.parameters)}return n}evaluate(n,a,u,f,b,v){return n.kind==="constant"?n.value:n.evaluate(a,u,f,b,v)}}class Ya extends jt{possiblyEvaluate(n,a,u,f){if(n.value===void 0)return new Ni(this,{kind:"constant",value:void 0},a);if(n.expression.kind==="constant"){const b=n.expression.evaluate(a,null,{},u,f),v=n.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,w=this._calculate(v,v,v,a);return new Ni(this,{kind:"constant",value:w},a)}if(n.expression.kind==="camera"){const b=this._calculate(n.expression.evaluate({zoom:a.zoom-1}),n.expression.evaluate({zoom:a.zoom}),n.expression.evaluate({zoom:a.zoom+1}),a);return new Ni(this,{kind:"constant",value:b},a)}return new Ni(this,n.expression,a)}evaluate(n,a,u,f,b,v){if(n.kind==="source"){const w=n.evaluate(a,u,f,b,v);return this._calculate(w,w,w,a)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(a.zoom)-1},u,f),n.evaluate({zoom:Math.floor(a.zoom)},u,f),n.evaluate({zoom:Math.floor(a.zoom)+1},u,f),a):n.value}_calculate(n,a,u,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:u,to:a}}interpolate(n){return n}}class sc{constructor(n){this.specification=n}possiblyEvaluate(n,a,u,f){if(n.value!==void 0){if(n.expression.kind==="constant"){const b=n.expression.evaluate(a,null,{},u,f);return this._calculate(b,b,b,a)}return this._calculate(n.expression.evaluate(new Jr(Math.floor(a.zoom-1),a)),n.expression.evaluate(new Jr(Math.floor(a.zoom),a)),n.expression.evaluate(new Jr(Math.floor(a.zoom+1),a)),a)}}_calculate(n,a,u,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:u,to:a}}interpolate(n){return n}}class Ku{constructor(n){this.specification=n}possiblyEvaluate(n,a,u,f){return!!n.expression.evaluate(a,null,{},u,f)}interpolate(){return!1}}class fi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in n){const u=n[a];u.specification.overridable&&this.overridableProperties.push(a);const f=this.defaultPropertyValues[a]=new qa(u,void 0),b=this.defaultTransitionablePropertyValues[a]=new ic(u);this.defaultTransitioningPropertyValues[a]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=f.possiblyEvaluate({})}}}Ct("DataDrivenProperty",jt),Ct("DataConstantProperty",Dt),Ct("CrossFadedDataDrivenProperty",Ya),Ct("CrossFadedProperty",sc),Ct("ColorRampProperty",Ku);const bf="-transition";class lo extends Te{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new Im(a.layout)),a.paint)){this._transitionablePaint=new Hu(a.paint);for(const u in n.paint)this.setPaintProperty(u,n.paint[u],{validate:!1});for(const u in n.layout)this.setLayoutProperty(u,n.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new oc(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,u={}){a!=null&&this._validate(Tm,`layers.${this.id}.layout.${n}`,n,a,u)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return n.endsWith(bf)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,u={}){if(a!=null&&this._validate(Nu,`layers.${this.id}.paint.${n}`,n,a,u))return!1;if(n.endsWith(bf))return this._transitionablePaint.setTransition(n.slice(0,-11),a||void 0),!1;{const f=this._transitionablePaint._values[n],b=f.property.specification["property-type"]==="cross-faded-data-driven",v=f.value.isDataDriven(),w=f.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const k=this._transitionablePaint._values[n].value;return k.isDataDriven()||v||b||this._handleOverridablePaintPropertyUpdate(n,w,k)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,a,u){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),tn(n,(a,u)=>!(a===void 0||u==="layout"&&!Object.keys(a).length||u==="paint"&&!Object.keys(a).length))}_validate(n,a,u,f,b={}){return(!b||b.validate!==!1)&&ec(this,n.call(na,{key:a,layerType:this.type,objectKey:u,value:f,styleSpec:$,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof Ni&&Xs(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const Mm={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class co{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ln{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function gn(s,n=1){let a=0,u=0;return{members:s.map(f=>{const b=Mm[f.type].BYTES_PER_ELEMENT,v=a=vf(a,Math.max(n,b)),w=f.components||1;return u=Math.max(u,b),a+=b*w,{name:f.name,type:f.type,components:w,offset:v}}),size:vf(a,Math.max(u,n)),alignment:n}}function vf(s,n){return Math.ceil(s/n)*n}class oa extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const u=this.length;return this.resize(u+1),this.emplace(u,n,a)}emplace(n,a,u){const f=2*n;return this.int16[f+0]=a,this.int16[f+1]=u,n}}oa.prototype.bytesPerElement=4,Ct("StructArrayLayout2i4",oa);class ac extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,u)}emplace(n,a,u,f){const b=3*n;return this.int16[b+0]=a,this.int16[b+1]=u,this.int16[b+2]=f,n}}ac.prototype.bytesPerElement=6,Ct("StructArrayLayout3i6",ac);class Yu extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,u,f)}emplace(n,a,u,f,b){const v=4*n;return this.int16[v+0]=a,this.int16[v+1]=u,this.int16[v+2]=f,this.int16[v+3]=b,n}}Yu.prototype.bytesPerElement=8,Ct("StructArrayLayout4i8",Yu);class wo extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,b,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,a,u,f,b,v)}emplace(n,a,u,f,b,v,w){const k=6*n;return this.int16[k+0]=a,this.int16[k+1]=u,this.int16[k+2]=f,this.int16[k+3]=b,this.int16[k+4]=v,this.int16[k+5]=w,n}}wo.prototype.bytesPerElement=12,Ct("StructArrayLayout2i4i12",wo);class lc extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,b,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,a,u,f,b,v)}emplace(n,a,u,f,b,v,w){const k=4*n,P=8*n;return this.int16[k+0]=a,this.int16[k+1]=u,this.uint8[P+4]=f,this.uint8[P+5]=b,this.uint8[P+6]=v,this.uint8[P+7]=w,n}}lc.prototype.bytesPerElement=8,Ct("StructArrayLayout2i4ub8",lc);class ys extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const u=this.length;return this.resize(u+1),this.emplace(u,n,a)}emplace(n,a,u){const f=2*n;return this.float32[f+0]=a,this.float32[f+1]=u,n}}ys.prototype.bytesPerElement=8,Ct("StructArrayLayout2f8",ys);class cc extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,b,v,w,k,P,E){const L=this.length;return this.resize(L+1),this.emplace(L,n,a,u,f,b,v,w,k,P,E)}emplace(n,a,u,f,b,v,w,k,P,E,L){const N=10*n;return this.uint16[N+0]=a,this.uint16[N+1]=u,this.uint16[N+2]=f,this.uint16[N+3]=b,this.uint16[N+4]=v,this.uint16[N+5]=w,this.uint16[N+6]=k,this.uint16[N+7]=P,this.uint16[N+8]=E,this.uint16[N+9]=L,n}}cc.prototype.bytesPerElement=20,Ct("StructArrayLayout10ui20",cc);class Xa extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,b,v,w,k,P,E,L,N){const V=this.length;return this.resize(V+1),this.emplace(V,n,a,u,f,b,v,w,k,P,E,L,N)}emplace(n,a,u,f,b,v,w,k,P,E,L,N,V){const U=12*n;return this.int16[U+0]=a,this.int16[U+1]=u,this.int16[U+2]=f,this.int16[U+3]=b,this.uint16[U+4]=v,this.uint16[U+5]=w,this.uint16[U+6]=k,this.uint16[U+7]=P,this.int16[U+8]=E,this.int16[U+9]=L,this.int16[U+10]=N,this.int16[U+11]=V,n}}Xa.prototype.bytesPerElement=24,Ct("StructArrayLayout4i4ui4i24",Xa);class Xu extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,u)}emplace(n,a,u,f){const b=3*n;return this.float32[b+0]=a,this.float32[b+1]=u,this.float32[b+2]=f,n}}Xu.prototype.bytesPerElement=12,Ct("StructArrayLayout3f12",Xu);class sa extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}sa.prototype.bytesPerElement=4,Ct("StructArrayLayout1ul4",sa);class bs extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,b,v,w,k,P){const E=this.length;return this.resize(E+1),this.emplace(E,n,a,u,f,b,v,w,k,P)}emplace(n,a,u,f,b,v,w,k,P,E){const L=10*n,N=5*n;return this.int16[L+0]=a,this.int16[L+1]=u,this.int16[L+2]=f,this.int16[L+3]=b,this.int16[L+4]=v,this.int16[L+5]=w,this.uint32[N+3]=k,this.uint16[L+8]=P,this.uint16[L+9]=E,n}}bs.prototype.bytesPerElement=20,Ct("StructArrayLayout6i1ul2ui20",bs);class Ju extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,b,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,a,u,f,b,v)}emplace(n,a,u,f,b,v,w){const k=6*n;return this.int16[k+0]=a,this.int16[k+1]=u,this.int16[k+2]=f,this.int16[k+3]=b,this.int16[k+4]=v,this.int16[k+5]=w,n}}Ju.prototype.bytesPerElement=12,Ct("StructArrayLayout2i2i2i12",Ju);class uc extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,b){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,u,f,b)}emplace(n,a,u,f,b,v){const w=4*n,k=8*n;return this.float32[w+0]=a,this.float32[w+1]=u,this.float32[w+2]=f,this.int16[k+6]=b,this.int16[k+7]=v,n}}uc.prototype.bytesPerElement=16,Ct("StructArrayLayout2f1f2i16",uc);class vs extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,b,v){const w=this.length;return this.resize(w+1),this.emplace(w,n,a,u,f,b,v)}emplace(n,a,u,f,b,v,w){const k=16*n,P=4*n,E=8*n;return this.uint8[k+0]=a,this.uint8[k+1]=u,this.float32[P+1]=f,this.float32[P+2]=b,this.int16[E+6]=v,this.int16[E+7]=w,n}}vs.prototype.bytesPerElement=16,Ct("StructArrayLayout2ub2f2i16",vs);class dc extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,u)}emplace(n,a,u,f){const b=3*n;return this.uint16[b+0]=a,this.uint16[b+1]=u,this.uint16[b+2]=f,n}}dc.prototype.bytesPerElement=6,Ct("StructArrayLayout3ui6",dc);class Qu extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,f,b,v,w,k,P,E,L,N,V,U,G,Y,ie){const be=this.length;return this.resize(be+1),this.emplace(be,n,a,u,f,b,v,w,k,P,E,L,N,V,U,G,Y,ie)}emplace(n,a,u,f,b,v,w,k,P,E,L,N,V,U,G,Y,ie,be){const le=24*n,j=12*n,K=48*n;return this.int16[le+0]=a,this.int16[le+1]=u,this.uint16[le+2]=f,this.uint16[le+3]=b,this.uint32[j+2]=v,this.uint32[j+3]=w,this.uint32[j+4]=k,this.uint16[le+10]=P,this.uint16[le+11]=E,this.uint16[le+12]=L,this.float32[j+7]=N,this.float32[j+8]=V,this.uint8[K+36]=U,this.uint8[K+37]=G,this.uint8[K+38]=Y,this.uint32[j+10]=ie,this.int16[le+22]=be,n}}Qu.prototype.bytesPerElement=48,Ct("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Qu);class hc extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,f,b,v,w,k,P,E,L,N,V,U,G,Y,ie,be,le,j,K,de,De,rt,Fe,je,dt,at){const ht=this.length;return this.resize(ht+1),this.emplace(ht,n,a,u,f,b,v,w,k,P,E,L,N,V,U,G,Y,ie,be,le,j,K,de,De,rt,Fe,je,dt,at)}emplace(n,a,u,f,b,v,w,k,P,E,L,N,V,U,G,Y,ie,be,le,j,K,de,De,rt,Fe,je,dt,at,ht){const Ke=32*n,St=16*n;return this.int16[Ke+0]=a,this.int16[Ke+1]=u,this.int16[Ke+2]=f,this.int16[Ke+3]=b,this.int16[Ke+4]=v,this.int16[Ke+5]=w,this.int16[Ke+6]=k,this.int16[Ke+7]=P,this.uint16[Ke+8]=E,this.uint16[Ke+9]=L,this.uint16[Ke+10]=N,this.uint16[Ke+11]=V,this.uint16[Ke+12]=U,this.uint16[Ke+13]=G,this.uint16[Ke+14]=Y,this.uint16[Ke+15]=ie,this.uint16[Ke+16]=be,this.uint16[Ke+17]=le,this.uint16[Ke+18]=j,this.uint16[Ke+19]=K,this.uint16[Ke+20]=de,this.uint16[Ke+21]=De,this.uint16[Ke+22]=rt,this.uint32[St+12]=Fe,this.float32[St+13]=je,this.float32[St+14]=dt,this.uint16[Ke+30]=at,this.uint16[Ke+31]=ht,n}}hc.prototype.bytesPerElement=64,Ct("StructArrayLayout8i15ui1ul2f2ui64",hc);class fc extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}fc.prototype.bytesPerElement=4,Ct("StructArrayLayout1f4",fc);class _ extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,u)}emplace(n,a,u,f){const b=3*n;return this.uint16[6*n+0]=a,this.float32[b+1]=u,this.float32[b+2]=f,n}}_.prototype.bytesPerElement=12,Ct("StructArrayLayout1ui2f12",_);class r extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,u)}emplace(n,a,u,f){const b=4*n;return this.uint32[2*n+0]=a,this.uint16[b+2]=u,this.uint16[b+3]=f,n}}r.prototype.bytesPerElement=8,Ct("StructArrayLayout1ul2ui8",r);class o extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const u=this.length;return this.resize(u+1),this.emplace(u,n,a)}emplace(n,a,u){const f=2*n;return this.uint16[f+0]=a,this.uint16[f+1]=u,n}}o.prototype.bytesPerElement=4,Ct("StructArrayLayout2ui4",o);class d extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}d.prototype.bytesPerElement=2,Ct("StructArrayLayout1ui2",d);class h extends ln{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,f){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,u,f)}emplace(n,a,u,f,b){const v=4*n;return this.float32[v+0]=a,this.float32[v+1]=u,this.float32[v+2]=f,this.float32[v+3]=b,n}}h.prototype.bytesPerElement=16,Ct("StructArrayLayout4f16",h);class y extends co{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new H(this.anchorPointX,this.anchorPointY)}}y.prototype.size=20;class x extends bs{get(n){return new y(this,n)}}Ct("CollisionBoxArray",x);class C extends co{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}C.prototype.size=48;class T extends Qu{get(n){return new C(this,n)}}Ct("PlacedSymbolArray",T);class M extends co{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}M.prototype.size=64;class R extends hc{get(n){return new M(this,n)}}Ct("SymbolInstanceArray",R);class B extends fc{getoffsetX(n){return this.float32[1*n+0]}}Ct("GlyphOffsetArray",B);class F extends ac{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Ct("SymbolLineVertexArray",F);class Z extends co{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Z.prototype.size=12;class W extends _{get(n){return new Z(this,n)}}Ct("TextAnchorOffsetArray",W);class ee extends co{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ee.prototype.size=8;class Q extends r{get(n){return new ee(this,n)}}Ct("FeatureIndexArray",Q);class re extends oa{}class ae extends oa{}class he extends oa{}class fe extends wo{}class me extends lc{}class ve extends ys{}class _e extends cc{}class Re extends Xa{}class ze extends Xu{}class Ge extends sa{}class qe extends Ju{}class Ue extends vs{}class gt extends dc{}class pt extends o{}const ot=gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Mt}=ot;class Ot{constructor(n=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=n}prepareSegment(n,a,u,f){const b=this.segments[this.segments.length-1];return n>Ot.MAX_VERTEX_ARRAY_LENGTH&&Dr(`Max vertices per segment is ${Ot.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Ot.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!b||b.vertexLength+n>Ot.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==f?this.createNewSegment(a,u,f):b}createNewSegment(n,a,u){const f={vertexOffset:n.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0,vaos:{}};return u!==void 0&&(f.sortKey=u),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(f),f}getOrCreateLatestSegment(n,a,u){return this.prepareSegment(0,n,a,u)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,u,f){return new Ot([{vertexOffset:n,primitiveOffset:a,vertexLength:u,primitiveLength:f,vaos:{},sortKey:0}])}}function _r(s,n){return 256*(s=ir(Math.floor(s),0,255))+ir(Math.floor(n),0,255)}Ot.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ct("SegmentVector",Ot);const Nr=gn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ir,Qr,Hr,vr={exports:{}},Mr={exports:{}},zn={exports:{}},$n=function(){if(Hr)return vr.exports;Hr=1;var s=(Ir||(Ir=1,Mr.exports=function(a,u){var f,b,v,w,k,P,E,L;for(b=a.length-(f=3&a.length),v=u,k=3432918353,P=461845907,L=0;L<b;)E=255&a.charCodeAt(L)|(255&a.charCodeAt(++L))<<8|(255&a.charCodeAt(++L))<<16|(255&a.charCodeAt(++L))<<24,++L,v=27492+(65535&(w=5*(65535&(v=(v^=E=(65535&(E=(E=(65535&E)*k+(((E>>>16)*k&65535)<<16)&4294967295)<<15|E>>>17))*P+(((E>>>16)*P&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(E=0,f){case 3:E^=(255&a.charCodeAt(L+2))<<16;case 2:E^=(255&a.charCodeAt(L+1))<<8;case 1:v^=E=(65535&(E=(E=(65535&(E^=255&a.charCodeAt(L)))*k+(((E>>>16)*k&65535)<<16)&4294967295)<<15|E>>>17))*P+(((E>>>16)*P&65535)<<16)&4294967295}return v^=a.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}),Mr.exports),n=(Qr||(Qr=1,zn.exports=function(a,u){for(var f,b=a.length,v=u^b,w=0;b>=4;)f=1540483477*(65535&(f=255&a.charCodeAt(w)|(255&a.charCodeAt(++w))<<8|(255&a.charCodeAt(++w))<<16|(255&a.charCodeAt(++w))<<24))+((1540483477*(f>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),b-=4,++w;switch(b){case 3:v^=(255&a.charCodeAt(w+2))<<16;case 2:v^=(255&a.charCodeAt(w+1))<<8;case 1:v=1540483477*(65535&(v^=255&a.charCodeAt(w)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}),zn.exports);return vr.exports=s,vr.exports.murmur3=s,vr.exports.murmur2=n,vr.exports}(),Sn=S($n);class Un{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,u,f){this.ids.push(Wo(n)),this.positions.push(a,u,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Wo(n);let u=0,f=this.ids.length-1;for(;u<f;){const v=u+f>>1;this.ids[v]>=a?f=v:u=v+1}const b=[];for(;this.ids[u]===a;)b.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return b}static serialize(n,a){const u=new Float64Array(n.ids),f=new Uint32Array(n.positions);return Co(u,f,0,u.length-1),a&&a.push(u.buffer,f.buffer),{ids:u,positions:f}}static deserialize(n){const a=new Un;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function Wo(s){const n=+s;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Sn(String(s))}function Co(s,n,a,u){for(;a<u;){const f=s[a+u>>1];let b=a-1,v=u+1;for(;;){do b++;while(s[b]<f);do v--;while(s[v]>f);if(b>=v)break;uo(s,b,v),uo(n,3*b,3*v),uo(n,3*b+1,3*v+1),uo(n,3*b+2,3*v+2)}v-a<u-v?(Co(s,n,a,v),a=v+1):(Co(s,n,v+1,u),u=v)}}function uo(s,n,a){const u=s[n];s[n]=s[a],s[a]=u}Ct("FeaturePositionMap",Un);class ji{constructor(n,a){this.gl=n.gl,this.location=a}}class xs extends ji{constructor(n,a){super(n,a),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Ja extends ji{constructor(n,a){super(n,a),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class ws extends ji{constructor(n,a){super(n,a),this.current=fr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Vi=new Float32Array(16);function ho(s){return[_r(255*s.r,255*s.g),_r(255*s.b,255*s.a)]}class Xi{constructor(n,a,u){this.value=n,this.uniformNames=a.map(f=>`u_${f}`),this.type=u}setUniform(n,a,u){n.set(u.constantOr(this.value))}getBinding(n,a,u){return this.type==="color"?new ws(n,a):new xs(n,a)}}class fo{constructor(n,a){this.uniformNames=a.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=n.tlbr}setUniform(n,a,u,f){const b=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;b&&n.set(b)}getBinding(n,a,u){return u.substr(0,9)==="u_pattern"?new Ja(n,a):new xs(n,a)}}class jr{constructor(n,a,u,f){this.expression=n,this.type=u,this.maxValue=0,this.paintVertexAttributes=a.map(b=>({name:`a_${b}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,a,u,f,b){const v=this.paintVertexArray.length,w=this.expression.evaluate(new Jr(0),a,{},f,[],b);this.paintVertexArray.resize(n),this._setPaintValue(v,n,w)}updatePaintArray(n,a,u,f){const b=this.expression.evaluate({zoom:0},u,f);this._setPaintValue(n,a,b)}_setPaintValue(n,a,u){if(this.type==="color"){const f=ho(u);for(let b=n;b<a;b++)this.paintVertexArray.emplace(b,f[0],f[1])}else{for(let f=n;f<a;f++)this.paintVertexArray.emplace(f,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zr{constructor(n,a,u,f,b,v){this.expression=n,this.uniformNames=a.map(w=>`u_${w}_t`),this.type=u,this.useIntegerZoom=f,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=a.map(w=>({name:`a_${w}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(n,a,u,f,b){const v=this.expression.evaluate(new Jr(this.zoom),a,{},f,[],b),w=this.expression.evaluate(new Jr(this.zoom+1),a,{},f,[],b),k=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(k,n,v,w)}updatePaintArray(n,a,u,f){const b=this.expression.evaluate({zoom:this.zoom},u,f),v=this.expression.evaluate({zoom:this.zoom+1},u,f);this._setPaintValue(n,a,b,v)}_setPaintValue(n,a,u,f){if(this.type==="color"){const b=ho(u),v=ho(f);for(let w=n;w<a;w++)this.paintVertexArray.emplace(w,b[0],b[1],v[0],v[1])}else{for(let b=n;b<a;b++)this.paintVertexArray.emplace(b,u,f);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a){const u=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,f=ir(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,a,u){return new xs(n,a)}}class kn{constructor(n,a,u,f,b,v){this.expression=n,this.type=a,this.useIntegerZoom=u,this.zoom=f,this.layerId=v,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(n,a,u){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,a.patterns&&a.patterns[this.layerId],u)}updatePaintArray(n,a,u,f,b){this._setPaintValues(n,a,u.patterns&&u.patterns[this.layerId],b)}_setPaintValues(n,a,u,f){if(!f||!u)return;const{min:b,mid:v,max:w}=u,k=f[b],P=f[v],E=f[w];if(k&&P&&E)for(let L=n;L<a;L++)this.zoomInPaintVertexArray.emplace(L,P.tl[0],P.tl[1],P.br[0],P.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],P.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(L,P.tl[0],P.tl[1],P.br[0],P.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],P.pixelRatio,E.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Nr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Nr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Tn{constructor(n,a,u){this.binders={},this._buffers=[];const f=[];for(const b in n.paint._values){if(!u(b))continue;const v=n.paint.get(b);if(!(v instanceof Ni&&Xs(v.property.specification)))continue;const w=Em(b,n.type),k=v.value,P=v.property.specification.type,E=v.property.useIntegerZoom,L=v.property.specification["property-type"],N=L==="cross-faded"||L==="cross-faded-data-driven";if(k.kind==="constant")this.binders[b]=N?new fo(k.value,w):new Xi(k.value,w,P),f.push(`/u_${b}`);else if(k.kind==="source"||N){const V=xf(b,P,"source");this.binders[b]=N?new kn(k,P,E,a,V,n.id):new jr(k,w,P,V),f.push(`/a_${b}`)}else{const V=xf(b,P,"composite");this.binders[b]=new zr(k,w,P,E,a,V),f.push(`/z_${b}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof jr||a instanceof zr?a.maxValue:0}populatePaintArrays(n,a,u,f,b){for(const v in this.binders){const w=this.binders[v];(w instanceof jr||w instanceof zr||w instanceof kn)&&w.populatePaintArray(n,a,u,f,b)}}setConstantPatternPositions(n,a){for(const u in this.binders){const f=this.binders[u];f instanceof fo&&f.setConstantPatternPositions(n,a)}}updatePaintArrays(n,a,u,f,b){let v=!1;for(const w in n){const k=a.getPositions(w);for(const P of k){const E=u.feature(P.index);for(const L in this.binders){const N=this.binders[L];if((N instanceof jr||N instanceof zr||N instanceof kn)&&N.expression.isStateDependent===!0){const V=f.paint.get(L);N.expression=V.value,N.updatePaintArray(P.start,P.end,E,n[w],b),v=!0}}}}return v}defines(){const n=[];for(const a in this.binders){const u=this.binders[a];(u instanceof Xi||u instanceof fo)&&n.push(...u.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof jr||u instanceof zr)for(let f=0;f<u.paintVertexAttributes.length;f++)n.push(u.paintVertexAttributes[f].name);else if(u instanceof kn)for(let f=0;f<Nr.members.length;f++)n.push(Nr.members[f].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof Xi||u instanceof fo||u instanceof zr)for(const f of u.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,a){const u=[];for(const f in this.binders){const b=this.binders[f];if(b instanceof Xi||b instanceof fo||b instanceof zr){for(const v of b.uniformNames)if(a[v]){const w=b.getBinding(n,a[v],v);u.push({name:v,property:f,binding:w})}}}return u}setUniforms(n,a,u,f){for(const{name:b,property:v,binding:w}of a)this.binders[v].setUniform(w,f,u.get(v),b)}updatePaintBuffers(n){this._buffers=[];for(const a in this.binders){const u=this.binders[a];if(n&&u instanceof kn){const f=n.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(u instanceof jr||u instanceof zr)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(n){for(const a in this.binders){const u=this.binders[a];(u instanceof jr||u instanceof zr||u instanceof kn)&&u.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof jr||a instanceof zr||a instanceof kn)&&a.destroy()}}}class Cs{constructor(n,a,u=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new Tn(f,a,u);this.needsUpload=!1,this._featureMap=new Un,this._bufferOffset=0}populatePaintArrays(n,a,u,f,b,v){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,a,f,b,v);a.id!==void 0&&this._featureMap.add(a.id,u,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,u,f){for(const b of u)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(n,this._featureMap,a,b,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Em(s,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}function xf(s,n,a){const u={color:{source:ys,composite:h},number:{source:fc,composite:ys}},f=function(b){return{"line-pattern":{source:_e,composite:_e},"fill-pattern":{source:_e,composite:_e},"fill-extrusion-pattern":{source:_e,composite:_e}}[b]}(s);return f&&f[a]||u[n][a]}Ct("ConstantBinder",Xi),Ct("CrossFadedConstantBinder",fo),Ct("SourceExpressionBinder",jr),Ct("CrossFadedCompositeBinder",kn),Ct("CompositeExpressionBinder",zr),Ct("ProgramConfiguration",Tn,{omit:["_buffers"]}),Ct("ProgramConfigurationSet",Cs);const ed=Math.pow(2,14)-1,wf=-ed-1;function Ss(s){const n=vt/s.extent,a=s.loadGeometry();for(let u=0;u<a.length;u++){const f=a[u];for(let b=0;b<f.length;b++){const v=f[b],w=Math.round(v.x*n),k=Math.round(v.y*n);v.x=ir(w,wf,ed),v.y=ir(k,wf,ed),(w<v.x||w>v.x+1||k<v.y||k>v.y+1)&&Dr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function xi(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?Ss(s):[]}}const td=-32768;function Cf(s,n,a,u,f){s.emplaceBack(td+8*n+u,td+8*a+f)}class pc{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new ae,this.indexArray=new gt,this.segments=new Ot,this.programConfigurations=new Cs(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,u){const f=this.layers[0],b=[];let v=null,w=!1,k=f.type==="heatmap";if(f.type==="circle"){const E=f;v=E.layout.get("circle-sort-key"),w=!v.isConstant(),k=k||E.paint.get("circle-pitch-alignment")==="map"}const P=k?a.subdivisionGranularity.circle:1;for(const{feature:E,id:L,index:N,sourceLayerIndex:V}of n){const U=this.layers[0]._featureFilter.needGeometry,G=xi(E,U);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),G,u))continue;const Y=w?v.evaluate(G,{},u):void 0,ie={id:L,properties:E.properties,type:E.type,sourceLayerIndex:V,index:N,geometry:U?G.geometry:Ss(E),patterns:{},sortKey:Y};b.push(ie)}w&&b.sort((E,L)=>E.sortKey-L.sortKey);for(const E of b){const{geometry:L,index:N,sourceLayerIndex:V}=E,U=n[N].feature;this.addFeature(E,L,N,u,P),a.featureIndex.insert(U,L,N,V,this.index)}}update(n,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Mt),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,u,f,b=1){let v;switch(b){case 1:v=[0,7];break;case 3:v=[0,2,5,7];break;case 5:v=[0,1,3,4,6,7];break;case 7:v=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${b}; valid values are 1, 3, 5, 7.`)}const w=v.length;for(const k of a)for(const P of k){const E=P.x,L=P.y;if(E<0||E>=vt||L<0||L>=vt)continue;const N=this.segments.prepareSegment(w*w,this.layoutVertexArray,this.indexArray,n.sortKey),V=N.vertexLength;for(let U=0;U<w;U++)for(let G=0;G<w;G++)Cf(this.layoutVertexArray,E,L,v[G],v[U]);for(let U=0;U<w-1;U++)for(let G=0;G<w-1;G++){const Y=V+U*w+G,ie=V+(U+1)*w+G;this.indexArray.emplaceBack(Y,ie+1,Y+1),this.indexArray.emplaceBack(Y,ie,ie+1)}N.vertexLength+=w*w,N.primitiveLength+=(w-1)*(w-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,{},f)}}function mc(s,n){for(let a=0;a<s.length;a++)if(_c(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(_c(s,n[a]))return!0;return!!Am(s,n)}function Sf(s,n,a){return!!_c(s,n)||!!Lm(n,s,a)}function gc(s,n){if(s.length===1)return Ay(n,s[0]);for(let a=0;a<n.length;a++){const u=n[a];for(let f=0;f<u.length;f++)if(_c(s,u[f]))return!0}for(let a=0;a<s.length;a++)if(Ay(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(Am(s,n[a]))return!0;return!1}function aC(s,n,a){if(s.length>1){if(Am(s,n))return!0;for(let u=0;u<n.length;u++)if(Lm(n[u],s,a))return!0}for(let u=0;u<s.length;u++)if(Lm(s[u],n,a))return!0;return!1}function Am(s,n){if(s.length===0||n.length===0)return!1;for(let a=0;a<s.length-1;a++){const u=s[a],f=s[a+1];for(let b=0;b<n.length-1;b++)if(lC(u,f,n[b],n[b+1]))return!0}return!1}function lC(s,n,a,u){return ce(s,a,u)!==ce(n,a,u)&&ce(s,n,a)!==ce(s,n,u)}function Lm(s,n,a){const u=a*a;if(n.length===1)return s.distSqr(n[0])<u;for(let f=1;f<n.length;f++)if(Ey(s,n[f-1],n[f])<u)return!0;return!1}function Ey(s,n,a){const u=n.distSqr(a);if(u===0)return s.distSqr(n);const f=((s.x-n.x)*(a.x-n.x)+(s.y-n.y)*(a.y-n.y))/u;return s.distSqr(f<0?n:f>1?a:a.sub(n)._mult(f)._add(n))}function Ay(s,n){let a,u,f,b=!1;for(let v=0;v<s.length;v++){a=s[v];for(let w=0,k=a.length-1;w<a.length;k=w++)u=a[w],f=a[k],u.y>n.y!=f.y>n.y&&n.x<(f.x-u.x)*(n.y-u.y)/(f.y-u.y)+u.x&&(b=!b)}return b}function _c(s,n){let a=!1;for(let u=0,f=s.length-1;u<s.length;f=u++){const b=s[u],v=s[f];b.y>n.y!=v.y>n.y&&n.x<(v.x-b.x)*(n.y-b.y)/(v.y-b.y)+b.x&&(a=!a)}return a}function cC(s,n,a){const u=a[0],f=a[2];if(s.x<u.x&&n.x<u.x||s.x>f.x&&n.x>f.x||s.y<u.y&&n.y<u.y||s.y>f.y&&n.y>f.y)return!1;const b=ce(s,n,a[0]);return b!==ce(s,n,a[1])||b!==ce(s,n,a[2])||b!==ce(s,n,a[3])}function rd(s,n,a){const u=n.paint.get(s).value;return u.kind==="constant"?u.value:a.programConfigurations.get(n.id).getMaxValue(s)}function kf(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Tf(s,n,a,u,f){if(!n[0]&&!n[1])return s;const b=H.convert(n)._mult(f);a==="viewport"&&b._rotate(-u);const v=[];for(let w=0;w<s.length;w++)v.push(s[w].sub(b));return v}let Ly,Ry;Ct("CircleBucket",pc,{omit:["layers"]});var uC={get paint(){return Ry=Ry||new fi({"circle-radius":new jt($.paint_circle["circle-radius"]),"circle-color":new jt($.paint_circle["circle-color"]),"circle-blur":new jt($.paint_circle["circle-blur"]),"circle-opacity":new jt($.paint_circle["circle-opacity"]),"circle-translate":new Dt($.paint_circle["circle-translate"]),"circle-translate-anchor":new Dt($.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Dt($.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Dt($.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new jt($.paint_circle["circle-stroke-width"]),"circle-stroke-color":new jt($.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new jt($.paint_circle["circle-stroke-opacity"])})},get layout(){return Ly=Ly||new fi({"circle-sort-key":new jt($.layout_circle["circle-sort-key"])})}};class dC extends lo{constructor(n){super(n,uC)}createBucket(n){return new pc(n)}queryRadius(n){const a=n;return rd("circle-radius",this,a)+rd("circle-stroke-width",this,a)+kf(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:n,feature:a,featureState:u,geometry:f,transform:b,pixelsToTileUnits:v,pixelPosMatrix:w}){const k=Tf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-b.bearingInRadians,v),P=this.paint.get("circle-radius").evaluate(a,u)+this.paint.get("circle-stroke-width").evaluate(a,u),E=this.paint.get("circle-pitch-alignment")==="map",L=E?k:function(V,U){return V.map(G=>Dy(G,U))}(k,w),N=E?P*v:P;for(const V of f)for(const U of V){const G=E?U:Dy(U,w);let Y=N;const ie=Ye([],[U.x,U.y,0,1],w);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Y*=ie[3]/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Y*=b.cameraToCenterDistance/ie[3]),Sf(L,G,Y))return!0}return!1}}function Dy(s,n){const a=Ye([],[s.x,s.y,0,1],n);return new H(a[0]/a[3],a[1]/a[3])}class Oy extends pc{}let zy;Ct("HeatmapBucket",Oy,{omit:["layers"]});var hC={get paint(){return zy=zy||new fi({"heatmap-radius":new jt($.paint_heatmap["heatmap-radius"]),"heatmap-weight":new jt($.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Dt($.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ku($.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Dt($.paint_heatmap["heatmap-opacity"])})}};function Rm(s,{width:n,height:a},u,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*a*u)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*a*u}`)}else f=new Uint8Array(n*a*u);return s.width=n,s.height=a,s.data=f,s}function $y(s,{width:n,height:a},u){if(n===s.width&&a===s.height)return;const f=Rm({},{width:n,height:a},u);Dm(s,f,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,n),height:Math.min(s.height,a)},u),s.width=n,s.height=a,s.data=f.data}function Dm(s,n,a,u,f,b){if(f.width===0||f.height===0)return n;if(f.width>s.width||f.height>s.height||a.x>s.width-f.width||a.y>s.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||u.x>n.width-f.width||u.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const v=s.data,w=n.data;if(v===w)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<f.height;k++){const P=((a.y+k)*s.width+a.x)*b,E=((u.y+k)*n.width+u.x)*b;for(let L=0;L<f.width*b;L++)w[E+L]=v[P+L]}return n}class nd{constructor(n,a){Rm(this,n,1,a)}resize(n){$y(this,n,1)}clone(){return new nd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,u,f,b){Dm(n,a,u,f,b,1)}}class Ji{constructor(n,a){Rm(this,n,4,a)}resize(n){$y(this,n,4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ji({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,u,f,b){Dm(n,a,u,f,b,4)}}function By(s){const n={},a=s.resolution||256,u=s.clips?s.clips.length:1,f=s.image||new Ji({width:a,height:u});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const b=(v,w,k)=>{n[s.evaluationKey]=k;const P=s.expression.evaluate(n);f.data[v+w+0]=Math.floor(255*P.r/P.a),f.data[v+w+1]=Math.floor(255*P.g/P.a),f.data[v+w+2]=Math.floor(255*P.b/P.a),f.data[v+w+3]=Math.floor(255*P.a)};if(s.clips)for(let v=0,w=0;v<u;++v,w+=4*a)for(let k=0,P=0;k<a;k++,P+=4){const E=k/(a-1),{start:L,end:N}=s.clips[v];b(w,P,L*(1-E)+N*E)}else for(let v=0,w=0;v<a;v++,w+=4)b(0,w,v/(a-1));return f}Ct("AlphaImage",nd),Ct("RGBAImage",Ji);const Om="big-fb";class fC extends lo{createBucket(n){return new Oy(n)}constructor(n){super(n,hC),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=By({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Om)&&this.heatmapFbos.delete(Om)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Fy;var pC={get paint(){return Fy=Fy||new fi({"hillshade-illumination-direction":new Dt($.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Dt($.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Dt($.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Dt($.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Dt($.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Dt($.paint_hillshade["hillshade-accent-color"])})}};class mC extends lo{constructor(n){super(n,pC)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const gC=gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:_C}=gC;function zm(s,n,a){const u=a.patternDependencies;let f=!1;for(const b of n){const v=b.paint.get(`${s}-pattern`);v.isConstant()||(f=!0);const w=v.constantOr(null);w&&(f=!0,u[w.to]=!0,u[w.from]=!0)}return f}function $m(s,n,a,u,f){const b=f.patternDependencies;for(const v of n){const w=v.paint.get(`${s}-pattern`).value;if(w.kind!=="constant"){let k=w.evaluate({zoom:u-1},a,{},f.availableImages),P=w.evaluate({zoom:u},a,{},f.availableImages),E=w.evaluate({zoom:u+1},a,{},f.availableImages);k=k&&k.name?k.name:k,P=P&&P.name?P.name:P,E=E&&E.name?E.name:E,b[k]=!0,b[P]=!0,b[E]=!0,a.patterns[v.id]={min:k,mid:P,max:E}}}return a}function Ny(s,n,a,u,f){let b;if(f===function(v,w,k,P){let E=0;for(let L=w,N=k-P;L<k;L+=P)E+=(v[N]-v[L])*(v[L+1]+v[N+1]),N=L;return E}(s,n,a,u)>0)for(let v=n;v<a;v+=u)b=Zy(v/u|0,s[v],s[v+1],b);else for(let v=a-u;v>=n;v-=u)b=Zy(v/u|0,s[v],s[v+1],b);return b&&yc(b,b.next)&&(ad(b),b=b.next),b}function Qa(s,n){if(!s)return s;n||(n=s);let a,u=s;do if(a=!1,u.steiner||!yc(u,u.next)&&_n(u.prev,u,u.next)!==0)u=u.next;else{if(ad(u),u=n=u.prev,u===u.next)break;a=!0}while(a||u!==n);return n}function id(s,n,a,u,f,b,v){if(!s)return;!v&&b&&function(k,P,E,L){let N=k;do N.z===0&&(N.z=Bm(N.x,N.y,P,E,L)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==k);N.prevZ.nextZ=null,N.prevZ=null,function(V){let U,G=1;do{let Y,ie=V;V=null;let be=null;for(U=0;ie;){U++;let le=ie,j=0;for(let de=0;de<G&&(j++,le=le.nextZ,le);de++);let K=G;for(;j>0||K>0&&le;)j!==0&&(K===0||!le||ie.z<=le.z)?(Y=ie,ie=ie.nextZ,j--):(Y=le,le=le.nextZ,K--),be?be.nextZ=Y:V=Y,Y.prevZ=be,be=Y;ie=le}be.nextZ=null,G*=2}while(U>1)}(N)}(s,u,f,b);let w=s;for(;s.prev!==s.next;){const k=s.prev,P=s.next;if(b?bC(s,u,f,b):yC(s))n.push(k.i,s.i,P.i),ad(s),s=P.next,w=P.next;else if((s=P)===w){v?v===1?id(s=vC(Qa(s),n),n,a,u,f,b,2):v===2&&xC(s,n,a,u,f,b):id(Qa(s),n,a,u,f,b,1);break}}}function yC(s){const n=s.prev,a=s,u=s.next;if(_n(n,a,u)>=0)return!1;const f=n.x,b=a.x,v=u.x,w=n.y,k=a.y,P=u.y,E=Math.min(f,b,v),L=Math.min(w,k,P),N=Math.max(f,b,v),V=Math.max(w,k,P);let U=u.next;for(;U!==n;){if(U.x>=E&&U.x<=N&&U.y>=L&&U.y<=V&&od(f,w,b,k,v,P,U.x,U.y)&&_n(U.prev,U,U.next)>=0)return!1;U=U.next}return!0}function bC(s,n,a,u){const f=s.prev,b=s,v=s.next;if(_n(f,b,v)>=0)return!1;const w=f.x,k=b.x,P=v.x,E=f.y,L=b.y,N=v.y,V=Math.min(w,k,P),U=Math.min(E,L,N),G=Math.max(w,k,P),Y=Math.max(E,L,N),ie=Bm(V,U,n,a,u),be=Bm(G,Y,n,a,u);let le=s.prevZ,j=s.nextZ;for(;le&&le.z>=ie&&j&&j.z<=be;){if(le.x>=V&&le.x<=G&&le.y>=U&&le.y<=Y&&le!==f&&le!==v&&od(w,E,k,L,P,N,le.x,le.y)&&_n(le.prev,le,le.next)>=0||(le=le.prevZ,j.x>=V&&j.x<=G&&j.y>=U&&j.y<=Y&&j!==f&&j!==v&&od(w,E,k,L,P,N,j.x,j.y)&&_n(j.prev,j,j.next)>=0))return!1;j=j.nextZ}for(;le&&le.z>=ie;){if(le.x>=V&&le.x<=G&&le.y>=U&&le.y<=Y&&le!==f&&le!==v&&od(w,E,k,L,P,N,le.x,le.y)&&_n(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;j&&j.z<=be;){if(j.x>=V&&j.x<=G&&j.y>=U&&j.y<=Y&&j!==f&&j!==v&&od(w,E,k,L,P,N,j.x,j.y)&&_n(j.prev,j,j.next)>=0)return!1;j=j.nextZ}return!0}function vC(s,n){let a=s;do{const u=a.prev,f=a.next.next;!yc(u,f)&&Vy(u,a,a.next,f)&&sd(u,f)&&sd(f,u)&&(n.push(u.i,a.i,f.i),ad(a),ad(a.next),a=s=f),a=a.next}while(a!==s);return Qa(a)}function xC(s,n,a,u,f,b){let v=s;do{let w=v.next.next;for(;w!==v.prev;){if(v.i!==w.i&&TC(v,w)){let k=Uy(v,w);return v=Qa(v,v.next),k=Qa(k,k.next),id(v,n,a,u,f,b,0),void id(k,n,a,u,f,b,0)}w=w.next}v=v.next}while(v!==s)}function wC(s,n){let a=s.x-n.x;return a===0&&(a=s.y-n.y,a===0)&&(a=(s.next.y-s.y)/(s.next.x-s.x)-(n.next.y-n.y)/(n.next.x-n.x)),a}function CC(s,n){const a=function(f,b){let v=b;const w=f.x,k=f.y;let P,E=-1/0;if(yc(f,v))return v;do{if(yc(f,v.next))return v.next;if(k<=v.y&&k>=v.next.y&&v.next.y!==v.y){const G=v.x+(k-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(G<=w&&G>E&&(E=G,P=v.x<v.next.x?v:v.next,G===w))return P}v=v.next}while(v!==b);if(!P)return null;const L=P,N=P.x,V=P.y;let U=1/0;v=P;do{if(w>=v.x&&v.x>=N&&w!==v.x&&jy(k<V?w:E,k,N,V,k<V?E:w,k,v.x,v.y)){const G=Math.abs(k-v.y)/(w-v.x);sd(v,f)&&(G<U||G===U&&(v.x>P.x||v.x===P.x&&SC(P,v)))&&(P=v,U=G)}v=v.next}while(v!==L);return P}(s,n);if(!a)return n;const u=Uy(a,s);return Qa(u,u.next),Qa(a,a.next)}function SC(s,n){return _n(s.prev,s,n.prev)<0&&_n(n.next,s,s.next)<0}function Bm(s,n,a,u,f){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-a)*f|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-u)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function kC(s){let n=s,a=s;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==s);return a}function jy(s,n,a,u,f,b,v,w){return(f-v)*(n-w)>=(s-v)*(b-w)&&(s-v)*(u-w)>=(a-v)*(n-w)&&(a-v)*(b-w)>=(f-v)*(u-w)}function od(s,n,a,u,f,b,v,w){return!(s===v&&n===w)&&jy(s,n,a,u,f,b,v,w)}function TC(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!function(a,u){let f=a;do{if(f.i!==a.i&&f.next.i!==a.i&&f.i!==u.i&&f.next.i!==u.i&&Vy(f,f.next,a,u))return!0;f=f.next}while(f!==a);return!1}(s,n)&&(sd(s,n)&&sd(n,s)&&function(a,u){let f=a,b=!1;const v=(a.x+u.x)/2,w=(a.y+u.y)/2;do f.y>w!=f.next.y>w&&f.next.y!==f.y&&v<(f.next.x-f.x)*(w-f.y)/(f.next.y-f.y)+f.x&&(b=!b),f=f.next;while(f!==a);return b}(s,n)&&(_n(s.prev,s,n.prev)||_n(s,n.prev,n))||yc(s,n)&&_n(s.prev,s,s.next)>0&&_n(n.prev,n,n.next)>0)}function _n(s,n,a){return(n.y-s.y)*(a.x-n.x)-(n.x-s.x)*(a.y-n.y)}function yc(s,n){return s.x===n.x&&s.y===n.y}function Vy(s,n,a,u){const f=If(_n(s,n,a)),b=If(_n(s,n,u)),v=If(_n(a,u,s)),w=If(_n(a,u,n));return f!==b&&v!==w||!(f!==0||!Pf(s,a,n))||!(b!==0||!Pf(s,u,n))||!(v!==0||!Pf(a,s,u))||!(w!==0||!Pf(a,n,u))}function Pf(s,n,a){return n.x<=Math.max(s.x,a.x)&&n.x>=Math.min(s.x,a.x)&&n.y<=Math.max(s.y,a.y)&&n.y>=Math.min(s.y,a.y)}function If(s){return s>0?1:s<0?-1:0}function sd(s,n){return _n(s.prev,s,s.next)<0?_n(s,n,s.next)>=0&&_n(s,s.prev,n)>=0:_n(s,n,s.prev)<0||_n(s,s.next,n)<0}function Uy(s,n){const a=Fm(s.i,s.x,s.y),u=Fm(n.i,n.x,n.y),f=s.next,b=n.prev;return s.next=n,n.prev=s,a.next=f,f.prev=a,u.next=a,a.prev=u,b.next=u,u.prev=b,u}function Zy(s,n,a,u){const f=Fm(s,n,a);return u?(f.next=u.next,f.prev=u,u.next.prev=f,u.next=f):(f.prev=f,f.next=f),f}function ad(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Fm(s,n,a){return{i:s,x:n,y:a,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class bc{constructor(n,a){if(a>n)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=n,this._minGranularity=a}getGranularityForZoomLevel(n){return Math.max(Math.floor(this._baseZoomGranularity/(1<<n)),this._minGranularity,1)}}class Mf{constructor(n){this.fill=n.fill,this.line=n.line,this.tile=n.tile,this.stencil=n.stencil,this.circle=n.circle}}Mf.noSubdivision=new Mf({fill:new bc(0,0),line:new bc(0,0),tile:new bc(0,0),stencil:new bc(0,0),circle:1}),Ct("SubdivisionGranularityExpression",bc),Ct("SubdivisionGranularitySetting",Mf);const vc=-32768,ld=32767;class PC{constructor(n,a){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=n,this._granularityCellSize=vt/n,this._canonical=a}_getKey(n,a){return(n+=32768)<<16|(a+=32768)<<0}_vertexToIndex(n,a){if(n<-32768||a<-32768||n>32767||a>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const u=0|Math.round(n),f=0|Math.round(a),b=this._getKey(u,f);if(this._vertexDictionary.has(b))return this._vertexDictionary.get(b);const v=this._vertexBuffer.length/2;return this._vertexDictionary.set(b,v),this._vertexBuffer.push(u,f),v}_subdivideTrianglesScanline(n){if(this._granularity<2)return function(f,b){const v=[];for(let w=0;w<b.length;w+=3){const k=b[w],P=b[w+1],E=b[w+2],L=f[2*k],N=f[2*k+1];(f[2*P]-L)*(f[2*E+1]-N)-(f[2*P+1]-N)*(f[2*E]-L)>0?(v.push(k),v.push(E),v.push(P)):(v.push(k),v.push(P),v.push(E))}return v}(this._vertexBuffer,n);const a=[],u=n.length;for(let f=0;f<u;f+=3){const b=[n[f+0],n[f+1],n[f+2]],v=[this._vertexBuffer[2*n[f+0]+0],this._vertexBuffer[2*n[f+0]+1],this._vertexBuffer[2*n[f+1]+0],this._vertexBuffer[2*n[f+1]+1],this._vertexBuffer[2*n[f+2]+0],this._vertexBuffer[2*n[f+2]+1]];let w=1/0,k=1/0,P=-1/0,E=-1/0;for(let G=0;G<3;G++){const Y=v[2*G],ie=v[2*G+1];w=Math.min(w,Y),P=Math.max(P,Y),k=Math.min(k,ie),E=Math.max(E,ie)}if(w===P||k===E)continue;const L=Math.floor(w/this._granularityCellSize),N=Math.ceil(P/this._granularityCellSize),V=Math.floor(k/this._granularityCellSize),U=Math.ceil(E/this._granularityCellSize);if(L!==N||V!==U)for(let G=V;G<U;G++){const Y=this._scanlineGenerateVertexRingForCellRow(G,v,b);IC(this._vertexBuffer,Y,a)}else a.push(...b)}return a}_scanlineGenerateVertexRingForCellRow(n,a,u){const f=n*this._granularityCellSize,b=f+this._granularityCellSize,v=[];for(let w=0;w<3;w++){const k=a[2*w],P=a[2*w+1],E=a[2*(w+1)%6],L=a[(2*(w+1)+1)%6],N=a[2*(w+2)%6],V=a[(2*(w+2)+1)%6],U=E-k,G=L-P,Y=U===0,ie=G===0,be=(f-P)/G,le=(b-P)/G,j=Math.min(be,le),K=Math.max(be,le);if(!ie&&(j>=1||K<=0)||ie&&(P<f||P>b)){L>=f&&L<=b&&v.push(u[(w+1)%3]);continue}!ie&&j>0&&v.push(this._vertexToIndex(k+U*j,P+G*j));const de=k+U*Math.max(j,0),De=k+U*Math.min(K,1);Y||this._generateIntraEdgeVertices(v,k,P,E,L,de,De),!ie&&K<1&&v.push(this._vertexToIndex(k+U*K,P+G*K)),(ie||L>=f&&L<=b)&&v.push(u[(w+1)%3]),!ie&&(L<=f||L>=b)&&this._generateInterEdgeVertices(v,k,P,E,L,N,V,De,f,b)}return v}_generateIntraEdgeVertices(n,a,u,f,b,v,w){const k=f-a,P=b-u,E=P===0,L=E?Math.min(a,f):Math.min(v,w),N=E?Math.max(a,f):Math.max(v,w),V=Math.floor(L/this._granularityCellSize)+1,U=Math.ceil(N/this._granularityCellSize)-1;if(E?a<f:v<w)for(let G=V;G<=U;G++){const Y=G*this._granularityCellSize;n.push(this._vertexToIndex(Y,u+P*(Y-a)/k))}else for(let G=U;G>=V;G--){const Y=G*this._granularityCellSize;n.push(this._vertexToIndex(Y,u+P*(Y-a)/k))}}_generateInterEdgeVertices(n,a,u,f,b,v,w,k,P,E){const L=b-u,N=v-f,V=w-b,U=(P-b)/V,G=(E-b)/V,Y=Math.min(U,G),ie=Math.max(U,G),be=f+N*Y;let le=Math.floor(Math.min(be,k)/this._granularityCellSize)+1,j=Math.ceil(Math.max(be,k)/this._granularityCellSize)-1,K=k<be;const de=V===0;if(de&&(w===P||w===E))return;if(de||Y>=1||ie<=0){const rt=u-w,Fe=v+(a-v)*Math.min((P-w)/rt,(E-w)/rt);le=Math.floor(Math.min(Fe,k)/this._granularityCellSize)+1,j=Math.ceil(Math.max(Fe,k)/this._granularityCellSize)-1,K=k<Fe}const De=L>0?E:P;if(K)for(let rt=le;rt<=j;rt++)n.push(this._vertexToIndex(rt*this._granularityCellSize,De));else for(let rt=j;rt>=le;rt--)n.push(this._vertexToIndex(rt*this._granularityCellSize,De))}_generateOutline(n){const a=[];for(const u of n){const f=el(u,this._granularity,!0),b=this._pointArrayToIndices(f),v=[];for(let w=1;w<b.length;w++)v.push(b[w-1]),v.push(b[w]);a.push(v)}return a}_handlePoles(n){let a=!1,u=!1;this._canonical&&(this._canonical.y===0&&(a=!0),this._canonical.y===(1<<this._canonical.z)-1&&(u=!0)),(a||u)&&this._fillPoles(n,a,u)}_ensureNoPoleVertices(){const n=this._vertexBuffer;for(let a=0;a<n.length;a+=2){const u=n[a+1];u===vc&&(n[a+1]=-32767),u===ld&&(n[a+1]=32766)}}_generatePoleQuad(n,a,u,f,b,v){f>b!=(v===vc)?(n.push(a),n.push(u),n.push(this._vertexToIndex(f,v)),n.push(u),n.push(this._vertexToIndex(b,v)),n.push(this._vertexToIndex(f,v))):(n.push(u),n.push(a),n.push(this._vertexToIndex(f,v)),n.push(this._vertexToIndex(b,v)),n.push(u),n.push(this._vertexToIndex(f,v)))}_fillPoles(n,a,u){const f=this._vertexBuffer,b=vt,v=n.length;for(let w=2;w<v;w+=3){const k=n[w-2],P=n[w-1],E=n[w],L=f[2*k],N=f[2*k+1],V=f[2*P],U=f[2*P+1],G=f[2*E],Y=f[2*E+1];a&&(N===0&&U===0&&this._generatePoleQuad(n,k,P,L,V,vc),U===0&&Y===0&&this._generatePoleQuad(n,P,E,V,G,vc),Y===0&&N===0&&this._generatePoleQuad(n,E,k,G,L,vc)),u&&(N===b&&U===b&&this._generatePoleQuad(n,k,P,L,V,ld),U===b&&Y===b&&this._generatePoleQuad(n,P,E,V,G,ld),Y===b&&N===b&&this._generatePoleQuad(n,E,k,G,L,ld))}}_initializeVertices(n){for(let a=0;a<n.length;a+=2)this._vertexToIndex(n[a],n[a+1])}subdividePolygonInternal(n,a){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:u,holeIndices:f}=function(w){const k=[],P=[];for(const E of w)if(E.length!==0){E!==w[0]&&k.push(P.length/2);for(let L=0;L<E.length;L++)P.push(E[L].x),P.push(E[L].y)}return{flattened:P,holeIndices:k}}(n);let b;this._initializeVertices(u);try{const w=function(P,E,L=2){const N=E&&E.length,V=N?E[0]*L:P.length;let U=Ny(P,0,V,L,!0);const G=[];if(!U||U.next===U.prev)return G;let Y,ie,be;if(N&&(U=function(le,j,K,de){const De=[];for(let rt=0,Fe=j.length;rt<Fe;rt++){const je=Ny(le,j[rt]*de,rt<Fe-1?j[rt+1]*de:le.length,de,!1);je===je.next&&(je.steiner=!0),De.push(kC(je))}De.sort(wC);for(let rt=0;rt<De.length;rt++)K=CC(De[rt],K);return K}(P,E,U,L)),P.length>80*L){Y=1/0,ie=1/0;let le=-1/0,j=-1/0;for(let K=L;K<V;K+=L){const de=P[K],De=P[K+1];de<Y&&(Y=de),De<ie&&(ie=De),de>le&&(le=de),De>j&&(j=De)}be=Math.max(le-Y,j-ie),be=be!==0?32767/be:0}return id(U,G,L,Y,ie,be,0),G}(u,f),k=this._convertIndices(u,w);b=this._subdivideTrianglesScanline(k)}catch(w){console.error(w)}let v=[];return a&&(v=this._generateOutline(n)),this._ensureNoPoleVertices(),this._handlePoles(b),{verticesFlattened:this._vertexBuffer,indicesTriangles:b,indicesLineList:v}}_convertIndices(n,a){const u=[];for(let f=0;f<a.length;f++)u.push(this._vertexToIndex(n[2*a[f]],n[2*a[f]+1]));return u}_pointArrayToIndices(n){const a=[];for(let u=0;u<n.length;u++){const f=n[u];a.push(this._vertexToIndex(f.x,f.y))}return a}}function Gy(s,n,a,u=!0){return new PC(a,n).subdividePolygonInternal(s,u)}function el(s,n,a=!1){if(!s||s.length<1)return[];if(s.length<2)return[];const u=s[0],f=s[s.length-1],b=a&&(u.x!==f.x||u.y!==f.y);if(n<2)return b?[...s,s[0]]:[...s];const v=Math.floor(vt/n),w=[];w.push(new H(s[0].x,s[0].y));const k=s.length,P=b?k:k-1;for(let E=0;E<P;E++){const L=s[E],N=E<k-1?s[E+1]:s[0],V=L.x,U=L.y,G=N.x,Y=N.y,ie=V!==G,be=U!==Y;if(!ie&&!be)continue;const le=G-V,j=Y-U,K=Math.abs(le),de=Math.abs(j);let De=V,rt=U;for(;;){const je=le>0?(Math.floor(De/v)+1)*v:(Math.ceil(De/v)-1)*v,dt=j>0?(Math.floor(rt/v)+1)*v:(Math.ceil(rt/v)-1)*v,at=Math.abs(De-je),ht=Math.abs(rt-dt),Ke=Math.abs(De-G),St=Math.abs(rt-Y),Ft=ie?at/K:Number.POSITIVE_INFINITY,$t=be?ht/de:Number.POSITIVE_INFINITY;if((Ke<=at||!ie)&&(St<=ht||!be))break;if(Ft<$t&&ie||!be){De=je,rt+=j*Ft;const Et=new H(De,Math.round(rt));w[w.length-1].x===Et.x&&w[w.length-1].y===Et.y||w.push(Et)}else{De+=le*$t,rt=dt;const Et=new H(Math.round(De),rt);w[w.length-1].x===Et.x&&w[w.length-1].y===Et.y||w.push(Et)}}const Fe=new H(G,Y);w[w.length-1].x===Fe.x&&w[w.length-1].y===Fe.y||w.push(Fe)}return w}function IC(s,n,a){if(n.length===0)throw new Error("Subdivision vertex ring is empty.");let u=0,f=s[2*n[0]];for(let k=1;k<n.length;k++){const P=s[2*n[k]];P<f&&(f=P,u=k)}const b=n.length;let v=u,w=(v+1)%b;for(;;){const k=v-1>=0?v-1:b-1,P=(w+1)%b,E=s[2*n[k]],L=s[2*n[P]],N=s[2*n[v]],V=s[2*n[v]+1],U=s[2*n[w]+1];let G=!1;if(E<L)G=!0;else if(E>L)G=!1;else{const Y=U-V,ie=-(s[2*n[w]]-N),be=V<U?1:-1;((E-N)*Y+(s[2*n[k]+1]-V)*ie)*be>((L-N)*Y+(s[2*n[P]+1]-V)*ie)*be&&(G=!0)}if(G){const Y=n[k],ie=n[v],be=n[w];Y!==ie&&Y!==be&&ie!==be&&a.push(be,ie,Y),v--,v<0&&(v=b-1)}else{const Y=n[P],ie=n[v],be=n[w];Y!==ie&&Y!==be&&ie!==be&&a.push(be,ie,Y),w++,w>=b&&(w=0)}if(k===P)break}}function Wy(s,n,a,u,f,b,v,w,k){const P=f.length/2,E=v&&w&&k;if(P<Ot.MAX_VERTEX_ARRAY_LENGTH){const L=n.prepareSegment(P,a,u),N=L.vertexLength;for(let G=0;G<b.length;G+=3)u.emplaceBack(N+b[G],N+b[G+1],N+b[G+2]);let V,U;L.vertexLength+=P,L.primitiveLength+=b.length/3,E&&(U=v.prepareSegment(P,a,w),V=U.vertexLength,U.vertexLength+=P);for(let G=0;G<f.length;G+=2)s(f[G],f[G+1]);if(E)for(let G=0;G<k.length;G++){const Y=k[G];for(let ie=1;ie<Y.length;ie+=2)w.emplaceBack(V+Y[ie-1],V+Y[ie]);U.primitiveLength+=Y.length/2}}else(function(L,N,V,U,G,Y){const ie=[];for(let de=0;de<U.length/2;de++)ie.push(-1);const be={count:0};let le=0,j=L.getOrCreateLatestSegment(N,V),K=j.vertexLength;for(let de=2;de<G.length;de+=3){const De=G[de-2],rt=G[de-1],Fe=G[de];let je=ie[De]<le,dt=ie[rt]<le,at=ie[Fe]<le;j.vertexLength+((je?1:0)+(dt?1:0)+(at?1:0))>Ot.MAX_VERTEX_ARRAY_LENGTH&&(j=L.createNewSegment(N,V),le=be.count,je=!0,dt=!0,at=!0,K=0);const ht=cd(ie,U,Y,be,De,je,j),Ke=cd(ie,U,Y,be,rt,dt,j),St=cd(ie,U,Y,be,Fe,at,j);V.emplaceBack(K+ht-le,K+Ke-le,K+St-le),j.primitiveLength++}})(n,a,u,f,b,s),E&&function(L,N,V,U,G,Y){const ie=[];for(let de=0;de<U.length/2;de++)ie.push(-1);const be={count:0};let le=0,j=L.getOrCreateLatestSegment(N,V),K=j.vertexLength;for(let de=0;de<G.length;de++){const De=G[de];for(let rt=1;rt<G[de].length;rt+=2){const Fe=De[rt-1],je=De[rt];let dt=ie[Fe]<le,at=ie[je]<le;j.vertexLength+((dt?1:0)+(at?1:0))>Ot.MAX_VERTEX_ARRAY_LENGTH&&(j=L.createNewSegment(N,V),le=be.count,dt=!0,at=!0,K=0);const ht=cd(ie,U,Y,be,Fe,dt,j),Ke=cd(ie,U,Y,be,je,at,j);V.emplaceBack(K+ht-le,K+Ke-le),j.primitiveLength++}}}(v,a,w,f,k,s),n.forceNewSegmentOnNextPrepare(),v==null||v.forceNewSegmentOnNextPrepare()}function cd(s,n,a,u,f,b,v){if(b){const w=u.count;return a(n[2*f],n[2*f+1]),s[f]=u.count,u.count++,v.vertexLength++,w}return s[f]}class Nm{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new he,this.indexArray=new gt,this.indexArray2=new pt,this.programConfigurations=new Cs(n.layers,n.zoom),this.segments=new Ot,this.segments2=new Ot,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,u){this.hasPattern=zm("fill",this.layers,a);const f=this.layers[0].layout.get("fill-sort-key"),b=!f.isConstant(),v=[];for(const{feature:w,id:k,index:P,sourceLayerIndex:E}of n){const L=this.layers[0]._featureFilter.needGeometry,N=xi(w,L);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),N,u))continue;const V=b?f.evaluate(N,{},u,a.availableImages):void 0,U={id:k,properties:w.properties,type:w.type,sourceLayerIndex:E,index:P,geometry:L?N.geometry:Ss(w),patterns:{},sortKey:V};v.push(U)}b&&v.sort((w,k)=>w.sortKey-k.sortKey);for(const w of v){const{geometry:k,index:P,sourceLayerIndex:E}=w;if(this.hasPattern){const L=$m("fill",this.layers,w,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(w,k,P,u,{},a.subdivisionGranularity);a.featureIndex.insert(n[P].feature,k,P,E,this.index)}}update(n,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u)}addFeatures(n,a,u){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,a,u,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,_C),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,u,f,b,v){for(const w of $l(a,500)){const k=Gy(w,f,v.fill.getGranularityForZoomLevel(f.z)),P=this.layoutVertexArray;Wy((E,L)=>{P.emplaceBack(E,L)},this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles,this.segments2,this.indexArray2,k.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,b,f)}}let Hy,qy;Ct("FillBucket",Nm,{omit:["layers","patternFeatures"]});var MC={get paint(){return qy=qy||new fi({"fill-antialias":new Dt($.paint_fill["fill-antialias"]),"fill-opacity":new jt($.paint_fill["fill-opacity"]),"fill-color":new jt($.paint_fill["fill-color"]),"fill-outline-color":new jt($.paint_fill["fill-outline-color"]),"fill-translate":new Dt($.paint_fill["fill-translate"]),"fill-translate-anchor":new Dt($.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ya($.paint_fill["fill-pattern"])})},get layout(){return Hy=Hy||new fi({"fill-sort-key":new jt($.layout_fill["fill-sort-key"])})}};class EC extends lo{constructor(n){super(n,MC)}recalculate(n,a){super.recalculate(n,a);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Nm(n)}queryRadius(){return kf(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:n,geometry:a,transform:u,pixelsToTileUnits:f}){return gc(Tf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-u.bearingInRadians,f),a)}isTileClipped(){return!0}}const AC=gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),LC=gn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:RC}=AC;var jm,Ky,Vm,Yy,Um,Xy,Jy,Ef={};function Qy(){if(Ky)return jm;Ky=1;var s=O();function n(f,b,v,w,k){this.properties={},this.extent=v,this.type=0,this._pbf=f,this._geometry=-1,this._keys=w,this._values=k,f.readFields(a,this,b)}function a(f,b,v){f==1?b.id=v.readVarint():f==2?function(w,k){for(var P=w.readVarint()+w.pos;w.pos<P;){var E=k._keys[w.readVarint()],L=k._values[w.readVarint()];k.properties[E]=L}}(v,b):f==3?b.type=v.readVarint():f==4&&(b._geometry=v.pos)}function u(f){for(var b,v,w=0,k=0,P=f.length,E=P-1;k<P;E=k++)w+=((v=f[E]).x-(b=f[k]).x)*(b.y+v.y);return w}return jm=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var b,v=f.readVarint()+f.pos,w=1,k=0,P=0,E=0,L=[];f.pos<v;){if(k<=0){var N=f.readVarint();w=7&N,k=N>>3}if(k--,w===1||w===2)P+=f.readSVarint(),E+=f.readSVarint(),w===1&&(b&&L.push(b),b=[]),b.push(new s(P,E));else{if(w!==7)throw new Error("unknown command "+w);b&&b.push(b[0].clone())}}return b&&L.push(b),L},n.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var b=f.readVarint()+f.pos,v=1,w=0,k=0,P=0,E=1/0,L=-1/0,N=1/0,V=-1/0;f.pos<b;){if(w<=0){var U=f.readVarint();v=7&U,w=U>>3}if(w--,v===1||v===2)(k+=f.readSVarint())<E&&(E=k),k>L&&(L=k),(P+=f.readSVarint())<N&&(N=P),P>V&&(V=P);else if(v!==7)throw new Error("unknown command "+v)}return[E,N,L,V]},n.prototype.toGeoJSON=function(f,b,v){var w,k,P=this.extent*Math.pow(2,v),E=this.extent*f,L=this.extent*b,N=this.loadGeometry(),V=n.types[this.type];function U(ie){for(var be=0;be<ie.length;be++){var le=ie[be];ie[be]=[360*(le.x+E)/P-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+L)/P)*Math.PI/180))-90]}}switch(this.type){case 1:var G=[];for(w=0;w<N.length;w++)G[w]=N[w][0];U(N=G);break;case 2:for(w=0;w<N.length;w++)U(N[w]);break;case 3:for(N=function(ie){var be=ie.length;if(be<=1)return[ie];for(var le,j,K=[],de=0;de<be;de++){var De=u(ie[de]);De!==0&&(j===void 0&&(j=De<0),j===De<0?(le&&K.push(le),le=[ie[de]]):le.push(ie[de]))}return le&&K.push(le),K}(N),w=0;w<N.length;w++)for(k=0;k<N[w].length;k++)U(N[w][k])}N.length===1?N=N[0]:V="Multi"+V;var Y={type:"Feature",geometry:{type:V,coordinates:N},properties:this.properties};return"id"in this&&(Y.id=this.id),Y},jm}function e0(){if(Yy)return Vm;Yy=1;var s=Qy();function n(u,f){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(a,this,f),this.length=this._features.length}function a(u,f,b){u===15?f.version=b.readVarint():u===1?f.name=b.readString():u===5?f.extent=b.readVarint():u===2?f._features.push(b.pos):u===3?f._keys.push(b.readString()):u===4&&f._values.push(function(v){for(var w=null,k=v.readVarint()+v.pos;v.pos<k;){var P=v.readVarint()>>3;w=P===1?v.readString():P===2?v.readFloat():P===3?v.readDouble():P===4?v.readVarint64():P===5?v.readVarint():P===6?v.readSVarint():P===7?v.readBoolean():null}return w}(b))}return Vm=n,n.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var f=this._pbf.readVarint()+this._pbf.pos;return new s(this._pbf,f,this.extent,this._keys,this._values)},Vm}function t0(){return Jy||(Jy=1,Ef.VectorTile=function(){if(Xy)return Um;Xy=1;var s=e0();function n(a,u,f){if(a===3){var b=new s(f,f.readVarint()+f.pos);b.length&&(u[b.name]=b)}}return Um=function(a,u){this.layers=a.readFields(n,{},u)},Um}(),Ef.VectorTileFeature=Qy(),Ef.VectorTileLayer=e0()),Ef}var ud=S(t0());const DC=ud.VectorTileFeature.types,Zm=Math.pow(2,13);function dd(s,n,a,u,f,b,v,w){s.emplaceBack(n,a,2*Math.floor(u*Zm)+v,f*Zm*2,b*Zm*2,Math.round(w))}class Gm{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new fe,this.centroidVertexArray=new re,this.indexArray=new gt,this.programConfigurations=new Cs(n.layers,n.zoom),this.segments=new Ot,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,u){this.features=[],this.hasPattern=zm("fill-extrusion",this.layers,a);for(const{feature:f,id:b,index:v,sourceLayerIndex:w}of n){const k=this.layers[0]._featureFilter.needGeometry,P=xi(f,k);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),P,u))continue;const E={id:b,sourceLayerIndex:w,index:v,geometry:k?P.geometry:Ss(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push($m("fill-extrusion",this.layers,E,this.zoom,a)):this.addFeature(E,E.geometry,v,u,{},a.subdivisionGranularity),a.featureIndex.insert(f,E.geometry,v,w,this.index,!0)}}addFeatures(n,a,u){for(const f of this.features){const{geometry:b}=f;this.addFeature(f,b,f.index,a,u,n.subdivisionGranularity)}}update(n,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,RC),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,LC.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,a,u,f,b,v){for(const w of $l(a,500)){const k={x:0,y:0,sampleCount:0},P=this.layoutVertexArray.length;this.processPolygon(k,f,n,w,v);const E=this.layoutVertexArray.length-P,L=Math.floor(k.x/k.sampleCount),N=Math.floor(k.y/k.sampleCount);for(let V=0;V<E;V++)this.centroidVertexArray.emplaceBack(L,N)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,b,f)}processPolygon(n,a,u,f,b){if(f.length<1||r0(f[0]))return;for(const L of f)L.length!==0&&OC(n,L);const v={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},w=b.fill.getGranularityForZoomLevel(a.z),k=DC[u.type]==="Polygon";for(const L of f){if(L.length===0||r0(L))continue;const N=el(L,w,k);this._generateSideFaces(N,v)}if(!k)return;const P=Gy(f,a,w,!1),E=this.layoutVertexArray;Wy((L,N)=>{dd(E,L,N,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,P.verticesFlattened,P.indicesTriangles)}_generateSideFaces(n,a){let u=0;for(let f=1;f<n.length;f++){const b=n[f],v=n[f-1];if(zC(b,v))continue;a.segment.vertexLength+4>Ot.MAX_VERTEX_ARRAY_LENGTH&&(a.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const w=b.sub(v)._perp()._unit(),k=v.dist(b);u+k>32768&&(u=0),dd(this.layoutVertexArray,b.x,b.y,w.x,w.y,0,0,u),dd(this.layoutVertexArray,b.x,b.y,w.x,w.y,0,1,u),u+=k,dd(this.layoutVertexArray,v.x,v.y,w.x,w.y,0,0,u),dd(this.layoutVertexArray,v.x,v.y,w.x,w.y,0,1,u);const P=a.segment.vertexLength;this.indexArray.emplaceBack(P,P+2,P+1),this.indexArray.emplaceBack(P+1,P+2,P+3),a.segment.vertexLength+=4,a.segment.primitiveLength+=2}}}function OC(s,n){for(let a=0;a<n.length;a++){const u=n[a];a===n.length-1&&n[0].x===u.x&&n[0].y===u.y||(s.x+=u.x,s.y+=u.y,s.sampleCount++)}}function zC(s,n){return s.x===n.x&&(s.x<0||s.x>vt)||s.y===n.y&&(s.y<0||s.y>vt)}function r0(s){return s.every(n=>n.x<0)||s.every(n=>n.x>vt)||s.every(n=>n.y<0)||s.every(n=>n.y>vt)}let n0;Ct("FillExtrusionBucket",Gm,{omit:["layers","features"]});var $C={get paint(){return n0=n0||new fi({"fill-extrusion-opacity":new Dt($["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new jt($["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Dt($["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Dt($["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ya($["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new jt($["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new jt($["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Dt($["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class BC extends lo{constructor(n){super(n,$C)}createBucket(n){return new Gm(n)}queryRadius(){return kf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:n,feature:a,featureState:u,geometry:f,transform:b,pixelsToTileUnits:v,pixelPosMatrix:w}){const k=Tf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-b.bearingInRadians,v),P=this.paint.get("fill-extrusion-height").evaluate(a,u),E=this.paint.get("fill-extrusion-base").evaluate(a,u),L=function(V,U,G){const Y=[];for(const ie of V){const be=[ie.x,ie.y,0,1];Ye(be,be,U),Y.push(new H(be[0]/be[3],be[1]/be[3]))}return Y}(k,w),N=function(V,U,G,Y){const ie=[],be=[],le=Y[8]*U,j=Y[9]*U,K=Y[10]*U,de=Y[11]*U,De=Y[8]*G,rt=Y[9]*G,Fe=Y[10]*G,je=Y[11]*G;for(const dt of V){const at=[],ht=[];for(const Ke of dt){const St=Ke.x,Ft=Ke.y,$t=Y[0]*St+Y[4]*Ft+Y[12],Et=Y[1]*St+Y[5]*Ft+Y[13],or=Y[2]*St+Y[6]*Ft+Y[14],cn=Y[3]*St+Y[7]*Ft+Y[15],In=or+K,ei=cn+de,eo=$t+De,Ci=Et+rt,Zn=or+Fe,rn=cn+je,Bn=new H(($t+le)/ei,(Et+j)/ei);Bn.z=In/ei,at.push(Bn);const Gn=new H(eo/rn,Ci/rn);Gn.z=Zn/rn,ht.push(Gn)}ie.push(at),be.push(ht)}return[ie,be]}(f,E,P,w);return function(V,U,G){let Y=1/0;gc(G,U)&&(Y=i0(G,U[0]));for(let ie=0;ie<U.length;ie++){const be=U[ie],le=V[ie];for(let j=0;j<be.length-1;j++){const K=be[j],de=[K,be[j+1],le[j+1],le[j],K];mc(G,de)&&(Y=Math.min(Y,i0(G,de)))}}return Y!==1/0&&Y}(N[0],N[1],L)}}function hd(s,n){return s.x*n.x+s.y*n.y}function i0(s,n){if(s.length===1){let a=0;const u=n[a++];let f;for(;!f||u.equals(f);)if(f=n[a++],!f)return 1/0;for(;a<n.length;a++){const b=n[a],v=s[0],w=f.sub(u),k=b.sub(u),P=v.sub(u),E=hd(w,w),L=hd(w,k),N=hd(k,k),V=hd(P,w),U=hd(P,k),G=E*N-L*L,Y=(N*V-L*U)/G,ie=(E*U-L*V)/G,be=u.z*(1-Y-ie)+f.z*Y+b.z*ie;if(isFinite(be))return be}return 1/0}{let a=1/0;for(const u of n)a=Math.min(a,u.z);return a}}const FC=gn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:NC}=FC,jC=gn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:VC}=jC,UC=ud.VectorTileFeature.types,ZC=Math.cos(Math.PI/180*37.5),o0=Math.pow(2,14)/.5;class Wm{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new me,this.layoutVertexArray2=new ve,this.indexArray=new gt,this.programConfigurations=new Cs(n.layers,n.zoom),this.segments=new Ot,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,u){this.hasPattern=zm("line",this.layers,a);const f=this.layers[0].layout.get("line-sort-key"),b=!f.isConstant(),v=[];for(const{feature:w,id:k,index:P,sourceLayerIndex:E}of n){const L=this.layers[0]._featureFilter.needGeometry,N=xi(w,L);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),N,u))continue;const V=b?f.evaluate(N,{},u):void 0,U={id:k,properties:w.properties,type:w.type,sourceLayerIndex:E,index:P,geometry:L?N.geometry:Ss(w),patterns:{},sortKey:V};v.push(U)}b&&v.sort((w,k)=>w.sortKey-k.sortKey);for(const w of v){const{geometry:k,index:P,sourceLayerIndex:E}=w;if(this.hasPattern){const L=$m("line",this.layers,w,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(w,k,P,u,{},a.subdivisionGranularity);a.featureIndex.insert(n[P].feature,k,P,E,this.index)}}update(n,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u)}addFeatures(n,a,u){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,a,u,n.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,VC)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,NC),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,u,f,b,v){const w=this.layers[0].layout,k=w.get("line-join").evaluate(n,{}),P=w.get("line-cap"),E=w.get("line-miter-limit"),L=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const N of a)this.addLine(N,n,k,P,E,L,f,v);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,b,f)}addLine(n,a,u,f,b,v,w,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,n=el(n,w?k.line.getGranularityForZoomLevel(w.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<n.length-1;le++)this.totalDistance+=n[le].dist(n[le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const P=UC[a.type]==="Polygon";let E=n.length;for(;E>=2&&n[E-1].equals(n[E-2]);)E--;let L=0;for(;L<E-1&&n[L].equals(n[L+1]);)L++;if(E<(P?3:2))return;u==="bevel"&&(b=1.05);const N=this.overscaling<=16?15*vt/(512*this.overscaling):0,V=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let U,G,Y,ie,be;this.e1=this.e2=-1,P&&(U=n[E-2],be=n[L].sub(U)._unit()._perp());for(let le=L;le<E;le++){if(Y=le===E-1?P?n[L+1]:void 0:n[le+1],Y&&n[le].equals(Y))continue;be&&(ie=be),U&&(G=U),U=n[le],be=Y?Y.sub(U)._unit()._perp():ie,ie=ie||be;let j=ie.add(be);j.x===0&&j.y===0||j._unit();const K=ie.x*be.x+ie.y*be.y,de=j.x*be.x+j.y*be.y,De=de!==0?1/de:1/0,rt=2*Math.sqrt(2-2*de),Fe=de<ZC&&G&&Y,je=ie.x*be.y-ie.y*be.x>0;if(Fe&&le>L){const ht=U.dist(G);if(ht>2*N){const Ke=U.sub(U.sub(G)._mult(N/ht)._round());this.updateDistance(G,Ke),this.addCurrentVertex(Ke,ie,0,0,V),G=Ke}}const dt=G&&Y;let at=dt?u:P?"butt":f;if(dt&&at==="round"&&(De<v?at="miter":De<=2&&(at="fakeround")),at==="miter"&&De>b&&(at="bevel"),at==="bevel"&&(De>2&&(at="flipbevel"),De<b&&(at="miter")),G&&this.updateDistance(G,U),at==="miter")j._mult(De),this.addCurrentVertex(U,j,0,0,V);else if(at==="flipbevel"){if(De>100)j=be.mult(-1);else{const ht=De*ie.add(be).mag()/ie.sub(be).mag();j._perp()._mult(ht*(je?-1:1))}this.addCurrentVertex(U,j,0,0,V),this.addCurrentVertex(U,j.mult(-1),0,0,V)}else if(at==="bevel"||at==="fakeround"){const ht=-Math.sqrt(De*De-1),Ke=je?ht:0,St=je?0:ht;if(G&&this.addCurrentVertex(U,ie,Ke,St,V),at==="fakeround"){const Ft=Math.round(180*rt/Math.PI/20);for(let $t=1;$t<Ft;$t++){let Et=$t/Ft;if(Et!==.5){const cn=Et-.5;Et+=Et*cn*(Et-1)*((1.0904+K*(K*(3.55645-1.43519*K)-3.2452))*cn*cn+(.848013+K*(.215638*K-1.06021)))}const or=be.sub(ie)._mult(Et)._add(ie)._unit()._mult(je?-1:1);this.addHalfVertex(U,or.x,or.y,!1,je,0,V)}}Y&&this.addCurrentVertex(U,be,-Ke,-St,V)}else if(at==="butt")this.addCurrentVertex(U,j,0,0,V);else if(at==="square"){const ht=G?1:-1;this.addCurrentVertex(U,j,ht,ht,V)}else at==="round"&&(G&&(this.addCurrentVertex(U,ie,0,0,V),this.addCurrentVertex(U,ie,1,1,V,!0)),Y&&(this.addCurrentVertex(U,be,-1,-1,V,!0),this.addCurrentVertex(U,be,0,0,V)));if(Fe&&le<E-1){const ht=U.dist(Y);if(ht>2*N){const Ke=U.add(Y.sub(U)._mult(N/ht)._round());this.updateDistance(U,Ke),this.addCurrentVertex(Ke,be,0,0,V),U=Ke}}}}addCurrentVertex(n,a,u,f,b,v=!1){const w=a.y*f-a.x,k=-a.y-a.x*f;this.addHalfVertex(n,a.x+a.y*u,a.y-a.x*u,v,!1,u,b),this.addHalfVertex(n,w,k,v,!0,-f,b),this.distance>o0/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,a,u,f,b,v))}addHalfVertex({x:n,y:a},u,f,b,v,w,k){const P=.5*(this.lineClips?this.scaledDistance*(o0-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(b?1:0),(a<<1)+(v?1:0),Math.round(63*u)+128,Math.round(63*f)+128,1+(w===0?0:w<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const E=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,E,this.e2),k.primitiveLength++),v?this.e2=E:this.e1=E}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}let s0,a0;Ct("LineBucket",Wm,{omit:["layers","patternFeatures"]});var l0={get paint(){return a0=a0||new fi({"line-opacity":new jt($.paint_line["line-opacity"]),"line-color":new jt($.paint_line["line-color"]),"line-translate":new Dt($.paint_line["line-translate"]),"line-translate-anchor":new Dt($.paint_line["line-translate-anchor"]),"line-width":new jt($.paint_line["line-width"]),"line-gap-width":new jt($.paint_line["line-gap-width"]),"line-offset":new jt($.paint_line["line-offset"]),"line-blur":new jt($.paint_line["line-blur"]),"line-dasharray":new sc($.paint_line["line-dasharray"]),"line-pattern":new Ya($.paint_line["line-pattern"]),"line-gradient":new Ku($.paint_line["line-gradient"])})},get layout(){return s0=s0||new fi({"line-cap":new Dt($.layout_line["line-cap"]),"line-join":new jt($.layout_line["line-join"]),"line-miter-limit":new Dt($.layout_line["line-miter-limit"]),"line-round-limit":new Dt($.layout_line["line-round-limit"]),"line-sort-key":new jt($.layout_line["line-sort-key"])})}};class GC extends jt{possiblyEvaluate(n,a){return a=new Jr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(n,a)}evaluate(n,a,u,f){return a=Qt({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(n,a,u,f)}}let Af;class WC extends lo{constructor(n){super(n,l0),this.gradientVersion=0,Af||(Af=new GC(l0.paint.properties["line-width"].specification),Af.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(u){return u._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof Hs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,a){super.recalculate(n,a),this.paint._values["line-floorwidth"]=Af.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Wm(n)}queryRadius(n){const a=n,u=c0(rd("line-width",this,a),rd("line-gap-width",this,a)),f=rd("line-offset",this,a);return u/2+Math.abs(f)+kf(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:n,feature:a,featureState:u,geometry:f,transform:b,pixelsToTileUnits:v}){const w=Tf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-b.bearingInRadians,v),k=v/2*c0(this.paint.get("line-width").evaluate(a,u),this.paint.get("line-gap-width").evaluate(a,u)),P=this.paint.get("line-offset").evaluate(a,u);return P&&(f=function(E,L){const N=[];for(let V=0;V<E.length;V++){const U=E[V],G=[];for(let Y=0;Y<U.length;Y++){const ie=U[Y-1],be=U[Y],le=U[Y+1],j=Y===0?new H(0,0):be.sub(ie)._unit()._perp(),K=Y===U.length-1?new H(0,0):le.sub(be)._unit()._perp(),de=j._add(K)._unit(),De=de.x*K.x+de.y*K.y;De!==0&&de._mult(1/De),G.push(de._mult(L)._add(be))}N.push(G)}return N}(f,P*v)),function(E,L,N){for(let V=0;V<L.length;V++){const U=L[V];if(E.length>=3){for(let G=0;G<U.length;G++)if(_c(E,U[G]))return!0}if(aC(E,U,N))return!0}return!1}(w,f,k)}isTileClipped(){return!0}}function c0(s,n){return n>0?n+2*s:s}const HC=gn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),qC=gn([{name:"a_projected_pos",components:3,type:"Float32"}],4);gn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const KC=gn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);gn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const u0=gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),YC=gn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function XC(s,n,a){return s.sections.forEach(u=>{u.text=function(f,b,v){const w=b.layout.get("text-transform").evaluate(v,{});return w==="uppercase"?f=f.toLocaleUpperCase():w==="lowercase"&&(f=f.toLocaleLowerCase()),Go.applyArabicShaping&&(f=Go.applyArabicShaping(f)),f}(u.text,n,a)}),s}gn([{name:"triangle",components:3,type:"Uint16"}]),gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),gn([{type:"Float32",name:"offsetX"}]),gn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),gn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const fd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var d0,Hm,h0,Pn=24,qm={};function JC(){return d0||(d0=1,qm.read=function(s,n,a,u,f){var b,v,w=8*f-u-1,k=(1<<w)-1,P=k>>1,E=-7,L=a?f-1:0,N=a?-1:1,V=s[n+L];for(L+=N,b=V&(1<<-E)-1,V>>=-E,E+=w;E>0;b=256*b+s[n+L],L+=N,E-=8);for(v=b&(1<<-E)-1,b>>=-E,E+=u;E>0;v=256*v+s[n+L],L+=N,E-=8);if(b===0)b=1-P;else{if(b===k)return v?NaN:1/0*(V?-1:1);v+=Math.pow(2,u),b-=P}return(V?-1:1)*v*Math.pow(2,b-u)},qm.write=function(s,n,a,u,f,b){var v,w,k,P=8*b-f-1,E=(1<<P)-1,L=E>>1,N=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=u?0:b-1,U=u?1:-1,G=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,v=E):(v=Math.floor(Math.log(n)/Math.LN2),n*(k=Math.pow(2,-v))<1&&(v--,k*=2),(n+=v+L>=1?N/k:N*Math.pow(2,1-L))*k>=2&&(v++,k/=2),v+L>=E?(w=0,v=E):v+L>=1?(w=(n*k-1)*Math.pow(2,f),v+=L):(w=n*Math.pow(2,L-1)*Math.pow(2,f),v=0));f>=8;s[a+V]=255&w,V+=U,w/=256,f-=8);for(v=v<<f|w,P+=f;P>0;s[a+V]=255&v,V+=U,v/=256,P-=8);s[a+V-U]|=128*G}),qm}function f0(){if(h0)return Hm;h0=1,Hm=n;var s=JC();function n(j){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(j)?j:new Uint8Array(j||0),this.pos=0,this.type=0,this.length=this.buf.length}n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var a=4294967296,u=1/a,f=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function b(j){return j.type===n.Bytes?j.readVarint()+j.pos:j.pos+1}function v(j,K,de){return de?4294967296*K+(j>>>0):4294967296*(K>>>0)+(j>>>0)}function w(j,K,de){var De=K<=16383?1:K<=2097151?2:K<=268435455?3:Math.floor(Math.log(K)/(7*Math.LN2));de.realloc(De);for(var rt=de.pos-1;rt>=j;rt--)de.buf[rt+De]=de.buf[rt]}function k(j,K){for(var de=0;de<j.length;de++)K.writeVarint(j[de])}function P(j,K){for(var de=0;de<j.length;de++)K.writeSVarint(j[de])}function E(j,K){for(var de=0;de<j.length;de++)K.writeFloat(j[de])}function L(j,K){for(var de=0;de<j.length;de++)K.writeDouble(j[de])}function N(j,K){for(var de=0;de<j.length;de++)K.writeBoolean(j[de])}function V(j,K){for(var de=0;de<j.length;de++)K.writeFixed32(j[de])}function U(j,K){for(var de=0;de<j.length;de++)K.writeSFixed32(j[de])}function G(j,K){for(var de=0;de<j.length;de++)K.writeFixed64(j[de])}function Y(j,K){for(var de=0;de<j.length;de++)K.writeSFixed64(j[de])}function ie(j,K){return(j[K]|j[K+1]<<8|j[K+2]<<16)+16777216*j[K+3]}function be(j,K,de){j[de]=K,j[de+1]=K>>>8,j[de+2]=K>>>16,j[de+3]=K>>>24}function le(j,K){return(j[K]|j[K+1]<<8|j[K+2]<<16)+(j[K+3]<<24)}return n.prototype={destroy:function(){this.buf=null},readFields:function(j,K,de){for(de=de||this.length;this.pos<de;){var De=this.readVarint(),rt=De>>3,Fe=this.pos;this.type=7&De,j(rt,K,this),this.pos===Fe&&this.skip(De)}return K},readMessage:function(j,K){return this.readFields(j,K,this.readVarint()+this.pos)},readFixed32:function(){var j=ie(this.buf,this.pos);return this.pos+=4,j},readSFixed32:function(){var j=le(this.buf,this.pos);return this.pos+=4,j},readFixed64:function(){var j=ie(this.buf,this.pos)+ie(this.buf,this.pos+4)*a;return this.pos+=8,j},readSFixed64:function(){var j=ie(this.buf,this.pos)+le(this.buf,this.pos+4)*a;return this.pos+=8,j},readFloat:function(){var j=s.read(this.buf,this.pos,!0,23,4);return this.pos+=4,j},readDouble:function(){var j=s.read(this.buf,this.pos,!0,52,8);return this.pos+=8,j},readVarint:function(j){var K,de,De=this.buf;return K=127&(de=De[this.pos++]),de<128?K:(K|=(127&(de=De[this.pos++]))<<7,de<128?K:(K|=(127&(de=De[this.pos++]))<<14,de<128?K:(K|=(127&(de=De[this.pos++]))<<21,de<128?K:function(rt,Fe,je){var dt,at,ht=je.buf;if(dt=(112&(at=ht[je.pos++]))>>4,at<128||(dt|=(127&(at=ht[je.pos++]))<<3,at<128)||(dt|=(127&(at=ht[je.pos++]))<<10,at<128)||(dt|=(127&(at=ht[je.pos++]))<<17,at<128)||(dt|=(127&(at=ht[je.pos++]))<<24,at<128)||(dt|=(1&(at=ht[je.pos++]))<<31,at<128))return v(rt,dt,Fe);throw new Error("Expected varint not more than 10 bytes")}(K|=(15&(de=De[this.pos]))<<28,j,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var j=this.readVarint();return j%2==1?(j+1)/-2:j/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var j=this.readVarint()+this.pos,K=this.pos;return this.pos=j,j-K>=12&&f?function(de,De,rt){return f.decode(de.subarray(De,rt))}(this.buf,K,j):function(de,De,rt){for(var Fe="",je=De;je<rt;){var dt,at,ht,Ke=de[je],St=null,Ft=Ke>239?4:Ke>223?3:Ke>191?2:1;if(je+Ft>rt)break;Ft===1?Ke<128&&(St=Ke):Ft===2?(192&(dt=de[je+1]))==128&&(St=(31&Ke)<<6|63&dt)<=127&&(St=null):Ft===3?(at=de[je+2],(192&(dt=de[je+1]))==128&&(192&at)==128&&((St=(15&Ke)<<12|(63&dt)<<6|63&at)<=2047||St>=55296&&St<=57343)&&(St=null)):Ft===4&&(at=de[je+2],ht=de[je+3],(192&(dt=de[je+1]))==128&&(192&at)==128&&(192&ht)==128&&((St=(15&Ke)<<18|(63&dt)<<12|(63&at)<<6|63&ht)<=65535||St>=1114112)&&(St=null)),St===null?(St=65533,Ft=1):St>65535&&(St-=65536,Fe+=String.fromCharCode(St>>>10&1023|55296),St=56320|1023&St),Fe+=String.fromCharCode(St),je+=Ft}return Fe}(this.buf,K,j)},readBytes:function(){var j=this.readVarint()+this.pos,K=this.buf.subarray(this.pos,j);return this.pos=j,K},readPackedVarint:function(j,K){if(this.type!==n.Bytes)return j.push(this.readVarint(K));var de=b(this);for(j=j||[];this.pos<de;)j.push(this.readVarint(K));return j},readPackedSVarint:function(j){if(this.type!==n.Bytes)return j.push(this.readSVarint());var K=b(this);for(j=j||[];this.pos<K;)j.push(this.readSVarint());return j},readPackedBoolean:function(j){if(this.type!==n.Bytes)return j.push(this.readBoolean());var K=b(this);for(j=j||[];this.pos<K;)j.push(this.readBoolean());return j},readPackedFloat:function(j){if(this.type!==n.Bytes)return j.push(this.readFloat());var K=b(this);for(j=j||[];this.pos<K;)j.push(this.readFloat());return j},readPackedDouble:function(j){if(this.type!==n.Bytes)return j.push(this.readDouble());var K=b(this);for(j=j||[];this.pos<K;)j.push(this.readDouble());return j},readPackedFixed32:function(j){if(this.type!==n.Bytes)return j.push(this.readFixed32());var K=b(this);for(j=j||[];this.pos<K;)j.push(this.readFixed32());return j},readPackedSFixed32:function(j){if(this.type!==n.Bytes)return j.push(this.readSFixed32());var K=b(this);for(j=j||[];this.pos<K;)j.push(this.readSFixed32());return j},readPackedFixed64:function(j){if(this.type!==n.Bytes)return j.push(this.readFixed64());var K=b(this);for(j=j||[];this.pos<K;)j.push(this.readFixed64());return j},readPackedSFixed64:function(j){if(this.type!==n.Bytes)return j.push(this.readSFixed64());var K=b(this);for(j=j||[];this.pos<K;)j.push(this.readSFixed64());return j},skip:function(j){var K=7&j;if(K===n.Varint)for(;this.buf[this.pos++]>127;);else if(K===n.Bytes)this.pos=this.readVarint()+this.pos;else if(K===n.Fixed32)this.pos+=4;else{if(K!==n.Fixed64)throw new Error("Unimplemented type: "+K);this.pos+=8}},writeTag:function(j,K){this.writeVarint(j<<3|K)},realloc:function(j){for(var K=this.length||16;K<this.pos+j;)K*=2;if(K!==this.length){var de=new Uint8Array(K);de.set(this.buf),this.buf=de,this.length=K}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(j){this.realloc(4),be(this.buf,j,this.pos),this.pos+=4},writeSFixed32:function(j){this.realloc(4),be(this.buf,j,this.pos),this.pos+=4},writeFixed64:function(j){this.realloc(8),be(this.buf,-1&j,this.pos),be(this.buf,Math.floor(j*u),this.pos+4),this.pos+=8},writeSFixed64:function(j){this.realloc(8),be(this.buf,-1&j,this.pos),be(this.buf,Math.floor(j*u),this.pos+4),this.pos+=8},writeVarint:function(j){(j=+j||0)>268435455||j<0?function(K,de){var De,rt;if(K>=0?(De=K%4294967296|0,rt=K/4294967296|0):(rt=~(-K/4294967296),4294967295^(De=~(-K%4294967296))?De=De+1|0:(De=0,rt=rt+1|0)),K>=18446744073709552e3||K<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");de.realloc(10),function(Fe,je,dt){dt.buf[dt.pos++]=127&Fe|128,Fe>>>=7,dt.buf[dt.pos++]=127&Fe|128,Fe>>>=7,dt.buf[dt.pos++]=127&Fe|128,Fe>>>=7,dt.buf[dt.pos++]=127&Fe|128,dt.buf[dt.pos]=127&(Fe>>>=7)}(De,0,de),function(Fe,je){var dt=(7&Fe)<<4;je.buf[je.pos++]|=dt|((Fe>>>=3)?128:0),Fe&&(je.buf[je.pos++]=127&Fe|((Fe>>>=7)?128:0),Fe&&(je.buf[je.pos++]=127&Fe|((Fe>>>=7)?128:0),Fe&&(je.buf[je.pos++]=127&Fe|((Fe>>>=7)?128:0),Fe&&(je.buf[je.pos++]=127&Fe|((Fe>>>=7)?128:0),Fe&&(je.buf[je.pos++]=127&Fe)))))}(rt,de)}(j,this):(this.realloc(4),this.buf[this.pos++]=127&j|(j>127?128:0),j<=127||(this.buf[this.pos++]=127&(j>>>=7)|(j>127?128:0),j<=127||(this.buf[this.pos++]=127&(j>>>=7)|(j>127?128:0),j<=127||(this.buf[this.pos++]=j>>>7&127))))},writeSVarint:function(j){this.writeVarint(j<0?2*-j-1:2*j)},writeBoolean:function(j){this.writeVarint(!!j)},writeString:function(j){j=String(j),this.realloc(4*j.length),this.pos++;var K=this.pos;this.pos=function(De,rt,Fe){for(var je,dt,at=0;at<rt.length;at++){if((je=rt.charCodeAt(at))>55295&&je<57344){if(!dt){je>56319||at+1===rt.length?(De[Fe++]=239,De[Fe++]=191,De[Fe++]=189):dt=je;continue}if(je<56320){De[Fe++]=239,De[Fe++]=191,De[Fe++]=189,dt=je;continue}je=dt-55296<<10|je-56320|65536,dt=null}else dt&&(De[Fe++]=239,De[Fe++]=191,De[Fe++]=189,dt=null);je<128?De[Fe++]=je:(je<2048?De[Fe++]=je>>6|192:(je<65536?De[Fe++]=je>>12|224:(De[Fe++]=je>>18|240,De[Fe++]=je>>12&63|128),De[Fe++]=je>>6&63|128),De[Fe++]=63&je|128)}return Fe}(this.buf,j,this.pos);var de=this.pos-K;de>=128&&w(K,de,this),this.pos=K-1,this.writeVarint(de),this.pos+=de},writeFloat:function(j){this.realloc(4),s.write(this.buf,j,this.pos,!0,23,4),this.pos+=4},writeDouble:function(j){this.realloc(8),s.write(this.buf,j,this.pos,!0,52,8),this.pos+=8},writeBytes:function(j){var K=j.length;this.writeVarint(K),this.realloc(K);for(var de=0;de<K;de++)this.buf[this.pos++]=j[de]},writeRawMessage:function(j,K){this.pos++;var de=this.pos;j(K,this);var De=this.pos-de;De>=128&&w(de,De,this),this.pos=de-1,this.writeVarint(De),this.pos+=De},writeMessage:function(j,K,de){this.writeTag(j,n.Bytes),this.writeRawMessage(K,de)},writePackedVarint:function(j,K){K.length&&this.writeMessage(j,k,K)},writePackedSVarint:function(j,K){K.length&&this.writeMessage(j,P,K)},writePackedBoolean:function(j,K){K.length&&this.writeMessage(j,N,K)},writePackedFloat:function(j,K){K.length&&this.writeMessage(j,E,K)},writePackedDouble:function(j,K){K.length&&this.writeMessage(j,L,K)},writePackedFixed32:function(j,K){K.length&&this.writeMessage(j,V,K)},writePackedSFixed32:function(j,K){K.length&&this.writeMessage(j,U,K)},writePackedFixed64:function(j,K){K.length&&this.writeMessage(j,G,K)},writePackedSFixed64:function(j,K){K.length&&this.writeMessage(j,Y,K)},writeBytesField:function(j,K){this.writeTag(j,n.Bytes),this.writeBytes(K)},writeFixed32Field:function(j,K){this.writeTag(j,n.Fixed32),this.writeFixed32(K)},writeSFixed32Field:function(j,K){this.writeTag(j,n.Fixed32),this.writeSFixed32(K)},writeFixed64Field:function(j,K){this.writeTag(j,n.Fixed64),this.writeFixed64(K)},writeSFixed64Field:function(j,K){this.writeTag(j,n.Fixed64),this.writeSFixed64(K)},writeVarintField:function(j,K){this.writeTag(j,n.Varint),this.writeVarint(K)},writeSVarintField:function(j,K){this.writeTag(j,n.Varint),this.writeSVarint(K)},writeStringField:function(j,K){this.writeTag(j,n.Bytes),this.writeString(K)},writeFloatField:function(j,K){this.writeTag(j,n.Fixed32),this.writeFloat(K)},writeDoubleField:function(j,K){this.writeTag(j,n.Fixed64),this.writeDouble(K)},writeBooleanField:function(j,K){this.writeVarintField(j,!!K)}},Hm}var Km=S(f0());const Ym=3;function QC(s,n,a){s===1&&a.readMessage(eS,n)}function eS(s,n,a){if(s===3){const{id:u,bitmap:f,width:b,height:v,left:w,top:k,advance:P}=a.readMessage(tS,{});n.push({id:u,bitmap:new nd({width:b+2*Ym,height:v+2*Ym},f),metrics:{width:b,height:v,left:w,top:k,advance:P}})}}function tS(s,n,a){s===1?n.id=a.readVarint():s===2?n.bitmap=a.readBytes():s===3?n.width=a.readVarint():s===4?n.height=a.readVarint():s===5?n.left=a.readSVarint():s===6?n.top=a.readSVarint():s===7&&(n.advance=a.readVarint())}const rS=Ym;function p0(s){let n=0,a=0;for(const v of s)n+=v.w*v.h,a=Math.max(a,v.w);s.sort((v,w)=>w.h-v.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let f=0,b=0;for(const v of s)for(let w=u.length-1;w>=0;w--){const k=u[w];if(!(v.w>k.w||v.h>k.h)){if(v.x=k.x,v.y=k.y,b=Math.max(b,v.y+v.h),f=Math.max(f,v.x+v.w),v.w===k.w&&v.h===k.h){const P=u.pop();w<u.length&&(u[w]=P)}else v.h===k.h?(k.x+=v.w,k.w-=v.w):v.w===k.w?(k.y+=v.h,k.h-=v.h):(u.push({x:k.x+v.w,y:k.y,w:k.w-v.w,h:v.h}),k.y+=v.h,k.h-=v.h);break}}return{w:f,h:b,fill:n/(f*b)||0}}const wi=1;class Xm{constructor(n,{pixelRatio:a,version:u,stretchX:f,stretchY:b,content:v,textFitWidth:w,textFitHeight:k}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=f,this.stretchY=b,this.content=v,this.version=u,this.textFitWidth=w,this.textFitHeight=k}get tl(){return[this.paddedRect.x+wi,this.paddedRect.y+wi]}get br(){return[this.paddedRect.x+this.paddedRect.w-wi,this.paddedRect.y+this.paddedRect.h-wi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*wi)/this.pixelRatio,(this.paddedRect.h-2*wi)/this.pixelRatio]}}class m0{constructor(n,a){const u={},f={};this.haveRenderCallbacks=[];const b=[];this.addImages(n,u,b),this.addImages(a,f,b);const{w:v,h:w}=p0(b),k=new Ji({width:v||1,height:w||1});for(const P in n){const E=n[P],L=u[P].paddedRect;Ji.copy(E.data,k,{x:0,y:0},{x:L.x+wi,y:L.y+wi},E.data)}for(const P in a){const E=a[P],L=f[P].paddedRect,N=L.x+wi,V=L.y+wi,U=E.data.width,G=E.data.height;Ji.copy(E.data,k,{x:0,y:0},{x:N,y:V},E.data),Ji.copy(E.data,k,{x:0,y:G-1},{x:N,y:V-1},{width:U,height:1}),Ji.copy(E.data,k,{x:0,y:0},{x:N,y:V+G},{width:U,height:1}),Ji.copy(E.data,k,{x:U-1,y:0},{x:N-1,y:V},{width:1,height:G}),Ji.copy(E.data,k,{x:0,y:0},{x:N+U,y:V},{width:1,height:G})}this.image=k,this.iconPositions=u,this.patternPositions=f}addImages(n,a,u){for(const f in n){const b=n[f],v={x:0,y:0,w:b.data.width+2*wi,h:b.data.height+2*wi};u.push(v),a[f]=new Xm(v,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,a){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in n.updatedImages)this.patchUpdatedImage(this.iconPositions[u],n.getImage(u),a),this.patchUpdatedImage(this.patternPositions[u],n.getImage(u),a)}patchUpdatedImage(n,a,u){if(!n||!a||n.version===a.version)return;n.version=a.version;const[f,b]=n.tl;u.update(a.data,void 0,{x:f,y:b})}}var aa;Ct("ImagePosition",Xm),Ct("ImageAtlas",m0),m.ag=void 0,(aa=m.ag||(m.ag={}))[aa.none=0]="none",aa[aa.horizontal=1]="horizontal",aa[aa.vertical=2]="vertical",aa[aa.horizontalOnly=3]="horizontalOnly";const Lf=-17;class pd{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(n,a,u){const f=new pd;return f.scale=n||1,f.fontStack=a,f.verticalAlign=u||"bottom",f}static forImage(n,a){const u=new pd;return u.imageName=n,u.verticalAlign=a||"bottom",u}}class xc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const u=new xc;for(let f=0;f<n.sections.length;f++){const b=n.sections[f];b.image?u.addImageSection(b):u.addTextSection(b,a)}return u}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let a="";for(let u=0;u<n.length;u++){const f=n.charCodeAt(u+1)||null,b=n.charCodeAt(u-1)||null;a+=f&&Gu(f)&&!fd[n[u+1]]||b&&Gu(b)&&!fd[n[u-1]]||!fd[n[u]]?n[u]:fd[n[u]]}return a}(this.text)}trim(){let n=0;for(let u=0;u<this.text.length&&Df[this.text.charCodeAt(u)];u++)n++;let a=this.text.length;for(let u=this.text.length-1;u>=0&&u>=n&&Df[this.text.charCodeAt(u)];u--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const u=new xc;return u.text=this.text.substring(n,a),u.sectionIndex=this.sectionIndex.slice(n,a),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}getMaxImageSize(n){let a=0,u=0;for(let f=0;f<this.length();f++){const b=this.getSection(f);if(b.imageName){const v=n[b.imageName];if(!v)continue;const w=v.displaySize;a=Math.max(a,w[0]),u=Math.max(u,w[1])}}return{maxImageWidth:a,maxImageHeight:u}}addTextSection(n,a){this.text+=n.text,this.sections.push(pd.forText(n.scale,n.fontStack||a,n.verticalAlign));const u=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(u)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void Dr("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(pd.forImage(a,n.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Dr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Rf(s,n,a,u,f,b,v,w,k,P,E,L,N,V,U){const G=xc.fromFeature(s,f);let Y;L===m.ag.vertical&&G.verticalizePunctuation();const{processBidirectionalText:ie,processStyledBidirectionalText:be}=Go;if(ie&&G.sections.length===1){Y=[];const K=ie(G.toString(),Jm(G,P,b,n,u,V));for(const de of K){const De=new xc;De.text=de,De.sections=G.sections;for(let rt=0;rt<de.length;rt++)De.sectionIndex.push(0);Y.push(De)}}else if(be){Y=[];const K=be(G.text,G.sectionIndex,Jm(G,P,b,n,u,V));for(const de of K){const De=new xc;De.text=de[0],De.sectionIndex=de[1],De.sections=G.sections,Y.push(De)}}else Y=function(K,de){const De=[],rt=K.text;let Fe=0;for(const je of de)De.push(K.substring(Fe,je)),Fe=je;return Fe<rt.length&&De.push(K.substring(Fe,rt.length)),De}(G,Jm(G,P,b,n,u,V));const le=[],j={positionedLines:le,text:G.toString(),top:E[1],bottom:E[1],left:E[0],right:E[0],writingMode:L,iconsInText:!1,verticalizable:!1};return function(K,de,De,rt,Fe,je,dt,at,ht,Ke,St,Ft){let $t=0,Et=0,or=0,cn=0;const In=at==="right"?1:at==="left"?0:.5,ei=Pn/Ft;let eo=0;for(const rn of Fe){rn.trim();const Bn=rn.getMaxScale(),Gn={positionedGlyphs:[],lineOffset:0};K.positionedLines[eo]=Gn;const Wn=Gn.positionedGlyphs;let pi=0;if(!rn.length()){Et+=je,++eo;continue}const to=sS(rt,rn,ei);for(let Si=0;Si<rn.length();Si++){const Mn=rn.getSection(Si),Nn=rn.getSectionIndex(Si),jn=rn.getCharCode(Si),vn=aS(ht,St,jn);let qr;if(Mn.imageName){if(K.iconsInText=!0,Mn.scale=Mn.scale*ei,qr=cS(Mn,vn,Bn,to,rt),!qr)continue;pi=Math.max(pi,qr.imageOffset)}else if(qr=lS(Mn,jn,vn,to,de,De),!qr)continue;const{rect:So,metrics:kc,baselineOffset:ko}=qr;Wn.push({glyph:jn,imageName:Mn.imageName,x:$t,y:Et+ko+Lf,vertical:vn,scale:Mn.scale,fontStack:Mn.fontStack,sectionIndex:Nn,metrics:kc,rect:So}),vn?(K.verticalizable=!0,$t+=(Mn.imageName?kc.advance:Pn)*Mn.scale+Ke):$t+=kc.advance*Mn.scale+Ke}Wn.length!==0&&(or=Math.max($t-Ke,or),uS(Wn,0,Wn.length-1,In)),$t=0,Gn.lineOffset=Math.max(pi,(Bn-1)*Pn);const Fn=je*Bn+pi;Et+=Fn,cn=Math.max(Fn,cn),++eo}const{horizontalAlign:Ci,verticalAlign:Zn}=Qm(dt);(function(rn,Bn,Gn,Wn,pi,to,Fn,Si,Mn){const Nn=(Bn-Gn)*pi;let jn=0;jn=to!==Fn?-Si*Wn-Lf:-Wn*Mn*Fn+.5*Fn;for(const vn of rn)for(const qr of vn.positionedGlyphs)qr.x+=Nn,qr.y+=jn})(K.positionedLines,In,Ci,Zn,or,cn,je,Et,Fe.length),K.top+=-Zn*Et,K.bottom=K.top+Et,K.left+=-Ci*or,K.right=K.left+or}(j,n,a,u,Y,v,w,k,L,P,N,U),!function(K){for(const de of K)if(de.positionedGlyphs.length!==0)return!1;return!0}(le)&&j}const Df={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},nS={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},iS={40:!0};function g0(s,n,a,u,f,b){if(n.imageName){const v=u[n.imageName];return v?v.displaySize[0]*n.scale*Pn/b+f:0}{const v=a[n.fontStack],w=v&&v[s];return w?w.metrics.advance*n.scale+f:0}}function _0(s,n,a,u){const f=Math.pow(s-n,2);return u?s<n?f/2:2*f:f+Math.abs(a)*a}function oS(s,n,a){let u=0;return s===10&&(u-=1e4),a&&(u+=150),s!==40&&s!==65288||(u+=50),n!==41&&n!==65289||(u+=50),u}function y0(s,n,a,u,f,b){let v=null,w=_0(n,a,f,b);for(const k of u){const P=_0(n-k.x,a,f,b)+k.badness;P<=w&&(v=k,w=P)}return{index:s,x:n,priorBreak:v,badness:w}}function b0(s){return s?b0(s.priorBreak).concat(s.index):[]}function Jm(s,n,a,u,f,b){if(!s)return[];const v=[],w=function(L,N,V,U,G,Y){let ie=0;for(let be=0;be<L.length();be++){const le=L.getSection(be);ie+=g0(L.getCharCode(be),le,U,G,N,Y)}return ie/Math.max(1,Math.ceil(ie/V))}(s,n,a,u,f,b),k=s.text.indexOf("​")>=0;let P=0;for(let L=0;L<s.length();L++){const N=s.getSection(L),V=s.getCharCode(L);if(Df[V]||(P+=g0(V,N,u,f,n,b)),L<s.length()-1){const U=!((E=V)<11904)&&(!!nr["CJK Compatibility Forms"](E)||!!nr["CJK Compatibility"](E)||!!nr["CJK Strokes"](E)||!!nr["CJK Symbols and Punctuation"](E)||!!nr["Enclosed CJK Letters and Months"](E)||!!nr["Halfwidth and Fullwidth Forms"](E)||!!nr["Ideographic Description Characters"](E)||!!nr["Vertical Forms"](E)||Uu.test(String.fromCodePoint(E)));(nS[V]||U||N.imageName||L!==s.length()-2&&iS[s.getCharCode(L+1)])&&v.push(y0(L+1,P,w,v,oS(V,s.getCharCode(L+1),U&&k),!1))}}var E;return b0(y0(s.length(),P,w,v,0,!0))}function Qm(s){let n=.5,a=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function sS(s,n,a){const u=n.getMaxScale()*Pn,{maxImageWidth:f,maxImageHeight:b}=n.getMaxImageSize(s),v=Math.max(u,b*a);return{verticalLineContentWidth:Math.max(u,f*a),horizontalLineContentHeight:v}}function v0(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function aS(s,n,a){return!(s===m.ag.horizontal||!n&&!Zu(a)||n&&(Df[a]||(u=a,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(u)))));var u}function lS(s,n,a,u,f,b){const v=b[s.fontStack],w=function(P,E,L,N){if(P&&P.rect)return P;const V=E[L.fontStack],U=V&&V[N];return U?{rect:null,metrics:U.metrics}:null}(v&&v[n],f,s,n);if(w===null)return null;let k;if(a)k=u.verticalLineContentWidth-s.scale*Pn;else{const P=v0(s.verticalAlign);k=(u.horizontalLineContentHeight-s.scale*Pn)*P}return{rect:w.rect,metrics:w.metrics,baselineOffset:k}}function cS(s,n,a,u,f){const b=f[s.imageName];if(!b)return null;const v=b.paddedRect,w=b.displaySize,k={width:w[0],height:w[1],left:wi,top:-3,advance:n?w[1]:w[0]};let P;if(n)P=u.verticalLineContentWidth-w[1]*s.scale;else{const E=v0(s.verticalAlign);P=(u.horizontalLineContentHeight-w[1]*s.scale)*E}return{rect:v,metrics:k,baselineOffset:P,imageOffset:(n?w[0]:w[1])*s.scale-Pn*a}}function uS(s,n,a,u){if(u===0)return;const f=s[a],b=(s[a].x+f.metrics.advance*f.scale)*u;for(let v=n;v<=a;v++)s[v].x-=b}function dS(s,n,a){const{horizontalAlign:u,verticalAlign:f}=Qm(a),b=n[0]-s.displaySize[0]*u,v=n[1]-s.displaySize[1]*f;return{image:s,top:v,bottom:v+s.displaySize[1],left:b,right:b+s.displaySize[0]}}function x0(s){var n,a;let u=s.left,f=s.top,b=s.right-u,v=s.bottom-f;const w=(n=s.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",k=(a=s.image.textFitHeight)!==null&&a!==void 0?a:"stretchOrShrink",P=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(k==="proportional"){if(w==="stretchOnly"&&b/v<P||w==="proportional"){const E=Math.ceil(v*P);u*=E/b,b=E}}else if(w==="proportional"&&k==="stretchOnly"&&P!==0&&b/v>P){const E=Math.ceil(b/P);f*=E/v,v=E}return{x1:u,y1:f,x2:u+b,y2:f+v}}function w0(s,n,a,u,f,b){const v=s.image;let w;if(v.content){const Y=v.content,ie=v.pixelRatio||1;w=[Y[0]/ie,Y[1]/ie,v.displaySize[0]-Y[2]/ie,v.displaySize[1]-Y[3]/ie]}const k=n.left*b,P=n.right*b;let E,L,N,V;a==="width"||a==="both"?(V=f[0]+k-u[3],L=f[0]+P+u[1]):(V=f[0]+(k+P-v.displaySize[0])/2,L=V+v.displaySize[0]);const U=n.top*b,G=n.bottom*b;return a==="height"||a==="both"?(E=f[1]+U-u[0],N=f[1]+G+u[2]):(E=f[1]+(U+G-v.displaySize[1])/2,N=E+v.displaySize[1]),{image:v,top:E,right:L,bottom:N,left:V,collisionPadding:w}}const md=255,Ho=128,la=md*Ho;function C0(s,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new Jr(s+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:f}=a;let b=0;for(;b<u.length&&u[b]<=s;)b++;b=Math.max(0,b-1);let v=b;for(;v<u.length&&u[v]<s+1;)v++;v=Math.min(u.length-1,v);const w=u[b],k=u[v];return a.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:k,interpolationType:f}:{kind:"camera",minZoom:w,maxZoom:k,minSize:a.evaluate(new Jr(w)),maxSize:a.evaluate(new Jr(k)),interpolationType:f}}}function eg(s,n,a){let u="never";const f=s.get(n);return f?u=f:s.get(a)&&(u="always"),u}const hS=ud.VectorTileFeature.types,fS=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Of(s,n,a,u,f,b,v,w,k,P,E,L,N){const V=w?Math.min(la,Math.round(w[0])):0,U=w?Math.min(la,Math.round(w[1])):0;s.emplaceBack(n,a,Math.round(32*u),Math.round(32*f),b,v,(V<<1)+(k?1:0),U,16*P,16*E,256*L,256*N)}function tg(s,n,a){s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a)}function pS(s){for(const n of s.sections)if(yf(n.text))return!0;return!1}class rg{constructor(n){this.layoutVertexArray=new Re,this.indexArray=new gt,this.programConfigurations=n,this.segments=new Ot,this.dynamicLayoutVertexArray=new ze,this.opacityVertexArray=new Ge,this.hasVisibleVertices=!1,this.placedSymbolArray=new T}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,u,f){this.isEmpty()||(u&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,HC.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,qC.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,fS,!0),this.opacityVertexBuffer.itemSize=1),(u||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ct("SymbolBuffers",rg);class ng{constructor(n,a,u){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new u,this.segments=new Ot,this.collisionVertexArray=new Ue}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,KC.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ct("CollisionBuffers",ng);class wc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(v=>v.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=C0(this.zoom,a["text-size"]),this.iconSizeData=C0(this.zoom,a["icon-size"]);const u=this.layers[0].layout,f=u.get("symbol-sort-key"),b=u.get("symbol-z-order");this.canOverlap=eg(u,"text-overlap","text-allow-overlap")!=="never"||eg(u,"icon-overlap","icon-allow-overlap")!=="never"||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(v=>m.ag[v])),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=n.sourceID}createArrays(){this.text=new rg(new Cs(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new rg(new Cs(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new B,this.lineVertexArray=new F,this.symbolInstances=new R,this.textAnchorOffsets=new W}calculateGlyphDependencies(n,a,u,f,b){for(let v=0;v<n.length;v++)if(a[n.charCodeAt(v)]=!0,(u||f)&&b){const w=fd[n.charAt(v)];w&&(a[w.charCodeAt(0)]=!0)}}populate(n,a,u){const f=this.layers[0],b=f.layout,v=b.get("text-font"),w=b.get("text-field"),k=b.get("icon-image"),P=(w.value.kind!=="constant"||w.value.value instanceof Vn&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),E=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,L=b.get("symbol-sort-key");if(this.features=[],!P&&!E)return;const N=a.iconDependencies,V=a.glyphDependencies,U=a.availableImages,G=new Jr(this.zoom);for(const{feature:Y,id:ie,index:be,sourceLayerIndex:le}of n){const j=f._featureFilter.needGeometry,K=xi(Y,j);if(!f._featureFilter.filter(G,K,u))continue;let de,De;if(j||(K.geometry=Ss(Y)),P){const Fe=f.getValueAndResolveTokens("text-field",K,u,U),je=Vn.factory(Fe),dt=this.hasRTLText=this.hasRTLText||pS(je);(!dt||Go.getRTLTextPluginStatus()==="unavailable"||dt&&Go.isParsed())&&(de=XC(je,f,K))}if(E){const Fe=f.getValueAndResolveTokens("icon-image",K,u,U);De=Fe instanceof ii?Fe:ii.fromString(Fe)}if(!de&&!De)continue;const rt=this.sortFeaturesByKey?L.evaluate(K,{},u):void 0;if(this.features.push({id:ie,text:de,icon:De,index:be,sourceLayerIndex:le,geometry:K.geometry,properties:Y.properties,type:hS[Y.type],sortKey:rt}),De&&(N[De.name]=!0),de){const Fe=v.evaluate(K,{},u).join(","),je=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.ag.vertical)>=0;for(const dt of de.sections)if(dt.image)N[dt.image.name]=!0;else{const at=rc(de.toString()),ht=dt.fontStack||Fe,Ke=V[ht]=V[ht]||{};this.calculateGlyphDependencies(dt.text,Ke,je,this.allowVerticalPlacement,at)}}}b.get("symbol-placement")==="line"&&(this.features=function(Y){const ie={},be={},le=[];let j=0;function K(Fe){le.push(Y[Fe]),j++}function de(Fe,je,dt){const at=be[Fe];return delete be[Fe],be[je]=at,le[at].geometry[0].pop(),le[at].geometry[0]=le[at].geometry[0].concat(dt[0]),at}function De(Fe,je,dt){const at=ie[je];return delete ie[je],ie[Fe]=at,le[at].geometry[0].shift(),le[at].geometry[0]=dt[0].concat(le[at].geometry[0]),at}function rt(Fe,je,dt){const at=dt?je[0][je[0].length-1]:je[0][0];return`${Fe}:${at.x}:${at.y}`}for(let Fe=0;Fe<Y.length;Fe++){const je=Y[Fe],dt=je.geometry,at=je.text?je.text.toString():null;if(!at){K(Fe);continue}const ht=rt(at,dt),Ke=rt(at,dt,!0);if(ht in be&&Ke in ie&&be[ht]!==ie[Ke]){const St=De(ht,Ke,dt),Ft=de(ht,Ke,le[St].geometry);delete ie[ht],delete be[Ke],be[rt(at,le[Ft].geometry,!0)]=Ft,le[St].geometry=null}else ht in be?de(ht,Ke,dt):Ke in ie?De(ht,Ke,dt):(K(Fe),ie[ht]=j-1,be[Ke]=j-1)}return le.filter(Fe=>Fe.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Y,ie)=>Y.sortKey-ie.sortKey)}update(n,a,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,u),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const u=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(a[n.segment+1]),b=n.dist(a[n.segment]);const v={};for(let w=n.segment+1;w<a.length;w++)v[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:f},w<a.length-1&&(f+=a[w+1].dist(a[w]));for(let w=n.segment||0;w>=0;w--)v[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:b},w>0&&(b+=a[w-1].dist(a[w]));for(let w=0;w<a.length;w++){const k=v[w];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(n,a,u,f,b,v,w,k,P,E,L,N){const V=n.indexArray,U=n.layoutVertexArray,G=n.segments.prepareSegment(4*a.length,U,V,this.canOverlap?v.sortKey:void 0),Y=this.glyphOffsetArray.length,ie=G.vertexLength,be=this.allowVerticalPlacement&&w===m.ag.vertical?Math.PI/2:0,le=v.text&&v.text.sections;for(let j=0;j<a.length;j++){const{tl:K,tr:de,bl:De,br:rt,tex:Fe,pixelOffsetTL:je,pixelOffsetBR:dt,minFontScaleX:at,minFontScaleY:ht,glyphOffset:Ke,isSDF:St,sectionIndex:Ft}=a[j],$t=G.vertexLength,Et=Ke[1];Of(U,k.x,k.y,K.x,Et+K.y,Fe.x,Fe.y,u,St,je.x,je.y,at,ht),Of(U,k.x,k.y,de.x,Et+de.y,Fe.x+Fe.w,Fe.y,u,St,dt.x,je.y,at,ht),Of(U,k.x,k.y,De.x,Et+De.y,Fe.x,Fe.y+Fe.h,u,St,je.x,dt.y,at,ht),Of(U,k.x,k.y,rt.x,Et+rt.y,Fe.x+Fe.w,Fe.y+Fe.h,u,St,dt.x,dt.y,at,ht),tg(n.dynamicLayoutVertexArray,k,be),V.emplaceBack($t,$t+2,$t+1),V.emplaceBack($t+1,$t+2,$t+3),G.vertexLength+=4,G.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ke[0]),j!==a.length-1&&Ft===a[j+1].sectionIndex||n.programConfigurations.populatePaintArrays(U.length,v,v.index,{},N,le&&le[Ft])}n.placedSymbolArray.emplaceBack(k.x,k.y,Y,this.glyphOffsetArray.length-Y,ie,P,E,k.segment,u?u[0]:0,u?u[1]:0,f[0],f[1],w,0,!1,0,L)}_addCollisionDebugVertex(n,a,u,f,b,v){return a.emplaceBack(0,0),n.emplaceBack(u.x,u.y,f,b,Math.round(v.x),Math.round(v.y))}addCollisionDebugVertices(n,a,u,f,b,v,w){const k=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),P=k.vertexLength,E=b.layoutVertexArray,L=b.collisionVertexArray,N=w.anchorX,V=w.anchorY;this._addCollisionDebugVertex(E,L,v,N,V,new H(n,a)),this._addCollisionDebugVertex(E,L,v,N,V,new H(u,a)),this._addCollisionDebugVertex(E,L,v,N,V,new H(u,f)),this._addCollisionDebugVertex(E,L,v,N,V,new H(n,f)),k.vertexLength+=4;const U=b.indexArray;U.emplaceBack(P,P+1),U.emplaceBack(P+1,P+2),U.emplaceBack(P+2,P+3),U.emplaceBack(P+3,P),k.primitiveLength+=4}addDebugCollisionBoxes(n,a,u,f){for(let b=n;b<a;b++){const v=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,f?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,u)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ng(qe,u0.members,pt),this.iconCollisionBox=new ng(qe,u0.members,pt);for(let n=0;n<this.symbolInstances.length;n++){const a=this.symbolInstances.get(n);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(n,a,u,f,b,v,w,k,P){const E={};for(let L=a;L<u;L++){const N=n.get(L);E.textBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},E.textFeatureIndex=N.featureIndex;break}for(let L=f;L<b;L++){const N=n.get(L);E.verticalTextBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},E.verticalTextFeatureIndex=N.featureIndex;break}for(let L=v;L<w;L++){const N=n.get(L);E.iconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},E.iconFeatureIndex=N.featureIndex;break}for(let L=k;L<P;L++){const N=n.get(L);E.verticalIconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},E.verticalIconFeatureIndex=N.featureIndex;break}return E}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const u=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const u=n.placedSymbolArray.get(a),f=u.vertexStartIndex+4*u.numGlyphs;for(let b=u.vertexStartIndex;b<f;b+=4)n.indexArray.emplaceBack(b,b+2,b+1),n.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),u=Math.cos(n),f=[],b=[],v=[];for(let w=0;w<this.symbolInstances.length;++w){v.push(w);const k=this.symbolInstances.get(w);f.push(0|Math.round(a*k.anchorX+u*k.anchorY)),b.push(k.featureIndex)}return v.sort((w,k)=>f[w]-f[k]||b[k]-b[w]),v}addToSortKeyRanges(n,a){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===a?u.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const u=this.symbolInstances.get(a);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((f,b,v)=>{f>=0&&v.indexOf(f)===b&&this.addIndicesForPlacedSymbol(this.text,f)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let S0,k0;Ct("SymbolBucket",wc,{omit:["layers","collisionBoxArray","features","compareText"]}),wc.MAX_GLYPHS=65535,wc.addDynamicAttributes=tg;var ig={get paint(){return k0=k0||new fi({"icon-opacity":new jt($.paint_symbol["icon-opacity"]),"icon-color":new jt($.paint_symbol["icon-color"]),"icon-halo-color":new jt($.paint_symbol["icon-halo-color"]),"icon-halo-width":new jt($.paint_symbol["icon-halo-width"]),"icon-halo-blur":new jt($.paint_symbol["icon-halo-blur"]),"icon-translate":new Dt($.paint_symbol["icon-translate"]),"icon-translate-anchor":new Dt($.paint_symbol["icon-translate-anchor"]),"text-opacity":new jt($.paint_symbol["text-opacity"]),"text-color":new jt($.paint_symbol["text-color"],{runtimeType:er,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new jt($.paint_symbol["text-halo-color"]),"text-halo-width":new jt($.paint_symbol["text-halo-width"]),"text-halo-blur":new jt($.paint_symbol["text-halo-blur"]),"text-translate":new Dt($.paint_symbol["text-translate"]),"text-translate-anchor":new Dt($.paint_symbol["text-translate-anchor"])})},get layout(){return S0=S0||new fi({"symbol-placement":new Dt($.layout_symbol["symbol-placement"]),"symbol-spacing":new Dt($.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Dt($.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new jt($.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Dt($.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Dt($.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Dt($.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Dt($.layout_symbol["icon-ignore-placement"]),"icon-optional":new Dt($.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Dt($.layout_symbol["icon-rotation-alignment"]),"icon-size":new jt($.layout_symbol["icon-size"]),"icon-text-fit":new Dt($.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Dt($.layout_symbol["icon-text-fit-padding"]),"icon-image":new jt($.layout_symbol["icon-image"]),"icon-rotate":new jt($.layout_symbol["icon-rotate"]),"icon-padding":new jt($.layout_symbol["icon-padding"]),"icon-keep-upright":new Dt($.layout_symbol["icon-keep-upright"]),"icon-offset":new jt($.layout_symbol["icon-offset"]),"icon-anchor":new jt($.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Dt($.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Dt($.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Dt($.layout_symbol["text-rotation-alignment"]),"text-field":new jt($.layout_symbol["text-field"]),"text-font":new jt($.layout_symbol["text-font"]),"text-size":new jt($.layout_symbol["text-size"]),"text-max-width":new jt($.layout_symbol["text-max-width"]),"text-line-height":new Dt($.layout_symbol["text-line-height"]),"text-letter-spacing":new jt($.layout_symbol["text-letter-spacing"]),"text-justify":new jt($.layout_symbol["text-justify"]),"text-radial-offset":new jt($.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Dt($.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new jt($.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new jt($.layout_symbol["text-anchor"]),"text-max-angle":new Dt($.layout_symbol["text-max-angle"]),"text-writing-mode":new Dt($.layout_symbol["text-writing-mode"]),"text-rotate":new jt($.layout_symbol["text-rotate"]),"text-padding":new Dt($.layout_symbol["text-padding"]),"text-keep-upright":new Dt($.layout_symbol["text-keep-upright"]),"text-transform":new jt($.layout_symbol["text-transform"]),"text-offset":new jt($.layout_symbol["text-offset"]),"text-allow-overlap":new Dt($.layout_symbol["text-allow-overlap"]),"text-overlap":new Dt($.layout_symbol["text-overlap"]),"text-ignore-placement":new Dt($.layout_symbol["text-ignore-placement"]),"text-optional":new Dt($.layout_symbol["text-optional"])})}};class T0{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Zt,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ct("FormatSectionOverride",T0,{omit:["defaultValue"]});class zf extends lo{constructor(n){super(n,ig)}recalculate(n,a){if(super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const u=this.layout.get("text-writing-mode");if(u){const f=[];for(const b of u)f.indexOf(b)<0&&f.push(b);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,a,u,f){const b=this.layout.get(n).evaluate(a,{},u,f),v=this._unevaluatedLayout._values[n];return v.isDataDriven()||ql(v.value)||!b?b:function(w,k){return k.replace(/{([^{}]+)}/g,(P,E)=>w&&E in w?String(w[E]):"")}(a.properties,b)}createBucket(n){return new wc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of ig.paint.overridableProperties){if(!zf.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),u=new T0(a),f=new Iu(u,a.property.specification);let b=null;b=a.value.kind==="constant"||a.value.kind==="source"?new Kl("source",f):new Mu("composite",f,a.value.zoomStops),this.paint._values[n]=new Ni(a.property,b,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,u){return!(!this.layout||a.isDataDriven()||u.isDataDriven())&&zf.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const u=n.get("text-field"),f=ig.paint.properties[a];let b=!1;const v=w=>{for(const k of w)if(f.overrides&&f.overrides.hasOverride(k))return void(b=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Vn)v(u.value.value.sections);else if(u.value.kind==="source"){const w=P=>{b||(P instanceof Oi&&bn(P.value)===yn?v(P.value.sections):P instanceof ls?v(P.sections):P.eachChild(w))},k=u.value;k._styleExpression&&w(k._styleExpression.expression)}return b}}let P0;var mS={get paint(){return P0=P0||new fi({"background-color":new Dt($.paint_background["background-color"]),"background-pattern":new sc($.paint_background["background-pattern"]),"background-opacity":new Dt($.paint_background["background-opacity"])})}};class gS extends lo{constructor(n){super(n,mS)}}let I0;var _S={get paint(){return I0=I0||new fi({"raster-opacity":new Dt($.paint_raster["raster-opacity"]),"raster-hue-rotate":new Dt($.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Dt($.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Dt($.paint_raster["raster-brightness-max"]),"raster-saturation":new Dt($.paint_raster["raster-saturation"]),"raster-contrast":new Dt($.paint_raster["raster-contrast"]),"raster-resampling":new Dt($.paint_raster["raster-resampling"]),"raster-fade-duration":new Dt($.paint_raster["raster-fade-duration"])})}};class yS extends lo{constructor(n){super(n,_S)}}class bS extends lo{constructor(n){super(n,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class vS{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const xS={once:!0},og=63710088e-1;class ca{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ca(Jt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,u=this.lat*a,f=n.lat*a,b=Math.sin(u)*Math.sin(f)+Math.cos(u)*Math.cos(f)*Math.cos((n.lng-this.lng)*a);return og*Math.acos(Math.min(b,1))}static convert(n){if(n instanceof ca)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new ca(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new ca(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const M0=2*Math.PI*og;function E0(s){return M0*Math.cos(s*Math.PI/180)}function A0(s){return(180+s)/360}function L0(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function R0(s,n){return s/E0(n)}function sg(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function D0(s,n){return s*E0(sg(n))}class gd{constructor(n,a,u=0){this.x=+n,this.y=+a,this.z=+u}static fromLngLat(n,a=0){const u=ca.convert(n);return new gd(A0(u.lng),L0(u.lat),R0(a,u.lat))}toLngLat(){return new ca(360*this.x-180,sg(this.y))}toAltitude(){return D0(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/M0*(n=sg(this.y),1/Math.cos(n*Math.PI/180));var n}}function O0(s,n,a){var u=2*Math.PI*6378137/256/Math.pow(2,a);return[s*u-2*Math.PI*6378137/2,n*u-2*Math.PI*6378137/2]}class ag{constructor(n,a,u){if(!function(f,b,v){return!(f<0||f>25||v<0||v>=Math.pow(2,f)||b<0||b>=Math.pow(2,f))}(n,a,u))throw new Error(`x=${a}, y=${u}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=a,this.y=u,this.key=Cc(0,n,n,a,u)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a,u){const f=(v=this.y,w=this.z,k=O0(256*(b=this.x),256*(v=Math.pow(2,w)-v-1),w),P=O0(256*(b+1),256*(v+1),w),k[0]+","+k[1]+","+P[0]+","+P[1]);var b,v,w,k,P;const E=function(L,N,V){let U,G="";for(let Y=L;Y>0;Y--)U=1<<Y-1,G+=(N&U?1:0)+(V&U?2:0);return G}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,E).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){const a=this.z-n.z;return a>0&&n.x===this.x>>a&&n.y===this.y>>a}getTilePoint(n){const a=Math.pow(2,this.z);return new H((n.x*a-this.x)*vt,(n.y*a-this.y)*vt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class z0{constructor(n,a){this.wrap=n,this.canonical=a,this.key=Cc(n,a.z,a.z,a.x,a.y)}}class Qi{constructor(n,a,u,f,b){if(this.terrainRttPosMatrix32f=null,n<u)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${u}`);this.overscaledZ=n,this.wrap=a,this.canonical=new ag(u,+f,+b),this.key=Cc(a,n,u,f,b)}clone(){return new Qi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-n;return n>this.canonical.z?new Qi(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Qi(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-n;return n>this.canonical.z?Cc(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y):Cc(this.wrap*+a,n,n,this.canonical.x>>u,this.canonical.y>>u)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new Qi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,u=2*this.canonical.x,f=2*this.canonical.y;return[new Qi(a,this.wrap,a,u,f),new Qi(a,this.wrap,a,u+1,f),new Qi(a,this.wrap,a,u,f+1),new Qi(a,this.wrap,a,u+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Qi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Qi(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new z0(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new gd(n.x-this.wrap,n.y))}}function Cc(s,n,a,u,f){(s*=2)<0&&(s=-1*s-1);const b=1<<a;return(b*b*s+b*f+u).toString(36)+a.toString(36)+n.toString(36)}Ct("CanonicalTileID",ag),Ct("OverscaledTileID",Qi,{omit:["terrainRttPosMatrix32f"]});class $0{constructor(n,a,u,f=1,b=1,v=1,w=0){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(u&&!["mapbox","terrarium","custom"].includes(u))return void Dr(`"${u}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const k=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),u){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=b,this.blueFactor=v,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let P=0;P<k;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(k,P)]=this.data[this._idx(k-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,k)]=this.data[this._idx(P,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<k;P++)for(let E=0;E<k;E++){const L=this.get(P,E);L>this.max&&(this.max=L),L<this.min&&(this.min=L)}}get(n,a){const u=new Uint8Array(this.data.buffer),f=4*this._idx(n,a);return this.unpack(u[f],u[f+1],u[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}unpack(n,a,u){return n*this.redFactor+a*this.greenFactor+u*this.blueFactor-this.baseShift}getPixels(){return new Ji({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,a,u){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=a*this.dim,b=a*this.dim+this.dim,v=u*this.dim,w=u*this.dim+this.dim;switch(a){case-1:f=b-1;break;case 1:b=f+1}switch(u){case-1:v=w-1;break;case 1:w=v+1}const k=-a*this.dim,P=-u*this.dim;for(let E=v;E<w;E++)for(let L=f;L<b;L++)this.data[this._idx(L,E)]=n.data[this._idx(L+k,E+P)]}}Ct("DEMData",$0);class B0{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const u=n[a];this._stringToNumber[u]=a,this._numberToString[a]=u}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class F0{constructor(n,a,u,f,b){this.type="Feature",this._vectorTileFeature=n,n._z=a,n._x=u,n._y=f,this.properties=n.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(n[a]=this[a]);return n}}class N0{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Wa(vt,16,0),this.grid3D=new Wa(vt,16,0),this.featureIndexArray=new Q,this.promoteId=a}insert(n,a,u,f,b,v){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,f,b);const k=v?this.grid3D:this.grid;for(let P=0;P<a.length;P++){const E=a[P],L=[1/0,1/0,-1/0,-1/0];for(let N=0;N<E.length;N++){const V=E[N];L[0]=Math.min(L[0],V.x),L[1]=Math.min(L[1],V.y),L[2]=Math.max(L[2],V.x),L[3]=Math.max(L[3],V.y)}L[0]<vt&&L[1]<vt&&L[2]>=0&&L[3]>=0&&k.insert(w,L[0],L[1],L[2],L[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ud.VectorTile(new Km(this.rawTileData)).layers,this.sourceLayerCoder=new B0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,a,u,f){this.loadVTLayers();const b=n.params,v=vt/n.tileSize/n.scale,w=Jl(b.filter),k=n.queryGeometry,P=n.queryPadding*v,E=V0(k),L=this.grid.query(E.minX-P,E.minY-P,E.maxX+P,E.maxY+P),N=V0(n.cameraQueryGeometry),V=this.grid3D.query(N.minX-P,N.minY-P,N.maxX+P,N.maxY+P,(Y,ie,be,le)=>function(j,K,de,De,rt){for(const je of j)if(K<=je.x&&de<=je.y&&De>=je.x&&rt>=je.y)return!0;const Fe=[new H(K,de),new H(K,rt),new H(De,rt),new H(De,de)];if(j.length>2){for(const je of Fe)if(_c(j,je))return!0}for(let je=0;je<j.length-1;je++)if(cC(j[je],j[je+1],Fe))return!0;return!1}(n.cameraQueryGeometry,Y-P,ie-P,be+P,le+P));for(const Y of V)L.push(Y);L.sort(wS);const U={};let G;for(let Y=0;Y<L.length;Y++){const ie=L[Y];if(ie===G)continue;G=ie;const be=this.featureIndexArray.get(ie);let le=null;this.loadMatchingFeature(U,be.bucketIndex,be.sourceLayerIndex,be.featureIndex,w,b.layers,b.availableImages,a,u,f,(j,K,de)=>(le||(le=Ss(j)),K.queryIntersectsFeature({queryGeometry:k,feature:j,featureState:de,geometry:le,zoom:this.z,transform:n.transform,pixelsToTileUnits:v,pixelPosMatrix:n.pixelPosMatrix})))}return U}loadMatchingFeature(n,a,u,f,b,v,w,k,P,E,L){const N=this.bucketLayerIDs[a];if(v&&!N.some(Y=>v.has(Y)))return;const V=this.sourceLayerCoder.decode(u),U=this.vtLayers[V].feature(f);if(b.needGeometry){const Y=xi(U,!0);if(!b.filter(new Jr(this.tileID.overscaledZ),Y,this.tileID.canonical))return}else if(!b.filter(new Jr(this.tileID.overscaledZ),U))return;const G=this.getId(U,V);for(let Y=0;Y<N.length;Y++){const ie=N[Y];if(v&&!v.has(ie))continue;const be=k[ie];if(!be)continue;let le={};G&&E&&(le=E.getState(be.sourceLayer||"_geojsonTileLayer",G));const j=Qt({},P[ie]);j.paint=j0(j.paint,be.paint,U,le,w),j.layout=j0(j.layout,be.layout,U,le,w);const K=!L||L(U,be,le);if(!K)continue;const de=new F0(U,this.z,this.x,this.y,G);de.layer=j;let De=n[ie];De===void 0&&(De=n[ie]=[]),De.push({featureIndex:f,feature:de,intersectionZ:K})}}lookupSymbolFeatures(n,a,u,f,b,v,w,k){const P={};this.loadVTLayers();const E=Jl(b);for(const L of n)this.loadMatchingFeature(P,u,f,L,E,v,w,k,a);return P}hasLayer(n){for(const a of this.bucketLayerIDs)for(const u of a)if(n===u)return!0;return!1}getId(n,a){var u;let f=n.id;return this.promoteId&&(f=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof f=="boolean"&&(f=Number(f)),f===void 0&&(!((u=n.properties)===null||u===void 0)&&u.cluster)&&this.promoteId&&(f=Number(n.properties.cluster_id))),f}}function j0(s,n,a,u,f){return Yr(s,(b,v)=>{const w=n instanceof oc?n.get(v):null;return w&&w.evaluate?w.evaluate(a,u,f):w})}function V0(s){let n=1/0,a=1/0,u=-1/0,f=-1/0;for(const b of s)n=Math.min(n,b.x),a=Math.min(a,b.y),u=Math.max(u,b.x),f=Math.max(f,b.y);return{minX:n,minY:a,maxX:u,maxY:f}}function wS(s,n){return n-s}function U0(s,n,a,u,f){const b=[];for(let v=0;v<s.length;v++){const w=s[v];let k;for(let P=0;P<w.length-1;P++){let E=w[P],L=w[P+1];E.x<n&&L.x<n||(E.x<n?E=new H(n,E.y+(n-E.x)/(L.x-E.x)*(L.y-E.y))._round():L.x<n&&(L=new H(n,E.y+(n-E.x)/(L.x-E.x)*(L.y-E.y))._round()),E.y<a&&L.y<a||(E.y<a?E=new H(E.x+(a-E.y)/(L.y-E.y)*(L.x-E.x),a)._round():L.y<a&&(L=new H(E.x+(a-E.y)/(L.y-E.y)*(L.x-E.x),a)._round()),E.x>=u&&L.x>=u||(E.x>=u?E=new H(u,E.y+(u-E.x)/(L.x-E.x)*(L.y-E.y))._round():L.x>=u&&(L=new H(u,E.y+(u-E.x)/(L.x-E.x)*(L.y-E.y))._round()),E.y>=f&&L.y>=f||(E.y>=f?E=new H(E.x+(f-E.y)/(L.y-E.y)*(L.x-E.x),f)._round():L.y>=f&&(L=new H(E.x+(f-E.y)/(L.y-E.y)*(L.x-E.x),f)._round()),k&&E.equals(k[k.length-1])||(k=[E],b.push(k)),k.push(L)))))}}return b}Ct("FeatureIndex",N0,{omit:["rawTileData","sourceLayerCoder"]});class ua extends H{constructor(n,a,u,f){super(n,a),this.angle=u,f!==void 0&&(this.segment=f)}clone(){return new ua(this.x,this.y,this.angle,this.segment)}}function Z0(s,n,a,u,f){if(n.segment===void 0||a===0)return!0;let b=n,v=n.segment+1,w=0;for(;w>-a/2;){if(v--,v<0)return!1;w-=s[v].dist(b),b=s[v]}w+=s[v].dist(s[v+1]),v++;const k=[];let P=0;for(;w<a/2;){const E=s[v],L=s[v+1];if(!L)return!1;let N=s[v-1].angleTo(E)-E.angleTo(L);for(N=Math.abs((N+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:w,angleDelta:N}),P+=N;w-k[0].distance>u;)P-=k.shift().angleDelta;if(P>f)return!1;v++,w+=E.dist(L)}return!0}function G0(s){let n=0;for(let a=0;a<s.length-1;a++)n+=s[a].dist(s[a+1]);return n}function W0(s,n,a){return s?.6*n*a:0}function H0(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function CS(s,n,a,u,f,b){const v=W0(a,f,b),w=H0(a,u)*b;let k=0;const P=G0(s)/2;for(let E=0;E<s.length-1;E++){const L=s[E],N=s[E+1],V=L.dist(N);if(k+V>P){const U=(P-k)/V,G=bi.number(L.x,N.x,U),Y=bi.number(L.y,N.y,U),ie=new ua(G,Y,N.angleTo(L),E);return ie._round(),!v||Z0(s,ie,w,v,n)?ie:void 0}k+=V}}function SS(s,n,a,u,f,b,v,w,k){const P=W0(u,b,v),E=H0(u,f),L=E*v,N=s[0].x===0||s[0].x===k||s[0].y===0||s[0].y===k;return n-L<n/4&&(n=L+n/4),q0(s,N?n/2*w%n:(E/2+2*b)*v*w%n,n,P,a,L,N,!1,k)}function q0(s,n,a,u,f,b,v,w,k){const P=b/2,E=G0(s);let L=0,N=n-a,V=[];for(let U=0;U<s.length-1;U++){const G=s[U],Y=s[U+1],ie=G.dist(Y),be=Y.angleTo(G);for(;N+a<L+ie;){N+=a;const le=(N-L)/ie,j=bi.number(G.x,Y.x,le),K=bi.number(G.y,Y.y,le);if(j>=0&&j<k&&K>=0&&K<k&&N-P>=0&&N+P<=E){const de=new ua(j,K,be,U);de._round(),u&&!Z0(s,de,b,u,f)||V.push(de)}}L+=ie}return w||V.length||v||(V=q0(s,L/2,a,u,f,b,v,!0,k)),V}Ct("Anchor",ua);const _d=wi;function K0(s,n,a,u){const f=[],b=s.image,v=b.pixelRatio,w=b.paddedRect.w-2*_d,k=b.paddedRect.h-2*_d;let P={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const E=b.stretchX||[[0,w]],L=b.stretchY||[[0,k]],N=(Ke,St)=>Ke+St[1]-St[0],V=E.reduce(N,0),U=L.reduce(N,0),G=w-V,Y=k-U;let ie=0,be=V,le=0,j=U,K=0,de=G,De=0,rt=Y;if(b.content&&u){const Ke=b.content,St=Ke[2]-Ke[0],Ft=Ke[3]-Ke[1];(b.textFitWidth||b.textFitHeight)&&(P=x0(s)),ie=$f(E,0,Ke[0]),le=$f(L,0,Ke[1]),be=$f(E,Ke[0],Ke[2]),j=$f(L,Ke[1],Ke[3]),K=Ke[0]-ie,De=Ke[1]-le,de=St-be,rt=Ft-j}const Fe=P.x1,je=P.y1,dt=P.x2-Fe,at=P.y2-je,ht=(Ke,St,Ft,$t)=>{const Et=Bf(Ke.stretch-ie,be,dt,Fe),or=Ff(Ke.fixed-K,de,Ke.stretch,V),cn=Bf(St.stretch-le,j,at,je),In=Ff(St.fixed-De,rt,St.stretch,U),ei=Bf(Ft.stretch-ie,be,dt,Fe),eo=Ff(Ft.fixed-K,de,Ft.stretch,V),Ci=Bf($t.stretch-le,j,at,je),Zn=Ff($t.fixed-De,rt,$t.stretch,U),rn=new H(Et,cn),Bn=new H(ei,cn),Gn=new H(ei,Ci),Wn=new H(Et,Ci),pi=new H(or/v,In/v),to=new H(eo/v,Zn/v),Fn=n*Math.PI/180;if(Fn){const Nn=Math.sin(Fn),jn=Math.cos(Fn),vn=[jn,-Nn,Nn,jn];rn._matMult(vn),Bn._matMult(vn),Wn._matMult(vn),Gn._matMult(vn)}const Si=Ke.stretch+Ke.fixed,Mn=St.stretch+St.fixed;return{tl:rn,tr:Bn,bl:Wn,br:Gn,tex:{x:b.paddedRect.x+_d+Si,y:b.paddedRect.y+_d+Mn,w:Ft.stretch+Ft.fixed-Si,h:$t.stretch+$t.fixed-Mn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:pi,pixelOffsetBR:to,minFontScaleX:de/v/dt,minFontScaleY:rt/v/at,isSDF:a}};if(u&&(b.stretchX||b.stretchY)){const Ke=Y0(E,G,V),St=Y0(L,Y,U);for(let Ft=0;Ft<Ke.length-1;Ft++){const $t=Ke[Ft],Et=Ke[Ft+1];for(let or=0;or<St.length-1;or++)f.push(ht($t,St[or],Et,St[or+1]))}}else f.push(ht({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:k+1}));return f}function $f(s,n,a){let u=0;for(const f of s)u+=Math.max(n,Math.min(a,f[1]))-Math.max(n,Math.min(a,f[0]));return u}function Y0(s,n,a){const u=[{fixed:-1,stretch:0}];for(const[f,b]of s){const v=u[u.length-1];u.push({fixed:f-v.stretch,stretch:v.stretch}),u.push({fixed:f-v.stretch,stretch:v.stretch+(b-f)})}return u.push({fixed:n+_d,stretch:a}),u}function Bf(s,n,a,u){return s/n*a+u}function Ff(s,n,a,u){return s-n*a/u}class Nf{constructor(n,a,u,f,b,v,w,k,P,E){var L;if(this.boxStartIndex=n.length,P){let N=v.top,V=v.bottom;const U=v.collisionPadding;U&&(N-=U[1],V+=U[3]);let G=V-N;G>0&&(G=Math.max(10,G),this.circleDiameter=G)}else{const N=!((L=v.image)===null||L===void 0)&&L.content&&(v.image.textFitWidth||v.image.textFitHeight)?x0(v):{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom};N.y1=N.y1*w-k[0],N.y2=N.y2*w+k[2],N.x1=N.x1*w-k[3],N.x2=N.x2*w+k[1];const V=v.collisionPadding;if(V&&(N.x1-=V[0]*w,N.y1-=V[1]*w,N.x2+=V[2]*w,N.y2+=V[3]*w),E){const U=new H(N.x1,N.y1),G=new H(N.x2,N.y1),Y=new H(N.x1,N.y2),ie=new H(N.x2,N.y2),be=E*Math.PI/180;U._rotate(be),G._rotate(be),Y._rotate(be),ie._rotate(be),N.x1=Math.min(U.x,G.x,Y.x,ie.x),N.x2=Math.max(U.x,G.x,Y.x,ie.x),N.y1=Math.min(U.y,G.y,Y.y,ie.y),N.y2=Math.max(U.y,G.y,Y.y,ie.y)}n.emplaceBack(a.x,a.y,N.x1,N.y1,N.x2,N.y2,u,f,b)}this.boxEndIndex=n.length}}class kS{constructor(n=[],a=(u,f)=>u<f?-1:u>f?1:0){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:u}=this,f=a[n];for(;n>0;){const b=n-1>>1,v=a[b];if(u(f,v)>=0)break;a[n]=v,n=b}a[n]=f}_down(n){const{data:a,compare:u}=this,f=this.length>>1,b=a[n];for(;n<f;){let v=1+(n<<1);const w=v+1;if(w<this.length&&u(a[w],a[v])<0&&(v=w),u(a[v],b)>=0)break;a[n]=a[v],n=v}a[n]=b}}function TS(s,n=1,a=!1){let u=1/0,f=1/0,b=-1/0,v=-1/0;const w=s[0];for(let V=0;V<w.length;V++){const U=w[V];(!V||U.x<u)&&(u=U.x),(!V||U.y<f)&&(f=U.y),(!V||U.x>b)&&(b=U.x),(!V||U.y>v)&&(v=U.y)}const k=Math.min(b-u,v-f);let P=k/2;const E=new kS([],PS);if(k===0)return new H(u,f);for(let V=u;V<b;V+=k)for(let U=f;U<v;U+=k)E.push(new Sc(V+P,U+P,P,s));let L=function(V){let U=0,G=0,Y=0;const ie=V[0];for(let be=0,le=ie.length,j=le-1;be<le;j=be++){const K=ie[be],de=ie[j],De=K.x*de.y-de.x*K.y;G+=(K.x+de.x)*De,Y+=(K.y+de.y)*De,U+=3*De}return new Sc(G/U,Y/U,0,V)}(s),N=E.length;for(;E.length;){const V=E.pop();(V.d>L.d||!L.d)&&(L=V,a&&console.log("found best %d after %d probes",Math.round(1e4*V.d)/1e4,N)),V.max-L.d<=n||(P=V.h/2,E.push(new Sc(V.p.x-P,V.p.y-P,P,s)),E.push(new Sc(V.p.x+P,V.p.y-P,P,s)),E.push(new Sc(V.p.x-P,V.p.y+P,P,s)),E.push(new Sc(V.p.x+P,V.p.y+P,P,s)),N+=4)}return a&&(console.log(`num probes: ${N}`),console.log(`best distance: ${L.d}`)),L.p}function PS(s,n){return n.max-s.max}function Sc(s,n,a,u){this.p=new H(s,n),this.h=a,this.d=function(f,b){let v=!1,w=1/0;for(let k=0;k<b.length;k++){const P=b[k];for(let E=0,L=P.length,N=L-1;E<L;N=E++){const V=P[E],U=P[N];V.y>f.y!=U.y>f.y&&f.x<(U.x-V.x)*(f.y-V.y)/(U.y-V.y)+V.x&&(v=!v),w=Math.min(w,Ey(f,V,U))}}return(v?1:-1)*Math.sqrt(w)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}var Qn;m.ax=void 0,(Qn=m.ax||(m.ax={}))[Qn.center=1]="center",Qn[Qn.left=2]="left",Qn[Qn.right=3]="right",Qn[Qn.top=4]="top",Qn[Qn.bottom=5]="bottom",Qn[Qn["top-left"]=6]="top-left",Qn[Qn["top-right"]=7]="top-right",Qn[Qn["bottom-left"]=8]="bottom-left",Qn[Qn["bottom-right"]=9]="bottom-right";const da=7,lg=Number.POSITIVE_INFINITY;function X0(s,n){return n[1]!==lg?function(a,u,f){let b=0,v=0;switch(u=Math.abs(u),f=Math.abs(f),a){case"top-right":case"top-left":case"top":v=f-da;break;case"bottom-right":case"bottom-left":case"bottom":v=-f+da}switch(a){case"top-right":case"bottom-right":case"right":b=-u;break;case"top-left":case"bottom-left":case"left":b=u}return[b,v]}(s,n[0],n[1]):function(a,u){let f=0,b=0;u<0&&(u=0);const v=u/Math.SQRT2;switch(a){case"top-right":case"top-left":b=v-da;break;case"bottom-right":case"bottom-left":b=-v+da;break;case"bottom":b=-u+da;break;case"top":b=u-da}switch(a){case"top-right":case"bottom-right":f=-v;break;case"top-left":case"bottom-left":f=v;break;case"left":f=u;break;case"right":f=-u}return[f,b]}(s,n[0])}function J0(s,n,a){var u;const f=s.layout,b=(u=f.get("text-variable-anchor-offset"))===null||u===void 0?void 0:u.evaluate(n,{},a);if(b){const w=b.values,k=[];for(let P=0;P<w.length;P+=2){const E=k[P]=w[P],L=w[P+1].map(N=>N*Pn);E.startsWith("top")?L[1]-=da:E.startsWith("bottom")&&(L[1]+=da),k[P+1]=L}return new On(k)}const v=f.get("text-variable-anchor");if(v){let w;w=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},a)*Pn,lg]:f.get("text-offset").evaluate(n,{},a).map(P=>P*Pn);const k=[];for(const P of v)k.push(P,X0(P,w));return new On(k)}return null}function cg(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function IS(s,n,a,u,f,b,v,w,k,P,E,L){let N=b.textMaxSize.evaluate(n,{});N===void 0&&(N=v);const V=s.layers[0].layout,U=V.get("icon-offset").evaluate(n,{},E),G=eb(a.horizontal),Y=v/24,ie=s.tilePixelRatio*Y,be=s.tilePixelRatio*N/24,le=s.tilePixelRatio*w,j=s.tilePixelRatio*V.get("symbol-spacing"),K=V.get("text-padding")*s.tilePixelRatio,de=function(Ft,$t,Et,or=1){const cn=Ft.get("icon-padding").evaluate($t,{},Et),In=cn&&cn.values;return[In[0]*or,In[1]*or,In[2]*or,In[3]*or]}(V,n,E,s.tilePixelRatio),De=V.get("text-max-angle")/180*Math.PI,rt=V.get("text-rotation-alignment")!=="viewport"&&V.get("symbol-placement")!=="point",Fe=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",je=V.get("symbol-placement"),dt=j/2,at=V.get("icon-text-fit");let ht;u&&at!=="none"&&(s.allowVerticalPlacement&&a.vertical&&(ht=w0(u,a.vertical,at,V.get("icon-text-fit-padding"),U,Y)),G&&(u=w0(u,G,at,V.get("icon-text-fit-padding"),U,Y)));const Ke=E?L.line.getGranularityForZoomLevel(E.z):1,St=(Ft,$t)=>{$t.x<0||$t.x>=vt||$t.y<0||$t.y>=vt||function(Et,or,cn,In,ei,eo,Ci,Zn,rn,Bn,Gn,Wn,pi,to,Fn,Si,Mn,Nn,jn,vn,qr,So,kc,ko,AS){const Tc=Et.addToLineVertexArray(or,cn);let tl,Pc,Ic,Mc,ib=0,ob=0,sb=0,ab=0,_g=-1,yg=-1;const ks={};let lb=Sn("");if(Et.allowVerticalPlacement&&In.vertical){const oi=Zn.layout.get("text-rotate").evaluate(qr,{},ko)+90;Ic=new Nf(rn,or,Bn,Gn,Wn,In.vertical,pi,to,Fn,oi),Ci&&(Mc=new Nf(rn,or,Bn,Gn,Wn,Ci,Mn,Nn,Fn,oi))}if(ei){const oi=Zn.layout.get("icon-rotate").evaluate(qr,{}),ro=Zn.layout.get("icon-text-fit")!=="none",rl=K0(ei,oi,kc,ro),Po=Ci?K0(Ci,oi,kc,ro):void 0;Pc=new Nf(rn,or,Bn,Gn,Wn,ei,Mn,Nn,!1,oi),ib=4*rl.length;const nl=Et.iconSizeData;let qo=null;nl.kind==="source"?(qo=[Ho*Zn.layout.get("icon-size").evaluate(qr,{})],qo[0]>la&&Dr(`${Et.layerIds[0]}: Value for "icon-size" is >= ${md}. Reduce your "icon-size".`)):nl.kind==="composite"&&(qo=[Ho*So.compositeIconSizes[0].evaluate(qr,{},ko),Ho*So.compositeIconSizes[1].evaluate(qr,{},ko)],(qo[0]>la||qo[1]>la)&&Dr(`${Et.layerIds[0]}: Value for "icon-size" is >= ${md}. Reduce your "icon-size".`)),Et.addSymbols(Et.icon,rl,qo,vn,jn,qr,m.ag.none,or,Tc.lineStartIndex,Tc.lineLength,-1,ko),_g=Et.icon.placedSymbolArray.length-1,Po&&(ob=4*Po.length,Et.addSymbols(Et.icon,Po,qo,vn,jn,qr,m.ag.vertical,or,Tc.lineStartIndex,Tc.lineLength,-1,ko),yg=Et.icon.placedSymbolArray.length-1)}const cb=Object.keys(In.horizontal);for(const oi of cb){const ro=In.horizontal[oi];if(!tl){lb=Sn(ro.text);const Po=Zn.layout.get("text-rotate").evaluate(qr,{},ko);tl=new Nf(rn,or,Bn,Gn,Wn,ro,pi,to,Fn,Po)}const rl=ro.positionedLines.length===1;if(sb+=Q0(Et,or,ro,eo,Zn,Fn,qr,Si,Tc,In.vertical?m.ag.horizontal:m.ag.horizontalOnly,rl?cb:[oi],ks,_g,So,ko),rl)break}In.vertical&&(ab+=Q0(Et,or,In.vertical,eo,Zn,Fn,qr,Si,Tc,m.ag.vertical,["vertical"],ks,yg,So,ko));const LS=tl?tl.boxStartIndex:Et.collisionBoxArray.length,RS=tl?tl.boxEndIndex:Et.collisionBoxArray.length,DS=Ic?Ic.boxStartIndex:Et.collisionBoxArray.length,OS=Ic?Ic.boxEndIndex:Et.collisionBoxArray.length,zS=Pc?Pc.boxStartIndex:Et.collisionBoxArray.length,$S=Pc?Pc.boxEndIndex:Et.collisionBoxArray.length,BS=Mc?Mc.boxStartIndex:Et.collisionBoxArray.length,FS=Mc?Mc.boxEndIndex:Et.collisionBoxArray.length;let To=-1;const Vf=(oi,ro)=>oi&&oi.circleDiameter?Math.max(oi.circleDiameter,ro):ro;To=Vf(tl,To),To=Vf(Ic,To),To=Vf(Pc,To),To=Vf(Mc,To);const ub=To>-1?1:0;ub&&(To*=AS/Pn),Et.glyphOffsetArray.length>=wc.MAX_GLYPHS&&Dr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qr.sortKey!==void 0&&Et.addToSortKeyRanges(Et.symbolInstances.length,qr.sortKey);const NS=J0(Zn,qr,ko),[jS,VS]=function(oi,ro){const rl=oi.length,Po=ro==null?void 0:ro.values;if((Po==null?void 0:Po.length)>0)for(let nl=0;nl<Po.length;nl+=2){const qo=Po[nl+1];oi.emplaceBack(m.ax[Po[nl]],qo[0],qo[1])}return[rl,oi.length]}(Et.textAnchorOffsets,NS);Et.symbolInstances.emplaceBack(or.x,or.y,ks.right>=0?ks.right:-1,ks.center>=0?ks.center:-1,ks.left>=0?ks.left:-1,ks.vertical||-1,_g,yg,lb,LS,RS,DS,OS,zS,$S,BS,FS,Bn,sb,ab,ib,ob,ub,0,pi,To,jS,VS)}(s,$t,Ft,a,u,f,ht,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,ie,[K,K,K,K],rt,k,le,de,Fe,U,n,b,P,E,v)};if(je==="line")for(const Ft of U0(n.geometry,0,0,vt,vt)){const $t=el(Ft,Ke),Et=SS($t,j,De,a.vertical||G,u,24,be,s.overscaling,vt);for(const or of Et)G&&MS(s,G.text,dt,or)||St($t,or)}else if(je==="line-center"){for(const Ft of n.geometry)if(Ft.length>1){const $t=el(Ft,Ke),Et=CS($t,De,a.vertical||G,u,24,be);Et&&St($t,Et)}}else if(n.type==="Polygon")for(const Ft of $l(n.geometry,0)){const $t=TS(Ft,16);St(el(Ft[0],Ke,!0),new ua($t.x,$t.y,0))}else if(n.type==="LineString")for(const Ft of n.geometry){const $t=el(Ft,Ke);St($t,new ua($t[0].x,$t[0].y,0))}else if(n.type==="Point")for(const Ft of n.geometry)for(const $t of Ft)St([$t],new ua($t.x,$t.y,0))}function Q0(s,n,a,u,f,b,v,w,k,P,E,L,N,V,U){const G=function(be,le,j,K,de,De,rt,Fe){const je=K.layout.get("text-rotate").evaluate(De,{})*Math.PI/180,dt=[];for(const at of le.positionedLines)for(const ht of at.positionedGlyphs){if(!ht.rect)continue;const Ke=ht.rect||{};let St=rS+1,Ft=!0,$t=1,Et=0;const or=(de||Fe)&&ht.vertical,cn=ht.metrics.advance*ht.scale/2;if(Fe&&le.verticalizable&&(Et=at.lineOffset/2-(ht.imageName?-(Pn-ht.metrics.width*ht.scale)/2:(ht.scale-1)*Pn)),ht.imageName){const Nn=rt[ht.imageName];Ft=Nn.sdf,$t=Nn.pixelRatio,St=wi/$t}const In=de?[ht.x+cn,ht.y]:[0,0];let ei=de?[0,0]:[ht.x+cn+j[0],ht.y+j[1]-Et],eo=[0,0];or&&(eo=ei,ei=[0,0]);const Ci=ht.metrics.isDoubleResolution?2:1,Zn=(ht.metrics.left-St)*ht.scale-cn+ei[0],rn=(-ht.metrics.top-St)*ht.scale+ei[1],Bn=Zn+Ke.w/Ci*ht.scale/$t,Gn=rn+Ke.h/Ci*ht.scale/$t,Wn=new H(Zn,rn),pi=new H(Bn,rn),to=new H(Zn,Gn),Fn=new H(Bn,Gn);if(or){const Nn=new H(-cn,cn-Lf),jn=-Math.PI/2,vn=Pn/2-cn,qr=new H(5-Lf-vn,-(ht.imageName?vn:0)),So=new H(...eo);Wn._rotateAround(jn,Nn)._add(qr)._add(So),pi._rotateAround(jn,Nn)._add(qr)._add(So),to._rotateAround(jn,Nn)._add(qr)._add(So),Fn._rotateAround(jn,Nn)._add(qr)._add(So)}if(je){const Nn=Math.sin(je),jn=Math.cos(je),vn=[jn,-Nn,Nn,jn];Wn._matMult(vn),pi._matMult(vn),to._matMult(vn),Fn._matMult(vn)}const Si=new H(0,0),Mn=new H(0,0);dt.push({tl:Wn,tr:pi,bl:to,br:Fn,tex:Ke,writingMode:le.writingMode,glyphOffset:In,sectionIndex:ht.sectionIndex,isSDF:Ft,pixelOffsetTL:Si,pixelOffsetBR:Mn,minFontScaleX:0,minFontScaleY:0})}return dt}(0,a,w,f,b,v,u,s.allowVerticalPlacement),Y=s.textSizeData;let ie=null;Y.kind==="source"?(ie=[Ho*f.layout.get("text-size").evaluate(v,{})],ie[0]>la&&Dr(`${s.layerIds[0]}: Value for "text-size" is >= ${md}. Reduce your "text-size".`)):Y.kind==="composite"&&(ie=[Ho*V.compositeTextSizes[0].evaluate(v,{},U),Ho*V.compositeTextSizes[1].evaluate(v,{},U)],(ie[0]>la||ie[1]>la)&&Dr(`${s.layerIds[0]}: Value for "text-size" is >= ${md}. Reduce your "text-size".`)),s.addSymbols(s.text,G,ie,w,b,v,P,n,k.lineStartIndex,k.lineLength,N,U);for(const be of E)L[be]=s.text.placedSymbolArray.length-1;return 4*G.length}function eb(s){for(const n in s)return s[n];return null}function MS(s,n,a,u){const f=s.compareText;if(n in f){const b=f[n];for(let v=b.length-1;v>=0;v--)if(u.dist(b[v])<a)return!0}else f[n]=[];return f[n].push(u),!1}const tb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ug{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,u]=new Uint8Array(n,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=u>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const b=tb[15&u];if(!b)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(n,2,1),[w]=new Uint32Array(n,4,1);return new ug(w,v,b,n)}constructor(n,a=64,u=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=u,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const b=tb.indexOf(this.ArrayType),v=2*n*this.ArrayType.BYTES_PER_ELEMENT,w=n*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-w%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${u}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+k,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+v+w+k),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+k,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=n)}add(n,a){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=n,this.coords[this._pos++]=a,u}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return dg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,a,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:v,nodeSize:w}=this,k=[0,b.length-1,0],P=[];for(;k.length;){const E=k.pop()||0,L=k.pop()||0,N=k.pop()||0;if(L-N<=w){for(let Y=N;Y<=L;Y++){const ie=v[2*Y],be=v[2*Y+1];ie>=n&&ie<=u&&be>=a&&be<=f&&P.push(b[Y])}continue}const V=N+L>>1,U=v[2*V],G=v[2*V+1];U>=n&&U<=u&&G>=a&&G<=f&&P.push(b[V]),(E===0?n<=U:a<=G)&&(k.push(N),k.push(V-1),k.push(1-E)),(E===0?u>=U:f>=G)&&(k.push(V+1),k.push(L),k.push(1-E))}return P}within(n,a,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:b,nodeSize:v}=this,w=[0,f.length-1,0],k=[],P=u*u;for(;w.length;){const E=w.pop()||0,L=w.pop()||0,N=w.pop()||0;if(L-N<=v){for(let Y=N;Y<=L;Y++)nb(b[2*Y],b[2*Y+1],n,a)<=P&&k.push(f[Y]);continue}const V=N+L>>1,U=b[2*V],G=b[2*V+1];nb(U,G,n,a)<=P&&k.push(f[V]),(E===0?n-u<=U:a-u<=G)&&(w.push(N),w.push(V-1),w.push(1-E)),(E===0?n+u>=U:a+u>=G)&&(w.push(V+1),w.push(L),w.push(1-E))}return k}}function dg(s,n,a,u,f,b){if(f-u<=a)return;const v=u+f>>1;rb(s,n,v,u,f,b),dg(s,n,a,u,v-1,1-b),dg(s,n,a,v+1,f,1-b)}function rb(s,n,a,u,f,b){for(;f>u;){if(f-u>600){const P=f-u+1,E=a-u+1,L=Math.log(P),N=.5*Math.exp(2*L/3),V=.5*Math.sqrt(L*N*(P-N)/P)*(E-P/2<0?-1:1);rb(s,n,a,Math.max(u,Math.floor(a-E*N/P+V)),Math.min(f,Math.floor(a+(P-E)*N/P+V)),b)}const v=n[2*a+b];let w=u,k=f;for(yd(s,n,u,a),n[2*f+b]>v&&yd(s,n,u,f);w<k;){for(yd(s,n,w,k),w++,k--;n[2*w+b]<v;)w++;for(;n[2*k+b]>v;)k--}n[2*u+b]===v?yd(s,n,u,k):(k++,yd(s,n,k,f)),k<=a&&(u=k+1),a<=k&&(f=k-1)}}function yd(s,n,a,u){hg(s,a,u),hg(n,2*a,2*u),hg(n,2*a+1,2*u+1)}function hg(s,n,a){const u=s[n];s[n]=s[a],s[a]=u}function nb(s,n,a,u){const f=s-a,b=n-u;return f*f+b*b}var fg;m.cg=void 0,(fg=m.cg||(m.cg={})).create="create",fg.load="load",fg.fullLoad="fullLoad";let jf=null,bd=[];const pg=1e3/60,mg="loadTime",gg="fullLoadTime",ES={mark(s){performance.mark(s)},frame(s){const n=s;jf!=null&&bd.push(n-jf),jf=n},clearMetrics(){jf=null,bd=[],performance.clearMeasures(mg),performance.clearMeasures(gg);for(const s in m.cg)performance.clearMarks(m.cg[s])},getPerformanceMetrics(){performance.measure(mg,m.cg.create,m.cg.load),performance.measure(gg,m.cg.create,m.cg.fullLoad);const s=performance.getEntriesByName(mg)[0].duration,n=performance.getEntriesByName(gg)[0].duration,a=bd.length,u=1/(bd.reduce((b,v)=>b+v,0)/a/1e3),f=bd.filter(b=>b>pg).reduce((b,v)=>b+(v-pg)/pg,0);return{loadTime:s,fullLoadTime:n,fps:u,percentDroppedFrames:f/(a+f)*100,totalFrames:a}}};m.$=gd,m.A=ke,m.B=bi,m.C=Jr,m.D=Dt,m.E=Te,m.F=ff,m.G=function(s){if(Le==null){const n=s.navigator?s.navigator.userAgent:null;Le=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Le},m.H=class{constructor(s,n){this.target=s,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new vS(()=>this.process()),this.subscription=Pe(this.target,"message",a=>this.receive(a),!1),this.globalScope=ge(self)?s:window}registerMessageHandler(s,n){this.messageHandlers[s]=n}sendAsync(s,n){return new Promise((a,u)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10),b=n?Pe(n.signal,"abort",()=>{b==null||b.unsubscribe(),delete this.resolveRejects[f];const k={id:f,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(k)},xS):null;this.resolveRejects[f]={resolve:k=>{b==null||b.unsubscribe(),a(k)},reject:k=>{b==null||b.unsubscribe(),u(k)}};const v=[],w=Object.assign(Object.assign({},s),{id:f,sourceMapId:this.mapId,origin:location.origin,data:Zo(s.data,v)});this.target.postMessage(w,{transfer:v})})}receive(s){const n=s.data,a=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[a];const u=this.abortControllers[a];return delete this.abortControllers[a],void(u&&u.abort())}if(ge(self)||n.mustQueue)return this.tasks[a]=n,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,n)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),n=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(s,n)}processTask(s,n){return l(this,void 0,void 0,function*(){if(n.type==="<response>"){const f=this.resolveRejects[s];return delete this.resolveRejects[s],f?void(n.error?f.reject(Ha(n.error)):f.resolve(Ha(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=Ha(n.data),u=new AbortController;this.abortControllers[s]=u;try{const f=yield this.messageHandlers[n.type](n.sourceMapId,a,u);this.completeTask(s,null,f)}catch(f){this.completeTask(s,f)}})}completeTask(s,n,a){const u=[];delete this.abortControllers[s];const f={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Zo(n):null,data:Zo(a,u)};this.target.postMessage(f,{transfer:u})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.I=Xm,m.J=It,m.K=function(){var s=new ke(16);return ke!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},m.L=function(s,n,a){var u,f,b,v,w,k,P,E,L,N,V,U,G=a[0],Y=a[1],ie=a[2];return n===s?(s[12]=n[0]*G+n[4]*Y+n[8]*ie+n[12],s[13]=n[1]*G+n[5]*Y+n[9]*ie+n[13],s[14]=n[2]*G+n[6]*Y+n[10]*ie+n[14],s[15]=n[3]*G+n[7]*Y+n[11]*ie+n[15]):(f=n[1],b=n[2],v=n[3],w=n[4],k=n[5],P=n[6],E=n[7],L=n[8],N=n[9],V=n[10],U=n[11],s[0]=u=n[0],s[1]=f,s[2]=b,s[3]=v,s[4]=w,s[5]=k,s[6]=P,s[7]=E,s[8]=L,s[9]=N,s[10]=V,s[11]=U,s[12]=u*G+w*Y+L*ie+n[12],s[13]=f*G+k*Y+N*ie+n[13],s[14]=b*G+P*Y+V*ie+n[14],s[15]=v*G+E*Y+U*ie+n[15]),s},m.M=function(s,n,a){var u=a[0],f=a[1],b=a[2];return s[0]=n[0]*u,s[1]=n[1]*u,s[2]=n[2]*u,s[3]=n[3]*u,s[4]=n[4]*f,s[5]=n[5]*f,s[6]=n[6]*f,s[7]=n[7]*f,s[8]=n[8]*b,s[9]=n[9]*b,s[10]=n[10]*b,s[11]=n[11]*b,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},m.N=function(s,n,a){var u=n[0],f=n[1],b=n[2],v=n[3],w=n[4],k=n[5],P=n[6],E=n[7],L=n[8],N=n[9],V=n[10],U=n[11],G=n[12],Y=n[13],ie=n[14],be=n[15],le=a[0],j=a[1],K=a[2],de=a[3];return s[0]=le*u+j*w+K*L+de*G,s[1]=le*f+j*k+K*N+de*Y,s[2]=le*b+j*P+K*V+de*ie,s[3]=le*v+j*E+K*U+de*be,s[4]=(le=a[4])*u+(j=a[5])*w+(K=a[6])*L+(de=a[7])*G,s[5]=le*f+j*k+K*N+de*Y,s[6]=le*b+j*P+K*V+de*ie,s[7]=le*v+j*E+K*U+de*be,s[8]=(le=a[8])*u+(j=a[9])*w+(K=a[10])*L+(de=a[11])*G,s[9]=le*f+j*k+K*N+de*Y,s[10]=le*b+j*P+K*V+de*ie,s[11]=le*v+j*E+K*U+de*be,s[12]=(le=a[12])*u+(j=a[13])*w+(K=a[14])*L+(de=a[15])*G,s[13]=le*f+j*k+K*N+de*Y,s[14]=le*b+j*P+K*V+de*ie,s[15]=le*v+j*E+K*U+de*be,s},m.O=function(s,n){const a={};for(let u=0;u<n.length;u++){const f=n[u];f in s&&(a[f]=s[f])}return a},m.P=H,m.Q=ca,m.R=Ji,m.S=L0,m.T=Hu,m.U=A0,m.V=Ce,m.W=X,m.X=ct,m.Y=Qi,m.Z=vt,m._=l,m.a=Me,m.a$=function(){const s=new Float32Array(16);return We(s),s},m.a0=ag,m.a1=s=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(a=>{n.onloadstart=()=>{a(n)};for(const u of s){const f=window.document.createElement("source");Sr(u)||(n.crossOrigin="Anonymous"),f.src=u,n.appendChild(f)}})},m.a2=Ae,m.a3=function(){return lr++},m.a4=x,m.a5=wc,m.a6=Jl,m.a7=xi,m.a8=F0,m.a9=function(s){const n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,u,f,b)=>{const v=f||b;return n[u]=!v||v.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n},m.aA=Qm,m.aB=ug,m.aC=gn,m.aD=Mf,m.aE=re,m.aF=Ot,m.aG=gt,m.aH=function(s){return Math.pow(2,s)},m.aI=85.051129,m.aJ=R0,m.aK=Jt,m.aL=Be,m.aM=D0,m.aN=function(s,n,a){return s[0]=n[0]*a,s[1]=n[1]*a,s[2]=n[2]*a,s},m.aO=function(s,n,a){return s[0]=n[0]+a[0],s[1]=n[1]+a[1],s[2]=n[2]+a[2],s},m.aP=function(s){var n=new ke(3);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n},m.aQ=function(s,n,a){return s[0]=n[0]*a[0],s[1]=n[1]*a[1],s[2]=n[2]*a[2],s[3]=n[3]*a[3],s},m.aR=function(s,n,a){return s[0]=n[0]-a[0],s[1]=n[1]-a[1],s[2]=n[2]-a[2],s},m.aS=function(s,n){var a=n[0],u=n[1],f=n[2],b=a*a+u*u+f*f;return b>0&&(b=1/Math.sqrt(b)),s[0]=n[0]*b,s[1]=n[1]*b,s[2]=n[2]*b,s},m.aT=function(s,n,a){var u=n[0],f=n[1],b=n[2],v=a[0],w=a[1],k=a[2];return s[0]=f*k-b*w,s[1]=b*v-u*k,s[2]=u*w-f*v,s},m.aU=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]},m.aV=z0,m.aW=Cc,m.aX=function(s,n,a,u,f){var b,v=1/Math.tan(n/2);return s[0]=v/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=v,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,f!=null&&f!==1/0?(s[10]=(f+u)*(b=1/(u-f)),s[14]=2*f*u*b):(s[10]=-1,s[14]=-2*u),s},m.aY=function(s){var n=new ke(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},m.aZ=function(s,n,a){var u=Math.sin(a),f=Math.cos(a),b=n[0],v=n[1],w=n[2],k=n[3],P=n[4],E=n[5],L=n[6],N=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=b*f+P*u,s[1]=v*f+E*u,s[2]=w*f+L*u,s[3]=k*f+N*u,s[4]=P*f-b*u,s[5]=E*f-v*u,s[6]=L*f-w*u,s[7]=N*f-k*u,s},m.a_=function(s,n,a){var u=Math.sin(a),f=Math.cos(a),b=n[4],v=n[5],w=n[6],k=n[7],P=n[8],E=n[9],L=n[10],N=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=b*f+P*u,s[5]=v*f+E*u,s[6]=w*f+L*u,s[7]=k*f+N*u,s[8]=P*f-b*u,s[9]=E*f-v*u,s[10]=L*f-w*u,s[11]=N*f-k*u,s},m.aa=function(s){return Math.log(s)/Math.LN2},m.ab=function(s){var n=s[0],a=s[1];return n*n+a*a},m.ac=function(s){return s*Math.PI/180},m.ad=ir,m.ae=function(s,n){const a=[];for(const u in s)u in n||a.push(u);return a},m.af=function(s,n){let a=0,u=0;if(s.kind==="constant")u=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:f,minZoom:b,maxZoom:v}=s,w=f?ir(Jn.interpolationFactor(f,n,b,v),0,1):0;s.kind==="camera"?u=bi.number(s.minSize,s.maxSize,w):a=w}return{uSizeT:a,uSize:u}},m.ah=function(s,{uSize:n,uSizeT:a},{lowerSize:u,upperSize:f}){return s.kind==="source"?u/Ho:s.kind==="composite"?bi.number(u/Ho,f/Ho,a):n},m.ai=function(s,n){var a=n[0],u=n[1],f=n[2],b=n[3],v=n[4],w=n[5],k=n[6],P=n[7],E=n[8],L=n[9],N=n[10],V=n[11],U=n[12],G=n[13],Y=n[14],ie=n[15],be=a*w-u*v,le=a*k-f*v,j=a*P-b*v,K=u*k-f*w,de=u*P-b*w,De=f*P-b*k,rt=E*G-L*U,Fe=E*Y-N*U,je=E*ie-V*U,dt=L*Y-N*G,at=L*ie-V*G,ht=N*ie-V*Y,Ke=be*ht-le*at+j*dt+K*je-de*Fe+De*rt;return Ke?(s[0]=(w*ht-k*at+P*dt)*(Ke=1/Ke),s[1]=(f*at-u*ht-b*dt)*Ke,s[2]=(G*De-Y*de+ie*K)*Ke,s[3]=(N*de-L*De-V*K)*Ke,s[4]=(k*je-v*ht-P*Fe)*Ke,s[5]=(a*ht-f*je+b*Fe)*Ke,s[6]=(Y*j-U*De-ie*le)*Ke,s[7]=(E*De-N*j+V*le)*Ke,s[8]=(v*at-w*je+P*rt)*Ke,s[9]=(u*je-a*at-b*rt)*Ke,s[10]=(U*de-G*j+ie*be)*Ke,s[11]=(L*j-E*de-V*be)*Ke,s[12]=(w*Fe-v*dt-k*rt)*Ke,s[13]=(a*dt-u*Fe+f*rt)*Ke,s[14]=(G*le-U*K-Y*be)*Ke,s[15]=(E*K-L*le+N*be)*Ke,s):null},m.aj=wt,m.ak=function(s){return Math.hypot(s[0],s[1])},m.al=function(s){return s[0]=0,s[1]=0,s},m.am=function(s,n,a){return s[0]=n[0]*a,s[1]=n[1]*a,s},m.an=tg,m.ao=Ye,m.ap=function(s,n,a,u){const f=n.y-s.y,b=n.x-s.x,v=u.y-a.y,w=u.x-a.x,k=v*b-w*f;if(k===0)return null;const P=(w*(s.y-a.y)-v*(s.x-a.x))/k;return new H(s.x+P*b,s.y+P*f)},m.aq=U0,m.ar=mc,m.as=We,m.at=function(s){let n=1/0,a=1/0,u=-1/0,f=-1/0;for(const b of s)n=Math.min(n,b.x),a=Math.min(a,b.y),u=Math.max(u,b.x),f=Math.max(f,b.y);return[n,a,u,f]},m.au=Pn,m.av=At,m.aw=function(s,n,a,u,f=!1){if(!a[0]&&!a[1])return[0,0];const b=f?u==="map"?-s.bearingInRadians:0:u==="viewport"?s.bearingInRadians:0;if(b){const v=Math.sin(b),w=Math.cos(b);a=[a[0]*w-a[1]*v,a[0]*v+a[1]*w]}return[f?a[0]:At(n,a[0],s.zoom),f?a[1]:At(n,a[1],s.zoom)]},m.ay=eg,m.az=cg,m.b=ut,m.b$=s=>s.type==="circle",m.b0=function(){const s=new Float64Array(16);return We(s),s},m.b1=function(){return new Float64Array(16)},m.b2=function(s,n,a){const u=new Float64Array(4);return function(f,b,v,w){var k=.5*Math.PI/180;b*=k,v*=k,w*=k;var P=Math.sin(b),E=Math.cos(b),L=Math.sin(v),N=Math.cos(v),V=Math.sin(w),U=Math.cos(w);f[0]=P*N*U-E*L*V,f[1]=E*L*U+P*N*V,f[2]=E*N*V-P*L*U,f[3]=E*N*U+P*L*V}(u,s,n-90,a),u},m.b3=function(s,n,a,u){var f,b,v,w,k,P=n[0],E=n[1],L=n[2],N=n[3],V=a[0],U=a[1],G=a[2],Y=a[3];return(b=P*V+E*U+L*G+N*Y)<0&&(b=-b,V=-V,U=-U,G=-G,Y=-Y),1-b>Oe?(f=Math.acos(b),v=Math.sin(f),w=Math.sin((1-u)*f)/v,k=Math.sin(u*f)/v):(w=1-u,k=u),s[0]=w*P+k*V,s[1]=w*E+k*U,s[2]=w*L+k*G,s[3]=w*N+k*Y,s},m.b4=function(s){const n=new Float64Array(9);var a,u,f,b,v,w,k,P,E,L,N,V,U,G,Y,ie,be,le;L=(f=(u=s)[0])*(k=f+f),N=(b=u[1])*k,U=(v=u[2])*k,G=v*(P=b+b),ie=(w=u[3])*k,be=w*P,le=w*(E=v+v),(a=n)[0]=1-(V=b*P)-(Y=v*E),a[3]=N-le,a[6]=U+be,a[1]=N+le,a[4]=1-L-Y,a[7]=G-ie,a[2]=U-be,a[5]=G+ie,a[8]=1-L-V;const j=Be(-Math.asin(ir(n[2],-1,1)));let K,de;return Math.hypot(n[5],n[8])<.001?(K=0,de=-Be(Math.atan2(n[3],n[4]))):(K=Be(n[5]===0&&n[8]===0?0:Math.atan2(n[5],n[8])),de=Be(n[1]===0&&n[0]===0?0:Math.atan2(n[1],n[0]))),{roll:K,pitch:j+90,bearing:de}},m.b5=function(s,n){return s.roll==n.roll&&s.pitch==n.pitch&&s.bearing==n.bearing},m.b6=fr,m.b7=xs,m.b8=vc,m.b9=ld,m.bA=function(s){const n=[],a=s.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},m.bB=function s(n,a){if(Array.isArray(n)){if(!Array.isArray(a)||n.length!==a.length)return!1;for(let u=0;u<n.length;u++)if(!s(n[u],a[u]))return!1;return!0}if(typeof n=="object"&&n!==null&&a!==null){if(typeof a!="object"||Object.keys(n).length!==Object.keys(a).length)return!1;for(const u in n)if(!s(n[u],a[u]))return!1;return!0}return n===a},m.bC=Yr,m.bD=tn,m.bE=class extends ji{constructor(s,n){super(s,n),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},m.bF=ws,m.bG=class extends ji{constructor(s,n){super(s,n),this.current=Vi}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let n=1;n<16;n++)if(s[n]!==this.current[n]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},m.bH=Ja,m.bI=class extends ji{constructor(s,n){super(s,n),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},m.bJ=class extends ji{constructor(s,n){super(s,n),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},m.bK=Ve,m.bL=function(s,n){var a=Math.sin(n),u=Math.cos(n);return s[0]=u,s[1]=a,s[2]=0,s[3]=-a,s[4]=u,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},m.bM=function(s,n,a){var u=n[0],f=n[1],b=n[2];return s[0]=u*a[0]+f*a[3]+b*a[6],s[1]=u*a[1]+f*a[4]+b*a[7],s[2]=u*a[2]+f*a[5]+b*a[8],s},m.bN=function(s,n,a,u,f,b,v){var w=1/(n-a),k=1/(u-f),P=1/(b-v);return s[0]=-2*w,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*k,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*P,s[11]=0,s[12]=(n+a)*w,s[13]=(f+u)*k,s[14]=(v+b)*P,s[15]=1,s},m.bO=class extends uc{},m.bP=YC,m.bQ=class extends dc{},m.bR=Om,m.bS=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},m.bT=By,m.bU=function(s,n,a){var u=n[0],f=n[1],b=n[2],v=a[3]*u+a[7]*f+a[11]*b+a[15];return s[0]=(a[0]*u+a[4]*f+a[8]*b+a[12])/(v=v||1),s[1]=(a[1]*u+a[5]*f+a[9]*b+a[13])/v,s[2]=(a[2]*u+a[6]*f+a[10]*b+a[14])/v,s},m.bV=class extends Yu{},m.bW=class extends d{},m.bX=function(s,n){return s[0]===n[0]&&s[1]===n[1]&&s[2]===n[2]&&s[3]===n[3]&&s[4]===n[4]&&s[5]===n[5]&&s[6]===n[6]&&s[7]===n[7]&&s[8]===n[8]&&s[9]===n[9]&&s[10]===n[10]&&s[11]===n[11]&&s[12]===n[12]&&s[13]===n[13]&&s[14]===n[14]&&s[15]===n[15]},m.bY=function(s,n){var a=s[0],u=s[1],f=s[2],b=s[3],v=s[4],w=s[5],k=s[6],P=s[7],E=s[8],L=s[9],N=s[10],V=s[11],U=s[12],G=s[13],Y=s[14],ie=s[15],be=n[0],le=n[1],j=n[2],K=n[3],de=n[4],De=n[5],rt=n[6],Fe=n[7],je=n[8],dt=n[9],at=n[10],ht=n[11],Ke=n[12],St=n[13],Ft=n[14],$t=n[15];return Math.abs(a-be)<=Oe*Math.max(1,Math.abs(a),Math.abs(be))&&Math.abs(u-le)<=Oe*Math.max(1,Math.abs(u),Math.abs(le))&&Math.abs(f-j)<=Oe*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(b-K)<=Oe*Math.max(1,Math.abs(b),Math.abs(K))&&Math.abs(v-de)<=Oe*Math.max(1,Math.abs(v),Math.abs(de))&&Math.abs(w-De)<=Oe*Math.max(1,Math.abs(w),Math.abs(De))&&Math.abs(k-rt)<=Oe*Math.max(1,Math.abs(k),Math.abs(rt))&&Math.abs(P-Fe)<=Oe*Math.max(1,Math.abs(P),Math.abs(Fe))&&Math.abs(E-je)<=Oe*Math.max(1,Math.abs(E),Math.abs(je))&&Math.abs(L-dt)<=Oe*Math.max(1,Math.abs(L),Math.abs(dt))&&Math.abs(N-at)<=Oe*Math.max(1,Math.abs(N),Math.abs(at))&&Math.abs(V-ht)<=Oe*Math.max(1,Math.abs(V),Math.abs(ht))&&Math.abs(U-Ke)<=Oe*Math.max(1,Math.abs(U),Math.abs(Ke))&&Math.abs(G-St)<=Oe*Math.max(1,Math.abs(G),Math.abs(St))&&Math.abs(Y-Ft)<=Oe*Math.max(1,Math.abs(Y),Math.abs(Ft))&&Math.abs(ie-$t)<=Oe*Math.max(1,Math.abs(ie),Math.abs($t))},m.bZ=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},m.b_=s=>s.type==="symbol",m.ba=bc,m.bb=et,m.bc=mt,m.bd=ui,m.be=function(s,n,a,u,f){return et(u,f,ir((s-n)/(a-n),0,1))},m.bf=Ut,m.bg=function(){return new Float64Array(4)},m.bh=function(){return new Float64Array(3)},m.bi=function(s,n,a,u){var f=[],b=[];return f[0]=n[0]-a[0],f[1]=n[1]-a[1],f[2]=n[2]-a[2],b[0]=f[0]*Math.cos(u)-f[1]*Math.sin(u),b[1]=f[0]*Math.sin(u)+f[1]*Math.cos(u),b[2]=f[2],s[0]=b[0]+a[0],s[1]=b[1]+a[1],s[2]=b[2]+a[2],s},m.bj=function(s,n,a,u){var f=[],b=[];return f[0]=n[0]-a[0],f[1]=n[1]-a[1],f[2]=n[2]-a[2],b[0]=f[0],b[1]=f[1]*Math.cos(u)-f[2]*Math.sin(u),b[2]=f[1]*Math.sin(u)+f[2]*Math.cos(u),s[0]=b[0]+a[0],s[1]=b[1]+a[1],s[2]=b[2]+a[2],s},m.bk=function(s,n,a,u){var f=[],b=[];return f[0]=n[0]-a[0],f[1]=n[1]-a[1],f[2]=n[2]-a[2],b[0]=f[2]*Math.sin(u)+f[0]*Math.cos(u),b[1]=f[1],b[2]=f[2]*Math.cos(u)-f[0]*Math.sin(u),s[0]=b[0]+a[0],s[1]=b[1]+a[1],s[2]=b[2]+a[2],s},m.bl=function(s,n,a){var u=Math.sin(a),f=Math.cos(a),b=n[0],v=n[1],w=n[2],k=n[3],P=n[8],E=n[9],L=n[10],N=n[11];return n!==s&&(s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=b*f-P*u,s[1]=v*f-E*u,s[2]=w*f-L*u,s[3]=k*f-N*u,s[8]=b*u+P*f,s[9]=v*u+E*f,s[10]=w*u+L*f,s[11]=k*u+N*f,s},m.bm=function(s,n){const a=Ut(s,360),u=Ut(n,360),f=u-a,b=u>a?f-360:f+360;return Math.abs(f)<Math.abs(b)?f:b},m.bn=function(s){return s[0]=0,s[1]=0,s[2]=0,s},m.bo=function(s,n,a,u){const f=Math.sqrt(s*s+n*n),b=Math.sqrt(a*a+u*u);s/=f,n/=f,a/=b,u/=b;const v=Math.acos(s*a+n*u);return-n*a+s*u>0?v:-v},m.bp=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]},m.bq=og,m.br=function(s,n){const a=Ut(s,2*Math.PI),u=Ut(n,2*Math.PI);return Math.min(Math.abs(a-u),Math.abs(a-u+2*Math.PI),Math.abs(a-u-2*Math.PI))},m.bs=function(s){return Math.hypot(s[0],s[1],s[2])},m.bt=function(){const s={},n=$.$version;for(const a in $.$root){const u=$.$root[a];if(u.required){let f=null;f=a==="version"?n:u.type==="array"?[]:{},f!=null&&(s[a]=f)}}return s},m.bu=tc,m.bv=Ht,m.bw=function(s){s=s.slice();const n=Object.create(null);for(let a=0;a<s.length;a++)n[s[a].id]=s[a];for(let a=0;a<s.length;a++)"ref"in s[a]&&(s[a]=J(s[a],n[s[a].ref]));return s},m.bx=function(s){if(s.type==="custom")return new bS(s);switch(s.type){case"background":return new gS(s);case"circle":return new dC(s);case"fill":return new EC(s);case"fill-extrusion":return new BC(s);case"heatmap":return new fC(s);case"hillshade":return new mC(s);case"line":return new WC(s);case"raster":return new yS(s);case"symbol":return new zf(s)}},m.by=Pr,m.bz=function(s,n){if(!s)return[{command:"setStyle",args:[n]}];let a=[];try{if(!oe(s.version,n.version))return[{command:"setStyle",args:[n]}];oe(s.center,n.center)||a.push({command:"setCenter",args:[n.center]}),oe(s.centerAltitude,n.centerAltitude)||a.push({command:"setCenterAltitude",args:[n.centerAltitude]}),oe(s.zoom,n.zoom)||a.push({command:"setZoom",args:[n.zoom]}),oe(s.bearing,n.bearing)||a.push({command:"setBearing",args:[n.bearing]}),oe(s.pitch,n.pitch)||a.push({command:"setPitch",args:[n.pitch]}),oe(s.roll,n.roll)||a.push({command:"setRoll",args:[n.roll]}),oe(s.sprite,n.sprite)||a.push({command:"setSprite",args:[n.sprite]}),oe(s.glyphs,n.glyphs)||a.push({command:"setGlyphs",args:[n.glyphs]}),oe(s.transition,n.transition)||a.push({command:"setTransition",args:[n.transition]}),oe(s.light,n.light)||a.push({command:"setLight",args:[n.light]}),oe(s.terrain,n.terrain)||a.push({command:"setTerrain",args:[n.terrain]}),oe(s.sky,n.sky)||a.push({command:"setSky",args:[n.sky]}),oe(s.projection,n.projection)||a.push({command:"setProjection",args:[n.projection]});const u={},f=[];(function(v,w,k,P){let E;for(E in w=w||{},v=v||{})Object.prototype.hasOwnProperty.call(v,E)&&(Object.prototype.hasOwnProperty.call(w,E)||$e(E,k,P));for(E in w)Object.prototype.hasOwnProperty.call(w,E)&&(Object.prototype.hasOwnProperty.call(v,E)?oe(v[E],w[E])||(v[E].type==="geojson"&&w[E].type==="geojson"&&He(v,w,E)?pe(k,{command:"setGeoJSONSourceData",args:[E,w[E].data]}):Se(E,w,k,P)):Ie(E,w,k))})(s.sources,n.sources,f,u);const b=[];s.layers&&s.layers.forEach(v=>{"source"in v&&u[v.source]?a.push({command:"removeLayer",args:[v.id]}):b.push(v)}),a=a.concat(f),function(v,w,k){w=w||[];const P=(v=v||[]).map(Ee),E=w.map(Ee),L=v.reduce(tt,{}),N=w.reduce(tt,{}),V=P.slice(),U=Object.create(null);let G,Y,ie,be,le;for(let j=0,K=0;j<P.length;j++)G=P[j],Object.prototype.hasOwnProperty.call(N,G)?K++:(pe(k,{command:"removeLayer",args:[G]}),V.splice(V.indexOf(G,K),1));for(let j=0,K=0;j<E.length;j++)G=E[E.length-1-j],V[V.length-1-j]!==G&&(Object.prototype.hasOwnProperty.call(L,G)?(pe(k,{command:"removeLayer",args:[G]}),V.splice(V.lastIndexOf(G,V.length-K),1)):K++,be=V[V.length-j],pe(k,{command:"addLayer",args:[N[G],be]}),V.splice(V.length-j,0,G),U[G]=!0);for(let j=0;j<E.length;j++)if(G=E[j],Y=L[G],ie=N[G],!U[G]&&!oe(Y,ie))if(oe(Y.source,ie.source)&&oe(Y["source-layer"],ie["source-layer"])&&oe(Y.type,ie.type)){for(le in Ne(Y.layout,ie.layout,k,G,null,"setLayoutProperty"),Ne(Y.paint,ie.paint,k,G,null,"setPaintProperty"),oe(Y.filter,ie.filter)||pe(k,{command:"setFilter",args:[G,ie.filter]}),oe(Y.minzoom,ie.minzoom)&&oe(Y.maxzoom,ie.maxzoom)||pe(k,{command:"setLayerZoomRange",args:[G,ie.minzoom,ie.maxzoom]}),Y)Object.prototype.hasOwnProperty.call(Y,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?Ne(Y[le],ie[le],k,G,le.slice(6),"setPaintProperty"):oe(Y[le],ie[le])||pe(k,{command:"setLayerProperty",args:[G,le,ie[le]]}));for(le in ie)Object.prototype.hasOwnProperty.call(ie,le)&&!Object.prototype.hasOwnProperty.call(Y,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?Ne(Y[le],ie[le],k,G,le.slice(6),"setPaintProperty"):oe(Y[le],ie[le])||pe(k,{command:"setLayerProperty",args:[G,le,ie[le]]}))}else pe(k,{command:"removeLayer",args:[G]}),be=V[V.lastIndexOf(G)+1],pe(k,{command:"addLayer",args:[ie,be]})}(b,n.layers,a)}catch(u){console.warn("Unable to compute style diff:",u),a=[{command:"setStyle",args:[n]}]}return a},m.c=it,m.c0=s=>s.type==="heatmap",m.c1=s=>s.type==="line",m.c2=s=>s.type==="fill",m.c3=s=>s.type==="fill-extrusion",m.c4=s=>s.type==="hillshade",m.c5=s=>s.type==="raster",m.c6=s=>s.type==="background",m.c7=s=>s.type==="custom",m.c8=nt,m.c9=function(s,n,a){const u=Kt(n.x-a.x,n.y-a.y),f=Kt(s.x-a.x,s.y-a.y);var b,v;return Be(Math.atan2(u[0]*f[1]-u[1]*f[0],(b=u)[0]*(v=f)[0]+b[1]*v[1]))},m.cA=O,m.cB=t0,m.cC=f0,m.cD=ms,m.cE=Go,m.ca=bt,m.cb=function(s,n,a){var u=n[0],f=n[1];return s[0]=a[0]*u+a[4]*f+a[12],s[1]=a[1]*u+a[5]*f+a[13],s},m.cc=function(s,n){const{x:a,y:u}=gd.fromLngLat(n);return!(s<0||s>25||u<0||u>=1||a<0||a>=1)},m.cd=function(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},m.ce=class extends ac{},m.cf=ES,m.ch=function(s){return s.message===xt},m.ci=Nt,m.cj=function(s,n){Me.REGISTERED_PROTOCOLS[s]=n},m.ck=function(s){delete Me.REGISTERED_PROTOCOLS[s]},m.cl=function(s,n){const a={};for(let f=0;f<s.length;f++){const b=n&&n[s[f].id]||Ru(s[f]);n&&(n[s[f].id]=b);let v=a[b];v||(v=a[b]=[]),v.push(s[f])}const u=[];for(const f in a)u.push(a[f]);return u},m.cm=Ct,m.cn=B0,m.co=N0,m.cp=m0,m.cq=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=vt/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const n=s.bucket.layers[0],a=n.layout,u=n._unevaluatedLayout._values,f={layoutIconSize:u["icon-size"].possiblyEvaluate(new Jr(s.bucket.zoom+1),s.canonical),layoutTextSize:u["text-size"].possiblyEvaluate(new Jr(s.bucket.zoom+1),s.canonical),textMaxSize:u["text-size"].possiblyEvaluate(new Jr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:P,maxZoom:E}=s.bucket.textSizeData;f.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Jr(P),s.canonical),u["text-size"].possiblyEvaluate(new Jr(E),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:P,maxZoom:E}=s.bucket.iconSizeData;f.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Jr(P),s.canonical),u["icon-size"].possiblyEvaluate(new Jr(E),s.canonical)]}const b=a.get("text-line-height")*Pn,v=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",w=a.get("text-keep-upright"),k=a.get("text-size");for(const P of s.bucket.features){const E=a.get("text-font").evaluate(P,{},s.canonical).join(","),L=k.evaluate(P,{},s.canonical),N=f.layoutTextSize.evaluate(P,{},s.canonical),V=f.layoutIconSize.evaluate(P,{},s.canonical),U={horizontal:{},vertical:void 0},G=P.text;let Y,ie=[0,0];if(G){const j=G.toString(),K=a.get("text-letter-spacing").evaluate(P,{},s.canonical)*Pn,de=mf(j)?K:0,De=a.get("text-anchor").evaluate(P,{},s.canonical),rt=J0(n,P,s.canonical);if(!rt){const at=a.get("text-radial-offset").evaluate(P,{},s.canonical);ie=at?X0(De,[at*Pn,lg]):a.get("text-offset").evaluate(P,{},s.canonical).map(ht=>ht*Pn)}let Fe=v?"center":a.get("text-justify").evaluate(P,{},s.canonical);const je=a.get("symbol-placement")==="point"?a.get("text-max-width").evaluate(P,{},s.canonical)*Pn:1/0,dt=()=>{s.bucket.allowVerticalPlacement&&rc(j)&&(U.vertical=Rf(G,s.glyphMap,s.glyphPositions,s.imagePositions,E,je,b,De,"left",de,ie,m.ag.vertical,!0,N,L))};if(!v&&rt){const at=new Set;if(Fe==="auto")for(let Ke=0;Ke<rt.values.length;Ke+=2)at.add(cg(rt.values[Ke]));else at.add(Fe);let ht=!1;for(const Ke of at)if(!U.horizontal[Ke])if(ht)U.horizontal[Ke]=U.horizontal[0];else{const St=Rf(G,s.glyphMap,s.glyphPositions,s.imagePositions,E,je,b,"center",Ke,de,ie,m.ag.horizontal,!1,N,L);St&&(U.horizontal[Ke]=St,ht=St.positionedLines.length===1)}dt()}else{Fe==="auto"&&(Fe=cg(De));const at=Rf(G,s.glyphMap,s.glyphPositions,s.imagePositions,E,je,b,De,Fe,de,ie,m.ag.horizontal,!1,N,L);at&&(U.horizontal[Fe]=at),dt(),rc(j)&&v&&w&&(U.vertical=Rf(G,s.glyphMap,s.glyphPositions,s.imagePositions,E,je,b,De,Fe,de,ie,m.ag.vertical,!1,N,L))}}let be=!1;if(P.icon&&P.icon.name){const j=s.imageMap[P.icon.name];j&&(Y=dS(s.imagePositions[P.icon.name],a.get("icon-offset").evaluate(P,{},s.canonical),a.get("icon-anchor").evaluate(P,{},s.canonical)),be=!!j.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=be:s.bucket.sdfIcons!==be&&Dr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(j.pixelRatio!==s.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const le=eb(U.horizontal)||U.vertical;s.bucket.iconsInText=!!le&&le.iconsInText,(le||Y)&&IS(s.bucket,P,U,Y,s.imageMap,f,N,V,ie,be,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},m.cr=Wm,m.cs=Nm,m.ct=Gm,m.cu=ud,m.cv=Km,m.cw=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},m.cx=function(s,n,a,u,f){return l(this,void 0,void 0,function*(){if(X())try{return yield ct(s,n,a,u,f)}catch{}return function(b,v,w,k,P){const E=b.width,L=b.height;te&&se||(te=new OffscreenCanvas(E,L),se=te.getContext("2d",{willReadFrequently:!0})),te.width=E,te.height=L,se.drawImage(b,0,0,E,L);const N=se.getImageData(v,w,k,P);return se.clearRect(0,0,E,L),N.data}(s,n,a,u,f)})},m.cy=$0,m.cz=S,m.d=Sr,m.e=Qt,m.f=s=>l(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(n)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),m.g=Ze,m.h=s=>new Promise((n,a)=>{const u=new Image;u.onload=()=>{n(u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=st})},u.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(s)],{type:"image/png"});u.src=s.byteLength?URL.createObjectURL(f):st}),m.i=ge,m.j=(s,n)=>Fr(Qt(s,{type:"json"}),n),m.k=Li,m.l=Hi,m.m=Fr,m.n=(s,n)=>Fr(Qt(s,{type:"arrayBuffer"}),n),m.o=function(s){return new Km(s).readFields(QC,[])},m.p=p0,m.q=nd,m.r=fi,m.s=Pe,m.t=Ga,m.u=nr,m.v=$,m.w=Dr,m.x=ec,m.y=na,m.z=function([s,n,a]){return n+=90,n*=Math.PI/180,a*=Math.PI/180,{x:s*Math.cos(n)*Math.sin(a),y:s*Math.sin(n)*Math.sin(a),z:s*Math.cos(a)}}}),p("worker",["./shared"],function(m){class l{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,q){for(const oe of $){this._layerConfigs[oe.id]=oe;const pe=this._layers[oe.id]=m.bx(oe);pe._featureFilter=m.a6(pe.filter),this.keyCache[oe.id]&&delete this.keyCache[oe.id]}for(const oe of q)delete this.keyCache[oe],delete this._layerConfigs[oe],delete this._layers[oe];this.familiesBySource={};const J=m.cl(Object.values(this._layerConfigs),this.keyCache);for(const oe of J){const pe=oe.map(Ee=>this._layers[Ee.id]),Ie=pe[0];if(Ie.visibility==="none")continue;const $e=Ie.source||"";let Se=this.familiesBySource[$e];Se||(Se=this.familiesBySource[$e]={});const He=Ie.sourceLayer||"_geojsonTileLayer";let Ne=Se[He];Ne||(Ne=Se[He]=[]),Ne.push(pe)}}}class S{constructor($){const q={},J=[];for(const $e in $){const Se=$[$e],He=q[$e]={};for(const Ne in Se){const Ee=Se[+Ne];if(!Ee||Ee.bitmap.width===0||Ee.bitmap.height===0)continue;const tt={x:0,y:0,w:Ee.bitmap.width+2,h:Ee.bitmap.height+2};J.push(tt),He[Ne]={rect:tt,metrics:Ee.metrics}}}const{w:oe,h:pe}=m.p(J),Ie=new m.q({width:oe||1,height:pe||1});for(const $e in $){const Se=$[$e];for(const He in Se){const Ne=Se[+He];if(!Ne||Ne.bitmap.width===0||Ne.bitmap.height===0)continue;const Ee=q[$e][He].rect;m.q.copy(Ne.bitmap,Ie,{x:0,y:0},{x:Ee.x+1,y:Ee.y+1},Ne.bitmap)}}this.image=Ie,this.positions=q}}m.cm("GlyphAtlas",S);class I{constructor($){this.tileID=new m.Y($.tileID.overscaledZ,$.tileID.wrap,$.tileID.canonical.z,$.tileID.canonical.x,$.tileID.canonical.y),this.uid=$.uid,this.zoom=$.zoom,this.pixelRatio=$.pixelRatio,this.tileSize=$.tileSize,this.source=$.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$.showCollisionBoxes,this.collectResourceTiming=!!$.collectResourceTiming,this.returnDependencies=!!$.returnDependencies,this.promoteId=$.promoteId,this.inFlightDependencies=[]}parse($,q,J,oe,pe){return m._(this,void 0,void 0,function*(){this.status="parsing",this.data=$,this.collisionBoxArray=new m.a4;const Ie=new m.cn(Object.keys($.layers).sort()),$e=new m.co(this.tileID,this.promoteId);$e.bucketLayerIDs=[];const Se={},He={featureIndex:$e,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J,subdivisionGranularity:pe},Ne=q.familiesBySource[this.source];for(const Gt in Ne){const rr=$.layers[Gt];if(!rr)continue;rr.version===1&&m.w(`Vector tile source "${this.source}" layer "${Gt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const zt=Ie.encode(Gt),os=[];for(let yn=0;yn<rr.length;yn++){const Cn=rr.feature(yn),Wr=$e.getId(Cn,Gt);os.push({feature:Cn,id:Wr,index:yn,sourceLayerIndex:zt})}for(const yn of Ne[Gt]){const Cn=yn[0];Cn.source!==this.source&&m.w(`layer.source = ${Cn.source} does not equal this.source = ${this.source}`),Cn.minzoom&&this.zoom<Math.floor(Cn.minzoom)||Cn.maxzoom&&this.zoom>=Cn.maxzoom||Cn.visibility!=="none"&&(A(yn,this.zoom,J),(Se[Cn.id]=Cn.createBucket({index:$e.bucketLayerIDs.length,layers:yn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:zt,sourceID:this.source})).populate(os,He,this.tileID.canonical),$e.bucketLayerIDs.push(yn.map(Wr=>Wr.id)))}}const Ee=m.bC(He.glyphDependencies,Gt=>Object.keys(Gt).map(Number));this.inFlightDependencies.forEach(Gt=>Gt==null?void 0:Gt.abort()),this.inFlightDependencies=[];let tt=Promise.resolve({});if(Object.keys(Ee).length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),tt=oe.sendAsync({type:"GG",data:{stacks:Ee,source:this.source,tileID:this.tileID,type:"glyphs"}},Gt)}const Ae=Object.keys(He.iconDependencies);let yt=Promise.resolve({});if(Ae.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),yt=oe.sendAsync({type:"GI",data:{icons:Ae,source:this.source,tileID:this.tileID,type:"icons"}},Gt)}const Rt=Object.keys(He.patternDependencies);let Wt=Promise.resolve({});if(Rt.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),Wt=oe.sendAsync({type:"GI",data:{icons:Rt,source:this.source,tileID:this.tileID,type:"patterns"}},Gt)}const[Zt,Je,Pt]=yield Promise.all([tt,yt,Wt]),kt=new S(Zt),er=new m.cp(Je,Pt);for(const Gt in Se){const rr=Se[Gt];rr instanceof m.a5?(A(rr.layers,this.zoom,J),m.cq({bucket:rr,glyphMap:Zt,glyphPositions:kt.positions,imageMap:Je,imagePositions:er.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:He.subdivisionGranularity})):rr.hasPattern&&(rr instanceof m.cr||rr instanceof m.cs||rr instanceof m.ct)&&(A(rr.layers,this.zoom,J),rr.addFeatures(He,this.tileID.canonical,er.patternPositions))}return this.status="done",{buckets:Object.values(Se).filter(Gt=>!Gt.isEmpty()),featureIndex:$e,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:kt.image,imageAtlas:er,glyphMap:this.returnDependencies?Zt:null,iconMap:this.returnDependencies?Je:null,glyphPositions:this.returnDependencies?kt.positions:null}})}}function A(Te,$,q){const J=new m.C($);for(const oe of Te)oe.recalculate(J,q)}class O{constructor($,q,J){this.actor=$,this.layerIndex=q,this.availableImages=J,this.fetching={},this.loading={},this.loaded={}}loadVectorTile($,q){return m._(this,void 0,void 0,function*(){const J=yield m.n($.request,q);try{return{vectorTile:new m.cu.VectorTile(new m.cv(J.data)),rawData:J.data,cacheControl:J.cacheControl,expires:J.expires}}catch(oe){const pe=new Uint8Array(J.data);let Ie=`Unable to parse the tile at ${$.request.url}, `;throw Ie+=pe[0]===31&&pe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${oe.message}`,new Error(Ie)}})}loadTile($){return m._(this,void 0,void 0,function*(){const q=$.uid,J=!!($&&$.request&&$.request.collectResourceTiming)&&new m.cw($.request),oe=new I($);this.loading[q]=oe;const pe=new AbortController;oe.abort=pe;try{const Ie=yield this.loadVectorTile($,pe);if(delete this.loading[q],!Ie)return null;const $e=Ie.rawData,Se={};Ie.expires&&(Se.expires=Ie.expires),Ie.cacheControl&&(Se.cacheControl=Ie.cacheControl);const He={};if(J){const Ee=J.finish();Ee&&(He.resourceTiming=JSON.parse(JSON.stringify(Ee)))}oe.vectorTile=Ie.vectorTile;const Ne=oe.parse(Ie.vectorTile,this.layerIndex,this.availableImages,this.actor,$.subdivisionGranularity);this.loaded[q]=oe,this.fetching[q]={rawTileData:$e,cacheControl:Se,resourceTiming:He};try{const Ee=yield Ne;return m.e({rawTileData:$e.slice(0)},Ee,Se,He)}finally{delete this.fetching[q]}}catch(Ie){throw delete this.loading[q],oe.status="done",this.loaded[q]=oe,Ie}})}reloadTile($){return m._(this,void 0,void 0,function*(){const q=$.uid;if(!this.loaded||!this.loaded[q])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const J=this.loaded[q];if(J.showCollisionBoxes=$.showCollisionBoxes,J.status==="parsing"){const oe=yield J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor,$.subdivisionGranularity);let pe;if(this.fetching[q]){const{rawTileData:Ie,cacheControl:$e,resourceTiming:Se}=this.fetching[q];delete this.fetching[q],pe=m.e({rawTileData:Ie.slice(0)},oe,$e,Se)}else pe=oe;return pe}if(J.status==="done"&&J.vectorTile)return J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor,$.subdivisionGranularity)})}abortTile($){return m._(this,void 0,void 0,function*(){const q=this.loading,J=$.uid;q&&q[J]&&q[J].abort&&(q[J].abort.abort(),delete q[J])})}removeTile($){return m._(this,void 0,void 0,function*(){this.loaded&&this.loaded[$.uid]&&delete this.loaded[$.uid]})}}class z{constructor(){this.loaded={}}loadTile($){return m._(this,void 0,void 0,function*(){const{uid:q,encoding:J,rawImageData:oe,redFactor:pe,greenFactor:Ie,blueFactor:$e,baseShift:Se}=$,He=oe.width+2,Ne=oe.height+2,Ee=m.b(oe)?new m.R({width:He,height:Ne},yield m.cx(oe,-1,-1,He,Ne)):oe,tt=new m.cy(q,Ee,J,pe,Ie,$e,Se);return this.loaded=this.loaded||{},this.loaded[q]=tt,tt})}removeTile($){const q=this.loaded,J=$.uid;q&&q[J]&&delete q[J]}}var D,H,ue=function(){if(H)return D;function Te(q,J){if(q.length!==0){$(q[0],J);for(var oe=1;oe<q.length;oe++)$(q[oe],!J)}}function $(q,J){for(var oe=0,pe=0,Ie=0,$e=q.length,Se=$e-1;Ie<$e;Se=Ie++){var He=(q[Ie][0]-q[Se][0])*(q[Se][1]+q[Ie][1]),Ne=oe+He;pe+=Math.abs(oe)>=Math.abs(He)?oe-Ne+He:He-Ne+oe,oe=Ne}oe+pe>=0!=!!J&&q.reverse()}return H=1,D=function q(J,oe){var pe,Ie=J&&J.type;if(Ie==="FeatureCollection")for(pe=0;pe<J.features.length;pe++)q(J.features[pe],oe);else if(Ie==="GeometryCollection")for(pe=0;pe<J.geometries.length;pe++)q(J.geometries[pe],oe);else if(Ie==="Feature")q(J.geometry,oe);else if(Ie==="Polygon")Te(J.coordinates,oe);else if(Ie==="MultiPolygon")for(pe=0;pe<J.coordinates.length;pe++)Te(J.coordinates[pe],oe);return J}}(),ye=m.cz(ue);const ne=m.cu.VectorTileFeature.prototype.toGeoJSON;class xe{constructor($){this._feature=$,this.extent=m.Z,this.type=$.type,this.properties=$.tags,"id"in $&&!isNaN($.id)&&(this.id=parseInt($.id,10))}loadGeometry(){if(this._feature.type===1){const $=[];for(const q of this._feature.geometry)$.push([new m.P(q[0],q[1])]);return $}{const $=[];for(const q of this._feature.geometry){const J=[];for(const oe of q)J.push(new m.P(oe[0],oe[1]));$.push(J)}return $}}toGeoJSON($,q,J){return ne.call(this,$,q,J)}}class Ce{constructor($){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=m.Z,this.length=$.length,this._features=$}feature($){return new xe(this._features[$])}}var X,we,Oe,ke={exports:{}},Ve=function(){if(Oe)return ke.exports;Oe=1;var Te=m.cC(),$=function(){if(we)return X;we=1;var Ne=m.cA(),Ee=m.cB().VectorTileFeature;function tt(yt,Rt){this.options=Rt||{},this.features=yt,this.length=yt.length}function Ae(yt,Rt){this.id=typeof yt.id=="number"?yt.id:void 0,this.type=yt.type,this.rawGeometry=yt.type===1?[yt.geometry]:yt.geometry,this.properties=yt.tags,this.extent=Rt||4096}return X=tt,tt.prototype.feature=function(yt){return new Ae(this.features[yt],this.options.extent)},Ae.prototype.loadGeometry=function(){var yt=this.rawGeometry;this.geometry=[];for(var Rt=0;Rt<yt.length;Rt++){for(var Wt=yt[Rt],Zt=[],Je=0;Je<Wt.length;Je++)Zt.push(new Ne(Wt[Je][0],Wt[Je][1]));this.geometry.push(Zt)}return this.geometry},Ae.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var yt=this.geometry,Rt=1/0,Wt=-1/0,Zt=1/0,Je=-1/0,Pt=0;Pt<yt.length;Pt++)for(var kt=yt[Pt],er=0;er<kt.length;er++){var Gt=kt[er];Rt=Math.min(Rt,Gt.x),Wt=Math.max(Wt,Gt.x),Zt=Math.min(Zt,Gt.y),Je=Math.max(Je,Gt.y)}return[Rt,Zt,Wt,Je]},Ae.prototype.toGeoJSON=Ee.prototype.toGeoJSON,X}();function q(Ne){var Ee=new Te;return function(tt,Ae){for(var yt in tt.layers)Ae.writeMessage(3,J,tt.layers[yt])}(Ne,Ee),Ee.finish()}function J(Ne,Ee){var tt;Ee.writeVarintField(15,Ne.version||1),Ee.writeStringField(1,Ne.name||""),Ee.writeVarintField(5,Ne.extent||4096);var Ae={keys:[],values:[],keycache:{},valuecache:{}};for(tt=0;tt<Ne.length;tt++)Ae.feature=Ne.feature(tt),Ee.writeMessage(2,oe,Ae);var yt=Ae.keys;for(tt=0;tt<yt.length;tt++)Ee.writeStringField(3,yt[tt]);var Rt=Ae.values;for(tt=0;tt<Rt.length;tt++)Ee.writeMessage(4,He,Rt[tt])}function oe(Ne,Ee){var tt=Ne.feature;tt.id!==void 0&&Ee.writeVarintField(1,tt.id),Ee.writeMessage(2,pe,Ne),Ee.writeVarintField(3,tt.type),Ee.writeMessage(4,Se,tt)}function pe(Ne,Ee){var tt=Ne.feature,Ae=Ne.keys,yt=Ne.values,Rt=Ne.keycache,Wt=Ne.valuecache;for(var Zt in tt.properties){var Je=tt.properties[Zt],Pt=Rt[Zt];if(Je!==null){Pt===void 0&&(Ae.push(Zt),Rt[Zt]=Pt=Ae.length-1),Ee.writeVarint(Pt);var kt=typeof Je;kt!=="string"&&kt!=="boolean"&&kt!=="number"&&(Je=JSON.stringify(Je));var er=kt+":"+Je,Gt=Wt[er];Gt===void 0&&(yt.push(Je),Wt[er]=Gt=yt.length-1),Ee.writeVarint(Gt)}}}function Ie(Ne,Ee){return(Ee<<3)+(7&Ne)}function $e(Ne){return Ne<<1^Ne>>31}function Se(Ne,Ee){for(var tt=Ne.loadGeometry(),Ae=Ne.type,yt=0,Rt=0,Wt=tt.length,Zt=0;Zt<Wt;Zt++){var Je=tt[Zt],Pt=1;Ae===1&&(Pt=Je.length),Ee.writeVarint(Ie(1,Pt));for(var kt=Ae===3?Je.length-1:Je.length,er=0;er<kt;er++){er===1&&Ae!==1&&Ee.writeVarint(Ie(2,kt-1));var Gt=Je[er].x-yt,rr=Je[er].y-Rt;Ee.writeVarint($e(Gt)),Ee.writeVarint($e(rr)),yt+=Gt,Rt+=rr}Ae===3&&Ee.writeVarint(Ie(7,1))}}function He(Ne,Ee){var tt=typeof Ne;tt==="string"?Ee.writeStringField(1,Ne):tt==="boolean"?Ee.writeBooleanField(7,Ne):tt==="number"&&(Ne%1!=0?Ee.writeDoubleField(3,Ne):Ne<0?Ee.writeSVarintField(6,Ne):Ee.writeVarintField(5,Ne))}return ke.exports=q,ke.exports.fromVectorTileJs=q,ke.exports.fromGeojsonVt=function(Ne,Ee){Ee=Ee||{};var tt={};for(var Ae in Ne)tt[Ae]=new $(Ne[Ae].features,Ee),tt[Ae].name=Ae,tt[Ae].version=Ee.version,tt[Ae].extent=Ee.extent;return q({layers:tt})},ke.exports.GeoJSONWrapper=$,ke.exports}(),We=m.cz(Ve);const ft={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Te=>Te},Qe=Math.fround||(Ye=new Float32Array(1),Te=>(Ye[0]=+Te,Ye[0]));var Ye;const Xe=3,wt=5,Kt=6;class vt{constructor($){this.options=Object.assign(Object.create(ft),$),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load($){const{log:q,minZoom:J,maxZoom:oe}=this.options;q&&console.time("total time");const pe=`prepare ${$.length} points`;q&&console.time(pe),this.points=$;const Ie=[];for(let Se=0;Se<$.length;Se++){const He=$[Se];if(!He.geometry)continue;const[Ne,Ee]=He.geometry.coordinates,tt=Qe(et(Ne)),Ae=Qe(mt(Ee));Ie.push(tt,Ae,1/0,Se,-1,1),this.options.reduce&&Ie.push(0)}let $e=this.trees[oe+1]=this._createTree(Ie);q&&console.timeEnd(pe);for(let Se=oe;Se>=J;Se--){const He=+Date.now();$e=this.trees[Se]=this._createTree(this._cluster($e,Se)),q&&console.log("z%d: %d clusters in %dms",Se,$e.numItems,+Date.now()-He)}return q&&console.timeEnd("total time"),this}getClusters($,q){let J=(($[0]+180)%360+360)%360-180;const oe=Math.max(-90,Math.min(90,$[1]));let pe=$[2]===180?180:(($[2]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)J=-180,pe=180;else if(J>pe){const Ee=this.getClusters([J,oe,180,Ie],q),tt=this.getClusters([-180,oe,pe,Ie],q);return Ee.concat(tt)}const $e=this.trees[this._limitZoom(q)],Se=$e.range(et(J),mt(Ie),et(pe),mt(oe)),He=$e.data,Ne=[];for(const Ee of Se){const tt=this.stride*Ee;Ne.push(He[tt+wt]>1?At(He,tt,this.clusterProps):this.points[He[tt+Xe]])}return Ne}getChildren($){const q=this._getOriginId($),J=this._getOriginZoom($),oe="No cluster with the specified id.",pe=this.trees[J];if(!pe)throw new Error(oe);const Ie=pe.data;if(q*this.stride>=Ie.length)throw new Error(oe);const $e=this.options.radius/(this.options.extent*Math.pow(2,J-1)),Se=pe.within(Ie[q*this.stride],Ie[q*this.stride+1],$e),He=[];for(const Ne of Se){const Ee=Ne*this.stride;Ie[Ee+4]===$&&He.push(Ie[Ee+wt]>1?At(Ie,Ee,this.clusterProps):this.points[Ie[Ee+Xe]])}if(He.length===0)throw new Error(oe);return He}getLeaves($,q,J){const oe=[];return this._appendLeaves(oe,$,q=q||10,J=J||0,0),oe}getTile($,q,J){const oe=this.trees[this._limitZoom($)],pe=Math.pow(2,$),{extent:Ie,radius:$e}=this.options,Se=$e/Ie,He=(J-Se)/pe,Ne=(J+1+Se)/pe,Ee={features:[]};return this._addTileFeatures(oe.range((q-Se)/pe,He,(q+1+Se)/pe,Ne),oe.data,q,J,pe,Ee),q===0&&this._addTileFeatures(oe.range(1-Se/pe,He,1,Ne),oe.data,pe,J,pe,Ee),q===pe-1&&this._addTileFeatures(oe.range(0,He,Se/pe,Ne),oe.data,-1,J,pe,Ee),Ee.features.length?Ee:null}getClusterExpansionZoom($){let q=this._getOriginZoom($)-1;for(;q<=this.options.maxZoom;){const J=this.getChildren($);if(q++,J.length!==1)break;$=J[0].properties.cluster_id}return q}_appendLeaves($,q,J,oe,pe){const Ie=this.getChildren(q);for(const $e of Ie){const Se=$e.properties;if(Se&&Se.cluster?pe+Se.point_count<=oe?pe+=Se.point_count:pe=this._appendLeaves($,Se.cluster_id,J,oe,pe):pe<oe?pe++:$.push($e),$.length===J)break}return pe}_createTree($){const q=new m.aB($.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<$.length;J+=this.stride)q.add($[J],$[J+1]);return q.finish(),q.data=$,q}_addTileFeatures($,q,J,oe,pe,Ie){for(const $e of $){const Se=$e*this.stride,He=q[Se+wt]>1;let Ne,Ee,tt;if(He)Ne=Ut(q,Se,this.clusterProps),Ee=q[Se],tt=q[Se+1];else{const Rt=this.points[q[Se+Xe]];Ne=Rt.properties;const[Wt,Zt]=Rt.geometry.coordinates;Ee=et(Wt),tt=mt(Zt)}const Ae={type:1,geometry:[[Math.round(this.options.extent*(Ee*pe-J)),Math.round(this.options.extent*(tt*pe-oe))]],tags:Ne};let yt;yt=He||this.options.generateId?q[Se+Xe]:this.points[q[Se+Xe]].id,yt!==void 0&&(Ae.id=yt),Ie.features.push(Ae)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,q){const{radius:J,extent:oe,reduce:pe,minPoints:Ie}=this.options,$e=J/(oe*Math.pow(2,q)),Se=$.data,He=[],Ne=this.stride;for(let Ee=0;Ee<Se.length;Ee+=Ne){if(Se[Ee+2]<=q)continue;Se[Ee+2]=q;const tt=Se[Ee],Ae=Se[Ee+1],yt=$.within(Se[Ee],Se[Ee+1],$e),Rt=Se[Ee+wt];let Wt=Rt;for(const Zt of yt){const Je=Zt*Ne;Se[Je+2]>q&&(Wt+=Se[Je+wt])}if(Wt>Rt&&Wt>=Ie){let Zt,Je=tt*Rt,Pt=Ae*Rt,kt=-1;const er=((Ee/Ne|0)<<5)+(q+1)+this.points.length;for(const Gt of yt){const rr=Gt*Ne;if(Se[rr+2]<=q)continue;Se[rr+2]=q;const zt=Se[rr+wt];Je+=Se[rr]*zt,Pt+=Se[rr+1]*zt,Se[rr+4]=er,pe&&(Zt||(Zt=this._map(Se,Ee,!0),kt=this.clusterProps.length,this.clusterProps.push(Zt)),pe(Zt,this._map(Se,rr)))}Se[Ee+4]=er,He.push(Je/Wt,Pt/Wt,1/0,er,-1,Wt),pe&&He.push(kt)}else{for(let Zt=0;Zt<Ne;Zt++)He.push(Se[Ee+Zt]);if(Wt>1)for(const Zt of yt){const Je=Zt*Ne;if(!(Se[Je+2]<=q)){Se[Je+2]=q;for(let Pt=0;Pt<Ne;Pt++)He.push(Se[Je+Pt])}}}}return He}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,q,J){if($[q+wt]>1){const Ie=this.clusterProps[$[q+Kt]];return J?Object.assign({},Ie):Ie}const oe=this.points[$[q+Xe]].properties,pe=this.options.map(oe);return J&&pe===oe?Object.assign({},pe):pe}}function At(Te,$,q){return{type:"Feature",id:Te[$+Xe],properties:Ut(Te,$,q),geometry:{type:"Point",coordinates:[(J=Te[$],360*(J-.5)),nt(Te[$+1])]}};var J}function Ut(Te,$,q){const J=Te[$+wt],oe=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,pe=Te[$+Kt],Ie=pe===-1?{}:Object.assign({},q[pe]);return Object.assign(Ie,{cluster:!0,cluster_id:Te[$+Xe],point_count:J,point_count_abbreviated:oe})}function et(Te){return Te/360+.5}function mt(Te){const $=Math.sin(Te*Math.PI/180),q=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return q<0?0:q>1?1:q}function nt(Te){const $=(180-360*Te)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function bt(Te,$,q,J){let oe=J;const pe=$+(q-$>>1);let Ie,$e=q-$;const Se=Te[$],He=Te[$+1],Ne=Te[q],Ee=Te[q+1];for(let tt=$+3;tt<q;tt+=3){const Ae=ir(Te[tt],Te[tt+1],Se,He,Ne,Ee);if(Ae>oe)Ie=tt,oe=Ae;else if(Ae===oe){const yt=Math.abs(tt-pe);yt<$e&&(Ie=tt,$e=yt)}}oe>J&&(Ie-$>3&&bt(Te,$,Ie,J),Te[Ie+2]=oe,q-Ie>3&&bt(Te,Ie,q,J))}function ir(Te,$,q,J,oe,pe){let Ie=oe-q,$e=pe-J;if(Ie!==0||$e!==0){const Se=((Te-q)*Ie+($-J)*$e)/(Ie*Ie+$e*$e);Se>1?(q=oe,J=pe):Se>0&&(q+=Ie*Se,J+=$e*Se)}return Ie=Te-q,$e=$-J,Ie*Ie+$e*$e}function Jt(Te,$,q,J){const oe={id:Te??null,type:$,geometry:q,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if($==="Point"||$==="MultiPoint"||$==="LineString")Qt(oe,q);else if($==="Polygon")Qt(oe,q[0]);else if($==="MultiLineString")for(const pe of q)Qt(oe,pe);else if($==="MultiPolygon")for(const pe of q)Qt(oe,pe[0]);return oe}function Qt(Te,$){for(let q=0;q<$.length;q+=3)Te.minX=Math.min(Te.minX,$[q]),Te.minY=Math.min(Te.minY,$[q+1]),Te.maxX=Math.max(Te.maxX,$[q]),Te.maxY=Math.max(Te.maxY,$[q+1])}function lr(Te,$,q,J){if(!$.geometry)return;const oe=$.geometry.coordinates;if(oe&&oe.length===0)return;const pe=$.geometry.type,Ie=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2);let $e=[],Se=$.id;if(q.promoteId?Se=$.properties[q.promoteId]:q.generateId&&(Se=J||0),pe==="Point")Yr(oe,$e);else if(pe==="MultiPoint")for(const He of oe)Yr(He,$e);else if(pe==="LineString")tn(oe,$e,Ie,!1);else if(pe==="MultiLineString"){if(q.lineMetrics){for(const He of oe)$e=[],tn(He,$e,Ie,!1),Te.push(Jt(Se,"LineString",$e,$.properties));return}Pr(oe,$e,Ie,!1)}else if(pe==="Polygon")Pr(oe,$e,Ie,!0);else{if(pe!=="MultiPolygon"){if(pe==="GeometryCollection"){for(const He of $.geometry.geometries)lr(Te,{id:Se,geometry:He,properties:$.properties},q,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const He of oe){const Ne=[];Pr(He,Ne,Ie,!0),$e.push(Ne)}}Te.push(Jt(Se,pe,$e,$.properties))}function Yr(Te,$){$.push(Gr(Te[0]),Dr(Te[1]),0)}function tn(Te,$,q,J){let oe,pe,Ie=0;for(let Se=0;Se<Te.length;Se++){const He=Gr(Te[Se][0]),Ne=Dr(Te[Se][1]);$.push(He,Ne,0),Se>0&&(Ie+=J?(oe*Ne-He*pe)/2:Math.sqrt(Math.pow(He-oe,2)+Math.pow(Ne-pe,2))),oe=He,pe=Ne}const $e=$.length-3;$[2]=1,bt($,0,$e,q),$[$e+2]=1,$.size=Math.abs(Ie),$.start=0,$.end=$.size}function Pr(Te,$,q,J){for(let oe=0;oe<Te.length;oe++){const pe=[];tn(Te[oe],pe,q,J),$.push(pe)}}function Gr(Te){return Te/360+.5}function Dr(Te){const $=Math.sin(Te*Math.PI/180),q=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return q<0?0:q>1?1:q}function ce(Te,$,q,J,oe,pe,Ie,$e){if(J/=$,pe>=(q/=$)&&Ie<J)return Te;if(Ie<q||pe>=J)return null;const Se=[];for(const He of Te){const Ne=He.geometry;let Ee=He.type;const tt=oe===0?He.minX:He.minY,Ae=oe===0?He.maxX:He.maxY;if(tt>=q&&Ae<J){Se.push(He);continue}if(Ae<q||tt>=J)continue;let yt=[];if(Ee==="Point"||Ee==="MultiPoint")ge(Ne,yt,q,J,oe);else if(Ee==="LineString")Le(Ne,yt,q,J,oe,!1,$e.lineMetrics);else if(Ee==="MultiLineString")st(Ne,yt,q,J,oe,!1);else if(Ee==="Polygon")st(Ne,yt,q,J,oe,!0);else if(Ee==="MultiPolygon")for(const Rt of Ne){const Wt=[];st(Rt,Wt,q,J,oe,!0),Wt.length&&yt.push(Wt)}if(yt.length){if($e.lineMetrics&&Ee==="LineString"){for(const Rt of yt)Se.push(Jt(He.id,Ee,Rt,He.tags));continue}Ee!=="LineString"&&Ee!=="MultiLineString"||(yt.length===1?(Ee="LineString",yt=yt[0]):Ee="MultiLineString"),Ee!=="Point"&&Ee!=="MultiPoint"||(Ee=yt.length===3?"Point":"MultiPoint"),Se.push(Jt(He.id,Ee,yt,He.tags))}}return Se.length?Se:null}function ge(Te,$,q,J,oe){for(let pe=0;pe<Te.length;pe+=3){const Ie=Te[pe+oe];Ie>=q&&Ie<=J&&ct($,Te[pe],Te[pe+1],Te[pe+2])}}function Le(Te,$,q,J,oe,pe,Ie){let $e=ut(Te);const Se=oe===0?te:se;let He,Ne,Ee=Te.start;for(let Wt=0;Wt<Te.length-3;Wt+=3){const Zt=Te[Wt],Je=Te[Wt+1],Pt=Te[Wt+2],kt=Te[Wt+3],er=Te[Wt+4],Gt=oe===0?Zt:Je,rr=oe===0?kt:er;let zt=!1;Ie&&(He=Math.sqrt(Math.pow(Zt-kt,2)+Math.pow(Je-er,2))),Gt<q?rr>q&&(Ne=Se($e,Zt,Je,kt,er,q),Ie&&($e.start=Ee+He*Ne)):Gt>J?rr<J&&(Ne=Se($e,Zt,Je,kt,er,J),Ie&&($e.start=Ee+He*Ne)):ct($e,Zt,Je,Pt),rr<q&&Gt>=q&&(Ne=Se($e,Zt,Je,kt,er,q),zt=!0),rr>J&&Gt<=J&&(Ne=Se($e,Zt,Je,kt,er,J),zt=!0),!pe&&zt&&(Ie&&($e.end=Ee+He*Ne),$.push($e),$e=ut(Te)),Ie&&(Ee+=He)}let tt=Te.length-3;const Ae=Te[tt],yt=Te[tt+1],Rt=oe===0?Ae:yt;Rt>=q&&Rt<=J&&ct($e,Ae,yt,Te[tt+2]),tt=$e.length-3,pe&&tt>=3&&($e[tt]!==$e[0]||$e[tt+1]!==$e[1])&&ct($e,$e[0],$e[1],$e[2]),$e.length&&$.push($e)}function ut(Te){const $=[];return $.size=Te.size,$.start=Te.start,$.end=Te.end,$}function st(Te,$,q,J,oe,pe){for(const Ie of Te)Le(Ie,$,q,J,oe,pe,!1)}function ct(Te,$,q,J){Te.push($,q,J)}function te(Te,$,q,J,oe,pe){const Ie=(pe-$)/(J-$);return ct(Te,pe,q+(oe-q)*Ie,1),Ie}function se(Te,$,q,J,oe,pe){const Ie=(pe-q)/(oe-q);return ct(Te,$+(J-$)*Ie,pe,1),Ie}function Pe(Te,$){const q=[];for(let J=0;J<Te.length;J++){const oe=Te[J],pe=oe.type;let Ie;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")Ie=Be(oe.geometry,$);else if(pe==="MultiLineString"||pe==="Polygon"){Ie=[];for(const $e of oe.geometry)Ie.push(Be($e,$))}else if(pe==="MultiPolygon"){Ie=[];for(const $e of oe.geometry){const Se=[];for(const He of $e)Se.push(Be(He,$));Ie.push(Se)}}q.push(Jt(oe.id,pe,Ie,oe.tags))}return q}function Be(Te,$){const q=[];q.size=Te.size,Te.start!==void 0&&(q.start=Te.start,q.end=Te.end);for(let J=0;J<Te.length;J+=3)q.push(Te[J]+$,Te[J+1],Te[J+2]);return q}function xt(Te,$){if(Te.transformed)return Te;const q=1<<Te.z,J=Te.x,oe=Te.y;for(const pe of Te.features){const Ie=pe.geometry,$e=pe.type;if(pe.geometry=[],$e===1)for(let Se=0;Se<Ie.length;Se+=2)pe.geometry.push(it(Ie[Se],Ie[Se+1],$,q,J,oe));else for(let Se=0;Se<Ie.length;Se++){const He=[];for(let Ne=0;Ne<Ie[Se].length;Ne+=2)He.push(it(Ie[Se][Ne],Ie[Se][Ne+1],$,q,J,oe));pe.geometry.push(He)}}return Te.transformed=!0,Te}function it(Te,$,q,J,oe,pe){return[Math.round(q*(Te*J-oe)),Math.round(q*($*J-pe))]}function Me(Te,$,q,J,oe){const pe=$===oe.maxZoom?0:oe.tolerance/((1<<$)*oe.extent),Ie={features:[],numPoints:0,numSimplified:0,numFeatures:Te.length,source:null,x:q,y:J,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const $e of Te)Ze(Ie,$e,pe,oe);return Ie}function Ze(Te,$,q,J){const oe=$.geometry,pe=$.type,Ie=[];if(Te.minX=Math.min(Te.minX,$.minX),Te.minY=Math.min(Te.minY,$.minY),Te.maxX=Math.max(Te.maxX,$.maxX),Te.maxY=Math.max(Te.maxY,$.maxY),pe==="Point"||pe==="MultiPoint")for(let $e=0;$e<oe.length;$e+=3)Ie.push(oe[$e],oe[$e+1]),Te.numPoints++,Te.numSimplified++;else if(pe==="LineString")It(Ie,oe,Te,q,!1,!1);else if(pe==="MultiLineString"||pe==="Polygon")for(let $e=0;$e<oe.length;$e++)It(Ie,oe[$e],Te,q,pe==="Polygon",$e===0);else if(pe==="MultiPolygon")for(let $e=0;$e<oe.length;$e++){const Se=oe[$e];for(let He=0;He<Se.length;He++)It(Ie,Se[He],Te,q,!0,He===0)}if(Ie.length){let $e=$.tags||null;if(pe==="LineString"&&J.lineMetrics){$e={};for(const He in $.tags)$e[He]=$.tags[He];$e.mapbox_clip_start=oe.start/oe.size,$e.mapbox_clip_end=oe.end/oe.size}const Se={geometry:Ie,type:pe==="Polygon"||pe==="MultiPolygon"?3:pe==="LineString"||pe==="MultiLineString"?2:1,tags:$e};$.id!==null&&(Se.id=$.id),Te.features.push(Se)}}function It(Te,$,q,J,oe,pe){const Ie=J*J;if(J>0&&$.size<(oe?Ie:J))return void(q.numPoints+=$.length/3);const $e=[];for(let Se=0;Se<$.length;Se+=3)(J===0||$[Se+2]>Ie)&&(q.numSimplified++,$e.push($[Se],$[Se+1])),q.numPoints++;oe&&function(Se,He){let Ne=0;for(let Ee=0,tt=Se.length,Ae=tt-2;Ee<tt;Ae=Ee,Ee+=2)Ne+=(Se[Ee]-Se[Ae])*(Se[Ee+1]+Se[Ae+1]);if(Ne>0===He)for(let Ee=0,tt=Se.length;Ee<tt/2;Ee+=2){const Ae=Se[Ee],yt=Se[Ee+1];Se[Ee]=Se[tt-2-Ee],Se[Ee+1]=Se[tt-1-Ee],Se[tt-2-Ee]=Ae,Se[tt-1-Ee]=yt}}($e,pe),Te.push($e)}const Nt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ht{constructor($,q){const J=(q=this.options=function(pe,Ie){for(const $e in Ie)pe[$e]=Ie[$e];return pe}(Object.create(Nt),q)).debug;if(J&&console.time("preprocess data"),q.maxZoom<0||q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(q.promoteId&&q.generateId)throw new Error("promoteId and generateId cannot be used together.");let oe=function(pe,Ie){const $e=[];if(pe.type==="FeatureCollection")for(let Se=0;Se<pe.features.length;Se++)lr($e,pe.features[Se],Ie,Se);else lr($e,pe.type==="Feature"?pe:{geometry:pe},Ie);return $e}($,q);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",q.indexMaxZoom,q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),oe=function(pe,Ie){const $e=Ie.buffer/Ie.extent;let Se=pe;const He=ce(pe,1,-1-$e,$e,0,-1,2,Ie),Ne=ce(pe,1,1-$e,2+$e,0,-1,2,Ie);return(He||Ne)&&(Se=ce(pe,1,-$e,1+$e,0,-1,2,Ie)||[],He&&(Se=Pe(He,1).concat(Se)),Ne&&(Se=Se.concat(Pe(Ne,-1)))),Se}(oe,q),oe.length&&this.splitTile(oe,0,0,0),J&&(oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile($,q,J,oe,pe,Ie,$e){const Se=[$,q,J,oe],He=this.options,Ne=He.debug;for(;Se.length;){oe=Se.pop(),J=Se.pop(),q=Se.pop(),$=Se.pop();const Ee=1<<q,tt=Fr(q,J,oe);let Ae=this.tiles[tt];if(!Ae&&(Ne>1&&console.time("creation"),Ae=this.tiles[tt]=Me($,q,J,oe,He),this.tileCoords.push({z:q,x:J,y:oe}),Ne)){Ne>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",q,J,oe,Ae.numFeatures,Ae.numPoints,Ae.numSimplified),console.timeEnd("creation"));const zt=`z${q}`;this.stats[zt]=(this.stats[zt]||0)+1,this.total++}if(Ae.source=$,pe==null){if(q===He.indexMaxZoom||Ae.numPoints<=He.indexMaxPoints)continue}else{if(q===He.maxZoom||q===pe)continue;if(pe!=null){const zt=pe-q;if(J!==Ie>>zt||oe!==$e>>zt)continue}}if(Ae.source=null,$.length===0)continue;Ne>1&&console.time("clipping");const yt=.5*He.buffer/He.extent,Rt=.5-yt,Wt=.5+yt,Zt=1+yt;let Je=null,Pt=null,kt=null,er=null,Gt=ce($,Ee,J-yt,J+Wt,0,Ae.minX,Ae.maxX,He),rr=ce($,Ee,J+Rt,J+Zt,0,Ae.minX,Ae.maxX,He);$=null,Gt&&(Je=ce(Gt,Ee,oe-yt,oe+Wt,1,Ae.minY,Ae.maxY,He),Pt=ce(Gt,Ee,oe+Rt,oe+Zt,1,Ae.minY,Ae.maxY,He),Gt=null),rr&&(kt=ce(rr,Ee,oe-yt,oe+Wt,1,Ae.minY,Ae.maxY,He),er=ce(rr,Ee,oe+Rt,oe+Zt,1,Ae.minY,Ae.maxY,He),rr=null),Ne>1&&console.timeEnd("clipping"),Se.push(Je||[],q+1,2*J,2*oe),Se.push(Pt||[],q+1,2*J,2*oe+1),Se.push(kt||[],q+1,2*J+1,2*oe),Se.push(er||[],q+1,2*J+1,2*oe+1)}}getTile($,q,J){$=+$,q=+q,J=+J;const oe=this.options,{extent:pe,debug:Ie}=oe;if($<0||$>24)return null;const $e=1<<$,Se=Fr($,q=q+$e&$e-1,J);if(this.tiles[Se])return xt(this.tiles[Se],pe);Ie>1&&console.log("drilling down to z%d-%d-%d",$,q,J);let He,Ne=$,Ee=q,tt=J;for(;!He&&Ne>0;)Ne--,Ee>>=1,tt>>=1,He=this.tiles[Fr(Ne,Ee,tt)];return He&&He.source?(Ie>1&&(console.log("found parent tile z%d-%d-%d",Ne,Ee,tt),console.time("drilling down")),this.splitTile(He.source,Ne,Ee,tt,$,q,J),Ie>1&&console.timeEnd("drilling down"),this.tiles[Se]?xt(this.tiles[Se],pe):null):null}}function Fr(Te,$,q){return 32*((1<<Te)*q+$)+Te}function Sr(Te,$){return $?Te.properties[$]:Te.id}function Ln(Te,$){if(Te==null)return!0;if(Te.type==="Feature")return Sr(Te,$)!=null;if(Te.type==="FeatureCollection"){const q=new Set;for(const J of Te.features){const oe=Sr(J,$);if(oe==null||q.has(oe))return!1;q.add(oe)}return!0}return!1}function Rn(Te,$){const q=new Map;if(Te!=null)if(Te.type==="Feature")q.set(Sr(Te,$),Te);else for(const J of Te.features)q.set(Sr(J,$),J);return q}class Hi extends O{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile($,q){return m._(this,void 0,void 0,function*(){const J=$.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const oe=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!oe)return null;const pe=new Ce(oe.features);let Ie=We(pe);return Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),{vectorTile:pe,rawData:Ie.buffer}})}loadData($){return m._(this,void 0,void 0,function*(){var q;(q=this._pendingRequest)===null||q===void 0||q.abort();const J=!!($&&$.request&&$.request.collectResourceTiming)&&new m.cw($.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON($,this._pendingRequest),this._geoJSONIndex=$.cluster?new vt(function({superclusterOptions:Ie,clusterProperties:$e}){if(!$e||!Ie)return Ie;const Se={},He={},Ne={accumulated:null,zoom:0},Ee={properties:null},tt=Object.keys($e);for(const Ae of tt){const[yt,Rt]=$e[Ae],Wt=m.cD(Rt),Zt=m.cD(typeof yt=="string"?[yt,["accumulated"],["get",Ae]]:yt);Se[Ae]=Wt.value,He[Ae]=Zt.value}return Ie.map=Ae=>{Ee.properties=Ae;const yt={};for(const Rt of tt)yt[Rt]=Se[Rt].evaluate(Ne,Ee);return yt},Ie.reduce=(Ae,yt)=>{Ee.properties=yt;for(const Rt of tt)Ne.accumulated=Ae[Rt],Ae[Rt]=He[Rt].evaluate(Ne,Ee)},Ie}($)).load((yield this._pendingData).features):(oe=yield this._pendingData,new Ht(oe,$.geojsonVtOptions)),this.loaded={};const pe={};if(J){const Ie=J.finish();Ie&&(pe.resourceTiming={},pe.resourceTiming[$.source]=JSON.parse(JSON.stringify(Ie)))}return pe}catch(pe){if(delete this._pendingRequest,m.ch(pe))return{abandoned:!0};throw pe}var oe})}getData(){return m._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile($){const q=this.loaded;return q&&q[$.uid]?super.reloadTile($):this.loadTile($)}loadAndProcessGeoJSON($,q){return m._(this,void 0,void 0,function*(){let J=yield this.loadGeoJSON($,q);if(delete this._pendingRequest,typeof J!="object")throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);if(ye(J,!0),$.filter){const oe=m.cD($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(oe.result==="error")throw new Error(oe.value.map(Ie=>`${Ie.key}: ${Ie.message}`).join(", "));J={type:"FeatureCollection",features:J.features.filter(Ie=>oe.value.evaluate({zoom:0},Ie))}}return J})}loadGeoJSON($,q){return m._(this,void 0,void 0,function*(){const{promoteId:J}=$;if($.request){const oe=yield m.j($.request,q);return this._dataUpdateable=Ln(oe.data,J)?Rn(oe.data,J):void 0,oe.data}if(typeof $.data=="string")try{const oe=JSON.parse($.data);return this._dataUpdateable=Ln(oe,J)?Rn(oe,J):void 0,oe}catch{throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`)}if(!$.dataDiff)throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${$.source}`);return function(oe,pe,Ie){var $e,Se,He,Ne;if(pe.removeAll&&oe.clear(),pe.remove)for(const Ee of pe.remove)oe.delete(Ee);if(pe.add)for(const Ee of pe.add){const tt=Sr(Ee,Ie);tt!=null&&oe.set(tt,Ee)}if(pe.update)for(const Ee of pe.update){let tt=oe.get(Ee.id);if(tt==null)continue;const Ae=!Ee.removeAllProperties&&((($e=Ee.removeProperties)===null||$e===void 0?void 0:$e.length)>0||((Se=Ee.addOrUpdateProperties)===null||Se===void 0?void 0:Se.length)>0);if((Ee.newGeometry||Ee.removeAllProperties||Ae)&&(tt=Object.assign({},tt),oe.set(Ee.id,tt),Ae&&(tt.properties=Object.assign({},tt.properties))),Ee.newGeometry&&(tt.geometry=Ee.newGeometry),Ee.removeAllProperties)tt.properties={};else if(((He=Ee.removeProperties)===null||He===void 0?void 0:He.length)>0)for(const yt of Ee.removeProperties)Object.prototype.hasOwnProperty.call(tt.properties,yt)&&delete tt.properties[yt];if(((Ne=Ee.addOrUpdateProperties)===null||Ne===void 0?void 0:Ne.length)>0)for(const{key:yt,value:Rt}of Ee.addOrUpdateProperties)tt.properties[yt]=Rt}}(this._dataUpdateable,$.dataDiff,J),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource($){return m._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom($){return this._geoJSONIndex.getClusterExpansionZoom($.clusterId)}getClusterChildren($){return this._geoJSONIndex.getChildren($.clusterId)}getClusterLeaves($){return this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset)}}class Li{constructor($){this.self=$,this.actor=new m.H($),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(q,J)=>{if(this.externalWorkerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.externalWorkerSourceTypes[q]=J},this.self.addProtocol=m.cj,this.self.removeProtocol=m.ck,this.self.registerRTLTextPlugin=q=>{m.cE.setMethods(q)},this.actor.registerMessageHandler("LDT",(q,J)=>this._getDEMWorkerSource(q,J.source).loadTile(J)),this.actor.registerMessageHandler("RDT",(q,J)=>m._(this,void 0,void 0,function*(){this._getDEMWorkerSource(q,J.source).removeTile(J)})),this.actor.registerMessageHandler("GCEZ",(q,J)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(q,J.type,J.source).getClusterExpansionZoom(J)})),this.actor.registerMessageHandler("GCC",(q,J)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(q,J.type,J.source).getClusterChildren(J)})),this.actor.registerMessageHandler("GCL",(q,J)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(q,J.type,J.source).getClusterLeaves(J)})),this.actor.registerMessageHandler("LD",(q,J)=>this._getWorkerSource(q,J.type,J.source).loadData(J)),this.actor.registerMessageHandler("GD",(q,J)=>this._getWorkerSource(q,J.type,J.source).getData()),this.actor.registerMessageHandler("LT",(q,J)=>this._getWorkerSource(q,J.type,J.source).loadTile(J)),this.actor.registerMessageHandler("RT",(q,J)=>this._getWorkerSource(q,J.type,J.source).reloadTile(J)),this.actor.registerMessageHandler("AT",(q,J)=>this._getWorkerSource(q,J.type,J.source).abortTile(J)),this.actor.registerMessageHandler("RMT",(q,J)=>this._getWorkerSource(q,J.type,J.source).removeTile(J)),this.actor.registerMessageHandler("RS",(q,J)=>m._(this,void 0,void 0,function*(){if(!this.workerSources[q]||!this.workerSources[q][J.type]||!this.workerSources[q][J.type][J.source])return;const oe=this.workerSources[q][J.type][J.source];delete this.workerSources[q][J.type][J.source],oe.removeSource!==void 0&&oe.removeSource(J)})),this.actor.registerMessageHandler("RM",q=>m._(this,void 0,void 0,function*(){delete this.layerIndexes[q],delete this.availableImages[q],delete this.workerSources[q],delete this.demWorkerSources[q]})),this.actor.registerMessageHandler("SR",(q,J)=>m._(this,void 0,void 0,function*(){this.referrer=J})),this.actor.registerMessageHandler("SRPS",(q,J)=>this._syncRTLPluginState(q,J)),this.actor.registerMessageHandler("IS",(q,J)=>m._(this,void 0,void 0,function*(){this.self.importScripts(J)})),this.actor.registerMessageHandler("SI",(q,J)=>this._setImages(q,J)),this.actor.registerMessageHandler("UL",(q,J)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(q).update(J.layers,J.removedIds)})),this.actor.registerMessageHandler("SL",(q,J)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(q).replace(J)}))}_setImages($,q){return m._(this,void 0,void 0,function*(){this.availableImages[$]=q;for(const J in this.workerSources[$]){const oe=this.workerSources[$][J];for(const pe in oe)oe[pe].availableImages=q}})}_syncRTLPluginState($,q){return m._(this,void 0,void 0,function*(){return yield m.cE.syncState(q,this.self.importScripts)})}_getAvailableImages($){let q=this.availableImages[$];return q||(q=[]),q}_getLayerIndex($){let q=this.layerIndexes[$];return q||(q=this.layerIndexes[$]=new l),q}_getWorkerSource($,q,J){if(this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][q]||(this.workerSources[$][q]={}),!this.workerSources[$][q][J]){const oe={sendAsync:(pe,Ie)=>(pe.targetMapId=$,this.actor.sendAsync(pe,Ie))};switch(q){case"vector":this.workerSources[$][q][J]=new O(oe,this._getLayerIndex($),this._getAvailableImages($));break;case"geojson":this.workerSources[$][q][J]=new Hi(oe,this._getLayerIndex($),this._getAvailableImages($));break;default:this.workerSources[$][q][J]=new this.externalWorkerSourceTypes[q](oe,this._getLayerIndex($),this._getAvailableImages($))}}return this.workerSources[$][q][J]}_getDEMWorkerSource($,q){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][q]||(this.demWorkerSources[$][q]=new z),this.demWorkerSources[$][q]}}return m.i(self)&&(self.worker=new Li(self)),Li}),p("index",["exports","./shared"],function(m,l){var S="5.2.0";function I(){var _=new l.A(4);return l.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}let A,O;const z={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(_,r,o){const d=requestAnimationFrame(y=>{h(),r(y)}),{unsubscribe:h}=l.s(_.signal,"abort",()=>{h(),cancelAnimationFrame(d),o(l.c())},!1)},frameAsync(_){return new Promise((r,o)=>{this.frame(_,r,o)})},getImageData(_,r=0){return this.getImageCanvasContext(_).getImageData(-r,-r,_.width+2*r,_.height+2*r)},getImageCanvasContext(_){const r=window.document.createElement("canvas"),o=r.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return r.width=_.width,r.height=_.height,o.drawImage(_,0,0,_.width,_.height),o},resolveURL:_=>(A||(A=document.createElement("a")),A.href=_,A.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(O==null&&(O=matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}};class D{static testProp(r){if(!D.docStyle)return r[0];for(let o=0;o<r.length;o++)if(r[o]in D.docStyle)return r[o];return r[0]}static create(r,o,d){const h=window.document.createElement(r);return o!==void 0&&(h.className=o),d&&d.appendChild(h),h}static createNS(r,o){return window.document.createElementNS(r,o)}static disableDrag(){D.docStyle&&D.selectProp&&(D.userSelect=D.docStyle[D.selectProp],D.docStyle[D.selectProp]="none")}static enableDrag(){D.docStyle&&D.selectProp&&(D.docStyle[D.selectProp]=D.userSelect)}static setTransform(r,o){r.style[D.transformProp]=o}static addEventListener(r,o,d,h={}){r.addEventListener(o,d,"passive"in h?h:h.capture)}static removeEventListener(r,o,d,h={}){r.removeEventListener(o,d,"passive"in h?h:h.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",D.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",D.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",D.suppressClickInternal,!0)},0)}static getScale(r){const o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}static getPoint(r,o,d){const h=o.boundingClientRect;return new l.P((d.clientX-h.left)/o.x-r.clientLeft,(d.clientY-h.top)/o.y-r.clientTop)}static mousePos(r,o){const d=D.getScale(r);return D.getPoint(r,d,o)}static touchPos(r,o){const d=[],h=D.getScale(r);for(let y=0;y<o.length;y++)d.push(D.getPoint(r,h,o[y]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const o=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),d=o.querySelectorAll("script");for(const h of d)h.remove();return D.clean(o),o.innerHTML}static isPossiblyDangerous(r,o){const d=o.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!d.includes("javascript:")&&!d.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const o=r.children;for(const d of o)D.removeAttributes(d),D.clean(d)}static removeAttributes(r){for(const{name:o,value:d}of r.attributes)D.isPossiblyDangerous(o,d)&&r.removeAttribute(o)}}D.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,D.selectProp=D.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),D.transformProp=D.testProp(["transform","WebkitTransform"]);const H={supported:!1,testSupport:function(_){!ne&&ye&&(xe?Ce(_):ue=_)}};let ue,ye,ne=!1,xe=!1;function Ce(_){const r=_.createTexture();_.bindTexture(_.TEXTURE_2D,r);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,ye),_.isContextLost())return;H.supported=!0}catch{}_.deleteTexture(r),ne=!0}var X;typeof document<"u"&&(ye=document.createElement("img"),ye.onload=()=>{ue&&Ce(ue),ue=null,xe=!0},ye.onerror=()=>{ne=!0,ue=null},ye.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let r,o,d,h;_.resetRequestQueue=()=>{r=[],o=0,d=0,h={}},_.addThrottleControl=T=>{const M=d++;return h[M]=T,M},_.removeThrottleControl=T=>{delete h[T],x()},_.getImage=(T,M,R=!0)=>new Promise((B,F)=>{H.supported&&(T.headers||(T.headers={}),T.headers.accept="image/webp,*/*"),l.e(T,{type:"image"}),r.push({abortController:M,requestParameters:T,supportImageRefresh:R,state:"queued",onError:Z=>{F(Z)},onSuccess:Z=>{B(Z)}}),x()});const y=T=>l._(this,void 0,void 0,function*(){T.state="running";const{requestParameters:M,supportImageRefresh:R,onError:B,onSuccess:F,abortController:Z}=T,W=R===!1&&!l.i(self)&&!l.g(M.url)&&(!M.headers||Object.keys(M.headers).reduce((re,ae)=>re&&ae==="accept",!0));o++;const ee=W?C(M,Z):l.m(M,Z);try{const re=yield ee;delete T.abortController,T.state="completed",re.data instanceof HTMLImageElement||l.b(re.data)?F(re):re.data&&F({data:yield(Q=re.data,typeof createImageBitmap=="function"?l.f(Q):l.h(Q)),cacheControl:re.cacheControl,expires:re.expires})}catch(re){delete T.abortController,B(re)}finally{o--,x()}var Q}),x=()=>{const T=(()=>{for(const M of Object.keys(h))if(h[M]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let M=o;M<T&&r.length>0;M++){const R=r.shift();R.abortController.signal.aborted?M--:y(R)}},C=(T,M)=>new Promise((R,B)=>{const F=new Image,Z=T.url,W=T.credentials;W&&W==="include"?F.crossOrigin="use-credentials":(W&&W==="same-origin"||!l.d(Z))&&(F.crossOrigin="anonymous"),M.signal.addEventListener("abort",()=>{F.src="",B(l.c())}),F.fetchPriority="high",F.onload=()=>{F.onerror=F.onload=null,R({data:F})},F.onerror=()=>{F.onerror=F.onload=null,M.signal.aborted||B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},F.src=Z})}(X||(X={})),X.resetRequestQueue();class we{constructor(r){this._transformRequestFn=r}transformRequest(r,o){return this._transformRequestFn&&this._transformRequestFn(r,o)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function Oe(_){const r=[];if(typeof _=="string")r.push({id:"default",url:_});else if(_&&_.length>0){const o=[];for(const{id:d,url:h}of _){const y=`${d}${h}`;o.indexOf(y)===-1&&(o.push(y),r.push({id:d,url:h}))}}return r}function ke(_,r,o){try{const d=new URL(_);return d.pathname+=`${r}${o}`,d.toString()}catch{throw new Error(`Invalid sprite URL "${_}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Ve{constructor(r,o,d,h){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(o,h)}update(r,o,d){const{width:h,height:y}=r,x=!(this.size&&this.size[0]===h&&this.size[1]===y||d),{context:C}=this,{gl:T}=C;if(this.useMipmap=!!(o&&o.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!o||o.premultiply!==!1)),x)this.size=[h,y],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.b(r)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,r):T.texImage2D(T.TEXTURE_2D,0,this.format,h,y,0,this.format,T.UNSIGNED_BYTE,r.data);else{const{x:M,y:R}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.b(r)?T.texSubImage2D(T.TEXTURE_2D,0,M,R,T.RGBA,T.UNSIGNED_BYTE,r):T.texSubImage2D(T.TEXTURE_2D,0,M,R,h,y,T.RGBA,T.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D)}bind(r,o,d){const{context:h}=this,{gl:y}=h;y.bindTexture(y.TEXTURE_2D,this.texture),d!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=y.LINEAR),r!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,r),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,d||r),this.filter=r),o!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,o),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function We(_){const{userImage:r}=_;return!!(r&&r.render&&r.render())&&(_.data.replace(new Uint8Array(r.data.buffer)),!0)}class ft extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:o,promiseResolve:d}of this.requestors)d(this._getImagesForIds(o));this.requestors=[]}}getImage(r){const o=this.images[r];if(o&&!o.data&&o.spriteData){const d=o.spriteData;o.data=new l.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),o.spriteData=null}return o}addImage(r,o){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,o)&&(this.images[r]=o)}_validate(r,o){let d=!0;const h=o.data||o.spriteData;return this._validateStretch(o.stretchX,h&&h.width)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(o.stretchY,h&&h.height)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(o.content,o)||(this.fire(new l.k(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,o){if(!r)return!0;let d=0;for(const h of r){if(h[0]<d||h[1]<h[0]||o<h[1])return!1;d=h[1]}return!0}_validateContent(r,o){if(!r)return!0;if(r.length!==4)return!1;const d=o.spriteData,h=d&&d.width||o.data.width,y=d&&d.height||o.data.height;return!(r[0]<0||h<r[0]||r[1]<0||y<r[1]||r[2]<0||h<r[2]||r[3]<0||y<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,o,d=!0){const h=this.getImage(r);if(d&&(h.data.width!==o.data.width||h.data.height!==o.data.height))throw new Error(`size mismatch between old image (${h.data.width}x${h.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=h.version+1,this.images[r]=o,this.updatedImages[r]=!0}removeImage(r){const o=this.images[r];delete this.images[r],delete this.patterns[r],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((o,d)=>{let h=!0;if(!this.isLoaded())for(const y of r)this.images[y]||(h=!1);this.isLoaded()||h?o(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:o})})}_getImagesForIds(r){const o={};for(const d of r){let h=this.getImage(d);h||(this.fire(new l.l("styleimagemissing",{id:d})),h=this.getImage(d)),h?o[d]={data:h.data.clone(),pixelRatio:h.pixelRatio,sdf:h.sdf,version:h.version,stretchX:h.stretchX,stretchY:h.stretchY,content:h.content,textFitWidth:h.textFitWidth,textFitHeight:h.textFitHeight,hasRenderCallback:!!(h.userImage&&h.userImage.render)}:l.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:r,height:o}=this.atlasImage;return{width:r,height:o}}getPattern(r){const o=this.patterns[r],d=this.getImage(r);if(!d)return null;if(o&&o.position.version===d.version)return o.position;if(o)o.position.version=d.version;else{const h={w:d.data.width+2,h:d.data.height+2,x:0,y:0},y=new l.I(h,d);this.patterns[r]={bin:h,position:y}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const o=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ve(r,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const y in this.patterns)r.push(this.patterns[y].bin);const{w:o,h:d}=l.p(r),h=this.atlasImage;h.resize({width:o||1,height:d||1});for(const y in this.patterns){const{bin:x}=this.patterns[y],C=x.x+1,T=x.y+1,M=this.getImage(y).data,R=M.width,B=M.height;l.R.copy(M,h,{x:0,y:0},{x:C,y:T},{width:R,height:B}),l.R.copy(M,h,{x:0,y:B-1},{x:C,y:T-1},{width:R,height:1}),l.R.copy(M,h,{x:0,y:0},{x:C,y:T+B},{width:R,height:1}),l.R.copy(M,h,{x:R-1,y:0},{x:C-1,y:T},{width:1,height:B}),l.R.copy(M,h,{x:0,y:0},{x:C+R,y:T},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const o of r){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const d=this.getImage(o);d||l.w(`Image with ID: "${o}" was not found`),We(d)&&this.updateImage(o,d)}}}const Qe=1e20;function Ye(_,r,o,d,h,y,x,C,T){for(let M=r;M<r+d;M++)Xe(_,o*y+M,y,h,x,C,T);for(let M=o;M<o+h;M++)Xe(_,M*y+r,1,d,x,C,T)}function Xe(_,r,o,d,h,y,x){y[0]=0,x[0]=-1e20,x[1]=Qe,h[0]=_[r];for(let C=1,T=0,M=0;C<d;C++){h[C]=_[r+C*o];const R=C*C;do{const B=y[T];M=(h[C]-h[B]+R-B*B)/(C-B)/2}while(M<=x[T]&&--T>-1);T++,y[T]=C,x[T]=M,x[T+1]=Qe}for(let C=0,T=0;C<d;C++){for(;x[T+1]<C;)T++;const M=y[T],R=C-M;_[r+C*o]=h[M]+R*R}}class wt{constructor(r,o){this.requestManager=r,this.localIdeographFontFamily=o,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return l._(this,void 0,void 0,function*(){const o=[];for(const y in r)for(const x of r[y])o.push(this._getAndCacheGlyphsPromise(y,x));const d=yield Promise.all(o),h={};for(const{stack:y,id:x,glyph:C}of d)h[y]||(h[y]={}),h[y][x]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics};return h})}_getAndCacheGlyphsPromise(r,o){return l._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let h=d.glyphs[o];if(h!==void 0)return{stack:r,id:o,glyph:h};if(h=this._tinySDF(d,r,o),h)return d.glyphs[o]=h,{stack:r,id:o,glyph:h};const y=Math.floor(o/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[y])return{stack:r,id:o,glyph:h};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[y]){const C=wt.loadGlyphRange(r,y,this.url,this.requestManager);d.requests[y]=C}const x=yield d.requests[y];for(const C in x)this._doesCharSupportLocalGlyph(+C)||(d.glyphs[+C]=x[+C]);return d.ranges[y]=!0,{stack:r,id:o,glyph:x[o]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||l.u["CJK Unified Ideographs"](r)||l.u["Hangul Syllables"](r)||l.u.Hiragana(r)||l.u.Katakana(r)||l.u["CJK Symbols and Punctuation"](r)||l.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,o,d){const h=this.localIdeographFontFamily;if(!h||!this._doesCharSupportLocalGlyph(d))return;let y=r.tinySDF;if(!y){let C="400";/bold/i.test(o)?C="900":/medium/i.test(o)?C="500":/light/i.test(o)&&(C="200"),y=r.tinySDF=new wt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:h,fontWeight:C})}const x=y.draw(String.fromCharCode(d));return{id:d,bitmap:new l.q({width:x.width||60,height:x.height||60},x.data),metrics:{width:x.glyphWidth/2||24,height:x.glyphHeight/2||24,left:x.glyphLeft/2+.5||0,top:x.glyphTop/2-27.5||-8,advance:x.glyphAdvance/2||24,isDoubleResolution:!0}}}}wt.loadGlyphRange=function(_,r,o,d){return l._(this,void 0,void 0,function*(){const h=256*r,y=h+255,x=d.transformRequest(o.replace("{fontstack}",_).replace("{range}",`${h}-${y}`),"Glyphs"),C=yield l.n(x,new AbortController);if(!C||!C.data)throw new Error(`Could not load glyph range. range: ${r}, ${h}-${y}`);const T={};for(const M of l.o(C.data))T[M.id]=M;return T})},wt.TinySDF=class{constructor({fontSize:_=24,buffer:r=3,radius:o=8,cutoff:d=.25,fontFamily:h="sans-serif",fontWeight:y="normal",fontStyle:x="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=o;const C=this.size=_+4*r,T=this._createCanvas(C),M=this.ctx=T.getContext("2d",{willReadFrequently:!0});M.font=`${x} ${y} ${_}px ${h}`,M.textBaseline="alphabetic",M.textAlign="left",M.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(_){const r=document.createElement("canvas");return r.width=r.height=_,r}draw(_){const{width:r,actualBoundingBoxAscent:o,actualBoundingBoxDescent:d,actualBoundingBoxLeft:h,actualBoundingBoxRight:y}=this.ctx.measureText(_),x=Math.ceil(o),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-h))),T=Math.min(this.size-this.buffer,x+Math.ceil(d)),M=C+2*this.buffer,R=T+2*this.buffer,B=Math.max(M*R,0),F=new Uint8ClampedArray(B),Z={data:F,width:M,height:R,glyphWidth:C,glyphHeight:T,glyphTop:x,glyphLeft:0,glyphAdvance:r};if(C===0||T===0)return Z;const{ctx:W,buffer:ee,gridInner:Q,gridOuter:re}=this;W.clearRect(ee,ee,C,T),W.fillText(_,ee,ee+x);const ae=W.getImageData(ee,ee,C,T);re.fill(Qe,0,B),Q.fill(0,0,B);for(let he=0;he<T;he++)for(let fe=0;fe<C;fe++){const me=ae.data[4*(he*C+fe)+3]/255;if(me===0)continue;const ve=(he+ee)*M+fe+ee;if(me===1)re[ve]=0,Q[ve]=Qe;else{const _e=.5-me;re[ve]=_e>0?_e*_e:0,Q[ve]=_e<0?_e*_e:0}}Ye(re,0,0,M,R,M,this.f,this.v,this.z),Ye(Q,ee,ee,C,T,M,this.f,this.v,this.z);for(let he=0;he<B;he++){const fe=Math.sqrt(re[he])-Math.sqrt(Q[he]);F[he]=Math.round(255-255*(fe/this.radius+this.cutoff))}return Z}};class Kt{constructor(){this.specification=l.v.light.position}possiblyEvaluate(r,o){return l.z(r.expression.evaluate(o))}interpolate(r,o,d){return{x:l.B.number(r.x,o.x,d),y:l.B.number(r.y,o.y,d),z:l.B.number(r.z,o.z,d)}}}let vt;class At extends l.E{constructor(r){super(),vt=vt||new l.r({anchor:new l.D(l.v.light.anchor),position:new Kt,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(vt),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,o={}){if(!this._validate(l.t,r,o))for(const d in r){const h=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),h):this._transitionable.setValue(d,h)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,o,d){return(!d||d.validate!==!1)&&l.x(this,r.call(l.y,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const Ut=new l.r({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class et extends l.E{constructor(r){super(),this._transitionable=new l.T(Ut),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.C(0))}setSky(r,o={}){if(!this._validate(l.F,r,o)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in r){const h=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),h):this._transitionable.setValue(d,h)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,o,d={}){return(d==null?void 0:d.validate)!==!1&&l.x(this,r.call(l.y,l.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class mt{constructor(r,o){this.width=r,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,o){const d=r.join(",")+String(o);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,o)),this.dashEntry[d]}getDashRanges(r,o,d){const h=[];let y=r.length%2==1?-r[r.length-1]*d:0,x=r[0]*d,C=!0;h.push({left:y,right:x,isDash:C,zeroLength:r[0]===0});let T=r[0];for(let M=1;M<r.length;M++){C=!C;const R=r[M];y=T*d,T+=R,x=T*d,h.push({left:y,right:x,isDash:C,zeroLength:R===0})}return h}addRoundDash(r,o,d){const h=o/2;for(let y=-d;y<=d;y++){const x=this.width*(this.nextRow+d+y);let C=0,T=r[C];for(let M=0;M<this.width;M++){M/T.right>1&&(T=r[++C]);const R=Math.abs(M-T.left),B=Math.abs(M-T.right),F=Math.min(R,B);let Z;const W=y/d*(h+1);if(T.isDash){const ee=h-Math.abs(W);Z=Math.sqrt(F*F+ee*ee)}else Z=h-Math.sqrt(F*F+W*W);this.data[x+M]=Math.max(0,Math.min(255,Z+128))}}}addRegularDash(r){for(let C=r.length-1;C>=0;--C){const T=r[C],M=r[C+1];T.zeroLength?r.splice(C,1):M&&M.isDash===T.isDash&&(M.left=T.left,r.splice(C,1))}const o=r[0],d=r[r.length-1];o.isDash===d.isDash&&(o.left=d.left-this.width,d.right=o.right+this.width);const h=this.width*this.nextRow;let y=0,x=r[y];for(let C=0;C<this.width;C++){C/x.right>1&&(x=r[++y]);const T=Math.abs(C-x.left),M=Math.abs(C-x.right),R=Math.min(T,M);this.data[h+C]=Math.max(0,Math.min(255,(x.isDash?R:-R)+128))}}addDash(r,o){const d=o?7:0,h=2*d+1;if(this.nextRow+h>this.height)return l.w("LineAtlas out of space"),null;let y=0;for(let C=0;C<r.length;C++)y+=r[C];if(y!==0){const C=this.width/y,T=this.getDashRanges(r,this.width,C);o?this.addRoundDash(T,C,d):this.addRegularDash(T)}const x={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:y};return this.nextRow+=h,this.dirty=!0,x}bind(r){const o=r.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const nt="maplibre_preloaded_worker_pool";class bt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<bt.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nt]}numActive(){return Object.keys(this.active).length}}const ir=Math.floor(z.hardwareConcurrency/2);let Jt,Qt;function lr(){return Jt||(Jt=new bt),Jt}bt.workerCount=l.G(globalThis)?Math.max(Math.min(ir,3),1):1;class Yr{constructor(r,o){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=o;const d=this.workerPool.acquire(o);for(let h=0;h<d.length;h++){const y=new l.H(d[h],o);y.name=`Worker ${h}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,o){const d=[];for(const h of this.actors)d.push(h.sendAsync({type:r,data:o}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,o){for(const d of this.actors)d.registerMessageHandler(r,o)}}function tn(){return Qt||(Qt=new Yr(lr(),l.J),Qt.registerMessageHandler("GR",(_,r,o)=>l.m(r,o))),Qt}function Pr(_,r){const o=l.K();return l.L(o,o,[1,1,0]),l.M(o,o,[.5*_.width,.5*_.height,1]),_.calculatePosMatrix?l.N(o,o,_.calculatePosMatrix(r.toUnwrapped())):o}function Gr(_,r,o,d,h,y){var x;const C=function(B,F,Z){if(B)for(const W of B){const ee=F[W];if(ee&&ee.source===Z&&ee.type==="fill-extrusion")return!0}else for(const W in F){const ee=F[W];if(ee.source===Z&&ee.type==="fill-extrusion")return!0}return!1}((x=h==null?void 0:h.layers)!==null&&x!==void 0?x:null,r,_.id),T=y.maxPitchScaleFactor(),M=_.tilesIn(d,T,C);M.sort(Dr);const R=[];for(const B of M)R.push({wrappedTileID:B.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(r,o,_._state,B.queryGeometry,B.cameraQueryGeometry,B.scale,h,y,T,Pr(_.transform,B.tileID))});return function(B,F){for(const Z in B)for(const W of B[Z])ce(W,F);return B}(function(B){const F={},Z={};for(const W of B){const ee=W.queryResults,Q=W.wrappedTileID,re=Z[Q]=Z[Q]||{};for(const ae in ee){const he=ee[ae],fe=re[ae]=re[ae]||{},me=F[ae]=F[ae]||[];for(const ve of he)fe[ve.featureIndex]||(fe[ve.featureIndex]=!0,me.push(ve))}}return F}(R),_)}function Dr(_,r){const o=_.tileID,d=r.tileID;return o.overscaledZ-d.overscaledZ||o.canonical.y-d.canonical.y||o.wrap-d.wrap||o.canonical.x-d.canonical.x}function ce(_,r){const o=_.feature,d=r.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=d}function ge(_,r,o){return l._(this,void 0,void 0,function*(){let d=_;if(_.url?d=(yield l.j(r.transformRequest(_.url,"Source"),o)).data:yield z.frameAsync(o),!d)return null;const h=l.O(l.e(d,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(h.vectorLayerIds=d.vector_layers.map(y=>y.id)),h})}class Le{constructor(r,o){r&&(o?this.setSouthWest(r).setNorthEast(o):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.Q?new l.Q(r.lng,r.lat):l.Q.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.Q?new l.Q(r.lng,r.lat):l.Q.convert(r),this}extend(r){const o=this._sw,d=this._ne;let h,y;if(r instanceof l.Q)h=r,y=r;else{if(!(r instanceof Le))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Le.convert(r)):this.extend(l.Q.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.Q.convert(r)):this;if(h=r._sw,y=r._ne,!h||!y)return this}return o||d?(o.lng=Math.min(h.lng,o.lng),o.lat=Math.min(h.lat,o.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new l.Q(h.lng,h.lat),this._ne=new l.Q(y.lng,y.lat)),this}getCenter(){return new l.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.Q(this.getWest(),this.getNorth())}getSouthEast(){return new l.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:o,lat:d}=l.Q.convert(r);let h=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&h}static convert(r){return r instanceof Le?r:r&&new Le(r)}static fromLngLat(r,o=0){const d=360*o/40075017,h=d/Math.cos(Math.PI/180*r.lat);return new Le(new l.Q(r.lng-h,r.lat-d),new l.Q(r.lng+h,r.lat+d))}adjustAntiMeridian(){const r=new l.Q(this._sw.lng,this._sw.lat),o=new l.Q(this._ne.lng,this._ne.lat);return new Le(r,r.lng>o.lng?new l.Q(o.lng+360,o.lat):o)}}class ut{constructor(r,o,d){this.bounds=Le.convert(this.validateBounds(r)),this.minzoom=o||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const o=Math.pow(2,r.z),d=Math.floor(l.U(this.bounds.getWest())*o),h=Math.floor(l.S(this.bounds.getNorth())*o),y=Math.ceil(l.U(this.bounds.getEast())*o),x=Math.ceil(l.S(this.bounds.getSouth())*o);return r.x>=d&&r.x<y&&r.y>=h&&r.y<x}}class st extends l.E{constructor(r,o,d,h){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.O(o,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(h)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield ge(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(l.e(this,r),r.bounds&&(this.tileBounds=new ut(r.bounds,this.minzoom,this.maxzoom)),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new l.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(r){return l._(this,void 0,void 0,function*(){const o=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(o,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};d.request.collectResourceTiming=this._collectResourceTiming;let h="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((y,x)=>{r.reloadPromise={resolve:y,reject:x}})}else r.actor=this.dispatcher.getActor(),h="LT";r.abortController=new AbortController;try{const y=yield r.actor.sendAsync({type:h,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,y)}catch(y){if(delete r.abortController,r.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,o){if(o&&o.resourceTiming&&(r.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&r.setExpiryData(o),r.loadVectorData(o,this.map.painter),r.reloadPromise){const d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ct extends l.E{constructor(r,o,d,h){super(),this.id=r,this.dispatcher=d,this.setEventedParent(h),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},o),l.e(this,l.O(o,["url","scheme","tileSize"]))}load(){return l._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield ge(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(l.e(this,o),o.bounds&&(this.tileBounds=new ut(o.bounds,this.minzoom,this.maxzoom)),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(o){this._tileJSONRequest=null,this.fire(new l.k(o))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return l.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return l._(this,void 0,void 0,function*(){const o=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const d=yield X.getImage(this.map._requestManager.transformRequest(o,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const h=this.map.painter.context,y=h.gl,x=d.data;r.texture=this.map.painter.getTileTexture(x.width),r.texture?r.texture.update(x,{useMipmap:!0}):(r.texture=new Ve(h,x,y.RGBA,{useMipmap:!0}),r.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class te extends ct{constructor(r,o,d,h){super(r,o,d,h),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(r){return l._(this,void 0,void 0,function*(){const o=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(o,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const h=yield X.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(h&&h.data){const y=h.data;this.map._refreshExpiredTiles&&h.cacheControl&&h.expires&&r.setExpiryData({cacheControl:h.cacheControl,expires:h.expires});const x=l.b(y)&&l.V()?y:yield this.readImageNow(y),C={type:this.type,uid:r.uid,source:this.id,rawImageData:x,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const T=yield r.actor.sendAsync({type:"LDT",data:C});r.dem=T,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(h){if(delete r.abortController,r.aborted)r.state="unloaded";else if(h)throw r.state="errored",h}})}readImageNow(r){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.W()){const o=r.width+2,d=r.height+2;try{return new l.R({width:o,height:d},yield l.X(r,-1,-1,o,d))}catch{}}return z.getImageData(r,1)})}_getNeighboringTiles(r){const o=r.canonical,d=Math.pow(2,o.z),h=(o.x-1+d)%d,y=o.x===0?r.wrap-1:r.wrap,x=(o.x+1+d)%d,C=o.x+1===d?r.wrap+1:r.wrap,T={};return T[new l.Y(r.overscaledZ,y,o.z,h,o.y).key]={backfilled:!1},T[new l.Y(r.overscaledZ,C,o.z,x,o.y).key]={backfilled:!1},o.y>0&&(T[new l.Y(r.overscaledZ,y,o.z,h,o.y-1).key]={backfilled:!1},T[new l.Y(r.overscaledZ,r.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},T[new l.Y(r.overscaledZ,C,o.z,x,o.y-1).key]={backfilled:!1}),o.y+1<d&&(T[new l.Y(r.overscaledZ,y,o.z,h,o.y+1).key]={backfilled:!1},T[new l.Y(r.overscaledZ,r.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},T[new l.Y(r.overscaledZ,C,o.z,x,o.y+1).key]={backfilled:!1}),T}unloadTile(r){return l._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class se extends l.E{constructor(r,o,d,h){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(h),this._data=o.data,this._options=l.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId,o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(o.buffer!==void 0?o.buffer:128),tolerance:this._pixelsToTileUnits(o.tolerance!==void 0?o.tolerance:.375),extent:l.Z,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:l.Z,radius:this._pixelsToTileUnits(o.clusterRadius||50),log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(l.Z/this.tileSize)}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return l._(this,void 0,void 0,function*(){const r=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,o,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:o,offset:d}})}_updateWorkerData(r){return l._(this,void 0,void 0,function*(){const o=l.e({type:this.type},this.workerOptions);r?o.dataDiff=r:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(z.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.l("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new l.l("dataabort",{dataType:"source"}));let h=null;d.resourceTiming&&d.resourceTiming[this.id]&&(h=d.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&h&&h.length>0&&l.e(y,{resourceTiming:h}),this.fire(new l.l("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new l.l("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new l.l("dataabort",{dataType:"source"}));this.fire(new l.k(d))}})}loaded(){return this._pendingLoads===0}loadTile(r){return l._(this,void 0,void 0,function*(){const o=r.actor?"RT":"LT";r.actor=this.actor;const d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const h=yield this.actor.sendAsync({type:o,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(h,this.map.painter,o==="RT")})}abortTile(r){return l._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return l._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Pe extends l.E{constructor(r,o,d,h){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=d,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(h),this.options=o}load(r){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield X.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,r&&(this.coordinates=r),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new l.k(o))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const o=r.map(l.$.fromLngLat);var d;return this.tileID=function(h){let y=1/0,x=1/0,C=-1/0,T=-1/0;for(const F of h)y=Math.min(y,F.x),x=Math.min(x,F.y),C=Math.max(C,F.x),T=Math.max(T,F.y);const M=Math.max(C-y,T-x),R=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),B=Math.pow(2,R);return new l.a0(R,Math.floor((y+C)/2*B),Math.floor((x+T)/2*B))}(o),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=o.map(h=>this.tileID.getTilePoint(h)._round()),this.flippedWindingOrder=((d=this.tileCoords)[1].x-d[0].x)*(d[2].y-d[0].y)-(d[1].y-d[0].y)*(d[2].x-d[0].x)<0,this.fire(new l.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,o=r.gl;this.texture||(this.texture=new Ve(r,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let d=!1;for(const h in this.tiles){const y=this.tiles[h];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Be extends Pe{constructor(r,o,d,h){super(r,o,d,h),this.roundZoom=!0,this.type="video",this.options=o}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const o of r.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield l.a1(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new l.k(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const o=this.video.seekable;r<o.start(0)||r>o.end(0)?this.fire(new l.k(new l.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,o=r.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new Ve(r,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let d=!1;for(const h in this.tiles){const y=this.tiles[h];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class xt extends Pe{constructor(r,o,d,h){super(r,o,d,h),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(x=>typeof x!="number"))||this.fire(new l.k(new l.a2(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.k(new l.a2(`sources.${r}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new l.k(new l.a2(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new l.k(new l.a2(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.k(new l.a2(`sources.${r}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,d=o.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ve(o,this.canvas,d.RGBA,{premultiply:!0});let h=!1;for(const y in this.tiles){const x=this.tiles[y];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,h=!0)}h&&this.fire(new l.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const it={},Me=_=>{switch(_){case"geojson":return se;case"image":return Pe;case"raster":return ct;case"raster-dem":return te;case"vector":return st;case"video":return Be;case"canvas":return xt}return it[_]},Ze="RTLPluginLoaded";class It extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=tn()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return l._(this,arguments,void 0,function*(o,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=z.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.l(Ze))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Nt=null;function Ht(){return Nt||(Nt=new It),Nt}class Fr{constructor(r,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=l.a3(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const o=r+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,o,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(h,y){const x={};if(!y)return x;for(const C of h){const T=C.layerIds.map(M=>y.getLayer(M)).filter(Boolean);if(T.length!==0){C.layers=T,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(M=>T.filter(R=>R.id===M)[0]));for(const M of T)x[M.id]=C}}return x}(r.buckets,o==null?void 0:o.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const y=this.buckets[h];if(y instanceof l.a5){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const y=this.buckets[h];if(y instanceof l.a5&&y.hasRTLText){this.hasRTLText=!0,Ht().lazyLoad();break}}this.queryPadding=0;for(const h in this.buckets){const y=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(h).queryRadius(y))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.a4}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const h=this.buckets[d];h.uploadPending()&&h.upload(r)}const o=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ve(r,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ve(r,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,o,d,h,y,x,C,T,M,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:h,cameraQueryGeometry:y,scale:x,tileSize:this.tileSize,pixelPosMatrix:R,transform:T,params:C,queryPadding:this.queryPadding*M},r,o,d):{}}querySourceFeatures(r,o){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const h=d.loadVTLayers(),y=o&&o.sourceLayer?o.sourceLayer:"",x=h._geojsonTileLayer||h[y];if(!x)return;const C=l.a6(o&&o.filter),{z:T,x:M,y:R}=this.tileID.canonical,B={z:T,x:M,y:R};for(let F=0;F<x.length;F++){const Z=x.feature(F);if(C.needGeometry){const Q=l.a7(Z,!0);if(!C.filter(new l.C(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!C.filter(new l.C(this.tileID.overscaledZ),Z))continue;const W=d.getId(Z,y),ee=new l.a8(Z,T,M,R,W);ee.tile=B,r.push(ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const o=this.expirationTime;if(r.cacheControl){const d=l.a9(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let h=!1;if(this.expirationTime>d)h=!1;else if(o)if(this.expirationTime<o)h=!0;else{const y=this.expirationTime-o;y?this.expirationTime=d+Math.max(y,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const h in this.buckets){if(!o.style.hasLayer(h))continue;const y=this.buckets[h],x=y.layers[0].sourceLayer||"_geojsonTileLayer",C=d[x],T=r[x];if(!C||!T||Object.keys(T).length===0)continue;y.update(T,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const M=o&&o.style&&o.style.getLayer(h);M&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<z.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=z.now()+r}setDependencies(r,o){const d={};for(const h of o)d[h]=!0;this.dependencies[r]=d}hasDependency(r,o){for(const d of r){const h=this.dependencies[d];if(h){for(const y of o)if(h[y])return!0}}return!1}}class Sr{constructor(r,o){this.max=r,this.onRemove=o,this.reset()}reset(){for(const r in this.data)for(const o of this.data[r])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(r,o,d){const h=r.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const y={value:o,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(r,y)},d)),this.data[h].push(y),this.order.push(h),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const o=this.data[r].shift();return o.timeout&&clearTimeout(o.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),o.value}getByKey(r){const o=this.data[r];return o?o[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,o){if(!this.has(r))return this;const d=r.wrapped().key,h=o===void 0?0:this.data[d].indexOf(o),y=this.data[d][h];return this.data[d].splice(h,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(r){const o=[];for(const d in this.data)for(const h of this.data[d])r(h.value)||o.push(h);for(const d of o)this.remove(d.value.tileID,d)}}class Ln{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,o,d){const h=String(o);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][h]=this.stateChanges[r][h]||{},l.e(this.stateChanges[r][h],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const y in this.state[r])y!==h&&(this.deletedStates[r][y]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][h]===null){this.deletedStates[r][h]={};for(const y in this.state[r][h])d[y]||(this.deletedStates[r][h][y]=null)}else for(const y in d)this.deletedStates[r]&&this.deletedStates[r][h]&&this.deletedStates[r][h][y]===null&&delete this.deletedStates[r][h][y]}removeFeatureState(r,o,d){if(this.deletedStates[r]===null)return;const h=String(o);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&o!==void 0)this.deletedStates[r][h]!==null&&(this.deletedStates[r][h]=this.deletedStates[r][h]||{},this.deletedStates[r][h][d]=null);else if(o!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][h])for(d in this.deletedStates[r][h]={},this.stateChanges[r][h])this.deletedStates[r][h][d]=null;else this.deletedStates[r][h]=null;else this.deletedStates[r]=null}getState(r,o){const d=String(o),h=l.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const y=this.deletedStates[r][o];if(y===null)return{};for(const x in y)delete h[x]}return h}initializeTileState(r,o){r.setFeatureState(this.state,o)}coalesceChanges(r,o){const d={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const y={};for(const x in this.stateChanges[h])this.state[h][x]||(this.state[h][x]={}),l.e(this.state[h][x],this.stateChanges[h][x]),y[x]=this.state[h][x];d[h]=y}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const y={};if(this.deletedStates[h]===null)for(const x in this.state[h])y[x]={},this.state[h][x]={};else for(const x in this.deletedStates[h]){if(this.deletedStates[h][x]===null)this.state[h][x]={};else for(const C of Object.keys(this.deletedStates[h][x]))delete this.state[h][x][C];y[x]=this.state[h][x]}d[h]=d[h]||{},l.e(d[h],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const h in r)r[h].setFeatureState(d,o)}}function Rn(_,r,o){const d=r.intersectsFrustum(_);if(!o)return d;const h=r.intersectsPlane(o);return d===0||h===0?0:d===2&&h===2?2:1}function Hi(_,r,o,d,h){let y=_;const x=Math.atan(r/o),C=Math.hypot(r,o);return y=_+l.aa(d/C/Math.max(.5,Math.cos(l.ac(h/2)))),y+=1*l.aa(Math.cos(x))/2,y+=l.ad(_-y,-0,0),y}function Li(_,r){const o=(r.roundZoom?Math.round:Math.floor)(_.zoom+l.aa(_.tileSize/r.tileSize));return Math.max(0,o)}function Te(_,r){const o=_.getCameraFrustum(),d=_.getClippingPlane(),h=_.screenPointToMercatorCoordinate(_.getCameraPoint()),y=l.$.fromLngLat(_.center,_.elevation);h.z=y.z+Math.cos(_.pitchInRadians)*_.cameraToCenterDistance/_.worldSize;const x=_.getCoveringTilesDetailsProvider(),C=x.allowVariableZoom(_,r),T=Li(_,r),M=r.minzoom||0,R=r.maxzoom!==void 0?r.maxzoom:_.maxZoom,B=Math.min(Math.max(0,T),R),F=Math.pow(2,B),Z=[F*h.x,F*h.y,0],W=[F*y.x,F*y.y,0],ee=Math.hypot(y.x-h.x,y.y-h.y),Q=Math.abs(y.z-h.z),re=Math.hypot(ee,Q),ae=me=>({zoom:0,x:0,y:0,wrap:me,fullyVisible:!1}),he=[],fe=[];if(_.renderWorldCopies&&x.allowWorldCopies())for(let me=1;me<=3;me++)he.push(ae(-me)),he.push(ae(me));for(he.push(ae(0));he.length>0;){const me=he.pop(),ve=me.x,_e=me.y;let Re=me.fullyVisible;const ze={x:ve,y:_e,z:me.zoom},Ge=x.getTileAABB(ze,me.wrap,_.elevation,r);if(!Re){const pt=Rn(o,Ge,d);if(pt===0)continue;Re=pt===2}const qe=x.distanceToTile2d(h.x,h.y,ze,Ge);let Ue=T;C&&(Ue=(r.calculateTileZoom||Hi)(_.zoom+l.aa(_.tileSize/r.tileSize),qe,Q,re,_.fov)),Ue=(r.roundZoom?Math.round:Math.floor)(Ue),Ue=Math.max(0,Ue);const gt=Math.min(Ue,R);if(me.wrap=x.getWrap(y,ze,me.wrap),me.zoom>=gt){if(me.zoom<M)continue;const pt=B-me.zoom,ot=Z[0]-.5-(ve<<pt),Mt=Z[1]-.5-(_e<<pt),Ot=r.reparseOverscaled?Math.max(me.zoom,Ue):me.zoom;fe.push({tileID:new l.Y(me.zoom===R?Ot:me.zoom,me.wrap,me.zoom,ve,_e),distanceSq:l.ab([W[0]-.5-ve,W[1]-.5-_e]),tileDistanceToCamera:Math.sqrt(ot*ot+Mt*Mt)})}else for(let pt=0;pt<4;pt++)he.push({zoom:me.zoom+1,x:(ve<<1)+pt%2,y:(_e<<1)+(pt>>1),wrap:me.wrap,fullyVisible:Re})}return fe.sort((me,ve)=>me.distanceSq-ve.distanceSq).map(me=>me.tileID)}class $ extends l.E{constructor(r,o,d){super(),this.id=r,this.dispatcher=d,this.on("data",h=>this._dataHandler(h)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((h,y,x,C)=>{const T=new(Me(y.type))(h,y,x,C);if(T.id!==h)throw new Error(`Expected Source id to be ${h} instead of ${T.id}`);return T})(r,o,d,this),this._tiles={},this._cache=new Sr(0,h=>this._unloadTile(h)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ln,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const o=this._tiles[r];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,o,d){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,o,d)}catch(h){r.state="errored",h.status!==404?this._source.fire(new l.k(h,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new l.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const d=this._tiles[o];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(q).map(r=>r.key)}getRenderableIds(r){const o=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&o.push(this._tiles[d]);return r?o.sort((d,h)=>{const y=d.tileID,x=h.tileID,C=new l.P(y.canonical.x,y.canonical.y)._rotate(-this.transform.bearingInRadians),T=new l.P(x.canonical.x,x.canonical.y)._rotate(-this.transform.bearingInRadians);return y.overscaledZ-x.overscaledZ||T.y-C.y||T.x-C.x}).map(d=>d.tileID.key):o.map(d=>d.tileID).sort(q).map(d=>d.key)}hasRenderableParent(r){const o=this.findLoadedParent(r,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(r,o){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(o||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)(r||this._tiles[o].state!=="errored")&&this._reloadTile(o,"reloading")}}_reloadTile(r,o){return l._(this,void 0,void 0,function*(){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=o),yield this._loadTile(d,r,o))})}_tileLoaded(r,o,d){r.timeAdded=z.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(o,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const o=this.getRenderableIds();for(let h=0;h<o.length;h++){const y=o[h];if(r.neighboringTiles&&r.neighboringTiles[y]){const x=this.getTileByID(y);d(r,x),d(x,r)}}function d(h,y){h.needsHillshadePrepare=!0,h.needsTerrainPrepare=!0;let x=y.tileID.canonical.x-h.tileID.canonical.x;const C=y.tileID.canonical.y-h.tileID.canonical.y,T=Math.pow(2,h.tileID.canonical.z),M=y.tileID.key;x===0&&C===0||Math.abs(C)>1||(Math.abs(x)>1&&(Math.abs(x+T)===1?x+=T:Math.abs(x-T)===1&&(x-=T)),y.dem&&h.dem&&(h.dem.backfillBorder(y.dem,x,C),h.neighboringTiles&&h.neighboringTiles[M]&&(h.neighboringTiles[M].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,o,d,h){for(const y in this._tiles){let x=this._tiles[y];if(h[y]||!x.hasData()||x.tileID.overscaledZ<=o||x.tileID.overscaledZ>d)continue;let C=x.tileID;for(;x&&x.tileID.overscaledZ>o+1;){const M=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[M.key],x&&x.hasData()&&(C=M)}let T=C;for(;T.overscaledZ>o;)if(T=T.scaledTo(T.overscaledZ-1),r[T.key]||r[T.canonical.key]){h[C.key]=C;break}}}findLoadedParent(r,o){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=o?d:null}for(let d=r.overscaledZ-1;d>=o;d--){const h=r.scaledTo(d),y=this._getLoadedTile(h);if(y)return y}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const o=this._tiles[r.key];return o&&o.hasData()?o:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const o=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,h=Math.floor(o*d*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,h):h;this._cache.setMaxSize(y)}handleWrapJump(r){const o=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,o){const d={};for(const h in this._tiles){const y=this._tiles[h];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+o),d[y.tileID.key]=y}this._tiles=d;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(h,this._tiles[h])}}_updateCoveredAndRetainedTiles(r,o,d,h,y,x){const C={},T={},M=Object.keys(r),R=z.now();for(const B of M){const F=r[B],Z=this._tiles[B];if(!Z||Z.fadeEndTime!==0&&Z.fadeEndTime<=R)continue;const W=this.findLoadedParent(F,o),ee=this.findLoadedSibling(F),Q=W||ee||null;Q&&(this._addTile(Q.tileID),C[Q.tileID.key]=Q.tileID),T[B]=F}this._retainLoadedChildren(T,h,d,r);for(const B in C)r[B]||(this._coveredTiles[B]=!0,r[B]=C[B]);if(x){const B={},F={};for(const Z of y)this._tiles[Z.key].hasData()?B[Z.key]=Z:F[Z.key]=Z;for(const Z in F){const W=F[Z].children(this._source.maxzoom);this._tiles[W[0].key]&&this._tiles[W[1].key]&&this._tiles[W[2].key]&&this._tiles[W[3].key]&&(B[W[0].key]=r[W[0].key]=W[0],B[W[1].key]=r[W[1].key]=W[1],B[W[2].key]=r[W[2].key]=W[2],B[W[3].key]=r[W[3].key]=W[3],delete F[Z])}for(const Z in F){const W=F[Z],ee=this.findLoadedParent(W,this._source.minzoom),Q=this.findLoadedSibling(W),re=ee||Q||null;if(re){B[re.tileID.key]=r[re.tileID.key]=re.tileID;for(const ae in B)B[ae].isChildOf(re.tileID)&&delete B[ae]}}for(const Z in this._tiles)B[Z]||(this._coveredTiles[Z]=!0)}}update(r,o){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=o,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new l.Y(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(d=Te(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(d=d.filter(R=>this._source.hasTile(R)))):d=[];const h=Li(r,this._source),y=Math.max(h-$.maxOverzooming,this._source.minzoom),x=Math.max(h+$.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const R={};for(const B of d)if(B.canonical.z>this._source.minzoom){const F=B.scaledTo(B.canonical.z-1);R[F.key]=F;const Z=B.scaledTo(Math.max(this._source.minzoom,Math.min(B.canonical.z,5)));R[Z.key]=Z}d=d.concat(Object.values(R))}const C=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new l.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=this._updateRetainedTiles(d,h);J(this._source.type)&&this._updateCoveredAndRetainedTiles(T,y,x,h,d,o);for(const R in T)this._tiles[R].clearFadeHold();const M=l.ae(this._tiles,T);for(const R of M){const B=this._tiles[R];B.hasSymbolBuckets&&!B.holdingForFade()?B.setHoldDuration(this.map._fadeDuration):B.hasSymbolBuckets&&!B.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,o){var d;const h={},y={},x=Math.max(o-$.maxOverzooming,this._source.minzoom),C=Math.max(o+$.maxUnderzooming,this._source.minzoom),T={};for(const M of r){const R=this._addTile(M);h[M.key]=M,R.hasData()||o<this._source.maxzoom&&(T[M.key]=M)}this._retainLoadedChildren(T,o,C,h);for(const M of r){let R=this._tiles[M.key];if(R.hasData())continue;if(o+1>this._source.maxzoom){const F=M.children(this._source.maxzoom)[0],Z=this.getTile(F);if(Z&&Z.hasData()){h[F.key]=F;continue}}else{const F=M.children(this._source.maxzoom);if(h[F[0].key]&&h[F[1].key]&&h[F[2].key]&&h[F[3].key])continue}let B=R.wasRequested();for(let F=M.overscaledZ-1;F>=x;--F){const Z=M.scaledTo(F);if(y[Z.key])break;if(y[Z.key]=!0,R=this.getTile(Z),!R&&B&&(R=this._addTile(Z)),R){const W=R.hasData();if((W||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||B)&&(h[Z.key]=Z),B=R.wasRequested(),W)break}}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const o=[];let d,h=this._tiles[r].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){d=this._loadedParentTiles[h.key];break}o.push(h.key);const y=h.scaledTo(h.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;h=y}for(const y of o)this._loadedParentTiles[y]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const o=this._tiles[r].tileID,d=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=d}}_addTile(r){let o=this._tiles[r.key];if(o)return o;o=this._cache.getAndRemove(r),o&&(this._setTileReloadTimer(r.key,o),o.tileID=r,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,o)));const d=o;return o||(o=new Fr(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(o,r.key,o.state)),o.uses++,this._tiles[r.key]=o,d||this._source.fire(new l.l("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(r,o){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=o.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const o=this._tiles[r];o&&(o.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(r){const o=r.sourceDataType;r.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&o==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,o,d){const h=[],y=this.transform;if(!y)return h;const x=d?y.getCameraQueryGeometry(r):r,C=r.map(W=>y.screenPointToMercatorCoordinate(W,this.terrain)),T=x.map(W=>y.screenPointToMercatorCoordinate(W,this.terrain)),M=this.getIds();let R=1/0,B=1/0,F=-1/0,Z=-1/0;for(const W of T)R=Math.min(R,W.x),B=Math.min(B,W.y),F=Math.max(F,W.x),Z=Math.max(Z,W.y);for(let W=0;W<M.length;W++){const ee=this._tiles[M[W]];if(ee.holdingForFade())continue;const Q=ee.tileID,re=Math.pow(2,y.zoom-ee.tileID.overscaledZ),ae=o*ee.queryPadding*l.Z/ee.tileSize/re,he=[Q.getTilePoint(new l.$(R,B)),Q.getTilePoint(new l.$(F,Z))];if(he[0].x-ae<l.Z&&he[0].y-ae<l.Z&&he[1].x+ae>=0&&he[1].y+ae>=0){const fe=C.map(ve=>Q.getTilePoint(ve)),me=T.map(ve=>Q.getTilePoint(ve));h.push({tile:ee,tileID:Q,queryGeometry:fe,cameraQueryGeometry:me,scale:re})}}return h}getVisibleCoordinates(r){const o=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);return this.transform&&this.transform.populateCache(o),o}hasTransition(){if(this._source.hasTransition())return!0;if(J(this._source.type)){const r=z.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=r)return!0}return!1}setFeatureState(r,o,d){this._state.updateState(r=r||"_geojsonTileLayer",o,d)}removeFeatureState(r,o,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",o,d)}getFeatureState(r,o){return this._state.getState(r=r||"_geojsonTileLayer",o)}setDependencies(r,o,d){const h=this._tiles[r];h&&h.setDependencies(o,d)}reloadTilesForDependencies(r,o){for(const d in this._tiles)this._tiles[d].hasDependency(r,o)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,o))}}function q(_,r){const o=Math.abs(2*_.wrap)-+(_.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return _.overscaledZ-r.overscaledZ||d-o||r.canonical.y-_.canonical.y||r.canonical.x-_.canonical.x}function J(_){return _==="raster"||_==="image"||_==="video"}$.maxOverzooming=10,$.maxUnderzooming=3;class oe{constructor(r,o){this.reset(r,o)}reset(r,o){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.ad(r,0,1);let o=1,d=this._distances[o];const h=r*this.paddedLength+this.padding;for(;d<h&&o<this._distances.length;)d=this._distances[++o];const y=o-1,x=this._distances[y],C=d-x,T=C>0?(h-x)/C:0;return this.points[y].mult(1-T).add(this.points[o].mult(T))}}function pe(_,r){let o=!0;return _==="always"||_!=="never"&&r!=="never"||(o=!1),o}class Ie{constructor(r,o,d){const h=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(o/d);for(let x=0;x<this.xCellCount*this.yCellCount;x++)h.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=o,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,o,d,h,y){this._forEachCell(o,d,h,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(o),this.bboxes.push(d),this.bboxes.push(h),this.bboxes.push(y)}insertCircle(r,o,d,h){this._forEachCell(o-h,d-h,o+h,d+h,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(o),this.circles.push(d),this.circles.push(h)}_insertBoxCell(r,o,d,h,y,x){this.boxCells[y].push(x)}_insertCircleCell(r,o,d,h,y,x){this.circleCells[y].push(x)}_query(r,o,d,h,y,x,C){if(d<0||r>this.width||h<0||o>this.height)return[];const T=[];if(r<=0&&o<=0&&this.width<=d&&this.height<=h){if(y)return[{key:null,x1:r,y1:o,x2:d,y2:h}];for(let M=0;M<this.boxKeys.length;M++)T.push({key:this.boxKeys[M],x1:this.bboxes[4*M],y1:this.bboxes[4*M+1],x2:this.bboxes[4*M+2],y2:this.bboxes[4*M+3]});for(let M=0;M<this.circleKeys.length;M++){const R=this.circles[3*M],B=this.circles[3*M+1],F=this.circles[3*M+2];T.push({key:this.circleKeys[M],x1:R-F,y1:B-F,x2:R+F,y2:B+F})}}else this._forEachCell(r,o,d,h,this._queryCell,T,{hitTest:y,overlapMode:x,seenUids:{box:{},circle:{}}},C);return T}query(r,o,d,h){return this._query(r,o,d,h,!1,null)}hitTest(r,o,d,h,y,x){return this._query(r,o,d,h,!0,y,x).length>0}hitTestCircle(r,o,d,h,y){const x=r-d,C=r+d,T=o-d,M=o+d;if(C<0||x>this.width||M<0||T>this.height)return!1;const R=[];return this._forEachCell(x,T,C,M,this._queryCellCircle,R,{hitTest:!0,overlapMode:h,circle:{x:r,y:o,radius:d},seenUids:{box:{},circle:{}}},y),R.length>0}_queryCell(r,o,d,h,y,x,C,T){const{seenUids:M,hitTest:R,overlapMode:B}=C,F=this.boxCells[y];if(F!==null){const W=this.bboxes;for(const ee of F)if(!M.box[ee]){M.box[ee]=!0;const Q=4*ee,re=this.boxKeys[ee];if(r<=W[Q+2]&&o<=W[Q+3]&&d>=W[Q+0]&&h>=W[Q+1]&&(!T||T(re))&&(!R||!pe(B,re.overlapMode))&&(x.push({key:re,x1:W[Q],y1:W[Q+1],x2:W[Q+2],y2:W[Q+3]}),R))return!0}}const Z=this.circleCells[y];if(Z!==null){const W=this.circles;for(const ee of Z)if(!M.circle[ee]){M.circle[ee]=!0;const Q=3*ee,re=this.circleKeys[ee];if(this._circleAndRectCollide(W[Q],W[Q+1],W[Q+2],r,o,d,h)&&(!T||T(re))&&(!R||!pe(B,re.overlapMode))){const ae=W[Q],he=W[Q+1],fe=W[Q+2];if(x.push({key:re,x1:ae-fe,y1:he-fe,x2:ae+fe,y2:he+fe}),R)return!0}}}return!1}_queryCellCircle(r,o,d,h,y,x,C,T){const{circle:M,seenUids:R,overlapMode:B}=C,F=this.boxCells[y];if(F!==null){const W=this.bboxes;for(const ee of F)if(!R.box[ee]){R.box[ee]=!0;const Q=4*ee,re=this.boxKeys[ee];if(this._circleAndRectCollide(M.x,M.y,M.radius,W[Q+0],W[Q+1],W[Q+2],W[Q+3])&&(!T||T(re))&&!pe(B,re.overlapMode))return x.push(!0),!0}}const Z=this.circleCells[y];if(Z!==null){const W=this.circles;for(const ee of Z)if(!R.circle[ee]){R.circle[ee]=!0;const Q=3*ee,re=this.circleKeys[ee];if(this._circlesCollide(W[Q],W[Q+1],W[Q+2],M.x,M.y,M.radius)&&(!T||T(re))&&!pe(B,re.overlapMode))return x.push(!0),!0}}}_forEachCell(r,o,d,h,y,x,C,T){const M=this._convertToXCellCoord(r),R=this._convertToYCellCoord(o),B=this._convertToXCellCoord(d),F=this._convertToYCellCoord(h);for(let Z=M;Z<=B;Z++)for(let W=R;W<=F;W++)if(y.call(this,r,o,d,h,this.xCellCount*W+Z,x,C,T))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,o,d,h,y,x){const C=h-r,T=y-o,M=d+x;return M*M>C*C+T*T}_circleAndRectCollide(r,o,d,h,y,x,C){const T=(x-h)/2,M=Math.abs(r-(h+T));if(M>T+d)return!1;const R=(C-y)/2,B=Math.abs(o-(y+R));if(B>R+d)return!1;if(M<=T||B<=R)return!0;const F=M-T,Z=B-R;return F*F+Z*Z<=d*d}}function $e(_,r,o){const d=l.K();if(!_){const{vecSouth:B,vecEast:F}=He(r),Z=I();Z[0]=F[0],Z[1]=F[1],Z[2]=B[0],Z[3]=B[1],h=Z,(R=(x=(y=Z)[0])*(M=y[3])-(T=y[2])*(C=y[1]))&&(h[0]=M*(R=1/R),h[1]=-C*R,h[2]=-T*R,h[3]=x*R),d[0]=Z[0],d[1]=Z[1],d[4]=Z[2],d[5]=Z[3]}var h,y,x,C,T,M,R;return l.M(d,d,[1/o,1/o,1]),d}function Se(_,r,o,d){if(_){const h=l.K();if(!r){const{vecSouth:y,vecEast:x}=He(o);h[0]=x[0],h[1]=x[1],h[4]=y[0],h[5]=y[1]}return l.M(h,h,[d,d,1]),h}return o.pixelsToClipSpaceMatrix}function He(_){const r=Math.cos(_.rollInRadians),o=Math.sin(_.rollInRadians),d=Math.cos(_.pitchInRadians),h=Math.cos(_.bearingInRadians),y=Math.sin(_.bearingInRadians),x=l.aj();x[0]=-h*d*o-y*r,x[1]=-y*d*o+h*r;const C=l.ak(x);C<1e-9?l.al(x):l.am(x,x,1/C);const T=l.aj();T[0]=h*d*r-y*o,T[1]=y*d*r+h*o;const M=l.ak(T);return M<1e-9?l.al(T):l.am(T,T,1/M),{vecEast:T,vecSouth:x}}function Ne(_,r,o,d){let h;d?(h=[_,r,d(_,r),1],l.ao(h,h,o)):(h=[_,r,0,1],Cn(h,h,o));const y=h[3];return{point:new l.P(h[0]/y,h[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function Ee(_,r){return .5+_/r*.5}function tt(_,r){return _.x>=-r[0]&&_.x<=r[0]&&_.y>=-r[1]&&_.y<=r[1]}function Ae(_,r,o,d,h,y,x,C,T,M,R,B,F){const Z=o?_.textSizeData:_.iconSizeData,W=l.af(Z,r.transform.zoom),ee=[256/r.width*2+1,256/r.height*2+1],Q=o?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;Q.clear();const re=_.lineVertexArray,ae=o?_.text.placedSymbolArray:_.icon.placedSymbolArray,he=r.transform.width/r.transform.height;let fe=!1;for(let me=0;me<ae.length;me++){const ve=ae.get(me);if(ve.hidden||ve.writingMode===l.ag.vertical&&!fe){yn(ve.numGlyphs,Q);continue}fe=!1;const _e=new l.P(ve.anchorX,ve.anchorY),Re={getElevation:F,pitchedLabelPlaneMatrix:d,lineVertexArray:re,pitchWithMap:y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:_e,unwrappedTileID:T,width:M,height:R,translation:B},ze=er(ve.anchorX,ve.anchorY,Re);if(!tt(ze.point,ee)){yn(ve.numGlyphs,Q);continue}const Ge=Ee(r.transform.cameraToCenterDistance,ze.signedDistanceFromCamera),qe=l.ah(Z,W,ve),Ue=y?qe*r.transform.getPitchedTextCorrection(ve.anchorX,ve.anchorY,T)/Ge:qe*Ge,gt=Wt({projectionContext:Re,pitchedLabelPlaneMatrixInverse:h,symbol:ve,fontSize:Ue,flip:!1,keepUpright:x,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:Q,aspectRatio:he,rotateToLine:C});fe=gt.useVertical,(gt.notEnoughRoom||fe||gt.needsFlipping&&Wt({projectionContext:Re,pitchedLabelPlaneMatrixInverse:h,symbol:ve,fontSize:Ue,flip:!0,keepUpright:x,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:Q,aspectRatio:he,rotateToLine:C}).notEnoughRoom)&&yn(ve.numGlyphs,Q)}o?_.text.dynamicLayoutVertexBuffer.updateData(Q):_.icon.dynamicLayoutVertexBuffer.updateData(Q)}function yt(_,r,o,d,h,y,x,C){const T=y.glyphStartIndex+y.numGlyphs,M=y.lineStartIndex,R=y.lineStartIndex+y.lineLength,B=r.getoffsetX(y.glyphStartIndex),F=r.getoffsetX(T-1),Z=zt(_*B,o,d,h,y.segment,M,R,C,x);if(!Z)return null;const W=zt(_*F,o,d,h,y.segment,M,R,C,x);return W?C.projectionCache.anyProjectionOccluded?null:{first:Z,last:W}:null}function Rt(_,r,o,d){return _===l.ag.horizontal&&Math.abs(o.y-r.y)>Math.abs(o.x-r.x)*d?{useVertical:!0}:(_===l.ag.vertical?r.y<o.y:r.x>o.x)?{needsFlipping:!0}:null}function Wt(_){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:o,symbol:d,fontSize:h,flip:y,keepUpright:x,glyphOffsetArray:C,dynamicLayoutVertexArray:T,aspectRatio:M,rotateToLine:R}=_,B=h/24,F=d.lineOffsetX*B,Z=d.lineOffsetY*B;let W;if(d.numGlyphs>1){const ee=d.glyphStartIndex+d.numGlyphs,Q=d.lineStartIndex,re=d.lineStartIndex+d.lineLength,ae=yt(B,C,F,Z,y,d,R,r);if(!ae)return{notEnoughRoom:!0};const he=kt(ae.first.point.x,ae.first.point.y,r,o),fe=kt(ae.last.point.x,ae.last.point.y,r,o);if(x&&!y){const me=Rt(d.writingMode,he,fe,M);if(me)return me}W=[ae.first];for(let me=d.glyphStartIndex+1;me<ee-1;me++)W.push(zt(B*C.getoffsetX(me),F,Z,y,d.segment,Q,re,r,R));W.push(ae.last)}else{if(x&&!y){const Q=Pt(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,re=d.lineStartIndex+d.segment+1,ae=new l.P(r.lineVertexArray.getx(re),r.lineVertexArray.gety(re)),he=Pt(ae.x,ae.y,r),fe=he.signedDistanceFromCamera>0?he.point:Zt(r.tileAnchorPoint,ae,Q,1,r),me=kt(Q.x,Q.y,r,o),ve=kt(fe.x,fe.y,r,o),_e=Rt(d.writingMode,me,ve,M);if(_e)return _e}const ee=zt(B*C.getoffsetX(d.glyphStartIndex),F,Z,y,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,r,R);if(!ee||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};W=[ee]}for(const ee of W)l.an(T,ee.point,ee.angle);return{}}function Zt(_,r,o,d,h){const y=_.add(_.sub(r)._unit()),x=Pt(y.x,y.y,h).point,C=o.sub(x);return o.add(C._mult(d/C.mag()))}function Je(_,r,o){const d=r.projectionCache;if(d.projections[_])return d.projections[_];const h=new l.P(r.lineVertexArray.getx(_),r.lineVertexArray.gety(_)),y=Pt(h.x,h.y,r);if(y.signedDistanceFromCamera>0)return d.projections[_]=y.point,d.anyProjectionOccluded=d.anyProjectionOccluded||y.isOccluded,y.point;const x=_-o.direction;return Zt(o.distanceFromAnchor===0?r.tileAnchorPoint:new l.P(r.lineVertexArray.getx(x),r.lineVertexArray.gety(x)),h,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,r)}function Pt(_,r,o){const d=_+o.translation[0],h=r+o.translation[1];let y;return o.pitchWithMap?(y=Ne(d,h,o.pitchedLabelPlaneMatrix,o.getElevation),y.isOccluded=!1):(y=o.transform.projectTileCoordinates(d,h,o.unwrappedTileID,o.getElevation),y.point.x=(.5*y.point.x+.5)*o.width,y.point.y=(.5*-y.point.y+.5)*o.height),y}function kt(_,r,o,d){if(o.pitchWithMap){const h=[_,r,0,1];return l.ao(h,h,d),o.transform.projectTileCoordinates(h[0]/h[3],h[1]/h[3],o.unwrappedTileID,o.getElevation).point}return{x:_/o.width*2-1,y:r/o.height*2-1}}function er(_,r,o){return o.transform.projectTileCoordinates(_,r,o.unwrappedTileID,o.getElevation)}function Gt(_,r,o){return _._unit()._perp()._mult(r*o)}function rr(_,r,o,d,h,y,x,C,T){if(C.projectionCache.offsets[_])return C.projectionCache.offsets[_];const M=o.add(r);if(_+T.direction<d||_+T.direction>=h)return C.projectionCache.offsets[_]=M,M;const R=Je(_+T.direction,C,T),B=Gt(R.sub(o),x,T.direction),F=o.add(B),Z=R.add(B);return C.projectionCache.offsets[_]=l.ap(y,M,F,Z)||M,C.projectionCache.offsets[_]}function zt(_,r,o,d,h,y,x,C,T){const M=d?_-r:_+r;let R=M>0?1:-1,B=0;d&&(R*=-1,B=Math.PI),R<0&&(B+=Math.PI);let F,Z=R>0?y+h:y+h+1;C.projectionCache.cachedAnchorPoint?F=C.projectionCache.cachedAnchorPoint:(F=Pt(C.tileAnchorPoint.x,C.tileAnchorPoint.y,C).point,C.projectionCache.cachedAnchorPoint=F);let W,ee,Q=F,re=F,ae=0,he=0;const fe=Math.abs(M),me=[];let ve;for(;ae+he<=fe;){if(Z+=R,Z<y||Z>=x)return null;ae+=he,re=Q,ee=W;const ze={absOffsetX:fe,direction:R,distanceFromAnchor:ae,previousVertex:re};if(Q=Je(Z,C,ze),o===0)me.push(re),ve=Q.sub(re);else{let Ge;const qe=Q.sub(re);Ge=qe.mag()===0?Gt(Je(Z+R,C,ze).sub(Q),o,R):Gt(qe,o,R),ee||(ee=re.add(Ge)),W=rr(Z,Ge,Q,y,x,ee,o,C,ze),me.push(ee),ve=W.sub(ee)}he=ve.mag()}const _e=ve._mult((fe-ae)/he)._add(ee||re),Re=B+Math.atan2(Q.y-re.y,Q.x-re.x);return me.push(_e),{point:_e,angle:T?Re:0,path:me}}const os=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function yn(_,r){for(let o=0;o<_;o++){const d=r.length;r.resize(d+4),r.float32.set(os,3*d)}}function Cn(_,r,o){const d=r[0],h=r[1];return _[0]=o[0]*d+o[4]*h+o[12],_[1]=o[1]*d+o[5]*h+o[13],_[3]=o[3]*d+o[7]*h+o[15],_}const Wr=100;class Sl{constructor(r,o=new Ie(r.width+200,r.height+200,25),d=new Ie(r.width+200,r.height+200,25)){this.transform=r,this.grid=o,this.ignoredGrid=d,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Wr,this.screenBottomBoundary=r.height+Wr,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,o,d,h,y,x,C,T,M,R,B,F){const Z=this.projectAndGetPerspectiveRatio(r.anchorPointX+T[0],r.anchorPointY+T[1],y,R,F),W=d*Z.perspectiveRatio;let ee;if(x||C)ee=this._projectCollisionBox(r,W,h,y,x,C,T,Z,R,B,F);else{const ve=Z.x+(B?B.x*W:0),_e=Z.y+(B?B.y*W:0);ee={allPointsOccluded:!1,box:[ve+r.x1*W,_e+r.y1*W,ve+r.x2*W,_e+r.y2*W]}}const[Q,re,ae,he]=ee.box,fe=x?ee.allPointsOccluded:Z.isOccluded;let me=fe;return me||(me=Z.perspectiveRatio<this.perspectiveRatioCutoff),me||(me=!this.isInsideGrid(Q,re,ae,he)),me||o!=="always"&&this.grid.hitTest(Q,re,ae,he,o,M)?{box:[Q,re,ae,he],placeable:!1,offscreen:!1,occluded:fe}:{box:[Q,re,ae,he],placeable:!0,offscreen:this.isOffscreen(Q,re,ae,he),occluded:fe}}placeCollisionCircles(r,o,d,h,y,x,C,T,M,R,B,F,Z,W){const ee=[],Q=new l.P(o.anchorX,o.anchorY),re=this.getPerspectiveRatio(Q.x,Q.y,x,W),ae=(M?y*this.transform.getPitchedTextCorrection(o.anchorX,o.anchorY,x)/re:y*re)/l.au,he={getElevation:W,pitchedLabelPlaneMatrix:C,lineVertexArray:d,pitchWithMap:M,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Q,unwrappedTileID:x,width:this.transform.width,height:this.transform.height,translation:Z},fe=yt(ae,h,o.lineOffsetX*ae,o.lineOffsetY*ae,!1,o,!1,he);let me=!1,ve=!1,_e=!0;if(fe){const Re=.5*B*re+F,ze=new l.P(-100,-100),Ge=new l.P(this.screenRightBoundary,this.screenBottomBoundary),qe=new oe,Ue=fe.first,gt=fe.last;let pt=[];for(let Ot=Ue.path.length-1;Ot>=1;Ot--)pt.push(Ue.path[Ot]);for(let Ot=1;Ot<gt.path.length;Ot++)pt.push(gt.path[Ot]);const ot=2.5*Re;if(M){const Ot=this.projectPathToScreenSpace(pt,he);pt=Ot.some(_r=>_r.signedDistanceFromCamera<=0)?[]:Ot.map(_r=>_r.point)}let Mt=[];if(pt.length>0){const Ot=pt[0].clone(),_r=pt[0].clone();for(let Nr=1;Nr<pt.length;Nr++)Ot.x=Math.min(Ot.x,pt[Nr].x),Ot.y=Math.min(Ot.y,pt[Nr].y),_r.x=Math.max(_r.x,pt[Nr].x),_r.y=Math.max(_r.y,pt[Nr].y);Mt=Ot.x>=ze.x&&_r.x<=Ge.x&&Ot.y>=ze.y&&_r.y<=Ge.y?[pt]:_r.x<ze.x||Ot.x>Ge.x||_r.y<ze.y||Ot.y>Ge.y?[]:l.aq([pt],ze.x,ze.y,Ge.x,Ge.y)}for(const Ot of Mt){qe.reset(Ot,.25*Re);let _r=0;_r=qe.length<=.5*Re?1:Math.ceil(qe.paddedLength/ot)+1;for(let Nr=0;Nr<_r;Nr++){const Ir=Nr/Math.max(_r-1,1),Qr=qe.lerp(Ir),Hr=Qr.x+Wr,vr=Qr.y+Wr;ee.push(Hr,vr,Re,0);const Mr=Hr-Re,zn=vr-Re,$n=Hr+Re,Sn=vr+Re;if(_e=_e&&this.isOffscreen(Mr,zn,$n,Sn),ve=ve||this.isInsideGrid(Mr,zn,$n,Sn),r!=="always"&&this.grid.hitTestCircle(Hr,vr,Re,r,R)&&(me=!0,!T))return{circles:[],offscreen:!1,collisionDetected:me}}}}return{circles:!T&&me||!ve||re<this.perspectiveRatioCutoff?[]:ee,offscreen:_e,collisionDetected:me}}projectPathToScreenSpace(r,o){const d=function(h,y){const x=l.K();return l.ai(x,y.pitchedLabelPlaneMatrix),h.map(C=>{const T=Ne(C.x,C.y,x,y.getElevation),M=y.transform.projectTileCoordinates(T.point.x,T.point.y,y.unwrappedTileID,y.getElevation);return M.point.x=(.5*M.point.x+.5)*y.width,M.point.y=(.5*-M.point.y+.5)*y.height,M})}(r,o);return function(h){let y=0,x=0,C=0,T=0;for(let M=0;M<h.length;M++)h[M].isOccluded?(C=M+1,T=0):(T++,T>x&&(x=T,y=C));return h.slice(y,y+x)}(d)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let d=1/0,h=1/0,y=-1/0,x=-1/0;for(const R of r){const B=new l.P(R.x+Wr,R.y+Wr);d=Math.min(d,B.x),h=Math.min(h,B.y),y=Math.max(y,B.x),x=Math.max(x,B.y),o.push(B)}const C=this.grid.query(d,h,y,x).concat(this.ignoredGrid.query(d,h,y,x)),T={},M={};for(const R of C){const B=R.key;if(T[B.bucketInstanceId]===void 0&&(T[B.bucketInstanceId]={}),T[B.bucketInstanceId][B.featureIndex])continue;const F=[new l.P(R.x1,R.y1),new l.P(R.x2,R.y1),new l.P(R.x2,R.y2),new l.P(R.x1,R.y2)];l.ar(o,F)&&(T[B.bucketInstanceId][B.featureIndex]=!0,M[B.bucketInstanceId]===void 0&&(M[B.bucketInstanceId]=[]),M[B.bucketInstanceId].push(B.featureIndex))}return M}insertCollisionBox(r,o,d,h,y,x){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:h,featureIndex:y,collisionGroupID:x,overlapMode:o},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,o,d,h,y,x){const C=d?this.ignoredGrid:this.grid,T={bucketInstanceId:h,featureIndex:y,collisionGroupID:x,overlapMode:o};for(let M=0;M<r.length;M+=4)C.insertCircle(T,r[M],r[M+1],r[M+2])}projectAndGetPerspectiveRatio(r,o,d,h,y){if(y){let x;h?(x=[r,o,h(r,o),1],l.ao(x,x,y)):(x=[r,o,0,1],Cn(x,x,y));const C=x[3];return{x:(x[0]/C+1)/2*this.transform.width+Wr,y:(-x[1]/C+1)/2*this.transform.height+Wr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/C*.5,isOccluded:!1,signedDistanceFromCamera:C}}{const x=this.transform.projectTileCoordinates(r,o,d,h);return{x:(x.point.x+1)/2*this.transform.width+Wr,y:(1-x.point.y)/2*this.transform.height+Wr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/x.signedDistanceFromCamera*.5,isOccluded:x.isOccluded,signedDistanceFromCamera:x.signedDistanceFromCamera}}}getPerspectiveRatio(r,o,d,h){const y=this.transform.projectTileCoordinates(r,o,d,h);return .5+this.transform.cameraToCenterDistance/y.signedDistanceFromCamera*.5}isOffscreen(r,o,d,h){return d<Wr||r>=this.screenRightBoundary||h<Wr||o>this.screenBottomBoundary}isInsideGrid(r,o,d,h){return d>=0&&r<this.gridRightBoundary&&h>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const r=l.as([]);return l.L(r,r,[-100,-100,0]),r}_projectCollisionBox(r,o,d,h,y,x,C,T,M,R,B){let F=1,Z=0,W=0,ee=1;const Q=r.anchorPointX+C[0],re=r.anchorPointY+C[1];if(x&&!y){const pt=this.projectAndGetPerspectiveRatio(Q+1,re,h,M,B),ot=pt.x-T.x,Mt=Math.atan((pt.y-T.y)/ot)+(ot<0?Math.PI:0),Ot=Math.sin(Mt),_r=Math.cos(Mt);F=_r,Z=Ot,W=-Ot,ee=_r}else if(!x&&y){const pt=He(this.transform);F=pt.vecEast[0],Z=pt.vecEast[1],W=pt.vecSouth[0],ee=pt.vecSouth[1]}let ae=T.x,he=T.y,fe=o;y&&(ae=Q,he=re,fe=Math.pow(2,-(this.transform.zoom-d.overscaledZ)),fe*=this.transform.getPitchedTextCorrection(Q,re,h),R||(fe*=l.ad(.5+T.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),R&&(ae+=F*R.x*fe+W*R.y*fe,he+=Z*R.x*fe+ee*R.y*fe);const me=r.x1*fe,ve=r.x2*fe,_e=(me+ve)/2,Re=r.y1*fe,ze=r.y2*fe,Ge=(Re+ze)/2,qe=[{offsetX:me,offsetY:Re},{offsetX:_e,offsetY:Re},{offsetX:ve,offsetY:Re},{offsetX:ve,offsetY:Ge},{offsetX:ve,offsetY:ze},{offsetX:_e,offsetY:ze},{offsetX:me,offsetY:ze},{offsetX:me,offsetY:Ge}];let Ue=[];for(const{offsetX:pt,offsetY:ot}of qe)Ue.push(new l.P(ae+F*pt+W*ot,he+Z*pt+ee*ot));let gt=!1;if(y){const pt=Ue.map(ot=>this.projectAndGetPerspectiveRatio(ot.x,ot.y,h,M,B));gt=pt.some(ot=>!ot.isOccluded),Ue=pt.map(ot=>new l.P(ot.x,ot.y))}else gt=!0;return{box:l.at(Ue),allPointsOccluded:!gt}}}class ci{constructor(r,o,d,h){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?o:-o))):h&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Or{constructor(r,o,d,h,y){this.text=new ci(r?r.text:null,o,d,y),this.icon=new ci(r?r.icon:null,o,h,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Eh{constructor(r,o,d){this.text=r,this.icon=o,this.skipFade=d}}class La{constructor(r,o,d,h,y){this.bucketInstanceId=r,this.featureIndex=o,this.sourceLayerIndex=d,this.bucketIndex=h,this.tileID=y}}class eu{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const o=++this.maxGroupID;this.collisionGroups[r]={ID:o,predicate:d=>d.collisionGroupID===o}}return this.collisionGroups[r]}}function Fo(_,r,o,d,h){const{horizontalAlign:y,verticalAlign:x}=l.aA(_);return new l.P(-(y-.5)*r+d[0]*h,-(x-.5)*o+d[1]*h)}class js{constructor(r,o,d,h,y){this.transform=r.clone(),this.terrain=o,this.collisionIndex=new Sl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new eu(h),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const o=this.terrain;return o?(d,h)=>o.getElevation(r,d,h):null}getBucketParts(r,o,d,h){const y=d.getBucket(o),x=d.latestFeatureIndex;if(!y||!x||o.id!==y.layerIds[0])return;const C=d.collisionBoxArray,T=y.layers[0].layout,M=y.layers[0].paint,R=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),B=d.tileSize/l.Z,F=d.tileID.toUnwrapped(),Z=T.get("text-rotation-alignment")==="map",W=l.av(d,1,this.transform.zoom),ee=l.aw(this.collisionIndex.transform,d,M.get("text-translate"),M.get("text-translate-anchor")),Q=l.aw(this.collisionIndex.transform,d,M.get("icon-translate"),M.get("icon-translate-anchor")),re=$e(Z,this.transform,W);this.retainedQueryData[y.bucketInstanceId]=new La(y.bucketInstanceId,x,y.sourceLayerIndex,y.index,d.tileID);const ae={bucket:y,layout:T,translationText:ee,translationIcon:Q,unwrappedTileID:F,pitchedLabelPlaneMatrix:re,scale:R,textPixelRatio:B,holdingForFade:d.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:l.af(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(h)for(const he of y.sortKeyRanges){const{sortKey:fe,symbolInstanceStart:me,symbolInstanceEnd:ve}=he;r.push({sortKey:fe,symbolInstanceStart:me,symbolInstanceEnd:ve,parameters:ae})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:ae})}attemptAnchorPlacement(r,o,d,h,y,x,C,T,M,R,B,F,Z,W,ee,Q,re,ae,he,fe){const me=l.ax[r.textAnchor],ve=[r.textOffset0,r.textOffset1],_e=Fo(me,d,h,ve,y),Re=this.collisionIndex.placeCollisionBox(o,F,T,M,R,C,x,Q,B.predicate,he,_e,fe);if((!ae||this.collisionIndex.placeCollisionBox(ae,F,T,M,R,C,x,re,B.predicate,he,_e,fe).placeable)&&Re.placeable){let ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(ze=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),Z.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Z.crossTileID]={textOffset:ve,width:d,height:h,anchor:me,textBoxScale:y,prevAnchor:ze},this.markUsedJustification(W,me,Z,ee),W.allowVerticalPlacement&&(this.markUsedOrientation(W,ee,Z),this.placedOrientations[Z.crossTileID]=ee),{shift:_e,placedGlyphBoxes:Re}}}placeLayerBucketPart(r,o,d){const{bucket:h,layout:y,translationText:x,translationIcon:C,unwrappedTileID:T,pitchedLabelPlaneMatrix:M,textPixelRatio:R,holdingForFade:B,collisionBoxArray:F,partiallyEvaluatedTextSize:Z,collisionGroup:W}=r.parameters,ee=y.get("text-optional"),Q=y.get("icon-optional"),re=l.ay(y,"text-overlap","text-allow-overlap"),ae=re==="always",he=l.ay(y,"icon-overlap","icon-allow-overlap"),fe=he==="always",me=y.get("text-rotation-alignment")==="map",ve=y.get("text-pitch-alignment")==="map",_e=y.get("icon-text-fit")!=="none",Re=y.get("symbol-z-order")==="viewport-y",ze=ae&&(fe||!h.hasIconData()||Q),Ge=fe&&(ae||!h.hasTextData()||ee);!h.collisionArrays&&F&&h.deserializeCollisionBoxes(F);const qe=this.retainedQueryData[h.bucketInstanceId].tileID,Ue=this._getTerrainElevationFunc(qe),gt=this.transform.getFastPathSimpleProjectionMatrix(qe),pt=(ot,Mt,Ot)=>{var _r,Nr;if(o[ot.crossTileID])return;if(B)return void(this.placements[ot.crossTileID]=new Eh(!1,!1,!1));let Ir=!1,Qr=!1,Hr=!0,vr=null,Mr={box:null,placeable:!1,offscreen:null,occluded:!1},zn={placeable:!1},$n=null,Sn=null,Un=null,Wo=0,Co=0,uo=0;Mt.textFeatureIndex?Wo=Mt.textFeatureIndex:ot.useRuntimeCollisionCircles&&(Wo=ot.featureIndex),Mt.verticalTextFeatureIndex&&(Co=Mt.verticalTextFeatureIndex);const ji=Mt.textBox;if(ji){const Vi=jr=>{let zr=l.ag.horizontal;if(h.allowVerticalPlacement&&!jr&&this.prevPlacement){const kn=this.prevPlacement.placedOrientations[ot.crossTileID];kn&&(this.placedOrientations[ot.crossTileID]=kn,zr=kn,this.markUsedOrientation(h,zr,ot))}return zr},ho=(jr,zr)=>{if(h.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&Mt.verticalTextBox){for(const kn of h.writingModes)if(kn===l.ag.vertical?(Mr=zr(),zn=Mr):Mr=jr(),Mr&&Mr.placeable)break}else Mr=jr()},Xi=ot.textAnchorOffsetStartIndex,fo=ot.textAnchorOffsetEndIndex;if(fo===Xi){const jr=(zr,kn)=>{const Tn=this.collisionIndex.placeCollisionBox(zr,re,R,qe,T,ve,me,x,W.predicate,Ue,void 0,gt);return Tn&&Tn.placeable&&(this.markUsedOrientation(h,kn,ot),this.placedOrientations[ot.crossTileID]=kn),Tn};ho(()=>jr(ji,l.ag.horizontal),()=>{const zr=Mt.verticalTextBox;return h.allowVerticalPlacement&&ot.numVerticalGlyphVertices>0&&zr?jr(zr,l.ag.vertical):{box:null,offscreen:null}}),Vi(Mr&&Mr.placeable)}else{let jr=l.ax[(Nr=(_r=this.prevPlacement)===null||_r===void 0?void 0:_r.variableOffsets[ot.crossTileID])===null||Nr===void 0?void 0:Nr.anchor];const zr=(Tn,Cs,Em)=>{const xf=Tn.x2-Tn.x1,ed=Tn.y2-Tn.y1,wf=ot.textBoxScale,Ss=_e&&he==="never"?Cs:null;let xi=null,td=re==="never"?1:2,Cf="never";jr&&td++;for(let pc=0;pc<td;pc++){for(let mc=Xi;mc<fo;mc++){const Sf=h.textAnchorOffsets.get(mc);if(jr&&Sf.textAnchor!==jr)continue;const gc=this.attemptAnchorPlacement(Sf,Tn,xf,ed,wf,me,ve,R,qe,T,W,Cf,ot,h,Em,x,C,Ss,Ue);if(gc&&(xi=gc.placedGlyphBoxes,xi&&xi.placeable))return Ir=!0,vr=gc.shift,xi}jr?jr=null:Cf=re}return d&&!xi&&(xi={box:this.collisionIndex.placeCollisionBox(ji,"always",R,qe,T,ve,me,x,W.predicate,Ue,void 0,gt).box,offscreen:!1,placeable:!1,occluded:!1}),xi};ho(()=>zr(ji,Mt.iconBox,l.ag.horizontal),()=>{const Tn=Mt.verticalTextBox;return h.allowVerticalPlacement&&(!Mr||!Mr.placeable)&&ot.numVerticalGlyphVertices>0&&Tn?zr(Tn,Mt.verticalIconBox,l.ag.vertical):{box:null,occluded:!0,offscreen:null}}),Mr&&(Ir=Mr.placeable,Hr=Mr.offscreen);const kn=Vi(Mr&&Mr.placeable);if(!Ir&&this.prevPlacement){const Tn=this.prevPlacement.variableOffsets[ot.crossTileID];Tn&&(this.variableOffsets[ot.crossTileID]=Tn,this.markUsedJustification(h,Tn.anchor,ot,kn))}}}if($n=Mr,Ir=$n&&$n.placeable,Hr=$n&&$n.offscreen,ot.useRuntimeCollisionCircles){const Vi=h.text.placedSymbolArray.get(ot.centerJustifiedTextSymbolIndex),ho=l.ah(h.textSizeData,Z,Vi),Xi=y.get("text-padding");Sn=this.collisionIndex.placeCollisionCircles(re,Vi,h.lineVertexArray,h.glyphOffsetArray,ho,T,M,d,ve,W.predicate,ot.collisionCircleDiameter,Xi,x,Ue),Sn.circles.length&&Sn.collisionDetected&&!d&&l.w("Collisions detected, but collision boxes are not shown"),Ir=ae||Sn.circles.length>0&&!Sn.collisionDetected,Hr=Hr&&Sn.offscreen}if(Mt.iconFeatureIndex&&(uo=Mt.iconFeatureIndex),Mt.iconBox){const Vi=ho=>this.collisionIndex.placeCollisionBox(ho,he,R,qe,T,ve,me,C,W.predicate,Ue,_e&&vr?vr:void 0,gt);zn&&zn.placeable&&Mt.verticalIconBox?(Un=Vi(Mt.verticalIconBox),Qr=Un.placeable):(Un=Vi(Mt.iconBox),Qr=Un.placeable),Hr=Hr&&Un.offscreen}const xs=ee||ot.numHorizontalGlyphVertices===0&&ot.numVerticalGlyphVertices===0,Ja=Q||ot.numIconVertices===0;xs||Ja?Ja?xs||(Qr=Qr&&Ir):Ir=Qr&&Ir:Qr=Ir=Qr&&Ir;const ws=Qr&&Un.placeable;if(Ir&&$n.placeable&&this.collisionIndex.insertCollisionBox($n.box,re,y.get("text-ignore-placement"),h.bucketInstanceId,zn&&zn.placeable&&Co?Co:Wo,W.ID),ws&&this.collisionIndex.insertCollisionBox(Un.box,he,y.get("icon-ignore-placement"),h.bucketInstanceId,uo,W.ID),Sn&&Ir&&this.collisionIndex.insertCollisionCircles(Sn.circles,re,y.get("text-ignore-placement"),h.bucketInstanceId,Wo,W.ID),d&&this.storeCollisionData(h.bucketInstanceId,Ot,Mt,$n,Un,Sn),ot.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(h.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ot.crossTileID]=new Eh((Ir||ze)&&!($n!=null&&$n.occluded),(Qr||Ge)&&!(Un!=null&&Un.occluded),Hr||h.justReloaded),o[ot.crossTileID]=!0};if(Re){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ot=h.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Mt=ot.length-1;Mt>=0;--Mt){const Ot=ot[Mt];pt(h.symbolInstances.get(Ot),h.collisionArrays[Ot],Ot)}}else for(let ot=r.symbolInstanceStart;ot<r.symbolInstanceEnd;ot++)pt(h.symbolInstances.get(ot),h.collisionArrays[ot],ot);h.justReloaded=!1}storeCollisionData(r,o,d,h,y,x){if(d.textBox||d.iconBox){let C,T;this.collisionBoxArrays.has(r)?C=this.collisionBoxArrays.get(r):(C=new Map,this.collisionBoxArrays.set(r,C)),C.has(o)?T=C.get(o):(T={text:null,icon:null},C.set(o,T)),d.textBox&&(T.text=h.box),d.iconBox&&(T.icon=y.box)}if(x){let C=this.collisionCircleArrays[r];C===void 0&&(C=this.collisionCircleArrays[r]=[]);for(let T=0;T<x.circles.length;T+=4)C.push(x.circles[T+0]-Wr),C.push(x.circles[T+1]-Wr),C.push(x.circles[T+2]),C.push(x.collisionDetected?1:0)}}markUsedJustification(r,o,d,h){let y;y=h===l.ag.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[l.az(o)];const x=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const C of x)C>=0&&(r.text.placedSymbolArray.get(C).crossTileID=y>=0&&C!==y?0:d.crossTileID)}markUsedOrientation(r,o,d){const h=o===l.ag.horizontal||o===l.ag.horizontalOnly?o:0,y=o===l.ag.vertical?o:0,x=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const C of x)r.text.placedSymbolArray.get(C).placedOrientation=h;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let d=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const h=o?o.symbolFadeChange(r):1,y=o?o.opacities:{},x=o?o.variableOffsets:{},C=o?o.placedOrientations:{};for(const T in this.placements){const M=this.placements[T],R=y[T];R?(this.opacities[T]=new Or(R,h,M.text,M.icon),d=d||M.text!==R.text.placed||M.icon!==R.icon.placed):(this.opacities[T]=new Or(null,h,M.text,M.icon,M.skipFade),d=d||M.text||M.icon)}for(const T in y){const M=y[T];if(!this.opacities[T]){const R=new Or(M,h,!1,!1);R.isHidden()||(this.opacities[T]=R,d=d||M.text.placed||M.icon.placed)}}for(const T in x)this.variableOffsets[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.variableOffsets[T]=x[T]);for(const T in C)this.placedOrientations[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.placedOrientations[T]=C[T]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:r)}updateLayerOpacities(r,o){const d={};for(const h of o){const y=h.getBucket(r);y&&h.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,h.tileID,d,h.collisionBoxArray)}}updateBucketOpacities(r,o,d,h){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const y=r.layers[0],x=y.layout,C=new Or(null,0,!1,!1,!0),T=x.get("text-allow-overlap"),M=x.get("icon-allow-overlap"),R=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),B=x.get("text-rotation-alignment")==="map",F=x.get("text-pitch-alignment")==="map",Z=x.get("icon-text-fit")!=="none",W=new Or(null,0,T&&(M||!r.hasIconData()||x.get("icon-optional")),M&&(T||!r.hasTextData()||x.get("text-optional")),!0);!r.collisionArrays&&h&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(h);const ee=(re,ae,he)=>{for(let fe=0;fe<ae/4;fe++)re.opacityVertexArray.emplaceBack(he);re.hasVisibleVertices=re.hasVisibleVertices||he!==Us},Q=this.collisionBoxArrays.get(r.bucketInstanceId);for(let re=0;re<r.symbolInstances.length;re++){const ae=r.symbolInstances.get(re),{numHorizontalGlyphVertices:he,numVerticalGlyphVertices:fe,crossTileID:me}=ae;let ve=this.opacities[me];d[me]?ve=C:ve||(ve=W,this.opacities[me]=ve),d[me]=!0;const _e=ae.numIconVertices>0,Re=this.placedOrientations[ae.crossTileID],ze=Re===l.ag.vertical,Ge=Re===l.ag.horizontal||Re===l.ag.horizontalOnly;if(he>0||fe>0){const Ue=ru(ve.text);ee(r.text,he,ze?Us:Ue),ee(r.text,fe,Ge?Us:Ue);const gt=ve.text.isHidden();[ae.rightJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.leftJustifiedTextSymbolIndex].forEach(Mt=>{Mt>=0&&(r.text.placedSymbolArray.get(Mt).hidden=gt||ze?1:0)}),ae.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ae.verticalPlacedTextSymbolIndex).hidden=gt||Ge?1:0);const pt=this.variableOffsets[ae.crossTileID];pt&&this.markUsedJustification(r,pt.anchor,ae,Re);const ot=this.placedOrientations[ae.crossTileID];ot&&(this.markUsedJustification(r,"left",ae,ot),this.markUsedOrientation(r,ot,ae))}if(_e){const Ue=ru(ve.icon),gt=!(Z&&ae.verticalPlacedIconSymbolIndex&&ze);ae.placedIconSymbolIndex>=0&&(ee(r.icon,ae.numIconVertices,gt?Ue:Us),r.icon.placedSymbolArray.get(ae.placedIconSymbolIndex).hidden=ve.icon.isHidden()),ae.verticalPlacedIconSymbolIndex>=0&&(ee(r.icon,ae.numVerticalIconVertices,gt?Us:Ue),r.icon.placedSymbolArray.get(ae.verticalPlacedIconSymbolIndex).hidden=ve.icon.isHidden())}const qe=Q&&Q.has(re)?Q.get(re):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Ue=r.collisionArrays[re];if(Ue){let gt=new l.P(0,0);if(Ue.textBox||Ue.verticalTextBox){let pt=!0;if(R){const ot=this.variableOffsets[me];ot?(gt=Fo(ot.anchor,ot.width,ot.height,ot.textOffset,ot.textBoxScale),B&&gt._rotate(F?-this.transform.bearingInRadians:this.transform.bearingInRadians)):pt=!1}if(Ue.textBox||Ue.verticalTextBox){let ot;Ue.textBox&&(ot=ze),Ue.verticalTextBox&&(ot=Ge),tu(r.textCollisionBox.collisionVertexArray,ve.text.placed,!pt||ot,qe.text,gt.x,gt.y)}}if(Ue.iconBox||Ue.verticalIconBox){const pt=!!(!Ge&&Ue.verticalIconBox);let ot;Ue.iconBox&&(ot=pt),Ue.verticalIconBox&&(ot=!pt),tu(r.iconCollisionBox.collisionVertexArray,ve.icon.placed,ot,qe.icon,Z?gt.x:0,Z?gt.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,o){const d=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function tu(_,r,o,d,h,y){d&&d.length!==0||(d=[0,0,0,0]);const x=d[0]-Wr,C=d[1]-Wr,T=d[2]-Wr,M=d[3]-Wr;_.emplaceBack(r?1:0,o?1:0,h||0,y||0,x,C),_.emplaceBack(r?1:0,o?1:0,h||0,y||0,T,C),_.emplaceBack(r?1:0,o?1:0,h||0,y||0,T,M),_.emplaceBack(r?1:0,o?1:0,h||0,y||0,x,M)}const Ah=Math.pow(2,25),Lh=Math.pow(2,24),Vs=Math.pow(2,17),Rh=Math.pow(2,16),sm=Math.pow(2,9),am=Math.pow(2,8),lm=Math.pow(2,1);function ru(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const r=_.placed?1:0,o=Math.floor(127*_.opacity);return o*Ah+r*Lh+o*Vs+r*Rh+o*sm+r*am+o*lm+r}const Us=0;class nu{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,o,d,h,y){const x=this._bucketParts;for(;this._currentTileIndex<r.length;)if(o.getBucketParts(x,h,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,x.sort((C,T)=>C.sortKey-T.sortKey));this._currentPartIndex<x.length;)if(o.placeLayerBucketPart(x[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,y())return!0;return!1}}class iu{constructor(r,o,d,h,y,x,C,T){this.placement=new js(r,o,x,C,T),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=h,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(r,o,d){const h=z.now(),y=()=>!this._forceFullPlacement&&z.now()-h>2;for(;this._currentPlacementIndex>=0;){const x=o[r[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=C)&&(!x.maxzoom||x.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new nu(x)),this._inProgressLayer.continuePlacement(d[x.source],this.placement,this._showCollisionBoxes,x,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Zs=512/l.Z/2;class ou{constructor(r,o,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const h=new Map;for(let y=0;y<o.length;y++){const x=o.get(y),C=x.key,T=h.get(C);T?T.push(x):h.set(C,[x])}for(const[y,x]of h){const C={positions:x.map(T=>({x:Math.floor(T.anchorX*Zs),y:Math.floor(T.anchorY*Zs)})),crossTileIDs:x.map(T=>T.crossTileID)};if(C.positions.length>128){const T=new l.aB(C.positions.length,16,Uint16Array);for(const{x:M,y:R}of C.positions)T.add(M,R);T.finish(),delete C.positions,C.index=T}this._symbolsByKey[y]=C}}getScaledCoordinates(r,o){const{x:d,y:h,z:y}=this.tileID.canonical,{x,y:C,z:T}=o.canonical,M=Zs/Math.pow(2,T-y),R=(C*l.Z+r.anchorY)*M,B=h*l.Z*Zs;return{x:Math.floor((x*l.Z+r.anchorX)*M-d*l.Z*Zs),y:Math.floor(R-B)}}findMatches(r,o,d){const h=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let y=0;y<r.length;y++){const x=r.get(y);if(x.crossTileID)continue;const C=this._symbolsByKey[x.key];if(!C)continue;const T=this.getScaledCoordinates(x,o);if(C.index){const M=C.index.range(T.x-h,T.y-h,T.x+h,T.y+h).sort();for(const R of M){const B=C.crossTileIDs[R];if(!d[B]){d[B]=!0,x.crossTileID=B;break}}}else if(C.positions)for(let M=0;M<C.positions.length;M++){const R=C.positions[M],B=C.crossTileIDs[M];if(Math.abs(R.x-T.x)<=h&&Math.abs(R.y-T.y)<=h&&!d[B]){d[B]=!0,x.crossTileID=B;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class su{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class kl{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const o=Math.round((r-this.lng)/360);if(o!==0)for(const d in this.indexes){const h=this.indexes[d],y={};for(const x in h){const C=h[x];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+o),y[C.tileID.key]=C}this.indexes[d]=y}this.lng=r}addBucket(r,o,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let y=0;y<o.symbolInstances.length;y++)o.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const h=this.usedCrossTileIDs[r.overscaledZ];for(const y in this.indexes){const x=this.indexes[y];if(Number(y)>r.overscaledZ)for(const C in x){const T=x[C];T.tileID.isChildOf(r)&&T.findMatches(o.symbolInstances,r,h)}else{const C=x[r.scaledTo(Number(y)).key];C&&C.findMatches(o.symbolInstances,r,h)}}for(let y=0;y<o.symbolInstances.length;y++){const x=o.symbolInstances.get(y);x.crossTileID||(x.crossTileID=d.generate(),h[x.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ou(r,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(r,o){for(const d of o.getCrossTileIDsLists())for(const h of d)delete this.usedCrossTileIDs[r][h]}removeStaleBuckets(r){let o=!1;for(const d in this.indexes){const h=this.indexes[d];for(const y in h)r[h[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,h[y]),delete h[y],o=!0)}return o}}class au{constructor(){this.layerIndexes={},this.crossTileIDs=new su,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,o,d){let h=this.layerIndexes[r.id];h===void 0&&(h=this.layerIndexes[r.id]=new kl);let y=!1;const x={};h.handleWrapJump(d);for(const C of o){const T=C.getBucket(r);T&&r.id===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),h.addBucket(C.tileID,T,this.crossTileIDs)&&(y=!0),x[T.bucketInstanceId]=!0)}return h.removeStaleBuckets(x)&&(y=!0),y}pruneUnusedLayers(r){const o={};r.forEach(d=>{o[d]=!0});for(const d in this.layerIndexes)o[d]||delete this.layerIndexes[d]}}var ss="void main() {fragColor=vec4(1.0);}";const qi={prelude:hr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:hr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:hr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:hr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:hr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:hr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:hr(ss,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:hr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:hr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:hr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:hr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:hr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:hr(ss,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:hr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:hr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:hr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:hr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:hr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:hr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:hr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:hr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:hr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:hr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:hr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:hr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:hr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:hr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:hr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:hr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:hr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:hr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:hr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:hr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function hr(_,r){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/in ([\w]+) ([\w]+)/g),h=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=y?y.concat(h):h,C={};return{fragmentSource:_=_.replace(o,(T,M,R,B,F)=>(C[F]=!0,M==="define"?`
#ifndef HAS_UNIFORM_u_${F}
in ${R} ${B} ${F};
#else
uniform ${R} ${B} u_${F};
#endif
`:`
#ifdef HAS_UNIFORM_u_${F}
    ${R} ${B} ${F} = u_${F};
#endif
`)),vertexSource:r=r.replace(o,(T,M,R,B,F)=>{const Z=B==="float"?"vec2":"vec4",W=F.match(/color/)?"color":Z;return C[F]?M==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
in ${R} ${Z} a_${F};
out ${R} ${B} ${F};
#else
uniform ${R} ${B} u_${F};
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = a_${F};
#else
    ${R} ${B} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = unpack_mix_${W}(a_${F}, u_${F}_t);
#else
    ${R} ${B} ${F} = u_${F};
#endif
`:M==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
in ${R} ${Z} a_${F};
#else
uniform ${R} ${B} u_${F};
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${R} ${B} ${F} = a_${F};
#else
    ${R} ${B} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${R} ${B} ${F} = unpack_mix_${W}(a_${F}, u_${F}_t);
#else
    ${R} ${B} ${F} = u_${F};
#endif
`}),staticAttributes:d,staticUniforms:x}}class yi{constructor(r,o,d){this.vertexBuffer=r,this.indexBuffer=o,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ri=l.aC([{name:"a_pos",type:"Int16",components:2}]);const fr="#define PROJECTION_MERCATOR",Tl="mercator";class lu{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Tl}get shaderDefine(){return fr}get shaderPreludeCode(){return qi.projectionMercator}get vertexShaderPreludeCode(){return qi.projectionMercator.vertexSource}get subdivisionGranularity(){return l.aD.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,o,d,h,y){if(this._cachedMesh)return this._cachedMesh;const x=new l.aE;x.emplaceBack(0,0),x.emplaceBack(l.Z,0),x.emplaceBack(0,l.Z),x.emplaceBack(l.Z,l.Z);const C=r.createVertexBuffer(x,Ri.members),T=l.aF.simpleSegment(0,0,4,2),M=new l.aG;M.emplaceBack(1,0,2),M.emplaceBack(1,2,3);const R=r.createIndexBuffer(M);return this._cachedMesh=new yi(C,R,T),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}function Di(_,r){const o=l.ad(r.lat,-85.051129,l.aI);return new l.P(l.U(r.lng)*_,l.S(o)*_)}function Vn(_,r){return new l.$(r.x/_,r.y/_).toLngLat()}function Dn(_){return _.cameraToCenterDistance*Math.min(.85*Math.tan(l.ac(90-_.pitch)),Math.tan(l.ac(89.25-_.pitch)))}function sn(_,r){const o=_.canonical,d=r/l.aH(o.z),h=o.x+Math.pow(2,o.z)*_.wrap,y=l.as(new Float64Array(16));return l.L(y,y,[h*d,o.y*d,0]),l.M(y,y,[d/l.Z,d/l.Z,1]),y}function cu(_,r,o,d,h){const y=l.$.fromLngLat(_,r),x=h*l.aJ(1,_.lat),C=x*Math.cos(l.ac(o)),T=Math.sqrt(x*x-C*C),M=T*Math.sin(l.ac(-d)),R=T*Math.cos(l.ac(-d));return new l.$(y.x+M,y.y+R,y.z+C)}class On{constructor(r=0,o=0,d=0,h=0){if(isNaN(r)||r<0||isNaN(o)||o<0||isNaN(d)||d<0||isNaN(h)||h<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=o,this.left=d,this.right=h}interpolate(r,o,d){return o.top!=null&&r.top!=null&&(this.top=l.B.number(r.top,o.top,d)),o.bottom!=null&&r.bottom!=null&&(this.bottom=l.B.number(r.bottom,o.bottom,d)),o.left!=null&&r.left!=null&&(this.left=l.B.number(r.left,o.left,d)),o.right!=null&&r.right!=null&&(this.right=l.B.number(r.right,o.right,d)),this}getCenter(r,o){const d=l.ad((this.left+r-this.right)/2,0,r),h=l.ad((this.top+o-this.bottom)/2,0,o);return new l.P(d,h)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new On(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ii(_,r){if(!_.renderWorldCopies||_.lngRange)return;const o=r.lng-_.center.lng;r.lng+=o>180?-360:o<-180?360:0}function ui(_){return Math.max(0,Math.floor(_))}class Pl{constructor(r,o,d,h,y,x){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=x===void 0||!!x,this._minZoom=o||0,this._maxZoom=d||22,this._minPitch=h??0,this._maxPitch=y??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new l.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ui(this._zoom),this._scale=l.aH(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new On,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,o,d){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=ui(this._zoom),this._scale=l.aH(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new On(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!d&&r.autoCalculateNearFarZ,o&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const o=l.aK(r,-180,180)*Math.PI/180;var d,h,y,x,C,T,M,R,B;this._bearingInRadians!==o&&(this._unmodified=!1,this._bearingInRadians=o,this._calcMatrices(),this._rotationMatrix=I(),d=this._rotationMatrix,y=-this._bearingInRadians,x=(h=this._rotationMatrix)[0],C=h[1],T=h[2],M=h[3],R=Math.sin(y),B=Math.cos(y),d[0]=x*B+T*R,d[1]=C*B+M*R,d[2]=x*-R+T*B,d[3]=C*-R+M*B)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const o=l.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==o&&(this._unmodified=!1,this._pitchInRadians=o,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const o=r/180*Math.PI;this._rollInRadians!==o&&(this._unmodified=!1,this._rollInRadians=o,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return l.aL(this._fovInRadians)}setFov(r){r=l.ad(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=l.ac(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const o=this.getConstrained(this._center,r).zoom;this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this._tileZoom=Math.max(0,Math.floor(o)),this._scale=l.aH(o),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,o){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=o,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,o,d){this._unmodified=!1,this._edgeInsets.interpolate(r,o,d),this._constrain(),this._calcMatrices()}resize(r,o,d=!0){this._width=r,this._height=o,d&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Le([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,l.aI])}getConstrained(r,o){return this._callbacks.getConstrained(r,o)}getCameraQueryGeometry(r,o){if(o.length===1)return[o[0],r];{let d=r.x,h=r.y,y=r.x,x=r.y;for(const C of o)d=Math.min(d,C.x),h=Math.min(h,C.y),y=Math.max(y,C.x),x=Math.max(x,C.y);return[new l.P(d,h),new l.P(y,h),new l.P(y,x),new l.P(d,x),new l.P(d,h)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:o,zoom:d}=this.getConstrained(this.center,this.zoom);this.setCenter(o),this.setZoom(d),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=l.as(new Float64Array(16));l.M(r,r,[this._width/2,-this._height/2,1]),l.L(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=l.as(new Float64Array(16)),l.M(r,r,[1,-1,1]),l.L(r,r,[-1,-1,0]),l.M(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,o,d,h){const y=d!==void 0?d:this.bearing,x=h=h!==void 0?h:this.pitch,C=l.$.fromLngLat(r,o),T=-Math.cos(l.ac(x)),M=Math.sin(l.ac(x)),R=M*Math.sin(l.ac(y)),B=-M*Math.cos(l.ac(y));let F=this.elevation;const Z=o-F;let W;T*Z>=0||Math.abs(T)<.1?(W=1e4,F=o+W*T):W=-Z/T;let ee,Q,re=l.aM(1,C.y),ae=0;do{if(ae+=1,ae>10)break;Q=W/re,ee=new l.$(C.x+R*Q,C.y+B*Q),re=1/ee.meterInMercatorCoordinateUnits()}while(Math.abs(W-Q*re)>1e-12);return{center:ee.toLngLat(),elevation:F,zoom:l.aa(this.height/2/Math.tan(this.fovInRadians/2)/Q/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const o=l.aJ(1,this.center.lat)*this.worldSize,d=this.cameraToCenterDistance/o,h=l.$.fromLngLat(this.center,this.elevation),y=cu(this.center,this.elevation,this.pitch,this.bearing,d);this._elevation=r;const x=this.calculateCenterFromCameraLngLatAlt(y.toLngLat(),l.aM(y.z,h.y),this.bearing,this.pitch);this._elevation=x.elevation,this._center=x.center,this.setZoom(x.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=l.aJ(1,this.center.lat)*this.worldSize;return cu(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const o=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/o,r.canonical.y/o,1/o/l.Z,1/o/l.Z]}}class Ki{constructor(r,o){this.min=r,this.max=o,this.center=l.aN([],l.aO([],this.min,this.max),.5)}quadrant(r){const o=[r%2==0,r<2],d=l.aP(this.min),h=l.aP(this.max);for(let y=0;y<o.length;y++)d[y]=o[y]?this.min[y]:this.center[y],h[y]=o[y]?this.center[y]:this.max[y];return h[2]=this.max[2],new Ki(d,h)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let o=!0;for(let d=0;d<r.planes.length;d++){const h=this.intersectsPlane(r.planes[d]);if(h===0)return 0;h===1&&(o=!1)}return o?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let o=r[3],d=r[3];for(let h=0;h<3;h++)r[h]>0?(o+=r[h]*this.min[h],d+=r[h]*this.max[h]):(d+=r[h]*this.min[h],o+=r[h]*this.max[h]);return o>=0?2:d<0?0:1}}class bn{distanceToTile2d(r,o,d,h){const y=h.distanceX([r,o]),x=h.distanceY([r,o]);return Math.hypot(y,x)}getWrap(r,o,d){return d}getTileAABB(r,o,d,h){var y,x;let C=d,T=d;if(h.terrain){const R=new l.Y(r.z,o,r.z,r.x,r.y),B=h.terrain.getMinMaxElevation(R);C=(y=B.minElevation)!==null&&y!==void 0?y:d,T=(x=B.maxElevation)!==null&&x!==void 0?x:d}const M=1<<r.z;return new Ki([o+r.x/M,r.y/M,C],[o+(r.x+1)/M,(r.y+1)/M,T])}allowVariableZoom(r,o){const d=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,h=l.ad(78.5-d/2,0,60);return!!o.terrain||r.pitch>h}allowWorldCopies(){return!0}recalculateCache(){}}class No{constructor(r,o,d){this.points=r,this.planes=o,this.aabb=d}static fromInvProjectionMatrix(r,o=1,d=0){const h=Math.pow(2,d),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const R=1/(M=l.ao([],M,r))[3]/o*h;return l.aQ(M,M,[R,R,1/M[3],R])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const R=l.aR([],y[M[0]],y[M[1]]),B=l.aR([],y[M[2]],y[M[1]]),F=l.aS([],l.aT([],R,B)),Z=-l.aU(F,y[M[1]]);return F.concat(Z)}),C=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],T=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const M of y)for(let R=0;R<3;R++)C[R]=Math.min(C[R],M[R]),T[R]=Math.max(T[R],M[R]);return new No(y,x,new Ki(C,T))}}class Oi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,o,d){return this._helper.interpolatePadding(r,o,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,o,d=!0){this._helper.resize(r,o,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,o){this._helper.overrideNearFarZ(r,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,o){}constructor(r,o,d,h,y){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Pl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(x,C)=>this.getConstrained(x,C)},r,o,d,h,y),this._coveringTilesDetailsProvider=new bn}clone(){const r=new Oi;return r.apply(this),r}apply(r,o,d){this._helper.apply(r,o,d)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const o=[new l.aV(0,r)];if(this._helper._renderWorldCopies){const d=this.screenPointToMercatorCoordinate(new l.P(0,0)),h=this.screenPointToMercatorCoordinate(new l.P(this._helper._width,0)),y=this.screenPointToMercatorCoordinate(new l.P(this._helper._width,this._helper._height)),x=this.screenPointToMercatorCoordinate(new l.P(0,this._helper._height)),C=Math.floor(Math.min(d.x,h.x,y.x,x.x)),T=Math.floor(Math.max(d.x,h.x,y.x,x.x)),M=1;for(let R=C-M;R<=T+M;R++)R!==0&&o.push(new l.aV(R,r))}return o}getCameraFrustum(){return No.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const o=this.screenPointToLocation(this.centerPoint,r),d=r?r.getElevationForLngLatZoom(o,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(d)}setLocationAtPoint(r,o){const d=l.aJ(this.elevation,this.center.lat),h=this.screenPointToMercatorCoordinateAtZ(o,d),y=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,d),x=l.$.fromLngLat(r),C=new l.$(x.x-(h.x-y.x),x.y-(h.y-y.y));this.setCenter(C==null?void 0:C.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,o){return o?this.coordinatePoint(l.$.fromLngLat(r),o.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(l.$.fromLngLat(r))}screenPointToLocation(r,o){var d;return(d=this.screenPointToMercatorCoordinate(r,o))===null||d===void 0?void 0:d.toLngLat()}screenPointToMercatorCoordinate(r,o){if(o){const d=o.pointCoordinate(r);if(d!=null)return d}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,o){const d=o||0,h=[r.x,r.y,0,1],y=[r.x,r.y,1,1];l.ao(h,h,this._pixelMatrixInverse),l.ao(y,y,this._pixelMatrixInverse);const x=h[3],C=y[3],T=h[1]/x,M=y[1]/C,R=h[2]/x,B=y[2]/C,F=R===B?0:(d-R)/(B-R);return new l.$(l.B.number(h[0]/x,y[0]/C,F)/this.worldSize,l.B.number(T,M,F)/this.worldSize,d)}coordinatePoint(r,o=0,d=this._pixelMatrix){const h=[r.x*this.worldSize,r.y*this.worldSize,o,1];return l.ao(h,h,d),new l.P(h[0]/h[3],h[1]/h[3])}getBounds(){const r=Math.max(0,this._helper._height/2-Dn(this));return new Le().extend(this.screenPointToLocation(new l.P(0,r))).extend(this.screenPointToLocation(new l.P(this._helper._width,r))).extend(this.screenPointToLocation(new l.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new l.P(0,this._helper._height)))}isPointOnMapSurface(r,o){return o?o.pointCoordinate(r)!=null:r.y>this.height/2-Dn(this)}calculatePosMatrix(r,o=!1,d){var h;const y=(h=r.key)!==null&&h!==void 0?h:l.aW(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),x=o?this._alignedPosMatrixCache:this._posMatrixCache;if(x.has(y)){const M=x.get(y);return d?M.f32:M.f64}const C=sn(r,this.worldSize);l.N(C,o?this._alignedProjMatrix:this._viewProjMatrix,C);const T={f64:C,f32:new Float32Array(C)};return x.set(y,T),d?T.f32:T.f64}calculateFogMatrix(r){const o=r.key,d=this._fogMatrixCacheF32;if(d.has(o))return d.get(o);const h=sn(r,this.worldSize);return l.N(h,this._fogMatrix,h),d.set(o,new Float32Array(h)),d.get(o)}getConstrained(r,o){o=l.ad(+o,this.minZoom,this.maxZoom);const d={center:new l.Q(r.lng,r.lat),zoom:o};let h=this._helper._lngRange;this._helper._renderWorldCopies||h!==null||(h=[-179.9999999999,180-1e-10]);const y=this.tileSize*l.aH(d.zoom);let x=0,C=y,T=0,M=y,R=0,B=0;const{x:F,y:Z}=this.size;if(this._helper._latRange){const he=this._helper._latRange;x=l.S(he[1])*y,C=l.S(he[0])*y,C-x<Z&&(R=Z/(C-x))}h&&(T=l.aK(l.U(h[0])*y,0,y),M=l.aK(l.U(h[1])*y,0,y),M<T&&(M+=y),M-T<F&&(B=F/(M-T)));const{x:W,y:ee}=Di(y,r);let Q,re;const ae=Math.max(B||0,R||0);if(ae){const he=new l.P(B?(M+T)/2:W,R?(C+x)/2:ee);return d.center=Vn(y,he).wrap(),d.zoom+=l.aa(ae),d}if(this._helper._latRange){const he=Z/2;ee-he<x&&(re=x+he),ee+he>C&&(re=C-he)}if(h){const he=(T+M)/2;let fe=W;this._helper._renderWorldCopies&&(fe=l.aK(W,he-y/2,he+y/2));const me=F/2;fe-me<T&&(Q=T+me),fe+me>M&&(Q=M-me)}if(Q!==void 0||re!==void 0){const he=new l.P(Q??W,re??ee);d.center=Vn(y,he).wrap()}return d}calculateCenterFromCameraLngLatAlt(r,o,d,h){return this._helper.calculateCenterFromCameraLngLatAlt(r,o,d,h)}_calculateNearFarZIfNeeded(r,o,d){if(!this._helper.autoCalculateNearFarZ)return;const h=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),y=r-h*this._helper._pixelPerMeter/Math.cos(o),x=h<0?y:r,C=Math.PI/2+this.pitchInRadians,T=l.ac(this.fov)*(Math.abs(Math.cos(l.ac(this.roll)))*this.height+Math.abs(Math.sin(l.ac(this.roll)))*this.width)/this.height*(.5+d.y/this.height),M=Math.sin(T)*x/Math.sin(l.ad(Math.PI-C-T,.01,Math.PI-.01)),R=Dn(this),B=Math.atan(R/this._helper.cameraToCenterDistance),F=l.ac(.75),Z=B>F?2*B*(.5+d.y/(2*R)):F,W=Math.sin(Z)*x/Math.sin(l.ad(Math.PI-C-Z,.01,Math.PI-.01)),ee=Math.min(M,W);this._helper._farZ=1.01*(Math.cos(Math.PI/2-o)*ee+x),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,o=Di(this.worldSize,this.center),d=o.x,h=o.y;this._helper._pixelPerMeter=l.aJ(1,this.center.lat)*this.worldSize;const y=l.ac(Math.min(this.pitch,89.25)),x=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(y));let C;this._calculateNearFarZIfNeeded(x,y,r),C=new Float64Array(16),l.aX(C,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),l.ai(this._invProjMatrix,C),C[8]=2*-r.x/this._helper._width,C[9]=2*r.y/this._helper._height,this._projectionMatrix=l.aY(C),l.M(C,C,[1,-1,1]),l.L(C,C,[0,0,-this._helper.cameraToCenterDistance]),l.aZ(C,C,-this.rollInRadians),l.a_(C,C,this.pitchInRadians),l.aZ(C,C,-this.bearingInRadians),l.L(C,C,[-d,-h,0]),this._mercatorMatrix=l.M([],C,[this.worldSize,this.worldSize,this.worldSize]),l.M(C,C,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=l.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,C),l.L(C,C,[0,0,-this.elevation]),this._viewProjMatrix=C,this._invViewProjMatrix=l.ai([],C);const T=[0,0,-1,1];l.ao(T,T,this._invViewProjMatrix),this._cameraPosition=[T[0]/T[3],T[1]/T[3],T[2]/T[3]],this._fogMatrix=new Float64Array(16),l.aX(this._fogMatrix,this.fovInRadians,this.width/this.height,x,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,l.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),l.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),l.aZ(this._fogMatrix,this._fogMatrix,-this.rollInRadians),l.a_(this._fogMatrix,this._fogMatrix,this.pitchInRadians),l.aZ(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),l.L(this._fogMatrix,this._fogMatrix,[-d,-h,0]),l.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),l.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=l.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,C);const M=this._helper._width%2/2,R=this._helper._height%2/2,B=Math.cos(this.bearingInRadians),F=Math.sin(-this.bearingInRadians),Z=d-Math.round(d)+B*M+F*R,W=h-Math.round(h)+B*R+F*M,ee=new Float64Array(C);if(l.L(ee,ee,[Z>.5?Z-1:Z,W>.5?W-1:W,0]),this._alignedProjMatrix=ee,C=l.ai(new Float64Array(16),this._pixelMatrix),!C)throw new Error("failed to invert matrix");this._pixelMatrixInverse=C,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new l.P(0,0)),o=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.ao(o,o,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=l.aJ(1,this.center.lat)*this.worldSize;return cu(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,o){const d=l.$.fromLngLat(r),h=[d.x*this.worldSize,d.y*this.worldSize,o,1];return l.ao(h,h,this._viewProjMatrix),h[2]/h[3]}getProjectionData(r){const{overscaledTileID:o,aligned:d,applyTerrainMatrix:h}=r,y=this._helper.getMercatorTileCoordinates(o),x=o?this.calculatePosMatrix(o,d,!0):null;let C;return C=o&&o.terrainRttPosMatrix32f&&h?o.terrainRttPosMatrix32f:x||l.a$(),{mainMatrix:C,tileMercatorCoords:y,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:C}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,o,d){return 1}transformLightDirection(r){return l.aP(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,o,d,h){const y=this.calculatePosMatrix(d);let x;h?(x=[r,o,h(r,o),1],l.ao(x,x,y)):(x=[r,o,0,1],Cn(x,x,y));const C=x[3];return{point:new l.P(x[0]/C,x[1]/C),signedDistanceFromCamera:C,isOccluded:!1}}populateCache(r){for(const o of r)this.calculatePosMatrix(o)}getMatrixForModel(r,o){const d=l.$.fromLngLat(r,o),h=d.meterInMercatorCoordinateUnits(),y=l.b0();return l.L(y,y,[d.x,d.y,d.z]),l.aZ(y,y,Math.PI),l.a_(y,y,Math.PI/2),l.M(y,y,[-h,h,h]),y}getProjectionDataForCustomLayer(r=!0){const o=new l.Y(0,0,0,0,0),d=this.getProjectionData({overscaledTileID:o,applyGlobeMatrix:r}),h=sn(o,this.worldSize);l.N(h,this._viewProjMatrix,h),d.tileMercatorCoords=[0,0,1,1];const y=[l.Z,l.Z,this.worldSize/this._helper.pixelsPerMeter],x=l.b1();return l.M(x,h,y),d.fallbackMatrix=x,d.mainMatrix=x,d}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function Ra(){l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function zi(_){if(_.useSlerp)if(_.k<1){const r=l.b2(_.startEulerAngles.roll,_.startEulerAngles.pitch,_.startEulerAngles.bearing),o=l.b2(_.endEulerAngles.roll,_.endEulerAngles.pitch,_.endEulerAngles.bearing),d=new Float64Array(4);l.b3(d,r,o,_.k);const h=l.b4(d);_.tr.setRoll(h.roll),_.tr.setPitch(h.pitch),_.tr.setBearing(h.bearing)}else _.tr.setRoll(_.endEulerAngles.roll),_.tr.setPitch(_.endEulerAngles.pitch),_.tr.setBearing(_.endEulerAngles.bearing);else _.tr.setRoll(l.B.number(_.startEulerAngles.roll,_.endEulerAngles.roll,_.k)),_.tr.setPitch(l.B.number(_.startEulerAngles.pitch,_.endEulerAngles.pitch,_.k)),_.tr.setBearing(l.B.number(_.startEulerAngles.bearing,_.endEulerAngles.bearing,_.k))}function uu(_,r,o,d,h){const y=h.padding,x=Di(h.worldSize,o.getNorthWest()),C=Di(h.worldSize,o.getNorthEast()),T=Di(h.worldSize,o.getSouthEast()),M=Di(h.worldSize,o.getSouthWest()),R=l.ac(-d),B=x.rotate(R),F=C.rotate(R),Z=T.rotate(R),W=M.rotate(R),ee=new l.P(Math.max(B.x,F.x,W.x,Z.x),Math.max(B.y,F.y,W.y,Z.y)),Q=new l.P(Math.min(B.x,F.x,W.x,Z.x),Math.min(B.y,F.y,W.y,Z.y)),re=ee.sub(Q),ae=(h.width-(y.left+y.right+r.left+r.right))/re.x,he=(h.height-(y.top+y.bottom+r.top+r.bottom))/re.y;if(he<0||ae<0)return void Ra();const fe=Math.min(l.aa(h.scale*Math.min(ae,he)),_.maxZoom),me=l.P.convert(_.offset),ve=new l.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(l.ac(d)),_e=me.add(ve).mult(h.scale/l.aH(fe));return{center:Vn(h.worldSize,x.add(T).div(2).sub(_e)),zoom:fe,bearing:d}}class Yi{get useGlobeControls(){return!1}handlePanInertia(r,o){return{easingOffset:r,easingCenter:o.center}}handleMapControlsRollPitchBearingZoom(r,o){r.bearingDelta&&o.setBearing(o.bearing+r.bearingDelta),r.pitchDelta&&o.setPitch(o.pitch+r.pitchDelta),r.rollDelta&&o.setRoll(o.roll+r.rollDelta),r.zoomDelta&&o.setZoom(o.zoom+r.zoomDelta)}handleMapControlsPan(r,o,d){r.around.distSqr(o.centerPoint)<.01||o.setLocationAtPoint(d,r.around)}cameraForBoxAndBearing(r,o,d,h,y){return uu(r,o,d,h,y)}handleJumpToCenterZoom(r,o){r.zoom!==(o.zoom!==void 0?+o.zoom:r.zoom)&&r.setZoom(+o.zoom),o.center!==void 0&&r.setCenter(l.Q.convert(o.center))}handleEaseTo(r,o){const d=r.zoom,h=r.padding,y={roll:r.roll,pitch:r.pitch,bearing:r.bearing},x={roll:o.roll===void 0?r.roll:o.roll,pitch:o.pitch===void 0?r.pitch:o.pitch,bearing:o.bearing===void 0?r.bearing:o.bearing},C=o.zoom!==void 0,T=!r.isPaddingEqual(o.padding);let M=!1;const R=C?+o.zoom:r.zoom;let B=r.centerPoint.add(o.offsetAsPoint);const F=r.screenPointToLocation(B),{center:Z,zoom:W}=r.getConstrained(l.Q.convert(o.center||F),R??d);ii(r,Z);const ee=Di(r.worldSize,F),Q=Di(r.worldSize,Z).sub(ee),re=l.aH(W-d);return M=W!==d,{easeFunc:ae=>{if(M&&r.setZoom(l.B.number(d,W,ae)),l.b5(y,x)||zi({startEulerAngles:y,endEulerAngles:x,tr:r,k:ae,useSlerp:y.roll!=x.roll}),T&&(r.interpolatePadding(h,o.padding,ae),B=r.centerPoint.add(o.offsetAsPoint)),o.around)r.setLocationAtPoint(o.around,o.aroundPoint);else{const he=l.aH(r.zoom-d),fe=W>d?Math.min(2,re):Math.max(.5,re),me=Math.pow(fe,1-ae),ve=Vn(r.worldSize,ee.add(Q.mult(ae*me)).mult(he));r.setLocationAtPoint(r.renderWorldCopies?ve.wrap():ve,B)}},isZooming:M,elevationCenter:Z}}handleFlyTo(r,o){const d=o.zoom!==void 0,h=r.zoom,y=r.getConstrained(l.Q.convert(o.center||o.locationAtOffset),d?+o.zoom:h),x=y.center,C=y.zoom;ii(r,x);const T=Di(r.worldSize,o.locationAtOffset),M=Di(r.worldSize,x).sub(T),R=M.mag(),B=l.aH(C-h);let F;if(o.minZoom!==void 0){const Z=Math.min(+o.minZoom,h,C),W=r.getConstrained(x,Z).zoom;F=l.aH(W-h)}return{easeFunc:(Z,W,ee,Q)=>{r.setZoom(Z===1?C:h+l.aa(W));const re=Z===1?x:Vn(r.worldSize,T.add(M.mult(ee)).mult(W));r.setLocationAtPoint(r.renderWorldCopies?re.wrap():re,Q)},scaleOfZoom:B,targetCenter:x,scaleOfMinZoom:F,pixelPathLength:R}}}class Xr{constructor(r,o,d){this.blendFunction=r,this.blendColor=o,this.mask=d}}Xr.Replace=[1,0],Xr.disabled=new Xr(Xr.Replace,l.b6.transparent,[!1,!1,!1,!1]),Xr.unblended=new Xr(Xr.Replace,l.b6.transparent,[!0,!0,!0,!0]),Xr.alphaBlended=new Xr([1,771],l.b6.transparent,[!0,!0,!0,!0]);const Il=2305;class cr{constructor(r,o,d){this.enable=r,this.mode=o,this.frontFace=d}}cr.disabled=new cr(!1,1029,Il),cr.backCCW=new cr(!0,1029,Il),cr.frontCCW=new cr(!0,1028,Il);class Yt{constructor(r,o,d){this.func=r,this.mask=o,this.range=d}}Yt.ReadOnly=!1,Yt.ReadWrite=!0,Yt.disabled=new Yt(519,Yt.ReadOnly,[0,1]);const Gs=7680;class dr{constructor(r,o,d,h,y,x){this.test=r,this.ref=o,this.mask=d,this.fail=h,this.depthFail=y,this.pass=x}}dr.disabled=new dr({func:519,mask:0},0,0,Gs,Gs,Gs);const Da=new WeakMap;function $i(_){var r;if(Da.has(_))return Da.get(_);{const o=(r=_.getParameter(_.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Da.set(_,o),o}}class Oa{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const o=r.context,d=o.gl;this._texFormat=d.RGBA,this._texType=d.UNSIGNED_BYTE;const h=new l.aE;h.emplaceBack(-1,-1),h.emplaceBack(2,-1),h.emplaceBack(-1,2);const y=new l.aG;y.emplaceBack(0,1,2),this._fullscreenTriangle=new yi(o.createVertexBuffer(h,Ri.members),o.createIndexBuffer(y),l.aF.simpleSegment(0,0,h.length,y.length)),this._resultBuffer=new Uint8Array(4),o.activeTexture.set(d.TEXTURE1);const x=d.createTexture();d.bindTexture(d.TEXTURE_2D,x),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texImage2D(d.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=o.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(x),$i(d)&&(this._pbo=d.createBuffer(),d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.bufferData(d.PIXEL_PACK_BUFFER,4,d.STREAM_READ),d.bindBuffer(d.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,o){const d=this._updateCount;return this._readbackQueue?d>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():d>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,o),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,o=r.gl;r.activeTexture.set(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,o){const d=this._cachedRenderContext.context,h=d.gl;if(this._bindFramebuffer(),d.viewport.set([0,0,this._texWidth,this._texHeight]),d.clear({color:l.b6.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(d,h.TRIANGLES,Yt.disabled,dr.disabled,Xr.unblended,cr.disabled,((y,x)=>({u_input:y,u_output_expected:x}))(r,o),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&$i(h)){h.bindBuffer(h.PIXEL_PACK_BUFFER,this._pbo),h.readBuffer(h.COLOR_ATTACHMENT0),h.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),h.bindBuffer(h.PIXEL_PACK_BUFFER,null);const y=h.fenceSync(h.SYNC_GPU_COMMANDS_COMPLETE,0);h.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:y}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&$i(r)){const o=r.clientWaitSync(this._readbackQueue.sync,0,0);if(o===r.WAIT_FAILED)return l.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(o===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Oa._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let o=0;return o+=r[0]/256,o+=r[1]/65536,o+=r[2]/16777216,r[3]<127&&(o=-o),o/128}}const Ml=l.Z/128;function za(_,r){const o=_.granularity!==void 0?Math.max(_.granularity,1):1,d=o+(_.generateBorders?2:0),h=o+(_.extendToNorthPole||_.generateBorders?1:0)+(_.extendToSouthPole||_.generateBorders?1:0),y=d+1,x=h+1,C=_.generateBorders?-1:0,T=_.generateBorders||_.extendToNorthPole?-1:0,M=o+(_.generateBorders?1:0),R=o+(_.generateBorders||_.extendToSouthPole?1:0),B=y*x,F=d*h*6,Z=y*x>65536;if(Z&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const W=Z||r==="32bit",ee=new Int16Array(2*B);let Q=0;for(let he=T;he<=R;he++)for(let fe=C;fe<=M;fe++){let me=fe/o*l.Z;fe===-1&&(me=-64),fe===o+1&&(me=l.Z+Ml);let ve=he/o*l.Z;he===-1&&(ve=_.extendToNorthPole?l.b8:-64),he===o+1&&(ve=_.extendToSouthPole?l.b9:l.Z+Ml),ee[Q++]=me,ee[Q++]=ve}const re=W?new Uint32Array(F):new Uint16Array(F);let ae=0;for(let he=0;he<h;he++)for(let fe=0;fe<d;fe++){const me=fe+1+he*y,ve=fe+(he+1)*y,_e=fe+1+(he+1)*y;re[ae++]=fe+he*y,re[ae++]=ve,re[ae++]=me,re[ae++]=me,re[ae++]=ve,re[ae++]=_e}return{vertices:ee.buffer.slice(0),indices:re.buffer.slice(0),uses32bitIndices:W}}const Ws=new l.aD({fill:new l.ba(128,2),line:new l.ba(512,0),tile:new l.ba(128,32),stencil:new l.ba(128,1),circle:3});class Hs{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return qi.projectionGlobe}get vertexShaderPreludeCode(){return qi.projectionMercator.vertexSource}get subdivisionGranularity(){return Ws}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new Oa(r));const o=l.S(this._errorQueryLatitudeDegrees),d=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,h=this._errorMeasurement.updateErrorLoop(o,d),y=z.now();h!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=h,this._errorMeasurementLastChangeTime=y);const x=Math.min(Math.max((y-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=l.bb(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,l.bc(x))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,o,d,h,y){const x=(y==="stencil"?Ws.stencil:Ws.tile).getGranularityForZoomLevel(o.z);return this._getMesh(r,{granularity:x,generateBorders:d,extendToNorthPole:o.y===0&&h,extendToSouthPole:o.y===(1<<o.z)-1&&h})}_getMesh(r,o){const d=this._getMeshKey(o);if(d in this._tileMeshCache)return this._tileMeshCache[d];const h=function(y,x){const C=za(x,"16bit"),T=l.aE.deserialize({arrayBuffer:C.vertices,length:C.vertices.byteLength/2/2}),M=l.aG.deserialize({arrayBuffer:C.indices,length:C.indices.byteLength/2/3});return new yi(y.createVertexBuffer(T,Ri.members),y.createIndexBuffer(M),l.aF.simpleSegment(0,0,T.length,M.length))}(r,o);return this._tileMeshCache[d]=h,h}recalculate(r){}hasTransition(){const r=z.now();let o=!1;return o=o||(r-this._errorMeasurementLastChangeTime)/1e3<.7,o=o||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,o}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const cm=new l.r({type:new l.D(l.v.projection.type)});class El extends l.E{constructor(r){super(),this._transitionable=new l.T(cm),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.C(0)),this._mercatorProjection=new lu,this._verticalPerspectiveProjection=new Hs}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof l.bd){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,o,d,h,y){return this.currentProjection.getMeshFromTileID(r,o,d,h,y)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function du(_){const r=Jn(_.worldSize,_.center.lat);return 2*Math.PI*r}function $a(_,r,o,d,h){const y=1/(1<<h),x=r/l.Z*y+d*y,C=l.bf((_/l.Z*y+o*y)*Math.PI*2+Math.PI,2*Math.PI),T=2*Math.atan(Math.exp(Math.PI-x*Math.PI*2))-.5*Math.PI,M=Math.cos(T),R=new Float64Array(3);return R[0]=Math.sin(C)*M,R[1]=Math.sin(T),R[2]=Math.cos(C)*M,R}function Xn(_){return function(r,o){const d=Math.cos(o),h=new Float64Array(3);return h[0]=Math.sin(r)*d,h[1]=Math.sin(o),h[2]=Math.cos(r)*d,h}(_.lng*Math.PI/180,_.lat*Math.PI/180)}function Jn(_,r){return _/(2*Math.PI)/Math.cos(r*Math.PI/180)}function Al(_){const r=Math.asin(_[1])/Math.PI*180,o=Math.sqrt(_[0]*_[0]+_[2]*_[2]);if(o>1e-6){const d=_[0]/o,h=Math.acos(_[2]/o),y=(d>0?h:-h)/Math.PI*180;return new l.Q(l.aK(y,-180,180),r)}return new l.Q(0,r)}function bi(_){return Math.cos(_*Math.PI/180)}function mn(_,r){const o=bi(_),d=bi(r);return l.aa(d/o)}function hu(_,r){const o=_.rotate(r.bearingInRadians),d=r.zoom+mn(r.center.lat,0),h=l.bb(1/bi(r.center.lat),1/bi(Math.min(Math.abs(r.center.lat),60)),l.be(d,7,3,0,1)),y=360/du({worldSize:r.worldSize,center:{lat:r.center.lat}});return new l.Q(r.center.lng-o.x*y*h,l.ad(r.center.lat+o.y*y,-85.051129,l.aI))}function Ll(_){const r=.5*_,o=Math.sin(r),d=Math.cos(r);return Math.log(o+d)-Math.log(d-o)}function as(_,r,o,d){const h=_.lat+o*d;if(Math.abs(o)>1){const y=(Math.sign(_.lat+o)!==Math.sign(_.lat)?-Math.abs(_.lat):Math.abs(_.lat))*Math.PI/180,x=Math.abs(_.lat+o)*Math.PI/180,C=Ll(y+d*(x-y)),T=Ll(y),M=Ll(x);return new l.Q(_.lng+r*((C-T)/(M-T)),h)}return new l.Q(_.lng+r*d,h)}class um{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=r}recalculateCache(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(r,o,d,h){const y=`${r.z}_${r.x}_${r.y}`,x=this._cache.get(y);if(x)return x;const C=this._cachePrevious.get(y);if(C)return this._cache.set(y,C),C;const T=this._aabbFactory(r,o,d,h);return this._cache.set(y,T),this._hadAnyChanges=!0,T}}function Rl(_,r,o){const d=_-r;return d<0?-d:Math.max(0,d-o)}function fu(_,r,o,d,h){const y=_-o;let x;return x=y<0?Math.min(-y,1+y-h):y>1?Math.min(Math.max(y-h,0),1-y):0,Math.max(x,Rl(r,d,h))}class dm{constructor(){this._aabbCache=new um(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(r,o,d,h){const y=1<<d.z,x=1/y,C=d.x/y,T=d.y/y;let M=2;return M=Math.min(M,fu(r,o,C,T,x)),M=Math.min(M,fu(r,o,C+.5,-T-x,x)),M=Math.min(M,fu(r,o,C+.5,2-T-x,x)),M}getWrap(r,o,d){const h=1<<o.z,y=1/h,x=o.x/h,C=Rl(r.x,x,y),T=Rl(r.x,x-1,y),M=Rl(r.x,x+1,y),R=Math.min(C,T,M);return R===M?1:R===T?-1:0}allowVariableZoom(r,o){return Li(r,o)>4}allowWorldCopies(){return!1}getTileAABB(r,o,d,h){return this._aabbCache.getTileAABB(r,o,d,h)}_computeTileAABB(r,o,d,h){if(r.z<=0)return new Ki([-1,-1,-1],[1,1,1]);if(r.z===1)return new Ki([r.x===0?-1:0,r.y===0?0:-1,-1],[r.x===0?0:1,r.y===0?1:0,1]);{const y=[$a(0,0,r.x,r.y,r.z),$a(l.Z,0,r.x,r.y,r.z),$a(l.Z,l.Z,r.x,r.y,r.z),$a(0,l.Z,r.x,r.y,r.z)],x=[1,1,1],C=[-1,-1,-1];for(const T of y)for(let M=0;M<3;M++)x[M]=Math.min(x[M],T[M]),C[M]=Math.max(C[M],T[M]);if(r.y===0||r.y===(1<<r.z)-1){const T=[0,r.y===0?1:-1,0];for(let M=0;M<3;M++)x[M]=Math.min(x[M],T[M]),C[M]=Math.max(C[M],T[M])}return new Ki(x,C)}}}class Dl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,o,d){return this._helper.interpolatePadding(r,o,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,o){this._helper.resize(r,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,o){this._helper.overrideNearFarZ(r,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=l.bg(),this._projectionMatrix=l.b0(),this._globeViewProjMatrix32f=l.a$(),this._globeViewProjMatrixNoCorrection=l.b0(),this._globeViewProjMatrixNoCorrectionInverted=l.b0(),this._globeProjMatrixInverted=l.b0(),this._cameraPosition=l.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Pl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,o)=>this.getConstrained(r,o)}),this._coveringTilesDetailsProvider=new dm}clone(){const r=new Dl;return r.apply(this),r}apply(r,o){this._globeLatitudeErrorCorrectionRadians=o||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=l.bh();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:o,applyGlobeMatrix:d}=r,h=this._helper.getMercatorTileCoordinates(o);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:h,clippingPlane:this._cachedClippingPlane,projectionTransition:d?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const o=this.pitchInRadians,d=this.cameraToCenterDistance/r,h=Math.sin(o)*d,y=Math.cos(o)*d+1,x=1/Math.sqrt(h*h+y*y)*1;let C=-h,T=y;const M=Math.sqrt(C*C+T*T);C/=M,T/=M;const R=[0,C,T];return l.bi(R,R,[0,0,0],-this.bearingInRadians),l.bj(R,R,[0,0,0],-1*this.center.lat*Math.PI/180),l.bk(R,R,[0,0,0],this.center.lng*Math.PI/180),l.aN(R,R,.25),[...R,.25*-x]}isLocationOccluded(r){return!this.isSurfacePointVisible(Xn(r))}transformLightDirection(r){const o=this._helper._center.lng*Math.PI/180,d=this._helper._center.lat*Math.PI/180,h=Math.cos(d),y=[Math.sin(o)*h,Math.sin(d),Math.cos(o)*h],x=[y[2],0,-y[0]],C=[0,0,0];l.aT(C,x,y),l.aS(x,x),l.aS(C,C);const T=[0,0,0];return l.aS(T,[x[0]*r[0]+C[0]*r[1]+y[0]*r[2],x[1]*r[0]+C[1]*r[1]+y[1]*r[2],x[2]*r[0]+C[2]*r[1]+y[2]*r[2]]),T}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,o,d){const h=function(C,T,M){const R=1/(1<<M.z);return new l.$(C/l.Z*R+M.x*R,T/l.Z*R+M.y*R)}(r,o,d.canonical),y=(x=h.y,[l.bf(h.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-x*Math.PI*2))-.5*Math.PI]);var x;return this.getCircleRadiusCorrection()/Math.cos(y[1])}projectTileCoordinates(r,o,d,h){const y=d.canonical,x=$a(r,o,y.x,y.y,y.z),C=1+(h?h(r,o):0)/l.bq,T=[x[0]*C,x[1]*C,x[2]*C,1];l.ao(T,T,this._globeViewProjMatrixNoCorrection);const M=this._cachedClippingPlane,R=M[0]*x[0]+M[1]*x[1]+M[2]*x[2]+M[3]<0;return{point:new l.P(T[0]/T[3],T[1]/T[3]),signedDistanceFromCamera:T[3],isOccluded:R}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=Jn(this.worldSize,this.center.lat),o=l.b1(),d=l.b1();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),l.aX(o,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const h=this.centerOffset;o[8]=2*-h.x/this._helper._width,o[9]=2*h.y/this._helper._height,this._projectionMatrix=l.aY(o),this._globeProjMatrixInverted=l.b1(),l.ai(this._globeProjMatrixInverted,o),l.L(o,o,[0,0,-this.cameraToCenterDistance]),l.aZ(o,o,this.rollInRadians),l.a_(o,o,-this.pitchInRadians),l.aZ(o,o,this.bearingInRadians),l.L(o,o,[0,0,-r]);const y=l.bh();y[0]=r,y[1]=r,y[2]=r,l.a_(d,o,this.center.lat*Math.PI/180),l.bl(d,d,-this.center.lng*Math.PI/180),l.M(d,d,y),this._globeViewProjMatrixNoCorrection=d,l.a_(o,o,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),l.bl(o,o,-this.center.lng*Math.PI/180),l.M(o,o,y),this._globeViewProjMatrix32f=new Float32Array(o),this._globeViewProjMatrixNoCorrectionInverted=l.b1(),l.ai(this._globeViewProjMatrixNoCorrectionInverted,d);const x=l.bh();this._cameraPosition=l.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/r,l.bi(this._cameraPosition,this._cameraPosition,x,-this.rollInRadians),l.bj(this._cameraPosition,this._cameraPosition,x,this.pitchInRadians),l.bi(this._cameraPosition,this._cameraPosition,x,-this.bearingInRadians),l.aO(this._cameraPosition,this._cameraPosition,[0,0,1]),l.bj(this._cameraPosition,this._cameraPosition,x,-this.center.lat*Math.PI/180),l.bk(this._cameraPosition,this._cameraPosition,x,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const C=l.aY(this._globeViewProjMatrixNoCorrectionInverted);l.M(C,C,[1,1,-1]),this._cachedFrustum=No.fromInvProjectionMatrix(C)}calculateFogMatrix(r){l.w("calculateFogMatrix is not supported on globe projection.");const o=l.b1();return l.as(o),o}getVisibleUnwrappedCoordinates(r){return[new l.aV(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&l.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,o){if(!this._globeViewProjMatrixNoCorrection)return 1;const d=Xn(r);l.aN(d,d,1+o/l.bq);const h=l.bg();return l.ao(h,[d[0],d[1],d[2],1],this._globeViewProjMatrixNoCorrection),h[2]/h[3]}populateCache(r){}getBounds(){const r=.5*this.width,o=.5*this.height,d=[new l.P(0,0),new l.P(r,0),new l.P(this.width,0),new l.P(this.width,o),new l.P(this.width,this.height),new l.P(r,this.height),new l.P(0,this.height),new l.P(0,o)],h=[];for(const B of d)h.push(this.unprojectScreenPoint(B));let y=0,x=0,C=0,T=0;const M=this.center;for(const B of h){const F=l.bm(M.lng,B.lng),Z=l.bm(M.lat,B.lat);F<x&&(x=F),F>y&&(y=F),Z<T&&(T=Z),Z>C&&(C=Z)}const R=[M.lng+x,M.lat+T,M.lng+y,M.lat+C];return this.isSurfacePointOnScreen([0,1,0])&&(R[3]=90,R[0]=-180,R[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(R[1]=-90,R[0]=-180,R[2]=180),new Le(R)}getConstrained(r,o){const d=l.ad(r.lat,-85.051129,l.aI),h=l.ad(+o,this.minZoom+mn(0,d),this.maxZoom);return{center:new l.Q(r.lng,d),zoom:h}}calculateCenterFromCameraLngLatAlt(r,o,d,h){return this._helper.calculateCenterFromCameraLngLatAlt(r,o,d,h)}setLocationAtPoint(r,o){const d=Xn(this.unprojectScreenPoint(o)),h=Xn(r),y=l.bh();l.bn(y);const x=l.bh();l.bk(x,d,y,-this.center.lng*Math.PI/180),l.bj(x,x,y,this.center.lat*Math.PI/180);const C=h[0]*h[0]+h[2]*h[2],T=x[0]*x[0];if(C<T)return;const M=Math.sqrt(C-T),R=-M,B=l.bo(h[0],h[2],x[0],M),F=l.bo(h[0],h[2],x[0],R),Z=l.bh();l.bk(Z,h,y,-B);const W=l.bo(Z[1],Z[2],x[1],x[2]),ee=l.bh();l.bk(ee,h,y,-F);const Q=l.bo(ee[1],ee[2],x[1],x[2]),re=.5*Math.PI,ae=W>=-re&&W<=re,he=Q>=-re&&Q<=re;let fe,me;if(ae&&he){const ze=this.center.lng*Math.PI/180,Ge=this.center.lat*Math.PI/180;l.br(B,ze)+l.br(W,Ge)<l.br(F,ze)+l.br(Q,Ge)?(fe=B,me=W):(fe=F,me=Q)}else if(ae)fe=B,me=W;else{if(!he)return;fe=F,me=Q}const ve=fe/Math.PI*180,_e=me/Math.PI*180,Re=this.center.lat;this.setCenter(new l.Q(ve,l.ad(_e,-90,90))),this.setZoom(this.zoom+mn(Re,this.center.lat))}locationToScreenPoint(r,o){const d=Xn(r);if(o){const h=o.getElevationForLngLatZoom(r,this._helper._tileZoom);l.aN(d,d,1+h/l.bq)}return this._projectSurfacePointToScreen(d)}_projectSurfacePointToScreen(r){const o=l.bg();return l.ao(o,[...r,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],new l.P((.5*o[0]+.5)*this.width,(.5*-o[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,o){if(o){const d=o.pointCoordinate(r);if(d)return d}return l.$.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,o){var d;return(d=this.screenPointToMercatorCoordinate(r,o))===null||d===void 0?void 0:d.toLngLat()}isPointOnMapSurface(r,o){const d=this._cameraPosition,h=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(d,h)}getRayDirectionFromPixel(r){const o=l.bg();o[0]=r.x/this.width*2-1,o[1]=-1*(r.y/this.height*2-1),o[2]=1,o[3]=1,l.ao(o,o,this._globeViewProjMatrixNoCorrectionInverted),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3];const d=l.bh();d[0]=o[0]-this._cameraPosition[0],d[1]=o[1]-this._cameraPosition[1],d[2]=o[2]-this._cameraPosition[2];const h=l.bh();return l.aS(h,d),h}isSurfacePointVisible(r){const o=this._cachedClippingPlane;return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const o=l.bg();return l.ao(o,[...r,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[0]>-1&&o[0]<1&&o[1]>-1&&o[1]<1&&o[2]>-1&&o[2]<1}rayPlanetIntersection(r,o){const d=l.aU(r,o),h=l.bh(),y=l.bh();l.aN(y,o,d),l.aR(h,r,y);const x=1-l.aU(h,h);if(x<0)return null;const C=l.aU(r,r)-1,T=-d+(d<0?1:-1)*Math.sqrt(x),M=C/T,R=T;return{tMin:Math.min(M,R),tMax:Math.max(M,R)}}unprojectScreenPoint(r){const o=this._cameraPosition,d=this.getRayDirectionFromPixel(r),h=this.rayPlanetIntersection(o,d);if(h){const M=l.bh();l.aO(M,o,[d[0]*h.tMin,d[1]*h.tMin,d[2]*h.tMin]);const R=l.bh();return l.aS(R,M),Al(R)}const y=this._cachedClippingPlane[0]*d[0]+this._cachedClippingPlane[1]*d[1]+this._cachedClippingPlane[2]*d[2],x=-l.bp(this._cachedClippingPlane,o)/y,C=l.bh();if(x>0)l.aO(C,o,[d[0]*x,d[1]*x,d[2]*x]);else{const M=l.bh();l.aO(M,o,[2*d[0],2*d[1],2*d[2]]);const R=l.bp(this._cachedClippingPlane,M);l.aR(C,M,[this._cachedClippingPlane[0]*R,this._cachedClippingPlane[1]*R,this._cachedClippingPlane[2]*R])}const T=l.bh();return l.aS(T,C),Al(T)}getMatrixForModel(r,o){const d=l.Q.convert(r),h=1/l.bq,y=l.b0();return l.bl(y,y,d.lng/180*Math.PI),l.a_(y,y,-d.lat/180*Math.PI),l.L(y,y,[0,0,1+o/l.bq]),l.a_(y,y,.5*Math.PI),l.M(y,y,[h,h,h]),y}getProjectionDataForCustomLayer(r=!0){const o=this.getProjectionData({overscaledTileID:new l.Y(0,0,0,0,0),applyGlobeMatrix:r});return o.tileMercatorCoords=[0,0,1,1],o}getFastPathSimpleProjectionMatrix(r){}}class Ol{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,o,d){return this._helper.interpolatePadding(r,o,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,o,d=!0){this._helper.resize(r,o,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,o){this._helper.overrideNearFarZ(r,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,o){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=o,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Pl({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,o)=>this.getConstrained(r,o)}),this._globeness=1,this._mercatorTransform=new Oi,this._verticalPerspectiveTransform=new Dl}clone(){const r=new Ol;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const o=this._mercatorTransform.getProjectionData(r),d=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?d.mainMatrix:o.mainMatrix,clippingPlane:d.clippingPlane,tileMercatorCoords:d.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:o.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return l.bb(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return l.bb(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,o,d){const h=this._mercatorTransform.getPitchedTextCorrection(r,o,d),y=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,o,d);return l.bb(h,y,this._globeness)}projectTileCoordinates(r,o,d,h){return this.currentTransform.projectTileCoordinates(r,o,d,h)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,o){return this.currentTransform.lngLatToCameraDepth(r,o)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,o){return this.currentTransform.getConstrained(r,o)}calculateCenterFromCameraLngLatAlt(r,o,d,h){return this._helper.calculateCenterFromCameraLngLatAlt(r,o,d,h)}setLocationAtPoint(r,o){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,o),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,o),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,o){return this.currentTransform.locationToScreenPoint(r,o)}screenPointToMercatorCoordinate(r,o){return this.currentTransform.screenPointToMercatorCoordinate(r,o)}screenPointToLocation(r,o){return this.currentTransform.screenPointToLocation(r,o)}isPointOnMapSurface(r,o){return this.currentTransform.isPointOnMapSurface(r,o)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,o){return this.currentTransform.getMatrixForModel(r,o)}getProjectionDataForCustomLayer(r=!0){const o=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return o;const d=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return d.fallbackMatrix=o.mainMatrix,d}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class di{get useGlobeControls(){return!0}handlePanInertia(r,o){const d=hu(r,o);return Math.abs(d.lng-o.center.lng)>180&&(d.lng=o.center.lng+179.5*Math.sign(d.lng-o.center.lng)),{easingCenter:d,easingOffset:new l.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,o){const d=r.around,h=o.screenPointToLocation(d);r.bearingDelta&&o.setBearing(o.bearing+r.bearingDelta),r.pitchDelta&&o.setPitch(o.pitch+r.pitchDelta),r.rollDelta&&o.setRoll(o.roll+r.rollDelta);const y=o.zoom;r.zoomDelta&&o.setZoom(o.zoom+r.zoomDelta);const x=o.zoom-y;if(x===0)return;const C=l.bm(o.center.lng,h.lng),T=C/(Math.abs(C/180)+1),M=l.bm(o.center.lat,h.lat),R=o.getRayDirectionFromPixel(d),B=o.cameraPosition,F=-1*l.aU(B,R),Z=l.bh();l.aO(Z,B,[R[0]*F,R[1]*F,R[2]*F]);const W=l.bs(Z)-1,ee=Math.exp(.5*-Math.max(W-.3,0)),Q=Jn(o.worldSize,o.center.lat)/Math.min(o.width,o.height),re=l.be(Q,.9,.5,1,.25),ae=(1-l.aH(-x))*Math.min(ee,re),he=o.center.lat,fe=o.zoom,me=new l.Q(o.center.lng+T*ae,l.ad(o.center.lat+M*ae,-85.051129,l.aI));o.setLocationAtPoint(h,d);const ve=o.center,_e=l.be(Math.abs(C),45,85,0,1),Re=l.be(Q,.75,.35,0,1),ze=Math.pow(Math.max(_e,Re),.25),Ge=l.bm(ve.lng,me.lng),qe=l.bm(ve.lat,me.lat);o.setCenter(new l.Q(ve.lng+Ge*ze,ve.lat+qe*ze).wrap()),o.setZoom(fe+mn(he,o.center.lat))}handleMapControlsPan(r,o,d){if(!r.panDelta)return;const h=o.center.lat,y=o.zoom;o.setCenter(hu(r.panDelta,o).wrap()),o.setZoom(y+mn(h,o.center.lat))}cameraForBoxAndBearing(r,o,d,h,y){const x=uu(r,o,d,h,y),C=o.left/y.width*2-1,T=(y.width-o.right)/y.width*2-1,M=o.top/y.height*-2+1,R=(y.height-o.bottom)/y.height*-2+1,B=l.bm(d.getWest(),d.getEast())<0,F=B?d.getEast():d.getWest(),Z=B?d.getWest():d.getEast(),W=Math.max(d.getNorth(),d.getSouth()),ee=Math.min(d.getNorth(),d.getSouth()),Q=F+.5*l.bm(F,Z),re=W+.5*l.bm(W,ee),ae=y.clone();ae.setCenter(x.center),ae.setBearing(x.bearing),ae.setPitch(0),ae.setRoll(0),ae.setZoom(x.zoom);const he=ae.modelViewProjectionMatrix,fe=[Xn(d.getNorthWest()),Xn(d.getNorthEast()),Xn(d.getSouthWest()),Xn(d.getSouthEast()),Xn(new l.Q(Z,re)),Xn(new l.Q(F,re)),Xn(new l.Q(Q,W)),Xn(new l.Q(Q,ee))],me=Xn(x.center);let ve=Number.POSITIVE_INFINITY;for(const _e of fe)C<0&&(ve=di.getLesserNonNegativeNonNull(ve,di.solveVectorScale(_e,me,he,"x",C))),T>0&&(ve=di.getLesserNonNegativeNonNull(ve,di.solveVectorScale(_e,me,he,"x",T))),M>0&&(ve=di.getLesserNonNegativeNonNull(ve,di.solveVectorScale(_e,me,he,"y",M))),R<0&&(ve=di.getLesserNonNegativeNonNull(ve,di.solveVectorScale(_e,me,he,"y",R)));if(Number.isFinite(ve)&&ve!==0)return x.zoom=ae.zoom+l.aa(ve),x;Ra()}handleJumpToCenterZoom(r,o){const d=r.center.lat,h=r.getConstrained(o.center?l.Q.convert(o.center):r.center,r.zoom).center;r.setCenter(h.wrap());const y=o.zoom!==void 0?+o.zoom:r.zoom+mn(d,h.lat);r.zoom!==y&&r.setZoom(y)}handleEaseTo(r,o){const d=r.zoom,h=r.center,y=r.padding,x={roll:r.roll,pitch:r.pitch,bearing:r.bearing},C={roll:o.roll===void 0?r.roll:o.roll,pitch:o.pitch===void 0?r.pitch:o.pitch,bearing:o.bearing===void 0?r.bearing:o.bearing},T=o.zoom!==void 0,M=!r.isPaddingEqual(o.padding);let R=!1;const B=o.center?l.Q.convert(o.center):h,F=r.getConstrained(B,d).center;ii(r,F);const Z=r.clone();Z.setCenter(F),Z.setZoom(T?+o.zoom:d+mn(h.lat,B.lat)),Z.setBearing(o.bearing);const W=new l.P(l.ad(r.centerPoint.x+o.offsetAsPoint.x,0,r.width),l.ad(r.centerPoint.y+o.offsetAsPoint.y,0,r.height));Z.setLocationAtPoint(F,W);const ee=(o.offset&&o.offsetAsPoint.mag())>0?Z.center:F,Q=T?+o.zoom:d+mn(h.lat,ee.lat),re=d+mn(h.lat,0),ae=Q+mn(ee.lat,0),he=l.bm(h.lng,ee.lng),fe=l.bm(h.lat,ee.lat),me=l.aH(ae-re);return R=Q!==d,{easeFunc:ve=>{if(l.b5(x,C)||zi({startEulerAngles:x,endEulerAngles:C,tr:r,k:ve,useSlerp:x.roll!=C.roll}),M&&r.interpolatePadding(y,o.padding,ve),o.around)l.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(o.around,o.aroundPoint);else{const _e=ae>re?Math.min(2,me):Math.max(.5,me),Re=Math.pow(_e,1-ve),ze=as(h,he,fe,ve*Re);r.setCenter(ze.wrap())}if(R){const _e=l.B.number(re,ae,ve)+mn(0,r.center.lat);r.setZoom(_e)}},isZooming:R,elevationCenter:ee}}handleFlyTo(r,o){const d=o.zoom!==void 0,h=r.center,y=r.zoom,x=r.padding,C=!r.isPaddingEqual(o.padding),T=r.getConstrained(l.Q.convert(o.center||o.locationAtOffset),y).center,M=d?+o.zoom:r.zoom+mn(r.center.lat,T.lat),R=r.clone();R.setCenter(T),R.setZoom(M),R.setBearing(o.bearing);const B=new l.P(l.ad(r.centerPoint.x+o.offsetAsPoint.x,0,r.width),l.ad(r.centerPoint.y+o.offsetAsPoint.y,0,r.height));R.setLocationAtPoint(T,B);const F=R.center;ii(r,F);const Z=function(fe,me,ve){const _e=Xn(me),Re=Xn(ve),ze=l.aU(_e,Re),Ge=Math.acos(ze),qe=du(fe);return Ge/(2*Math.PI)*qe}(r,h,F),W=y+mn(h.lat,0),ee=M+mn(F.lat,0),Q=l.aH(ee-W);let re;if(typeof o.minZoom=="number"){const fe=+o.minZoom+mn(F.lat,0),me=Math.min(fe,W,ee)+mn(0,F.lat),ve=r.getConstrained(F,me).zoom+mn(F.lat,0);re=l.aH(ve-W)}const ae=l.bm(h.lng,F.lng),he=l.bm(h.lat,F.lat);return{easeFunc:(fe,me,ve,_e)=>{const Re=as(h,ae,he,ve);C&&r.interpolatePadding(x,o.padding,fe);const ze=fe===1?F:Re;r.setCenter(ze.wrap());const Ge=W+l.aa(me);r.setZoom(fe===1?M:Ge+mn(0,ze.lat))},scaleOfZoom:Q,targetCenter:F,scaleOfMinZoom:re,pixelPathLength:Z}}static solveVectorScale(r,o,d,h,y){const x=h==="x"?[d[0],d[4],d[8],d[12]]:[d[1],d[5],d[9],d[13]],C=[d[3],d[7],d[11],d[15]],T=r[0]*x[0]+r[1]*x[1]+r[2]*x[2],M=r[0]*C[0]+r[1]*C[1]+r[2]*C[2],R=o[0]*x[0]+o[1]*x[1]+o[2]*x[2],B=o[0]*C[0]+o[1]*C[1]+o[2]*C[2];return R+y*M===T+y*B||C[3]*(T-R)+x[3]*(B-M)+T*B==R*M?null:(R+x[3]-y*B-y*C[3])/(R-T-y*B+y*M)}static getLesserNonNegativeNonNull(r,o){return o!==null&&o>=0&&o<r?o:r}}class zl{constructor(r){this._globe=r,this._mercatorCameraHelper=new Yi,this._verticalPerspectiveCameraHelper=new di}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,o){return this.currentHelper.handlePanInertia(r,o)}handleMapControlsRollPitchBearingZoom(r,o){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,o)}handleMapControlsPan(r,o,d){this.currentHelper.handleMapControlsPan(r,o,d)}cameraForBoxAndBearing(r,o,d,h,y){return this.currentHelper.cameraForBoxAndBearing(r,o,d,h,y)}handleJumpToCenterZoom(r,o){this.currentHelper.handleJumpToCenterZoom(r,o)}handleEaseTo(r,o){return this.currentHelper.handleEaseTo(r,o)}handleFlyTo(r,o){return this.currentHelper.handleFlyTo(r,o)}}const ls=(_,r)=>l.x(_,r&&r.filter(o=>o.identifier!=="source.canvas")),pu=l.bt();class Ba extends l.E{constructor(r,o={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const h=this.sourceCaches[d].getSource().type;h!=="vector"&&h!=="geojson"||this.sourceCaches[d].reload()}},this.map=r,this.dispatcher=new Yr(lr(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,h)=>this.getGlyphs(d,h)),this.dispatcher.registerMessageHandler("GI",(d,h)=>this.getImages(d,h)),this.imageManager=new ft,this.imageManager.setEventedParent(this),this.glyphManager=new wt(r._requestManager,o.localIdeographFontFamily),this.lineAtlas=new mt(256,512),this.crossTileSymbolIndex=new au,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.bu,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.bv()),Ht().on(Ze,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const h=this.sourceCaches[d.sourceId];if(!h)return;const y=h.getSource();if(y&&y.vectorLayerIds)for(const x in this._layers){const C=this._layers[x];C.source===y.id&&this._validateLayer(C)}})}loadURL(r,o={},d){this.fire(new l.l("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const h=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;l.j(h,this._loadStyleRequest).then(x=>{this._loadStyleRequest=null,this._load(x.data,o,d)}).catch(x=>{this._loadStyleRequest=null,x&&!y.signal.aborted&&this.fire(new l.k(x))})}loadJSON(r,o={},d){this.fire(new l.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,z.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(r,o,d)}).catch(()=>{})}loadEmpty(){this.fire(new l.l("dataloading",{dataType:"style"})),this._load(pu,{validate:!1})}_load(r,o,d){var h,y;const x=o.transformStyle?o.transformStyle(d,r):r;if(!o.validate||!ls(this,l.y(x))){this._loaded=!0,this.stylesheet=x;for(const C in x.sources)this.addSource(C,x.sources[C],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new At(this.stylesheet.light),this._setProjectionInternal(((h=this.stylesheet.projection)===null||h===void 0?void 0:h.type)||"mercator"),this.sky=new et(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new l.l("data",{dataType:"style"})),this.fire(new l.l("style.load"))}}_createLayers(){const r=l.bw(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of r){const d=l.bx(o);d.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=d}}_loadSprite(r,o=!1,d=void 0){let h;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,x,C,T){return l._(this,void 0,void 0,function*(){const M=Oe(y),R=C>1?"@2x":"",B={},F={};for(const{id:Z,url:W}of M){const ee=x.transformRequest(ke(W,R,".json"),"SpriteJSON");B[Z]=l.j(ee,T);const Q=x.transformRequest(ke(W,R,".png"),"SpriteImage");F[Z]=X.getImage(Q,T)}return yield Promise.all([...Object.values(B),...Object.values(F)]),function(Z,W){return l._(this,void 0,void 0,function*(){const ee={};for(const Q in Z){ee[Q]={};const re=z.getImageCanvasContext((yield W[Q]).data),ae=(yield Z[Q]).data;for(const he in ae){const{width:fe,height:me,x:ve,y:_e,sdf:Re,pixelRatio:ze,stretchX:Ge,stretchY:qe,content:Ue,textFitWidth:gt,textFitHeight:pt}=ae[he];ee[Q][he]={data:null,pixelRatio:ze,sdf:Re,stretchX:Ge,stretchY:qe,content:Ue,textFitWidth:gt,textFitHeight:pt,spriteData:{width:fe,height:me,x:ve,y:_e,context:re}}}}return ee})}(B,F)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const x in y){this._spritesImagesIds[x]=[];const C=this._spritesImagesIds[x]?this._spritesImagesIds[x].filter(T=>!(T in y)):[];for(const T of C)this.imageManager.removeImage(T),this._changedImages[T]=!0;for(const T in y[x]){const M=x==="default"?T:`${x}:${T}`;this._spritesImagesIds[x].push(M),M in this.imageManager.images?this.imageManager.updateImage(M,y[x][T],!1):this.imageManager.addImage(M,y[x][T]),o&&(this._changedImages[M]=!0)}}}).catch(y=>{this._spriteRequest=null,h=y,this.fire(new l.k(h))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"})),d&&d(h)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}_validateLayer(r){const o=this.sourceCaches[r.source];if(!o)return;const d=r.sourceLayer;if(!d)return;const h=o.getSource();(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(d)===-1)&&this.fire(new l.k(new Error(`Source layer "${d}" does not exist on source "${h.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,o=!1){const d=this._serializedAllLayers();if(!r||r.length===0)return Object.values(o?l.by(d):d);const h=[];for(const y of r)if(d[y]){const x=o?l.by(d[y]):d[y];h.push(x)}return h}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const o=Object.keys(this._layers);for(const d of o){const h=this._layers[d];h.type!=="custom"&&(r[d]=h.serialize())}return r}hasTransitions(){var r,o,d;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((o=this.sky)===null||o===void 0)&&o.hasTransition()||!((d=this.projection)===null||d===void 0)&&d.hasTransition())return!0;for(const h in this.sourceCaches)if(this.sourceCaches[h].hasTransition())return!0;for(const h in this._layers)if(this._layers[h].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const o=this._changed;if(o){const h=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(h.length||y.length)&&this._updateWorkerLayers(h,y);for(const x in this._updatedSources){const C=this._updatedSources[x];if(C==="reload")this._reloadSource(x);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(x)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const x in this._updatedPaintProps)this._layers[x].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const d={};for(const h in this.sourceCaches){const y=this.sourceCaches[h];d[h]=y.used,y.used=!1}for(const h of this._order){const y=this._layers[h];y.recalculate(r,this._availableImages),!y.isHidden(r.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const h in d){const y=this.sourceCaches[h];!!d[h]!=!!y.used&&y.fire(new l.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:h}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,o&&this.fire(new l.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,o={}){var d;this._checkLoaded();const h=this.serialize();if(r=o.transformStyle?o.transformStyle(h,r):r,((d=o.validate)===null||d===void 0||d)&&ls(this,l.y(r)))return!1;(r=l.by(r)).layers=l.bw(r.layers);const y=l.bz(h,r),x=this._getOperationsToPerform(y);if(x.unimplemented.length>0)throw new Error(`Unimplemented: ${x.unimplemented.join(", ")}.`);if(x.operations.length===0)return!1;for(const C of x.operations)C();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const o=[],d=[];for(const h of r)switch(h.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,h.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,h.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,h.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,h.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,h.args));break;case"addSource":o.push(()=>this.addSource.apply(this,h.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,h.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,h.args));break;case"setLight":o.push(()=>this.setLight.apply(this,h.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,h.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,h.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,h.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,h.args));break;case"setSky":o.push(()=>this.setSky.apply(this,h.args));break;case"setProjection":this.setProjection.apply(this,h.args);break;case"setTransition":o.push(()=>{});break;default:d.push(h.command)}return{operations:o,unimplemented:d}}addImage(r,o){if(this.getImage(r))return this.fire(new l.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,o),this._afterImageUpdated(r)}updateImage(r,o){this.imageManager.updateImage(r,o)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,o,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(l.y.source,`sources.${r}`,o,null,d))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const h=this.sourceCaches[r]=new $(r,o,this.dispatcher);h.style=this,h.setEventedParent(this,()=>({isSourceLoaded:h.loaded(),source:h.serialize(),sourceId:r})),h.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new l.k(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const o=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],o.fire(new l.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,o){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(o),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,o,d={}){this._checkLoaded();const h=r.id;if(this.getLayer(h))return void this.fire(new l.k(new Error(`Layer "${h}" already exists on this map.`)));let y;if(r.type==="custom"){if(ls(this,l.bA(r)))return;y=l.bx(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(h,r.source),r=l.by(r),r=l.e(r,{source:h})),this._validate(l.y.layer,`layers.${h}`,r,{arrayIndex:-1},d))return;y=l.bx(r),this._validateLayer(y),y.setEventedParent(this,{layer:{id:h}})}const x=o?this._order.indexOf(o):this._order.length;if(o&&x===-1)this.fire(new l.k(new Error(`Cannot add layer "${h}" before non-existing layer "${o}".`)));else{if(this._order.splice(x,0,h),this._layerOrderChanged=!0,this._layers[h]=y,this._removedLayers[h]&&y.source&&y.type!=="custom"){const C=this._removedLayers[h];delete this._removedLayers[h],C.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(r,o){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===o)return;const d=this._order.indexOf(r);this._order.splice(d,1);const h=o?this._order.indexOf(o):this._order.length;o&&h===-1?this.fire(new l.k(new Error(`Cannot move layer "${r}" before non-existing layer "${o}".`))):(this._order.splice(h,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const o=this._layers[r];if(!o)return void this.fire(new l.k(new Error(`Cannot remove non-existing layer "${r}".`)));o.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=o,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],o.onRemove&&o.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,o,d){this._checkLoaded();const h=this.getLayer(r);h?h.minzoom===o&&h.maxzoom===d||(o!=null&&(h.minzoom=o),d!=null&&(h.maxzoom=d),this._updateLayer(h)):this.fire(new l.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,o,d={}){this._checkLoaded();const h=this.getLayer(r);if(h){if(!l.bB(h.filter,o))return o==null?(h.filter=void 0,void this._updateLayer(h)):void(this._validate(l.y.filter,`layers.${h.id}.filter`,o,null,d)||(h.filter=l.by(o),this._updateLayer(h)))}else this.fire(new l.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.by(this.getLayer(r).filter)}setLayoutProperty(r,o,d,h={}){this._checkLoaded();const y=this.getLayer(r);y?l.bB(y.getLayoutProperty(o),d)||(y.setLayoutProperty(o,d,h),this._updateLayer(y)):this.fire(new l.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,o){const d=this.getLayer(r);if(d)return d.getLayoutProperty(o);this.fire(new l.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,o,d,h={}){this._checkLoaded();const y=this.getLayer(r);y?l.bB(y.getPaintProperty(o),d)||(y.setPaintProperty(o,d,h)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new l.k(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,o){return this.getLayer(r).getPaintProperty(o)}setFeatureState(r,o){this._checkLoaded();const d=r.source,h=r.sourceLayer,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new l.k(new Error(`The source '${d}' does not exist in the map's style.`)));const x=y.getSource().type;x==="geojson"&&h?this.fire(new l.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):x!=="vector"||h?(r.id===void 0&&this.fire(new l.k(new Error("The feature id parameter must be provided."))),y.setFeatureState(h,r.id,o)):this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,o){this._checkLoaded();const d=r.source,h=this.sourceCaches[d];if(h===void 0)return void this.fire(new l.k(new Error(`The source '${d}' does not exist in the map's style.`)));const y=h.getSource().type,x=y==="vector"?r.sourceLayer:void 0;y!=="vector"||x?o&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.k(new Error("A feature id is required to remove its specific state property."))):h.removeFeatureState(x,r.id,o):this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const o=r.source,d=r.sourceLayer,h=this.sourceCaches[o];if(h!==void 0)return h.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new l.k(new Error("The feature id parameter must be provided."))),h.getFeatureState(d,r.id)):void this.fire(new l.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.k(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=l.bC(this.sourceCaches,y=>y.serialize()),o=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,h=this.stylesheet;return l.bD({version:h.version,name:h.name,metadata:h.metadata,light:h.light,sky:h.sky,center:h.center,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch,sprite:h.sprite,glyphs:h.glyphs,transition:h.transition,projection:h.projection,sources:r,layers:o,terrain:d},y=>y!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const o=x=>this._layers[x].type==="fill-extrusion",d={},h=[];for(let x=this._order.length-1;x>=0;x--){const C=this._order[x];if(o(C)){d[C]=x;for(const T of r){const M=T[C];if(M)for(const R of M)h.push(R)}}}h.sort((x,C)=>C.intersectionZ-x.intersectionZ);const y=[];for(let x=this._order.length-1;x>=0;x--){const C=this._order[x];if(o(C))for(let T=h.length-1;T>=0;T--){const M=h[T].feature;if(d[M.layer.id]<x)break;y.push(M),h.pop()}else for(const T of r){const M=T[C];if(M)for(const R of M)y.push(R.feature)}}return y}queryRenderedFeatures(r,o,d){o&&o.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",o.filter,null,o);const h={};if(o&&o.layers){if(!(Array.isArray(o.layers)||o.layers instanceof Set))return this.fire(new l.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const M of o.layers){const R=this._layers[M];if(!R)return this.fire(new l.k(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];h[R.source]=!0}}const y=[];o.availableImages=this._availableImages;const x=this._serializedAllLayers(),C=o.layers instanceof Set?o.layers:Array.isArray(o.layers)?new Set(o.layers):null,T=Object.assign(Object.assign({},o),{layers:C});for(const M in this.sourceCaches)o.layers&&!h[M]||y.push(Gr(this.sourceCaches[M],this._layers,x,r,T,d));return this.placement&&y.push(function(M,R,B,F,Z,W,ee){const Q={},re=W.queryRenderedSymbols(F),ae=[];for(const he of Object.keys(re).map(Number))ae.push(ee[he]);ae.sort(Dr);for(const he of ae){const fe=he.featureIndex.lookupSymbolFeatures(re[he.bucketInstanceId],R,he.bucketIndex,he.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,M);for(const me in fe){const ve=Q[me]=Q[me]||[],_e=fe[me];_e.sort((Re,ze)=>{const Ge=he.featureSortOrder;if(Ge){const qe=Ge.indexOf(Re.featureIndex);return Ge.indexOf(ze.featureIndex)-qe}return ze.featureIndex-Re.featureIndex});for(const Re of _e)ve.push(Re)}}return function(he,fe,me){for(const ve in he)for(const _e of he[ve])ce(_e,me[fe[ve].source]);return he}(Q,M,B)}(this._layers,x,this.sourceCaches,r,T,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(r,o){o&&o.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",o.filter,null,o);const d=this.sourceCaches[r];return d?function(h,y){const x=h.getRenderableIds().map(M=>h.getTileByID(M)),C=[],T={};for(let M=0;M<x.length;M++){const R=x[M],B=R.tileID.canonical.key;T[B]||(T[B]=!0,R.querySourceFeatures(C,y))}return C}(d,o):[]}getLight(){return this.light.getLight()}setLight(r,o={}){this._checkLoaded();const d=this.light.getLight();let h=!1;for(const x in r)if(!l.bB(r[x],d[x])){h=!0;break}if(!h)return;const y={now:z.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,o),this.light.updateTransitions(y)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,o={}){this._checkLoaded();const d=this.getSky();let h=!1;if(!r&&!d)return;if(r&&!d)h=!0;else if(!r&&d)h=!0;else for(const x in r)if(!l.bB(r[x],d[x])){h=!0;break}if(!h)return;const y={now:z.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,o),this.sky.updateTransitions(y)}_setProjectionInternal(r){const o=function(d){if(Array.isArray(d)){const h=new El({type:d});return{projection:h,transform:new Ol,cameraHelper:new zl(h)}}switch(d){case"mercator":return{projection:new lu,transform:new Oi,cameraHelper:new Yi};case"globe":{const h=new El({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:h,transform:new Ol,cameraHelper:new zl(h)}}case"vertical-perspective":return{projection:new Hs,transform:new Dl,cameraHelper:new di};default:return l.w(`Unknown projection name: ${d}. Falling back to mercator projection.`),{projection:new lu,transform:new Oi,cameraHelper:new Yi}}}(r);this.projection=o.projection,this.map.migrateProjection(o.transform,o.cameraHelper);for(const d in this.sourceCaches)this.sourceCaches[d].reload()}_validate(r,o,d,h,y={}){return(!y||y.validate!==!1)&&ls(this,r.call(l.y,l.e({key:o,style:this.serialize(),value:d,styleSpec:l.v},h)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ht().off(Ze,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const d=this.sourceCaches[o];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const o in this.sourceCaches)this.sourceCaches[o].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,o,d,h,y=!1){let x=!1,C=!1;const T={};for(const M of this._order){const R=this._layers[M];if(R.type!=="symbol")continue;if(!T[R.source]){const F=this.sourceCaches[R.source];T[R.source]=F.getRenderableIds(!0).map(Z=>F.getTileByID(Z)).sort((Z,W)=>W.tileID.overscaledZ-Z.tileID.overscaledZ||(Z.tileID.isLessThan(W.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(R,T[R.source],r.center.lng);x=x||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(z.now(),r.zoom))&&(this.pauseablePlacement=new iu(r,this.map.terrain,this._order,y,o,d,h,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(z.now()),C=!0),x&&this.pauseablePlacement.placement.setStale()),C||x)for(const M of this._order){const R=this._layers[M];R.type==="symbol"&&this.placement.updateLayerOpacities(R,T[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(z.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,o){return l._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const h=this.sourceCaches[o.source];return h&&h.setDependencies(o.tileID.key,o.type,o.icons),d})}getGlyphs(r,o){return l._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(o.stacks),h=this.sourceCaches[o.source];return h&&h.setDependencies(o.tileID.key,o.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,o={}){this._checkLoaded(),r&&this._validate(l.y.glyphs,"glyphs",r,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,o,d={},h){this._checkLoaded();const y=[{id:r,url:o}],x=[...Oe(this.stylesheet.sprite),...y];this._validate(l.y.sprite,"sprite",x,null,d)||(this.stylesheet.sprite=x,this._loadSprite(y,!0,h))}removeSprite(r){this._checkLoaded();const o=Oe(this.stylesheet.sprite);if(o.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;o.splice(o.findIndex(d=>d.id===r),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.l("data",{dataType:"style"}))}else this.fire(new l.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Oe(this.stylesheet.sprite)}setSprite(r,o={},d){this._checkLoaded(),r&&this._validate(l.y.sprite,"sprite",r,null,o)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var so=l.aC([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class hm{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,o,d,h,y,x,C,T,M){this.context=r;let R=this.boundPaintVertexBuffers.length!==h.length;for(let B=0;!R&&B<h.length;B++)this.boundPaintVertexBuffers[B]!==h[B]&&(R=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==d||R||this.boundIndexBuffer!==y||this.boundVertexOffset!==x||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==T||this.boundDynamicVertexBuffer3!==M?this.freshBind(o,d,h,y,x,C,T,M):(r.bindVertexArray.set(this.vao),C&&C.bind(),y&&y.dynamicDraw&&y.bind(),T&&T.bind(),M&&M.bind())}freshBind(r,o,d,h,y,x,C,T){const M=r.numAttributes,R=this.context,B=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=h,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=x,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=T,o.enableAttributes(B,r);for(const F of d)F.enableAttributes(B,r);x&&x.enableAttributes(B,r),C&&C.enableAttributes(B,r),T&&T.enableAttributes(B,r),o.bind(),o.setVertexAttribPointers(B,r,y);for(const F of d)F.bind(),F.setVertexAttribPointers(B,r,y);x&&(x.bind(),x.setVertexAttribPointers(B,r,y)),h&&h.bind(),C&&(C.bind(),C.setVertexAttribPointers(B,r,y)),T&&(T.bind(),T.setVertexAttribPointers(B,r,y)),R.currentNumAttributes=M}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const mu=(_,r,o,d,h)=>({u_texture:0,u_ele_delta:_,u_fog_matrix:r,u_fog_color:o?o.properties.get("fog-color"):l.b6.white,u_fog_ground_blend:o?o.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:h?0:o?o.calculateFogBlendOpacity(d):0,u_horizon_color:o?o.properties.get("horizon-color"):l.b6.white,u_horizon_fog_blend:o?o.properties.get("horizon-fog-blend"):1,u_is_globe_mode:h?1:0}),Fa={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function jo(_){const r=[];for(let o=0;o<_.length;o++){if(_[o]===null)continue;const d=_[o].split(" ");r.push(d.pop())}return r}class fm{constructor(r,o,d,h,y,x,C,T){const M=r.gl;this.program=M.createProgram();const R=jo(o.staticAttributes),B=d?d.getBinderAttributes():[],F=R.concat(B),Z=qi.prelude.staticUniforms?jo(qi.prelude.staticUniforms):[],W=C.staticUniforms?jo(C.staticUniforms):[],ee=o.staticUniforms?jo(o.staticUniforms):[],Q=d?d.getBinderUniforms():[],re=Z.concat(W).concat(ee).concat(Q),ae=[];for(const ze of re)ae.indexOf(ze)<0&&ae.push(ze);const he=d?d.defines():[];$i(M)&&he.unshift("#version 300 es"),y&&he.push("#define OVERDRAW_INSPECTOR;"),x&&he.push("#define TERRAIN3D;"),T&&he.push(T);let fe=he.concat(qi.prelude.fragmentSource,C.fragmentSource,o.fragmentSource).join(`
`),me=he.concat(qi.prelude.vertexSource,C.vertexSource,o.vertexSource).join(`
`);$i(M)||(fe=function(ze){return ze.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(fe),me=function(ze){return ze.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(me));const ve=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(ve,fe),M.compileShader(ve),!M.getShaderParameter(ve,M.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${M.getShaderInfoLog(ve)}`);M.attachShader(this.program,ve);const _e=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(_e,me),M.compileShader(_e),!M.getShaderParameter(_e,M.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${M.getShaderInfoLog(_e)}`);M.attachShader(this.program,_e),this.attributes={};const Re={};this.numAttributes=F.length;for(let ze=0;ze<this.numAttributes;ze++)F[ze]&&(M.bindAttribLocation(this.program,ze,F[ze]),this.attributes[F[ze]]=ze);if(M.linkProgram(this.program),!M.getProgramParameter(this.program,M.LINK_STATUS))throw new Error(`Program failed to link: ${M.getProgramInfoLog(this.program)}`);M.deleteShader(_e),M.deleteShader(ve);for(let ze=0;ze<ae.length;ze++){const Ge=ae[ze];if(Ge&&!Re[Ge]){const qe=M.getUniformLocation(this.program,Ge);qe&&(Re[Ge]=qe)}}this.fixedUniforms=h(r,Re),this.terrainUniforms=((ze,Ge)=>({u_depth:new l.bE(ze,Ge.u_depth),u_terrain:new l.bE(ze,Ge.u_terrain),u_terrain_dim:new l.b7(ze,Ge.u_terrain_dim),u_terrain_matrix:new l.bG(ze,Ge.u_terrain_matrix),u_terrain_unpack:new l.bH(ze,Ge.u_terrain_unpack),u_terrain_exaggeration:new l.b7(ze,Ge.u_terrain_exaggeration)}))(r,Re),this.projectionUniforms=((ze,Ge)=>({u_projection_matrix:new l.bG(ze,Ge.u_projection_matrix),u_projection_tile_mercator_coords:new l.bH(ze,Ge.u_projection_tile_mercator_coords),u_projection_clipping_plane:new l.bH(ze,Ge.u_projection_clipping_plane),u_projection_transition:new l.b7(ze,Ge.u_projection_transition),u_projection_fallback_matrix:new l.bG(ze,Ge.u_projection_fallback_matrix)}))(r,Re),this.binderUniforms=d?d.getUniforms(r,Re):[]}draw(r,o,d,h,y,x,C,T,M,R,B,F,Z,W,ee,Q,re,ae,he){const fe=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(h),r.setColorMode(y),r.setCullFace(x),T){r.activeTexture.set(fe.TEXTURE2),fe.bindTexture(fe.TEXTURE_2D,T.depthTexture),r.activeTexture.set(fe.TEXTURE3),fe.bindTexture(fe.TEXTURE_2D,T.texture);for(const ve in this.terrainUniforms)this.terrainUniforms[ve].set(T[ve])}if(M)for(const ve in M)this.projectionUniforms[Fa[ve]].set(M[ve]);if(C)for(const ve in this.fixedUniforms)this.fixedUniforms[ve].set(C[ve]);Q&&Q.setUniforms(r,this.binderUniforms,W,{zoom:ee});let me=0;switch(o){case fe.LINES:me=2;break;case fe.TRIANGLES:me=3;break;case fe.LINE_STRIP:me=1}for(const ve of Z.get()){const _e=ve.vaos||(ve.vaos={});(_e[R]||(_e[R]=new hm)).bind(r,this,B,Q?Q.getPaintVertexBuffers():[],F,ve.vertexOffset,re,ae,he),fe.drawElements(o,ve.primitiveLength*me,fe.UNSIGNED_SHORT,ve.primitiveOffset*me*2)}}}function Na(_,r,o){const d=1/l.av(o,1,r.transform.tileZoom),h=Math.pow(2,o.tileID.overscaledZ),y=o.tileSize*Math.pow(2,r.transform.tileZoom)/h,x=y*(o.tileID.canonical.x+o.tileID.wrap*h),C=y*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[d,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[x>>16,C>>16],u_pixel_coord_lower:[65535&x,65535&C]}}const Dh=(_,r,o,d)=>{const h=_.style.light,y=h.properties.get("position"),x=[y.x,y.y,y.z],C=l.bK();h.properties.get("anchor")==="viewport"&&l.bL(C,_.transform.bearingInRadians),l.bM(x,x,C);const T=_.transform.transformLightDirection(x),M=h.properties.get("color");return{u_lightpos:x,u_lightpos_globe:T,u_lightintensity:h.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+r,u_opacity:o,u_fill_translate:d}},qs=(_,r,o,d,h,y,x)=>l.e(Dh(_,r,o,d),Na(y,_,x),{u_height_factor:-Math.pow(2,h.overscaledZ)/x.tileSize/8}),Oh=(_,r,o,d)=>l.e(Na(r,_,o),{u_fill_translate:d}),zh=(_,r)=>({u_world:_,u_fill_translate:r}),pm=(_,r,o,d,h)=>l.e(Oh(_,r,o,h),{u_world:d}),$h=(_,r,o,d,h)=>{const y=_.transform;let x,C,T=0;if(o.paint.get("circle-pitch-alignment")==="map"){const M=l.av(r,1,y.zoom);x=!0,C=[M,M],T=M/(l.Z*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*h}else x=!1,C=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(o.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+x,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:C,u_globe_extrude_scale:T,u_translate:d}},gu=_=>({u_pixel_extrude_scale:[1/_.width,1/_.height]}),Bh=_=>({u_viewport_size:[_.width,_.height]}),_u=(_,r=1)=>({u_color:_,u_overlay:0,u_overlay_scale:r}),yu=(_,r,o,d)=>{const h=l.av(_,1,r)/(l.Z*Math.pow(2,_.tileID.overscaledZ))*2*Math.PI*d;return{u_extrude_scale:l.av(_,1,r),u_intensity:o,u_globe_extrude_scale:h}},bu=(_,r,o,d)=>{const h=l.K();l.bN(h,0,_.width,_.height,0,0,1);const y=_.context.gl;return{u_matrix:h,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:o,u_color_ramp:d,u_opacity:r.paint.get("heatmap-opacity")}},cs=(_,r,o)=>{const d=o.paint.get("hillshade-shadow-color"),h=o.paint.get("hillshade-highlight-color"),y=o.paint.get("hillshade-accent-color");let x=o.paint.get("hillshade-illumination-direction")*(Math.PI/180);return o.paint.get("hillshade-illumination-anchor")==="viewport"&&(x+=_.transform.bearingInRadians),{u_image:0,u_latrange:Nh(0,r.tileID),u_light:[o.paint.get("hillshade-exaggeration"),x],u_shadow:d,u_highlight:h,u_accent:y}},Fh=(_,r)=>{const o=r.stride,d=l.K();return l.bN(d,0,l.Z,-8192,0,0,1),l.L(d,d,[0,-8192,0]),{u_matrix:d,u_image:1,u_dimension:[o,o],u_zoom:_.overscaledZ,u_unpack:r.getUnpackVector()}};function Nh(_,r){const o=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new l.$(0,d/o).toLngLat().lat,new l.$(0,(d+1)/o).toLngLat().lat]}const us=(_,r,o,d)=>{const h=_.transform;return{u_translation:vu(_,r,o),u_ratio:d/l.av(r,1,h.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},mm=(_,r,o,d,h)=>l.e(us(_,r,o,d),{u_image:0,u_image_height:h}),$l=(_,r,o,d,h)=>{const y=_.transform,x=jh(r,y);return{u_translation:vu(_,r,o),u_texsize:r.imageAtlasTexture.size,u_ratio:d/l.av(r,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[x,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},gm=(_,r,o,d,h,y)=>{const x=_.lineAtlas,C=jh(r,_.transform),T=o.layout.get("line-cap")==="round",M=x.getDash(h.from,T),R=x.getDash(h.to,T),B=M.width*y.fromScale,F=R.width*y.toScale;return l.e(us(_,r,o,d),{u_patternscale_a:[C/B,-M.height/2],u_patternscale_b:[C/F,-R.height/2],u_sdfgamma:x.width/(256*Math.min(B,F)*_.pixelRatio)/2,u_image:0,u_tex_y_a:M.y,u_tex_y_b:R.y,u_mix:y.t})};function jh(_,r){return 1/l.av(_,1,r.tileZoom)}function vu(_,r,o){return l.aw(_.transform,r,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const Vh=(_,r,o,d,h)=>{return{u_tl_parent:_,u_scale_parent:r,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(x=d.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(y=d.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:Uh(d.paint.get("raster-hue-rotate")),u_coords_top:[h[0].x,h[0].y,h[1].x,h[1].y],u_coords_bottom:[h[3].x,h[3].y,h[2].x,h[2].y]};var y,x};function Uh(_){_*=Math.PI/180;const r=Math.sin(_),o=Math.cos(_);return[(2*o+1)/3,(-Math.sqrt(3)*r-o+1)/3,(Math.sqrt(3)*r-o+1)/3]}const Bl=(_,r,o,d,h,y,x,C,T,M,R,B,F)=>{const Z=x.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:Z.width/Z.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_label_plane_matrix:C,u_coord_matrix:T,u_is_text:+R,u_pitch_with_map:+d,u_is_along_line:h,u_is_variable_anchor:y,u_texsize:B,u_texture:0,u_translation:M,u_pitched_scale:F}},xu=(_,r,o,d,h,y,x,C,T,M,R,B,F,Z)=>{const W=x.transform;return l.e(Bl(_,r,o,d,h,y,x,C,T,M,R,B,Z),{u_gamma_scale:d?Math.cos(W.pitch*Math.PI/180)*W.cameraToCenterDistance:1,u_device_pixel_ratio:x.pixelRatio,u_is_halo:1})},Fl=(_,r,o,d,h,y,x,C,T,M,R,B,F)=>l.e(xu(_,r,o,d,h,y,x,C,T,M,!0,R,0,F),{u_texsize_icon:B,u_texture_icon:1}),xo=(_,r)=>({u_opacity:_,u_color:r}),wu=(_,r,o,d,h)=>l.e(function(y,x,C,T){const M=C.imageManager.getPattern(y.from.toString()),R=C.imageManager.getPattern(y.to.toString()),{width:B,height:F}=C.imageManager.getPixelSize(),Z=Math.pow(2,T.tileID.overscaledZ),W=T.tileSize*Math.pow(2,C.transform.tileZoom)/Z,ee=W*(T.tileID.canonical.x+T.tileID.wrap*Z),Q=W*T.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:M.tl,u_pattern_br_a:M.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[B,F],u_mix:x.t,u_pattern_size_a:M.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:x.fromScale,u_scale_b:x.toScale,u_tile_units_to_pixels:1/l.av(T,1,C.transform.tileZoom),u_pixel_coord_upper:[ee>>16,Q>>16],u_pixel_coord_lower:[65535&ee,65535&Q]}}(o,h,r,d),{u_opacity:_}),Nl=(_,r)=>{},Cu={fillExtrusion:(_,r)=>({u_lightpos:new l.bI(_,r.u_lightpos),u_lightpos_globe:new l.bI(_,r.u_lightpos_globe),u_lightintensity:new l.b7(_,r.u_lightintensity),u_lightcolor:new l.bI(_,r.u_lightcolor),u_vertical_gradient:new l.b7(_,r.u_vertical_gradient),u_opacity:new l.b7(_,r.u_opacity),u_fill_translate:new l.bJ(_,r.u_fill_translate)}),fillExtrusionPattern:(_,r)=>({u_lightpos:new l.bI(_,r.u_lightpos),u_lightpos_globe:new l.bI(_,r.u_lightpos_globe),u_lightintensity:new l.b7(_,r.u_lightintensity),u_lightcolor:new l.bI(_,r.u_lightcolor),u_vertical_gradient:new l.b7(_,r.u_vertical_gradient),u_height_factor:new l.b7(_,r.u_height_factor),u_opacity:new l.b7(_,r.u_opacity),u_fill_translate:new l.bJ(_,r.u_fill_translate),u_image:new l.bE(_,r.u_image),u_texsize:new l.bJ(_,r.u_texsize),u_pixel_coord_upper:new l.bJ(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bJ(_,r.u_pixel_coord_lower),u_scale:new l.bI(_,r.u_scale),u_fade:new l.b7(_,r.u_fade)}),fill:(_,r)=>({u_fill_translate:new l.bJ(_,r.u_fill_translate)}),fillPattern:(_,r)=>({u_image:new l.bE(_,r.u_image),u_texsize:new l.bJ(_,r.u_texsize),u_pixel_coord_upper:new l.bJ(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bJ(_,r.u_pixel_coord_lower),u_scale:new l.bI(_,r.u_scale),u_fade:new l.b7(_,r.u_fade),u_fill_translate:new l.bJ(_,r.u_fill_translate)}),fillOutline:(_,r)=>({u_world:new l.bJ(_,r.u_world),u_fill_translate:new l.bJ(_,r.u_fill_translate)}),fillOutlinePattern:(_,r)=>({u_world:new l.bJ(_,r.u_world),u_image:new l.bE(_,r.u_image),u_texsize:new l.bJ(_,r.u_texsize),u_pixel_coord_upper:new l.bJ(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bJ(_,r.u_pixel_coord_lower),u_scale:new l.bI(_,r.u_scale),u_fade:new l.b7(_,r.u_fade),u_fill_translate:new l.bJ(_,r.u_fill_translate)}),circle:(_,r)=>({u_camera_to_center_distance:new l.b7(_,r.u_camera_to_center_distance),u_scale_with_map:new l.bE(_,r.u_scale_with_map),u_pitch_with_map:new l.bE(_,r.u_pitch_with_map),u_extrude_scale:new l.bJ(_,r.u_extrude_scale),u_device_pixel_ratio:new l.b7(_,r.u_device_pixel_ratio),u_globe_extrude_scale:new l.b7(_,r.u_globe_extrude_scale),u_translate:new l.bJ(_,r.u_translate)}),collisionBox:(_,r)=>({u_pixel_extrude_scale:new l.bJ(_,r.u_pixel_extrude_scale)}),collisionCircle:(_,r)=>({u_viewport_size:new l.bJ(_,r.u_viewport_size)}),debug:(_,r)=>({u_color:new l.bF(_,r.u_color),u_overlay:new l.bE(_,r.u_overlay),u_overlay_scale:new l.b7(_,r.u_overlay_scale)}),depth:Nl,clippingMask:Nl,heatmap:(_,r)=>({u_extrude_scale:new l.b7(_,r.u_extrude_scale),u_intensity:new l.b7(_,r.u_intensity),u_globe_extrude_scale:new l.b7(_,r.u_globe_extrude_scale)}),heatmapTexture:(_,r)=>({u_matrix:new l.bG(_,r.u_matrix),u_world:new l.bJ(_,r.u_world),u_image:new l.bE(_,r.u_image),u_color_ramp:new l.bE(_,r.u_color_ramp),u_opacity:new l.b7(_,r.u_opacity)}),hillshade:(_,r)=>({u_image:new l.bE(_,r.u_image),u_latrange:new l.bJ(_,r.u_latrange),u_light:new l.bJ(_,r.u_light),u_shadow:new l.bF(_,r.u_shadow),u_highlight:new l.bF(_,r.u_highlight),u_accent:new l.bF(_,r.u_accent)}),hillshadePrepare:(_,r)=>({u_matrix:new l.bG(_,r.u_matrix),u_image:new l.bE(_,r.u_image),u_dimension:new l.bJ(_,r.u_dimension),u_zoom:new l.b7(_,r.u_zoom),u_unpack:new l.bH(_,r.u_unpack)}),line:(_,r)=>({u_translation:new l.bJ(_,r.u_translation),u_ratio:new l.b7(_,r.u_ratio),u_device_pixel_ratio:new l.b7(_,r.u_device_pixel_ratio),u_units_to_pixels:new l.bJ(_,r.u_units_to_pixels)}),lineGradient:(_,r)=>({u_translation:new l.bJ(_,r.u_translation),u_ratio:new l.b7(_,r.u_ratio),u_device_pixel_ratio:new l.b7(_,r.u_device_pixel_ratio),u_units_to_pixels:new l.bJ(_,r.u_units_to_pixels),u_image:new l.bE(_,r.u_image),u_image_height:new l.b7(_,r.u_image_height)}),linePattern:(_,r)=>({u_translation:new l.bJ(_,r.u_translation),u_texsize:new l.bJ(_,r.u_texsize),u_ratio:new l.b7(_,r.u_ratio),u_device_pixel_ratio:new l.b7(_,r.u_device_pixel_ratio),u_image:new l.bE(_,r.u_image),u_units_to_pixels:new l.bJ(_,r.u_units_to_pixels),u_scale:new l.bI(_,r.u_scale),u_fade:new l.b7(_,r.u_fade)}),lineSDF:(_,r)=>({u_translation:new l.bJ(_,r.u_translation),u_ratio:new l.b7(_,r.u_ratio),u_device_pixel_ratio:new l.b7(_,r.u_device_pixel_ratio),u_units_to_pixels:new l.bJ(_,r.u_units_to_pixels),u_patternscale_a:new l.bJ(_,r.u_patternscale_a),u_patternscale_b:new l.bJ(_,r.u_patternscale_b),u_sdfgamma:new l.b7(_,r.u_sdfgamma),u_image:new l.bE(_,r.u_image),u_tex_y_a:new l.b7(_,r.u_tex_y_a),u_tex_y_b:new l.b7(_,r.u_tex_y_b),u_mix:new l.b7(_,r.u_mix)}),raster:(_,r)=>({u_tl_parent:new l.bJ(_,r.u_tl_parent),u_scale_parent:new l.b7(_,r.u_scale_parent),u_buffer_scale:new l.b7(_,r.u_buffer_scale),u_fade_t:new l.b7(_,r.u_fade_t),u_opacity:new l.b7(_,r.u_opacity),u_image0:new l.bE(_,r.u_image0),u_image1:new l.bE(_,r.u_image1),u_brightness_low:new l.b7(_,r.u_brightness_low),u_brightness_high:new l.b7(_,r.u_brightness_high),u_saturation_factor:new l.b7(_,r.u_saturation_factor),u_contrast_factor:new l.b7(_,r.u_contrast_factor),u_spin_weights:new l.bI(_,r.u_spin_weights),u_coords_top:new l.bH(_,r.u_coords_top),u_coords_bottom:new l.bH(_,r.u_coords_bottom)}),symbolIcon:(_,r)=>({u_is_size_zoom_constant:new l.bE(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bE(_,r.u_is_size_feature_constant),u_size_t:new l.b7(_,r.u_size_t),u_size:new l.b7(_,r.u_size),u_camera_to_center_distance:new l.b7(_,r.u_camera_to_center_distance),u_pitch:new l.b7(_,r.u_pitch),u_rotate_symbol:new l.bE(_,r.u_rotate_symbol),u_aspect_ratio:new l.b7(_,r.u_aspect_ratio),u_fade_change:new l.b7(_,r.u_fade_change),u_label_plane_matrix:new l.bG(_,r.u_label_plane_matrix),u_coord_matrix:new l.bG(_,r.u_coord_matrix),u_is_text:new l.bE(_,r.u_is_text),u_pitch_with_map:new l.bE(_,r.u_pitch_with_map),u_is_along_line:new l.bE(_,r.u_is_along_line),u_is_variable_anchor:new l.bE(_,r.u_is_variable_anchor),u_texsize:new l.bJ(_,r.u_texsize),u_texture:new l.bE(_,r.u_texture),u_translation:new l.bJ(_,r.u_translation),u_pitched_scale:new l.b7(_,r.u_pitched_scale)}),symbolSDF:(_,r)=>({u_is_size_zoom_constant:new l.bE(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bE(_,r.u_is_size_feature_constant),u_size_t:new l.b7(_,r.u_size_t),u_size:new l.b7(_,r.u_size),u_camera_to_center_distance:new l.b7(_,r.u_camera_to_center_distance),u_pitch:new l.b7(_,r.u_pitch),u_rotate_symbol:new l.bE(_,r.u_rotate_symbol),u_aspect_ratio:new l.b7(_,r.u_aspect_ratio),u_fade_change:new l.b7(_,r.u_fade_change),u_label_plane_matrix:new l.bG(_,r.u_label_plane_matrix),u_coord_matrix:new l.bG(_,r.u_coord_matrix),u_is_text:new l.bE(_,r.u_is_text),u_pitch_with_map:new l.bE(_,r.u_pitch_with_map),u_is_along_line:new l.bE(_,r.u_is_along_line),u_is_variable_anchor:new l.bE(_,r.u_is_variable_anchor),u_texsize:new l.bJ(_,r.u_texsize),u_texture:new l.bE(_,r.u_texture),u_gamma_scale:new l.b7(_,r.u_gamma_scale),u_device_pixel_ratio:new l.b7(_,r.u_device_pixel_ratio),u_is_halo:new l.bE(_,r.u_is_halo),u_translation:new l.bJ(_,r.u_translation),u_pitched_scale:new l.b7(_,r.u_pitched_scale)}),symbolTextAndIcon:(_,r)=>({u_is_size_zoom_constant:new l.bE(_,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.bE(_,r.u_is_size_feature_constant),u_size_t:new l.b7(_,r.u_size_t),u_size:new l.b7(_,r.u_size),u_camera_to_center_distance:new l.b7(_,r.u_camera_to_center_distance),u_pitch:new l.b7(_,r.u_pitch),u_rotate_symbol:new l.bE(_,r.u_rotate_symbol),u_aspect_ratio:new l.b7(_,r.u_aspect_ratio),u_fade_change:new l.b7(_,r.u_fade_change),u_label_plane_matrix:new l.bG(_,r.u_label_plane_matrix),u_coord_matrix:new l.bG(_,r.u_coord_matrix),u_is_text:new l.bE(_,r.u_is_text),u_pitch_with_map:new l.bE(_,r.u_pitch_with_map),u_is_along_line:new l.bE(_,r.u_is_along_line),u_is_variable_anchor:new l.bE(_,r.u_is_variable_anchor),u_texsize:new l.bJ(_,r.u_texsize),u_texsize_icon:new l.bJ(_,r.u_texsize_icon),u_texture:new l.bE(_,r.u_texture),u_texture_icon:new l.bE(_,r.u_texture_icon),u_gamma_scale:new l.b7(_,r.u_gamma_scale),u_device_pixel_ratio:new l.b7(_,r.u_device_pixel_ratio),u_is_halo:new l.bE(_,r.u_is_halo),u_translation:new l.bJ(_,r.u_translation),u_pitched_scale:new l.b7(_,r.u_pitched_scale)}),background:(_,r)=>({u_opacity:new l.b7(_,r.u_opacity),u_color:new l.bF(_,r.u_color)}),backgroundPattern:(_,r)=>({u_opacity:new l.b7(_,r.u_opacity),u_image:new l.bE(_,r.u_image),u_pattern_tl_a:new l.bJ(_,r.u_pattern_tl_a),u_pattern_br_a:new l.bJ(_,r.u_pattern_br_a),u_pattern_tl_b:new l.bJ(_,r.u_pattern_tl_b),u_pattern_br_b:new l.bJ(_,r.u_pattern_br_b),u_texsize:new l.bJ(_,r.u_texsize),u_mix:new l.b7(_,r.u_mix),u_pattern_size_a:new l.bJ(_,r.u_pattern_size_a),u_pattern_size_b:new l.bJ(_,r.u_pattern_size_b),u_scale_a:new l.b7(_,r.u_scale_a),u_scale_b:new l.b7(_,r.u_scale_b),u_pixel_coord_upper:new l.bJ(_,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.bJ(_,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.b7(_,r.u_tile_units_to_pixels)}),terrain:(_,r)=>({u_texture:new l.bE(_,r.u_texture),u_ele_delta:new l.b7(_,r.u_ele_delta),u_fog_matrix:new l.bG(_,r.u_fog_matrix),u_fog_color:new l.bF(_,r.u_fog_color),u_fog_ground_blend:new l.b7(_,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.b7(_,r.u_fog_ground_blend_opacity),u_horizon_color:new l.bF(_,r.u_horizon_color),u_horizon_fog_blend:new l.b7(_,r.u_horizon_fog_blend),u_is_globe_mode:new l.b7(_,r.u_is_globe_mode)}),terrainDepth:(_,r)=>({u_ele_delta:new l.b7(_,r.u_ele_delta)}),terrainCoords:(_,r)=>({u_texture:new l.bE(_,r.u_texture),u_terrain_coords_id:new l.b7(_,r.u_terrain_coords_id),u_ele_delta:new l.b7(_,r.u_ele_delta)}),projectionErrorMeasurement:(_,r)=>({u_input:new l.b7(_,r.u_input),u_output_expected:new l.b7(_,r.u_output_expected)}),atmosphere:(_,r)=>({u_sun_pos:new l.bI(_,r.u_sun_pos),u_atmosphere_blend:new l.b7(_,r.u_atmosphere_blend),u_globe_position:new l.bI(_,r.u_globe_position),u_globe_radius:new l.b7(_,r.u_globe_radius),u_inv_proj_matrix:new l.bG(_,r.u_inv_proj_matrix)}),sky:(_,r)=>({u_sky_color:new l.bF(_,r.u_sky_color),u_horizon_color:new l.bF(_,r.u_horizon_color),u_horizon:new l.bJ(_,r.u_horizon),u_horizon_normal:new l.bJ(_,r.u_horizon_normal),u_sky_horizon_blend:new l.b7(_,r.u_sky_horizon_blend),u_sky_blend:new l.b7(_,r.u_sky_blend)})};class Zh{constructor(r,o,d){this.context=r;const h=r.gl;this.buffer=h.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),h.bufferData(h.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?h.DYNAMIC_DRAW:h.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Su={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ds{constructor(r,o,d,h){this.length=o.length,this.attributes=d,this.itemSize=o.bytesPerElement,this.dynamicDraw=h,this.context=r;const y=r.gl;this.buffer=y.createBuffer(),r.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,o){for(let d=0;d<this.attributes.length;d++){const h=o.attributes[this.attributes[d].name];h!==void 0&&r.enableVertexAttribArray(h)}}setVertexAttribPointers(r,o,d){for(let h=0;h<this.attributes.length;h++){const y=this.attributes[h],x=o.attributes[y.name];x!==void 0&&r.vertexAttribPointer(x,y.components,r[Su[y.type]],!1,this.itemSize,y.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class gr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class _m extends gr{getDefault(){return l.b6.transparent}set(r){const o=this.current;(r.r!==o.r||r.g!==o.g||r.b!==o.b||r.a!==o.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ym extends gr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class bm extends gr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class vm extends gr{getDefault(){return[!0,!0,!0,!0]}set(r){const o=this.current;(r[0]!==o[0]||r[1]!==o[1]||r[2]!==o[2]||r[3]!==o[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Gh extends gr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class xm extends gr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Wh extends gr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const o=this.current;(r.func!==o.func||r.ref!==o.ref||r.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class jl extends gr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const o=this.current;(r[0]!==o[0]||r[1]!==o[1]||r[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Vl extends gr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;r?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=r,this.dirty=!1}}class Ul extends gr{getDefault(){return[0,1]}set(r){const o=this.current;(r[0]!==o[0]||r[1]!==o[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class ku extends gr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;r?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=r,this.dirty=!1}}class hs extends gr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Ks extends gr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;r?o.enable(o.BLEND):o.disable(o.BLEND),this.current=r,this.dirty=!1}}class Bi extends gr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const o=this.current;(r[0]!==o[0]||r[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Hh extends gr{getDefault(){return l.b6.transparent}set(r){const o=this.current;(r.r!==o.r||r.g!==o.g||r.b!==o.b||r.a!==o.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class qh extends gr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Tu extends gr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;r?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=r,this.dirty=!1}}class fs extends gr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Zl extends gr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Gl extends gr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class ja extends gr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Wl extends gr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const o=this.current;(r[0]!==o[0]||r[1]!==o[1]||r[2]!==o[2]||r[3]!==o[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Kh extends gr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Ys extends gr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Xs extends gr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Yh extends gr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Pu extends gr{getDefault(){return null}set(r){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class pr extends gr{getDefault(){return null}set(r){var o;if(r===this.current&&!this.dirty)return;const d=this.gl;$i(d)?d.bindVertexArray(r):(o=d.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Hl extends gr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class wm extends gr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Xh extends gr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class ps extends gr{constructor(r,o){super(r),this.context=r,this.parent=o}getDefault(){return null}}class Cm extends ps{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Sm extends ps{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Jh extends ps{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const Qh="Framebuffer is not complete";class Iu{constructor(r,o,d,h,y){this.context=r,this.width=o,this.height=d;const x=r.gl,C=this.framebuffer=x.createFramebuffer();if(this.colorAttachment=new Cm(r,C),h)this.depthAttachment=y?new Jh(r,C):new Sm(r,C);else if(y)throw new Error("Stencil cannot be set without depth");if(x.checkFramebufferStatus(x.FRAMEBUFFER)!==x.FRAMEBUFFER_COMPLETE)throw new Error(Qh)}destroy(){const r=this.context.gl,o=this.colorAttachment.get();if(o&&r.deleteTexture(o),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class ql{constructor(r){var o,d;if(this.gl=r,this.clearColor=new _m(this),this.clearDepth=new ym(this),this.clearStencil=new bm(this),this.colorMask=new vm(this),this.depthMask=new Gh(this),this.stencilMask=new xm(this),this.stencilFunc=new Wh(this),this.stencilOp=new jl(this),this.stencilTest=new Vl(this),this.depthRange=new Ul(this),this.depthTest=new ku(this),this.depthFunc=new hs(this),this.blend=new Ks(this),this.blendFunc=new Bi(this),this.blendColor=new Hh(this),this.blendEquation=new qh(this),this.cullFace=new Tu(this),this.cullFaceSide=new fs(this),this.frontFace=new Zl(this),this.program=new Gl(this),this.activeTexture=new ja(this),this.viewport=new Wl(this),this.bindFramebuffer=new Kh(this),this.bindRenderbuffer=new Ys(this),this.bindTexture=new Xs(this),this.bindVertexBuffer=new Yh(this),this.bindElementBuffer=new Pu(this),this.bindVertexArray=new pr(this),this.pixelStoreUnpack=new Hl(this),this.pixelStoreUnpackPremultiplyAlpha=new wm(this),this.pixelStoreUnpackFlipY=new Xh(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),$i(r)){this.HALF_FLOAT=r.HALF_FLOAT;const h=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=r.RGBA16F)!==null&&o!==void 0?o:h==null?void 0:h.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:h==null?void 0:h.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const h=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=h==null?void 0:h.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,o){return new Zh(this,r,o)}createVertexBuffer(r,o,d){return new ds(this,r,o,d)}createRenderbuffer(r,o,d){const h=this.gl,y=h.createRenderbuffer();return this.bindRenderbuffer.set(y),h.renderbufferStorage(h.RENDERBUFFER,r,o,d),this.bindRenderbuffer.set(null),y}createFramebuffer(r,o,d,h){return new Iu(this,r,o,d,h)}clear({color:r,depth:o,stencil:d}){const h=this.gl;let y=0;r&&(y|=h.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(y|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),d!==void 0&&(y|=h.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),h.clear(y)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.bB(r.blendFunction,Xr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return $i(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var o;return $i(this.gl)?this.gl.deleteVertexArray(r):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let ms;function Kl(_,r,o,d,h){const y=_.context,x=_.transform,C=y.gl,T=_.useProgram("collisionBox"),M=[];let R=0,B=0;for(let re=0;re<d.length;re++){const ae=d[re],he=r.getTile(ae).getBucket(o);if(!he)continue;const fe=h?he.textCollisionBox:he.iconCollisionBox,me=he.collisionCircleArray;me.length>0&&(M.push({circleArray:me,circleOffset:B,coord:ae}),R+=me.length/4,B=R),fe&&T.draw(y,C.LINES,Yt.disabled,dr.disabled,_.colorModeForRenderPass(),cr.disabled,gu(_.transform),_.style.map.terrain&&_.style.map.terrain.getTerrainData(ae),x.getProjectionData({overscaledTileID:ae,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),o.id,fe.layoutVertexBuffer,fe.indexBuffer,fe.segments,null,_.transform.zoom,null,null,fe.collisionVertexBuffer)}if(!h||!M.length)return;const F=_.useProgram("collisionCircle"),Z=new l.bO;Z.resize(4*R),Z._trim();let W=0;for(const re of M)for(let ae=0;ae<re.circleArray.length/4;ae++){const he=4*ae,fe=re.circleArray[he+0],me=re.circleArray[he+1],ve=re.circleArray[he+2],_e=re.circleArray[he+3];Z.emplace(W++,fe,me,ve,_e,0),Z.emplace(W++,fe,me,ve,_e,1),Z.emplace(W++,fe,me,ve,_e,2),Z.emplace(W++,fe,me,ve,_e,3)}(!ms||ms.length<2*R)&&(ms=function(re){const ae=2*re,he=new l.bQ;he.resize(ae),he._trim();for(let fe=0;fe<ae;fe++){const me=6*fe;he.uint16[me+0]=4*fe+0,he.uint16[me+1]=4*fe+1,he.uint16[me+2]=4*fe+2,he.uint16[me+3]=4*fe+2,he.uint16[me+4]=4*fe+3,he.uint16[me+5]=4*fe+0}return he}(R));const ee=y.createIndexBuffer(ms,!0),Q=y.createVertexBuffer(Z,l.bP.members,!0);for(const re of M){const ae=Bh(_.transform);F.draw(y,C.TRIANGLES,Yt.disabled,dr.disabled,_.colorModeForRenderPass(),cr.disabled,ae,_.style.map.terrain&&_.style.map.terrain.getTerrainData(re.coord),null,o.id,Q,ee,l.aF.simpleSegment(0,2*re.circleOffset,re.circleArray.length,re.circleArray.length/2),null,_.transform.zoom,null,null,null)}Q.destroy(),ee.destroy()}const Mu=l.as(new Float32Array(16));function ef(_,r,o,d,h,y){const{horizontalAlign:x,verticalAlign:C}=l.aA(_);return new l.P((-(x-.5)*r/h+d[0])*y,(-(C-.5)*o/h+d[1])*y)}function Yl(_,r,o,d,h,y){const x=r.tileAnchorPoint.add(new l.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let C=d.mult(y);o||(C=C.rotate(-h));const T=x.add(C);return Ne(T.x,T.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(o){const C=Pt(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(_),T=Math.atan(C.y/C.x)+(C.x<0?Math.PI:0);return _.add(d.rotate(T))}return _.add(d)}function Xl(_,r,o,d,h,y,x,C,T,M,R,B){const F=_.text.placedSymbolArray,Z=_.text.dynamicLayoutVertexArray,W=_.icon.dynamicLayoutVertexArray,ee={};Z.clear();for(let Q=0;Q<F.length;Q++){const re=F.get(Q),ae=re.hidden||!re.crossTileID||_.allowVerticalPlacement&&!re.placedOrientation?null:d[re.crossTileID];if(ae){const he=new l.P(re.anchorX,re.anchorY),fe={getElevation:B,width:h.width,height:h.height,pitchedLabelPlaneMatrix:y,pitchWithMap:o,transform:h,tileAnchorPoint:he,translation:M,unwrappedTileID:R},me=o?er(he.x,he.y,fe):Pt(he.x,he.y,fe),ve=Ee(h.cameraToCenterDistance,me.signedDistanceFromCamera);let _e=l.ah(_.textSizeData,C,re)*ve/l.au;o&&(_e*=_.tilePixelRatio/x);const{width:Re,height:ze,anchor:Ge,textOffset:qe,textBoxScale:Ue}=ae,gt=ef(Ge,Re,ze,qe,Ue,_e),pt=h.getPitchedTextCorrection(he.x+M[0],he.y+M[1],R),ot=Yl(me.point,fe,r,gt,-h.bearingInRadians,pt),Mt=_.allowVerticalPlacement&&re.placedOrientation===l.ag.vertical?Math.PI/2:0;for(let Ot=0;Ot<re.numGlyphs;Ot++)l.an(Z,ot,Mt);T&&re.associatedIconIndex>=0&&(ee[re.associatedIconIndex]={shiftedAnchor:ot,angle:Mt})}else yn(re.numGlyphs,Z)}if(T){W.clear();const Q=_.icon.placedSymbolArray;for(let re=0;re<Q.length;re++){const ae=Q.get(re);if(ae.hidden)yn(ae.numGlyphs,W);else{const he=ee[re];if(he)for(let fe=0;fe<ae.numGlyphs;fe++)l.an(W,he.shiftedAnchor,he.angle);else yn(ae.numGlyphs,W)}}_.icon.dynamicLayoutVertexBuffer.updateData(W)}_.text.dynamicLayoutVertexBuffer.updateData(Z)}function Eu(_,r,o){return o.iconsInText&&r?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function tf(_,r,o,d,h,y,x,C,T,M,R,B,F){const Z=_.context,W=Z.gl,ee=_.transform,Q=C==="map",re=T==="map",ae=C!=="viewport"&&o.layout.get("symbol-placement")!=="point",he=Q&&!re&&!ae,fe=!o.layout.get("symbol-sort-key").isConstant();let me=!1;const ve=_.getDepthModeForSublayer(0,Yt.ReadOnly),_e=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Re=[],ze=ee.getCircleRadiusCorrection();for(const Ge of d){const qe=r.getTile(Ge),Ue=qe.getBucket(o);if(!Ue)continue;const gt=h?Ue.text:Ue.icon;if(!gt||!gt.segments.get().length||!gt.hasVisibleVertices)continue;const pt=gt.programConfigurations.get(o.id),ot=h||Ue.sdfIcons,Mt=h?Ue.textSizeData:Ue.iconSizeData,Ot=re||ee.pitch!==0,_r=_.useProgram(Eu(ot,h,Ue),pt),Nr=l.af(Mt,ee.zoom),Ir=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ge);let Qr,Hr,vr,Mr,zn=[0,0],$n=null;if(h)Hr=qe.glyphAtlasTexture,vr=W.LINEAR,Qr=qe.glyphAtlasTexture.size,Ue.iconsInText&&(zn=qe.imageAtlasTexture.size,$n=qe.imageAtlasTexture,Mr=Ot||_.options.rotating||_.options.zooming||Mt.kind==="composite"||Mt.kind==="camera"?W.LINEAR:W.NEAREST);else{const jr=o.layout.get("icon-size").constantOr(0)!==1||Ue.iconsNeedLinear;Hr=qe.imageAtlasTexture,vr=ot||_.options.rotating||_.options.zooming||jr||Ot?W.LINEAR:W.NEAREST,Qr=qe.imageAtlasTexture.size}const Sn=l.av(qe,1,_.transform.zoom),Un=$e(Q,_.transform,Sn),Wo=l.K();l.ai(Wo,Un);const Co=Se(re,Q,_.transform,Sn),uo=l.aw(ee,qe,y,x),ji=ee.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),xs=_e&&Ue.hasTextData(),Ja=o.layout.get("icon-text-fit")!=="none"&&xs&&Ue.hasIconData();if(ae){const jr=_.style.map.terrain?(kn,Tn)=>_.style.map.terrain.getElevation(Ge,kn,Tn):null,zr=o.layout.get("text-rotation-alignment")==="map";Ae(Ue,_,h,Un,Wo,re,M,zr,Ge.toUnwrapped(),ee.width,ee.height,uo,jr)}const ws=h&&_e||Ja,Vi=ae||ws?Mu:re?Un:_.transform.clipSpaceToPixelsMatrix,ho=ot&&o.paint.get(h?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Xi;Xi=ot?Ue.iconsInText?Fl(Mt.kind,Nr,he,re,ae,ws,_,Vi,Co,uo,Qr,zn,ze):xu(Mt.kind,Nr,he,re,ae,ws,_,Vi,Co,uo,h,Qr,0,ze):Bl(Mt.kind,Nr,he,re,ae,ws,_,Vi,Co,uo,h,Qr,ze);const fo={program:_r,buffers:gt,uniformValues:Xi,projectionData:ji,atlasTexture:Hr,atlasTextureIcon:$n,atlasInterpolation:vr,atlasInterpolationIcon:Mr,isSDF:ot,hasHalo:ho};if(fe&&Ue.canOverlap){me=!0;const jr=gt.segments.get();for(const zr of jr)Re.push({segments:new l.aF([zr]),sortKey:zr.sortKey,state:fo,terrainData:Ir})}else Re.push({segments:gt.segments,sortKey:0,state:fo,terrainData:Ir})}me&&Re.sort((Ge,qe)=>Ge.sortKey-qe.sortKey);for(const Ge of Re){const qe=Ge.state;if(Z.activeTexture.set(W.TEXTURE0),qe.atlasTexture.bind(qe.atlasInterpolation,W.CLAMP_TO_EDGE),qe.atlasTextureIcon&&(Z.activeTexture.set(W.TEXTURE1),qe.atlasTextureIcon&&qe.atlasTextureIcon.bind(qe.atlasInterpolationIcon,W.CLAMP_TO_EDGE)),qe.isSDF){const Ue=qe.uniformValues;qe.hasHalo&&(Ue.u_is_halo=1,Jl(qe.buffers,Ge.segments,o,_,qe.program,ve,R,B,Ue,qe.projectionData,Ge.terrainData)),Ue.u_is_halo=0}Jl(qe.buffers,Ge.segments,o,_,qe.program,ve,R,B,qe.uniformValues,qe.projectionData,Ge.terrainData)}}function Jl(_,r,o,d,h,y,x,C,T,M,R){const B=d.context;h.draw(B,B.gl.TRIANGLES,y,x,C,cr.backCCW,T,R,M,o.id,_.layoutVertexBuffer,_.indexBuffer,r,o.paint,d.transform.zoom,_.programConfigurations.get(o.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function km(_,r,o,d,h){const y=_.context,x=y.gl,C=dr.disabled,T=new Xr([x.ONE,x.ONE],l.b6.transparent,[!0,!0,!0,!0]),M=r.getBucket(o);if(!M)return;const R=d.key;let B=o.heatmapFbos.get(R);B||(B=Va(y,r.tileSize,r.tileSize),o.heatmapFbos.set(R,B)),y.bindFramebuffer.set(B.framebuffer),y.viewport.set([0,0,r.tileSize,r.tileSize]),y.clear({color:l.b6.transparent});const F=M.programConfigurations.get(o.id),Z=_.useProgram("heatmap",F,!h),W=_.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ee=_.style.map.terrain.getTerrainData(d);Z.draw(y,x.TRIANGLES,Yt.disabled,C,T,cr.disabled,yu(r,_.transform.zoom,o.paint.get("heatmap-intensity"),1),ee,W,o.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,o.paint,_.transform.zoom,F)}function rf(_,r,o,d,h){const y=_.context,x=y.gl,C=_.transform;y.setColorMode(_.colorModeForRenderPass());const T=Ql(y,r),M=o.key,R=r.heatmapFbos.get(M);if(!R)return;y.activeTexture.set(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,R.colorAttachment.get()),y.activeTexture.set(x.TEXTURE1),T.bind(x.LINEAR,x.CLAMP_TO_EDGE);const B=C.getProjectionData({overscaledTileID:o,applyTerrainMatrix:h,applyGlobeMatrix:!d});_.useProgram("heatmapTexture").draw(y,x.TRIANGLES,Yt.disabled,dr.disabled,_.colorModeForRenderPass(),cr.disabled,bu(_,r,0,1),null,B,r.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,r.paint,C.zoom),R.destroy(),r.heatmapFbos.delete(M)}function Va(_,r,o){var d,h;const y=_.gl,x=y.createTexture();y.bindTexture(y.TEXTURE_2D,x),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const C=(d=_.HALF_FLOAT)!==null&&d!==void 0?d:y.UNSIGNED_BYTE,T=(h=_.RGBA16F)!==null&&h!==void 0?h:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,T,r,o,0,y.RGBA,C,null);const M=_.createFramebuffer(r,o,!1,!1);return M.colorAttachment.set(x),M}function Ql(_,r){return r.colorRampTexture||(r.colorRampTexture=new Ve(_,r.colorRamp,_.gl.RGBA)),r.colorRampTexture}function Au(_,r,o,d,h){if(!o||!d||!d.imageAtlas)return;const y=d.imageAtlas.patternPositions;let x=y[o.to.toString()],C=y[o.from.toString()];if(!x&&C&&(x=C),!C&&x&&(C=x),!x||!C){const T=h.getPaintProperty(r);x=y[T],C=y[T]}x&&C&&_.setConstantPatternPositions(x,C)}function Lu(_,r,o,d,h,y,x,C){const T=_.context.gl,M="fill-pattern",R=o.paint.get(M),B=R&&R.constantOr(1),F=o.getCrossfadeParameters();let Z,W,ee,Q,re;const ae=_.transform,he=o.paint.get("fill-translate"),fe=o.paint.get("fill-translate-anchor");x?(W=B&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=T.LINES):(W=B?"fillPattern":"fill",Z=T.TRIANGLES);const me=R.constantOr(null);for(const ve of d){const _e=r.getTile(ve);if(B&&!_e.patternsLoaded())continue;const Re=_e.getBucket(o);if(!Re)continue;const ze=Re.programConfigurations.get(o.id),Ge=_.useProgram(W,ze),qe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ve);B&&(_.context.activeTexture.set(T.TEXTURE0),_e.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),ze.updatePaintBuffers(F)),Au(ze,M,me,_e,o);const Ue=ae.getProjectionData({overscaledTileID:ve,applyGlobeMatrix:!C,applyTerrainMatrix:!0}),gt=l.aw(ae,_e,he,fe);if(x){Q=Re.indexBuffer2,re=Re.segments2;const ot=[T.drawingBufferWidth,T.drawingBufferHeight];ee=W==="fillOutlinePattern"&&B?pm(_,F,_e,ot,gt):zh(ot,gt)}else Q=Re.indexBuffer,re=Re.segments,ee=B?Oh(_,F,_e,gt):{u_fill_translate:gt};let pt;if(_.renderPass==="translucent"&&C){const[ot]=_.getStencilConfigForOverlapAndUpdateStencilID(d);pt=ot[ve.overscaledZ]}else pt=_.stencilModeForClipping(ve);Ge.draw(_.context,Z,h,pt,y,cr.backCCW,ee,qe,Ue,o.id,Re.layoutVertexBuffer,Q,re,o.paint,_.transform.zoom,ze)}}function Js(_,r,o,d,h,y,x,C){const T=_.context,M=T.gl,R="fill-extrusion-pattern",B=o.paint.get(R),F=B.constantOr(1),Z=o.getCrossfadeParameters(),W=o.paint.get("fill-extrusion-opacity"),ee=B.constantOr(null),Q=_.transform;for(const re of d){const ae=r.getTile(re),he=ae.getBucket(o);if(!he)continue;const fe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(re),me=he.programConfigurations.get(o.id),ve=_.useProgram(F?"fillExtrusionPattern":"fillExtrusion",me);F&&(_.context.activeTexture.set(M.TEXTURE0),ae.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),me.updatePaintBuffers(Z));const _e=Q.getProjectionData({overscaledTileID:re,applyGlobeMatrix:!C,applyTerrainMatrix:!0});Au(me,R,ee,ae,o);const Re=l.aw(Q,ae,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),ze=o.paint.get("fill-extrusion-vertical-gradient"),Ge=F?qs(_,ze,W,Re,re,Z,ae):Dh(_,ze,W,Re);ve.draw(T,T.gl.TRIANGLES,h,y,x,cr.backCCW,Ge,fe,_e,o.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,o.paint,_.transform.zoom,me,_.style.map.terrain&&he.centroidVertexBuffer)}}function Ua(_,r,o,d,h,y,x,C,T){var M;const R=_.style.projection,B=_.context,F=_.transform,Z=B.gl,W=_.useProgram("hillshade"),ee=!_.options.moving;for(const Q of d){const re=r.getTile(Q),ae=re.fbo;if(!ae)continue;const he=R.getMeshFromTileID(B,Q.canonical,C,!0,"raster"),fe=(M=_.style.map.terrain)===null||M===void 0?void 0:M.getTerrainData(Q);B.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,ae.colorAttachment.get());const me=F.getProjectionData({overscaledTileID:Q,aligned:ee,applyGlobeMatrix:!T,applyTerrainMatrix:!0});W.draw(B,Z.TRIANGLES,y,h[Q.overscaledZ],x,cr.backCCW,cs(_,re,o),fe,me,o.id,he.vertexBuffer,he.indexBuffer,he.segments)}}const Ru=[new l.P(0,0),new l.P(l.Z,0),new l.P(l.Z,l.Z),new l.P(0,l.Z)];function Za(_,r,o,d,h,y,x,C,T=!1,M=!1){const R=d[d.length-1].overscaledZ,B=_.context,F=B.gl,Z=_.useProgram("raster"),W=_.transform,ee=_.style.projection,Q=_.colorModeForRenderPass(),re=!_.options.moving;for(const ae of d){const he=_.getDepthModeForSublayer(ae.overscaledZ-R,o.paint.get("raster-opacity")===1?Yt.ReadWrite:Yt.ReadOnly,F.LESS),fe=r.getTile(ae);fe.registerFadeDuration(o.paint.get("raster-fade-duration"));const me=r.findLoadedParent(ae,0),ve=r.findLoadedSibling(ae),_e=fn(fe,me||ve||null,r,o,_.transform,_.style.map.terrain);let Re,ze;const Ge=o.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;B.activeTexture.set(F.TEXTURE0),fe.texture.bind(Ge,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),B.activeTexture.set(F.TEXTURE1),me?(me.texture.bind(Ge,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),Re=Math.pow(2,me.tileID.overscaledZ-fe.tileID.overscaledZ),ze=[fe.tileID.canonical.x*Re%1,fe.tileID.canonical.y*Re%1]):fe.texture.bind(Ge,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),fe.texture.useMipmap&&B.extTextureFilterAnisotropic&&_.transform.pitch>20&&F.texParameterf(F.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax);const qe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ae),Ue=W.getProjectionData({overscaledTileID:ae,aligned:re,applyGlobeMatrix:!M,applyTerrainMatrix:!0}),gt=Vh(ze||[0,0],Re||1,_e,o,C),pt=ee.getMeshFromTileID(B,ae.canonical,y,x,"raster");Z.draw(B,F.TRIANGLES,he,h?h[ae.overscaledZ]:dr.disabled,Q,T?cr.frontCCW:cr.backCCW,gt,qe,Ue,o.id,pt.vertexBuffer,pt.indexBuffer,pt.segments)}}function fn(_,r,o,d,h,y){const x=d.paint.get("raster-fade-duration");if(!y&&x>0){const C=z.now(),T=(C-_.timeAdded)/x,M=r?(C-r.timeAdded)/x:-1,R=o.getSource(),B=Li(h,{tileSize:R.tileSize,roundZoom:R.roundZoom}),F=!r||Math.abs(r.tileID.overscaledZ-B)>Math.abs(_.tileID.overscaledZ-B),Z=F&&_.refreshedUponExpiration?1:l.ad(F?T:1-M,0,1);return _.refreshedUponExpiration&&T>=1&&(_.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}const gs=new l.b6(1,0,0,1),Fi=new l.b6(0,1,0,1),Du=new l.b6(0,0,1,1),Ou=new l.b6(1,0,1,1),nf=new l.b6(0,1,1,1);function _s(_,r,o,d){ea(_,0,r+o/2,_.transform.width,o,d)}function Qs(_,r,o,d){ea(_,r-o/2,0,o,_.transform.height,d)}function ea(_,r,o,d,h,y){const x=_.context,C=x.gl;C.enable(C.SCISSOR_TEST),C.scissor(r*_.pixelRatio,o*_.pixelRatio,d*_.pixelRatio,h*_.pixelRatio),x.clear({color:y}),C.disable(C.SCISSOR_TEST)}function of(_,r,o){const d=_.context,h=d.gl,y=_.useProgram("debug"),x=Yt.disabled,C=dr.disabled,T=_.colorModeForRenderPass(),M="$debug",R=_.style.map.terrain&&_.style.map.terrain.getTerrainData(o);d.activeTexture.set(h.TEXTURE0);const B=r.getTileByID(o.key).latestRawTileData,F=Math.floor((B&&B.byteLength||0)/1024),Z=r.getTile(o).tileSize,W=512/Math.min(Z,512)*(o.overscaledZ/_.transform.zoom)*.5;let ee=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ee+=` => ${o.overscaledZ}`),function(re,ae){re.initDebugOverlayCanvas();const he=re.debugOverlayCanvas,fe=re.context.gl,me=re.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,he.width,he.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(ae,5,5),me.strokeText(ae,5,5),re.debugOverlayTexture.update(he),re.debugOverlayTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE)}(_,`${ee} ${F}kB`);const Q=_.transform.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(d,h.TRIANGLES,x,C,Xr.alphaBlended,cr.disabled,_u(l.b6.transparent,W),null,Q,M,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),y.draw(d,h.LINE_STRIP,x,C,T,cr.disabled,_u(l.b6.red),R,Q,M,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function zu(_,r,o,d){const{isRenderingGlobe:h}=d,y=_.context,x=y.gl,C=_.transform,T=_.colorModeForRenderPass(),M=_.getDepthModeFor3D(),R=_.useProgram("terrain");y.bindFramebuffer.set(null),y.viewport.set([0,0,_.width,_.height]);for(const B of o){const F=r.getTerrainMesh(B.tileID),Z=_.renderToTexture.getTexture(B),W=r.getTerrainData(B.tileID);y.activeTexture.set(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,Z.texture);const ee=r.getMeshFrameDelta(C.zoom),Q=C.calculateFogMatrix(B.tileID.toUnwrapped()),re=mu(ee,Q,_.style.sky,C.pitch,h),ae=C.getProjectionData({overscaledTileID:B.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});R.draw(y,x.TRIANGLES,M,dr.disabled,T,cr.backCCW,re,W,ae,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}}function $u(_,r){if(!r.mesh){const o=new l.aE;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(1,1),o.emplaceBack(-1,1);const d=new l.aG;d.emplaceBack(0,1,2),d.emplaceBack(0,2,3),r.mesh=new yi(_.createVertexBuffer(o,Ri.members),_.createIndexBuffer(d),l.aF.simpleSegment(0,0,o.length,d.length))}return r.mesh}class sf{constructor(r,o){this.context=new ql(r),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.as(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=$.maxUnderzooming+$.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new au}resize(r,o,d){if(this.width=Math.floor(r*d),this.height=Math.floor(o*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const h of this.style._order)this.style._layers[h].resize()}setup(){const r=this.context,o=new l.aE;o.emplaceBack(0,0),o.emplaceBack(l.Z,0),o.emplaceBack(0,l.Z),o.emplaceBack(l.Z,l.Z),this.tileExtentBuffer=r.createVertexBuffer(o,Ri.members),this.tileExtentSegments=l.aF.simpleSegment(0,0,4,2);const d=new l.aE;d.emplaceBack(0,0),d.emplaceBack(l.Z,0),d.emplaceBack(0,l.Z),d.emplaceBack(l.Z,l.Z),this.debugBuffer=r.createVertexBuffer(d,Ri.members),this.debugSegments=l.aF.simpleSegment(0,0,4,5);const h=new l.bV;h.emplaceBack(0,0,0,0),h.emplaceBack(l.Z,0,l.Z,0),h.emplaceBack(0,l.Z,0,l.Z),h.emplaceBack(l.Z,l.Z,l.Z,l.Z),this.rasterBoundsBuffer=r.createVertexBuffer(h,so.members),this.rasterBoundsSegments=l.aF.simpleSegment(0,0,4,2);const y=new l.aE;y.emplaceBack(0,0),y.emplaceBack(l.Z,0),y.emplaceBack(0,l.Z),y.emplaceBack(l.Z,l.Z),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(y,Ri.members),this.rasterBoundsSegmentsPosOnly=l.aF.simpleSegment(0,0,4,5);const x=new l.aE;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(x,Ri.members),this.viewportSegments=l.aF.simpleSegment(0,0,4,2);const C=new l.bW;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(C);const T=new l.aG;T.emplaceBack(1,0,2),T.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(T);const M=this.context.gl;this.stencilClearMode=new dr({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO),this.tileExtentMesh=new yi(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,o=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=l.K();l.bN(d,0,this.width,this.height,0,0,1),l.M(d,d,[o.drawingBufferWidth,o.drawingBufferHeight,0]);const h={mainMatrix:d,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:d};this.useProgram("clippingMask",null,!0).draw(r,o.TRIANGLES,Yt.disabled,this.stencilClearMode,Xr.disabled,cr.disabled,null,null,h,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,o,d){if(this.currentStencilSource===r.source||!r.isTileClipped()||!o||!o.length)return;this.currentStencilSource=r.source,this.nextStencilID+o.length>256&&this.clearStencil();const h=this.context;h.setColorMode(Xr.disabled),h.setDepthMode(Yt.disabled);const y={};for(const x of o)y[x.key]=this.nextStencilID++;this._renderTileMasks(y,o,d,!0),this._renderTileMasks(y,o,d,!1),this._tileClippingMaskIDs=y}_renderTileMasks(r,o,d,h){const y=this.context,x=y.gl,C=this.style.projection,T=this.transform,M=this.useProgram("clippingMask");for(const R of o){const B=r[R.key],F=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),Z=C.getMeshFromTileID(this.context,R.canonical,h,!0,"stencil"),W=T.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});M.draw(y,x.TRIANGLES,Yt.disabled,new dr({func:x.ALWAYS,mask:0},B,255,x.KEEP,x.KEEP,x.REPLACE),Xr.disabled,d?cr.disabled:cr.backCCW,null,F,W,"$clipping",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}_renderTilesDepthBuffer(){const r=this.context,o=r.gl,d=this.style.projection,h=this.transform,y=this.useProgram("depth"),x=this.getDepthModeFor3D(),C=Te(h,{tileSize:h.tileSize});for(const T of C){const M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T),R=d.getMeshFromTileID(this.context,T.canonical,!0,!0,"raster"),B=h.getProjectionData({overscaledTileID:T,applyGlobeMatrix:!0,applyTerrainMatrix:!0});y.draw(r,o.TRIANGLES,x,dr.disabled,Xr.disabled,cr.backCCW,null,M,B,"$clipping",R.vertexBuffer,R.indexBuffer,R.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,o=this.context.gl;return new dr({func:o.NOTEQUAL,mask:255},r,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(r){const o=this.context.gl;return new dr({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,o.KEEP,o.KEEP,o.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const o=this.context.gl,d=r.sort((x,C)=>C.overscaledZ-x.overscaledZ),h=d[d.length-1].overscaledZ,y=d[0].overscaledZ-h+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const x={};for(let C=0;C<y;C++)x[C+h]=new dr({func:o.GEQUAL,mask:255},C+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=y,[x,d]}return[{[h]:dr.disabled},d]}stencilConfigForOverlapTwoPass(r){const o=this.context.gl,d=r.sort((x,C)=>C.overscaledZ-x.overscaledZ),h=d[d.length-1].overscaledZ,y=d[0].overscaledZ-h+1;if(this.clearStencil(),y>1){const x={},C={};for(let T=0;T<y;T++)x[T+h]=new dr({func:o.GREATER,mask:255},y+1+T,255,o.KEEP,o.KEEP,o.REPLACE),C[T+h]=new dr({func:o.GREATER,mask:255},1+T,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID=2*y+1,[x,C,d]}return this.nextStencilID=3,[{[h]:new dr({func:o.GREATER,mask:255},2,255,o.KEEP,o.KEEP,o.REPLACE)},{[h]:new dr({func:o.GREATER,mask:255},1,255,o.KEEP,o.KEEP,o.REPLACE)},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Xr([r.CONSTANT_COLOR,r.ONE],new l.b6(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Xr.unblended:Xr.alphaBlended}getDepthModeForSublayer(r,o,d){if(!this.opaquePassEnabledForLayer())return Yt.disabled;const h=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Yt(d||this.context.gl.LEQUAL,o,[h,h])}getDepthModeFor3D(){return new Yt(this.context.gl.LEQUAL,Yt.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,o){var d,h;this.style=r,this.options=o,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(z.now()),this.imageManager.beginFrame();const y=this.style._order,x=this.style.sourceCaches,C={},T={},M={},R={isRenderingToTexture:!1,isRenderingGlobe:((d=r.projection)===null||d===void 0?void 0:d.transitionState)>0};for(const F in x){const Z=x[F];Z.used&&Z.prepare(this.context),C[F]=Z.getVisibleCoordinates(!1),T[F]=C[F].slice().reverse(),M[F]=Z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let F=0;F<y.length;F++)if(this.style._layers[y[F]].is3D()){this.opaquePassCutoff=F;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const F of y){const Z=this.style._layers[F];if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;const W=T[Z.source];(Z.type==="custom"||W.length)&&this.renderLayer(this,x[Z.source],Z,W,R)}if((h=this.style.projection)===null||h===void 0||h.updateGPUdependent({context:this.context,useProgram:F=>this.useProgram(F)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?l.b6.black:l.b6.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(F,Z){const W=F.context,ee=W.gl,Q=((ve,_e,Re)=>{const ze=Math.cos(_e.rollInRadians),Ge=Math.sin(_e.rollInRadians),qe=Dn(_e),Ue=_e.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ve.properties.get("sky-color"),u_horizon_color:ve.properties.get("horizon-color"),u_horizon:[(_e.width/2-qe*Ge)*Re,(_e.height/2+qe*ze)*Re],u_horizon_normal:[-Ge,ze],u_sky_horizon_blend:ve.properties.get("sky-horizon-blend")*_e.height/2*Re,u_sky_blend:Ue}})(Z,F.style.map.transform,F.pixelRatio),re=new Yt(ee.LEQUAL,Yt.ReadWrite,[0,1]),ae=dr.disabled,he=F.colorModeForRenderPass(),fe=F.useProgram("sky"),me=$u(W,Z);fe.draw(W,ee.TRIANGLES,re,ae,he,cr.disabled,Q,null,void 0,"sky",me.vertexBuffer,me.indexBuffer,me.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const F=this.style._layers[y[this.currentLayer]],Z=x[F.source],W=C[F.source];this._renderTileClippingMasks(F,W,!1),this.renderLayer(this,Z,F,W,R)}this.renderPass="translucent";let B=!1;for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const F=this.style._layers[y[this.currentLayer]],Z=x[F.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(F,R))continue;this.opaquePassEnabledForLayer()||B||(B=!0,R.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const W=(F.type==="symbol"?M:T)[F.source];this._renderTileClippingMasks(F,C[F.source],!1),this.renderLayer(this,Z,F,W,R)}if(R.isRenderingGlobe&&function(F,Z,W){const ee=F.context,Q=ee.gl,re=F.useProgram("atmosphere"),ae=new Yt(Q.LEQUAL,Yt.ReadOnly,[0,1]),he=F.transform,fe=function(Ue,gt){const pt=Ue.properties.get("position"),ot=[-pt.x,-pt.y,-pt.z],Mt=l.as(new Float64Array(16));return Ue.properties.get("anchor")==="map"&&(l.aZ(Mt,Mt,gt.rollInRadians),l.a_(Mt,Mt,-gt.pitchInRadians),l.aZ(Mt,Mt,gt.bearingInRadians),l.a_(Mt,Mt,gt.center.lat*Math.PI/180),l.bl(Mt,Mt,-gt.center.lng*Math.PI/180)),l.bU(ot,ot,Mt),ot}(W,F.transform),me=he.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ve=Z.properties.get("atmosphere-blend")*me.projectionTransition;if(ve===0)return;const _e=Jn(he.worldSize,he.center.lat),Re=he.inverseProjectionMatrix,ze=new Float64Array(4);ze[3]=1,l.ao(ze,ze,he.modelViewProjectionMatrix),ze[0]/=ze[3],ze[1]/=ze[3],ze[2]/=ze[3],ze[3]=1,l.ao(ze,ze,Re),ze[0]/=ze[3],ze[1]/=ze[3],ze[2]/=ze[3],ze[3]=1;const Ge=((Ue,gt,pt,ot,Mt)=>({u_sun_pos:Ue,u_atmosphere_blend:gt,u_globe_position:pt,u_globe_radius:ot,u_inv_proj_matrix:Mt}))(fe,ve,[ze[0],ze[1],ze[2]],_e,Re),qe=$u(ee,Z);re.draw(ee,Q.TRIANGLES,ae,dr.disabled,Xr.alphaBlended,cr.disabled,Ge,null,null,"atmosphere",qe.vertexBuffer,qe.indexBuffer,qe.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const F=function(Z,W){let ee=null;const Q=Object.values(Z._layers).flatMap(fe=>fe.source&&!fe.isHidden(W)?[Z.sourceCaches[fe.source]]:[]),re=Q.filter(fe=>fe.getSource().type==="vector"),ae=Q.filter(fe=>fe.getSource().type!=="vector"),he=fe=>{(!ee||ee.getSource().maxzoom<fe.getSource().maxzoom)&&(ee=fe)};return re.forEach(fe=>he(fe)),ee||ae.forEach(fe=>he(fe)),ee}(this.style,this.transform.zoom);F&&function(Z,W,ee){for(let Q=0;Q<ee.length;Q++)of(Z,W,ee[Q])}(this,F,F.getVisibleCoordinates())}this.options.showPadding&&function(F){const Z=F.transform.padding;_s(F,F.transform.height-(Z.top||0),3,gs),_s(F,Z.bottom||0,3,Fi),Qs(F,Z.left||0,3,Du),Qs(F,F.transform.width-(Z.right||0),3,Ou);const W=F.transform.centerPoint;(function(ee,Q,re,ae){ea(ee,Q-1,re-10,2,20,ae),ea(ee,Q-10,re-1,20,2,ae)})(F,W.x,F.transform.height-W.y,nf)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let h=this.terrainFacilitator.dirty;h||(h=r?!l.bX(o,d):!l.bY(o,d)),h||(h=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),h&&(l.bZ(o,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,x){const C=y.context,T=C.gl,M=y.transform,R=Xr.unblended,B=new Yt(T.LEQUAL,Yt.ReadWrite,[0,1]),F=x.sourceCache.getRenderableTiles(),Z=y.useProgram("terrainDepth");C.bindFramebuffer.set(x.getFramebuffer("depth").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:l.b6.transparent,depth:1});for(const W of F){const ee=x.getTerrainMesh(W.tileID),Q=x.getTerrainData(W.tileID),re=M.getProjectionData({overscaledTileID:W.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ae={u_ele_delta:x.getMeshFrameDelta(M.zoom)};Z.draw(C,T.TRIANGLES,B,dr.disabled,R,cr.backCCW,ae,Q,re,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,x){const C=y.context,T=C.gl,M=y.transform,R=Xr.unblended,B=new Yt(T.LEQUAL,Yt.ReadWrite,[0,1]),F=x.getCoordsTexture(),Z=x.sourceCache.getRenderableTiles(),W=y.useProgram("terrainCoords");C.bindFramebuffer.set(x.getFramebuffer("coords").framebuffer),C.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),C.clear({color:l.b6.transparent,depth:1}),x.coordsIndex=[];for(const ee of Z){const Q=x.getTerrainMesh(ee.tileID),re=x.getTerrainData(ee.tileID);C.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,F.texture);const ae={u_terrain_coords_id:(255-x.coordsIndex.length)/255,u_texture:0,u_ele_delta:x.getMeshFrameDelta(M.zoom)},he=M.getProjectionData({overscaledTileID:ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});W.draw(C,T.TRIANGLES,B,dr.disabled,R,cr.backCCW,ae,re,he,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),x.coordsIndex.push(ee.tileID.key)}C.bindFramebuffer.set(null),C.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(r,o,d,h,y){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(h||[]).length)&&(this.id=d.id,l.b_(d)?function(x,C,T,M,R,B){if(x.renderPass!=="translucent")return;const{isRenderingToTexture:F}=B,Z=dr.disabled,W=x.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ee,Q,re,ae,he,fe,me,ve,_e){const Re=Q.transform,ze=Q.style.map.terrain,Ge=he==="map",qe=fe==="map";for(const Ue of ee){const gt=ae.getTile(Ue),pt=gt.getBucket(re);if(!pt||!pt.text||!pt.text.segments.get().length)continue;const ot=l.af(pt.textSizeData,Re.zoom),Mt=l.av(gt,1,Q.transform.zoom),Ot=$e(Ge,Q.transform,Mt),_r=re.layout.get("icon-text-fit")!=="none"&&pt.hasIconData();if(ot){const Nr=Math.pow(2,Re.zoom-gt.tileID.overscaledZ),Ir=ze?(Qr,Hr)=>ze.getElevation(Ue,Qr,Hr):null;Xl(pt,Ge,qe,_e,Re,Ot,Nr,ot,_r,l.aw(Re,gt,me,ve),Ue.toUnwrapped(),Ir)}}}(M,x,T,C,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),R),T.paint.get("icon-opacity").constantOr(1)!==0&&tf(x,C,T,M,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),Z,W,F),T.paint.get("text-opacity").constantOr(1)!==0&&tf(x,C,T,M,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),Z,W,F),C.map.showCollisionBoxes&&(Kl(x,C,T,M,!0),Kl(x,C,T,M,!1))}(r,o,d,h,this.style.placement.variableOffsets,y):l.b$(d)?function(x,C,T,M,R){if(x.renderPass!=="translucent")return;const{isRenderingToTexture:B}=R,F=T.paint.get("circle-opacity"),Z=T.paint.get("circle-stroke-width"),W=T.paint.get("circle-stroke-opacity"),ee=!T.layout.get("circle-sort-key").isConstant();if(F.constantOr(1)===0&&(Z.constantOr(1)===0||W.constantOr(1)===0))return;const Q=x.context,re=Q.gl,ae=x.transform,he=x.getDepthModeForSublayer(0,Yt.ReadOnly),fe=dr.disabled,me=x.colorModeForRenderPass(),ve=[],_e=ae.getCircleRadiusCorrection();for(let Re=0;Re<M.length;Re++){const ze=M[Re],Ge=C.getTile(ze),qe=Ge.getBucket(T);if(!qe)continue;const Ue=T.paint.get("circle-translate"),gt=T.paint.get("circle-translate-anchor"),pt=l.aw(ae,Ge,Ue,gt),ot=qe.programConfigurations.get(T.id),Mt=x.useProgram("circle",ot),Ot=qe.layoutVertexBuffer,_r=qe.indexBuffer,Nr=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ze),Ir={programConfiguration:ot,program:Mt,layoutVertexBuffer:Ot,indexBuffer:_r,uniformValues:$h(x,Ge,T,pt,_e),terrainData:Nr,projectionData:ae.getProjectionData({overscaledTileID:ze,applyGlobeMatrix:!B,applyTerrainMatrix:!0})};if(ee){const Qr=qe.segments.get();for(const Hr of Qr)ve.push({segments:new l.aF([Hr]),sortKey:Hr.sortKey,state:Ir})}else ve.push({segments:qe.segments,sortKey:0,state:Ir})}ee&&ve.sort((Re,ze)=>Re.sortKey-ze.sortKey);for(const Re of ve){const{programConfiguration:ze,program:Ge,layoutVertexBuffer:qe,indexBuffer:Ue,uniformValues:gt,terrainData:pt,projectionData:ot}=Re.state;Ge.draw(Q,re.TRIANGLES,he,fe,me,cr.backCCW,gt,pt,ot,T.id,qe,Ue,Re.segments,T.paint,x.transform.zoom,ze)}}(r,o,d,h,y):l.c0(d)?function(x,C,T,M,R){if(T.paint.get("heatmap-opacity")===0)return;const B=x.context,{isRenderingToTexture:F,isRenderingGlobe:Z}=R;if(x.style.map.terrain){for(const W of M){const ee=C.getTile(W);C.hasRenderableParent(W)||(x.renderPass==="offscreen"?km(x,ee,T,W,Z):x.renderPass==="translucent"&&rf(x,T,W,F,Z))}B.viewport.set([0,0,x.width,x.height])}else x.renderPass==="offscreen"?function(W,ee,Q,re){const ae=W.context,he=ae.gl,fe=W.transform,me=dr.disabled,ve=new Xr([he.ONE,he.ONE],l.b6.transparent,[!0,!0,!0,!0]);(function(_e,Re,ze){const Ge=_e.gl;_e.activeTexture.set(Ge.TEXTURE1),_e.viewport.set([0,0,Re.width/4,Re.height/4]);let qe=ze.heatmapFbos.get(l.bR);qe?(Ge.bindTexture(Ge.TEXTURE_2D,qe.colorAttachment.get()),_e.bindFramebuffer.set(qe.framebuffer)):(qe=Va(_e,Re.width/4,Re.height/4),ze.heatmapFbos.set(l.bR,qe))})(ae,W,Q),ae.clear({color:l.b6.transparent});for(let _e=0;_e<re.length;_e++){const Re=re[_e];if(ee.hasRenderableParent(Re))continue;const ze=ee.getTile(Re),Ge=ze.getBucket(Q);if(!Ge)continue;const qe=Ge.programConfigurations.get(Q.id),Ue=W.useProgram("heatmap",qe),gt=fe.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),pt=fe.getCircleRadiusCorrection();Ue.draw(ae,he.TRIANGLES,Yt.disabled,me,ve,cr.backCCW,yu(ze,fe.zoom,Q.paint.get("heatmap-intensity"),pt),null,gt,Q.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,Q.paint,fe.zoom,qe)}ae.viewport.set([0,0,W.width,W.height])}(x,C,T,M):x.renderPass==="translucent"&&function(W,ee){const Q=W.context,re=Q.gl;Q.setColorMode(W.colorModeForRenderPass());const ae=ee.heatmapFbos.get(l.bR);ae&&(Q.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,ae.colorAttachment.get()),Q.activeTexture.set(re.TEXTURE1),Ql(Q,ee).bind(re.LINEAR,re.CLAMP_TO_EDGE),W.useProgram("heatmapTexture").draw(Q,re.TRIANGLES,Yt.disabled,dr.disabled,W.colorModeForRenderPass(),cr.disabled,bu(W,ee,0,1),null,null,ee.id,W.viewportBuffer,W.quadTriangleIndexBuffer,W.viewportSegments,ee.paint,W.transform.zoom))}(x,T)}(r,o,d,h,y):l.c1(d)?function(x,C,T,M,R){if(x.renderPass!=="translucent")return;const{isRenderingToTexture:B}=R,F=T.paint.get("line-opacity"),Z=T.paint.get("line-width");if(F.constantOr(1)===0||Z.constantOr(1)===0)return;const W=x.getDepthModeForSublayer(0,Yt.ReadOnly),ee=x.colorModeForRenderPass(),Q=T.paint.get("line-dasharray"),re=T.paint.get("line-pattern"),ae=re.constantOr(1),he=T.paint.get("line-gradient"),fe=T.getCrossfadeParameters(),me=ae?"linePattern":Q?"lineSDF":he?"lineGradient":"line",ve=x.context,_e=ve.gl,Re=x.transform;let ze=!0;for(const Ge of M){const qe=C.getTile(Ge);if(ae&&!qe.patternsLoaded())continue;const Ue=qe.getBucket(T);if(!Ue)continue;const gt=Ue.programConfigurations.get(T.id),pt=x.context.program.get(),ot=x.useProgram(me,gt),Mt=ze||ot.program!==pt,Ot=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ge),_r=re.constantOr(null);if(_r&&qe.imageAtlas){const vr=qe.imageAtlas,Mr=vr.patternPositions[_r.to.toString()],zn=vr.patternPositions[_r.from.toString()];Mr&&zn&&gt.setConstantPatternPositions(Mr,zn)}const Nr=Re.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!B,applyTerrainMatrix:!0}),Ir=Re.getPixelScale(),Qr=ae?$l(x,qe,T,Ir,fe):Q?gm(x,qe,T,Ir,Q,fe):he?mm(x,qe,T,Ir,Ue.lineClipsArray.length):us(x,qe,T,Ir);if(ae)ve.activeTexture.set(_e.TEXTURE0),qe.imageAtlasTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),gt.updatePaintBuffers(fe);else if(Q&&(Mt||x.lineAtlas.dirty))ve.activeTexture.set(_e.TEXTURE0),x.lineAtlas.bind(ve);else if(he){const vr=Ue.gradients[T.id];let Mr=vr.texture;if(T.gradientVersion!==vr.version){let zn=256;if(T.stepInterpolant){const $n=C.getSource().maxzoom,Sn=Ge.canonical.z===$n?Math.ceil(1<<x.transform.maxZoom-Ge.canonical.z):1;zn=l.ad(l.bS(Ue.maxLineLength/l.Z*1024*Sn),256,ve.maxTextureSize)}vr.gradient=l.bT({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:zn,image:vr.gradient||void 0,clips:Ue.lineClipsArray}),vr.texture?vr.texture.update(vr.gradient):vr.texture=new Ve(ve,vr.gradient,_e.RGBA),vr.version=T.gradientVersion,Mr=vr.texture}ve.activeTexture.set(_e.TEXTURE0),Mr.bind(T.stepInterpolant?_e.NEAREST:_e.LINEAR,_e.CLAMP_TO_EDGE)}let Hr;if(B){const[vr]=x.getStencilConfigForOverlapAndUpdateStencilID(M);Hr=vr[Ge.overscaledZ]}else Hr=x.stencilModeForClipping(Ge);ot.draw(ve,_e.TRIANGLES,W,Hr,ee,cr.disabled,Qr,Ot,Nr,T.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,T.paint,x.transform.zoom,gt,Ue.layoutVertexBuffer2),ze=!1}}(r,o,d,h,y):l.c2(d)?function(x,C,T,M,R){const B=T.paint.get("fill-color"),F=T.paint.get("fill-opacity");if(F.constantOr(1)===0)return;const{isRenderingToTexture:Z}=R,W=x.colorModeForRenderPass(),ee=T.paint.get("fill-pattern"),Q=x.opaquePassEnabledForLayer()&&!ee.constantOr(1)&&B.constantOr(l.b6.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===Q){const re=x.getDepthModeForSublayer(1,x.renderPass==="opaque"?Yt.ReadWrite:Yt.ReadOnly);Lu(x,C,T,M,re,W,!1,Z)}if(x.renderPass==="translucent"&&T.paint.get("fill-antialias")){const re=x.getDepthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,Yt.ReadOnly);Lu(x,C,T,M,re,W,!0,Z)}}(r,o,d,h,y):l.c3(d)?function(x,C,T,M,R){const B=T.paint.get("fill-extrusion-opacity");if(B===0)return;const{isRenderingToTexture:F}=R;if(x.renderPass==="translucent"){const Z=new Yt(x.context.gl.LEQUAL,Yt.ReadWrite,x.depthRangeFor3D);if(B!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))Js(x,C,T,M,Z,dr.disabled,Xr.disabled,F),Js(x,C,T,M,Z,x.stencilModeFor3D(),x.colorModeForRenderPass(),F);else{const W=x.colorModeForRenderPass();Js(x,C,T,M,Z,dr.disabled,W,F)}}}(r,o,d,h,y):l.c4(d)?function(x,C,T,M,R){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const{isRenderingToTexture:B}=R,F=x.context,Z=x.style.projection.useSubdivision,W=x.getDepthModeForSublayer(0,Yt.ReadOnly),ee=x.colorModeForRenderPass();if(x.renderPass==="offscreen")(function(Q,re,ae,he,fe,me,ve){const _e=Q.context,Re=_e.gl;for(const ze of ae){const Ge=re.getTile(ze),qe=Ge.dem;if(!qe||!qe.data||!Ge.needsHillshadePrepare)continue;const Ue=qe.dim,gt=qe.stride,pt=qe.getPixels();if(_e.activeTexture.set(Re.TEXTURE1),_e.pixelStoreUnpackPremultiplyAlpha.set(!1),Ge.demTexture=Ge.demTexture||Q.getTileTexture(gt),Ge.demTexture){const Mt=Ge.demTexture;Mt.update(pt,{premultiply:!1}),Mt.bind(Re.NEAREST,Re.CLAMP_TO_EDGE)}else Ge.demTexture=new Ve(_e,pt,Re.RGBA,{premultiply:!1}),Ge.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE);_e.activeTexture.set(Re.TEXTURE0);let ot=Ge.fbo;if(!ot){const Mt=new Ve(_e,{width:Ue,height:Ue,data:null},Re.RGBA);Mt.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),ot=Ge.fbo=_e.createFramebuffer(Ue,Ue,!0,!1),ot.colorAttachment.set(Mt.texture)}_e.bindFramebuffer.set(ot.framebuffer),_e.viewport.set([0,0,Ue,Ue]),Q.useProgram("hillshadePrepare").draw(_e,Re.TRIANGLES,fe,me,ve,cr.disabled,Fh(Ge.tileID,qe),null,null,he.id,Q.rasterBoundsBuffer,Q.quadTriangleIndexBuffer,Q.rasterBoundsSegments),Ge.needsHillshadePrepare=!1}})(x,C,M,T,W,dr.disabled,ee),F.viewport.set([0,0,x.width,x.height]);else if(x.renderPass==="translucent")if(Z){const[Q,re,ae]=x.stencilConfigForOverlapTwoPass(M);Ua(x,C,T,ae,Q,W,ee,!1,B),Ua(x,C,T,ae,re,W,ee,!0,B)}else{const[Q,re]=x.getStencilConfigForOverlapAndUpdateStencilID(M);Ua(x,C,T,re,Q,W,ee,!1,B)}}(r,o,d,h,y):l.c5(d)?function(x,C,T,M,R){if(x.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!M.length)return;const{isRenderingToTexture:B}=R,F=C.getSource(),Z=x.style.projection.useSubdivision;if(F instanceof Pe)Za(x,C,T,M,null,!1,!1,F.tileCoords,F.flippedWindingOrder,B);else if(Z){const[W,ee,Q]=x.stencilConfigForOverlapTwoPass(M);Za(x,C,T,Q,W,!1,!0,Ru,!1,B),Za(x,C,T,Q,ee,!0,!0,Ru,!1,B)}else{const[W,ee]=x.getStencilConfigForOverlapAndUpdateStencilID(M);Za(x,C,T,ee,W,!1,!0,Ru,!1,B)}}(r,o,d,h,y):l.c6(d)?function(x,C,T,M,R){const B=T.paint.get("background-color"),F=T.paint.get("background-opacity");if(F===0)return;const{isRenderingToTexture:Z}=R,W=x.context,ee=W.gl,Q=x.style.projection,re=x.transform,ae=re.tileSize,he=T.paint.get("background-pattern");if(x.isPatternMissing(he))return;const fe=!he&&B.a===1&&F===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==fe)return;const me=dr.disabled,ve=x.getDepthModeForSublayer(0,fe==="opaque"?Yt.ReadWrite:Yt.ReadOnly),_e=x.colorModeForRenderPass(),Re=x.useProgram(he?"backgroundPattern":"background"),ze=M||Te(re,{tileSize:ae,terrain:x.style.map.terrain});he&&(W.activeTexture.set(ee.TEXTURE0),x.imageManager.bind(x.context));const Ge=T.getCrossfadeParameters();for(const qe of ze){const Ue=re.getProjectionData({overscaledTileID:qe,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),gt=he?wu(F,x,he,{tileID:qe,tileSize:ae},Ge):xo(F,B),pt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(qe),ot=Q.getMeshFromTileID(W,qe.canonical,!1,!0,"raster");Re.draw(W,ee.TRIANGLES,ve,me,_e,cr.backCCW,gt,pt,Ue,T.id,ot.vertexBuffer,ot.indexBuffer,ot.segments)}}(r,0,d,h,y):l.c7(d)&&function(x,C,T,M){const{isRenderingGlobe:R}=M,B=x.context,F=T.implementation,Z=x.style.projection,W=x.transform,ee=W.getProjectionDataForCustomLayer(R),Q={farZ:W.farZ,nearZ:W.nearZ,fov:W.fov*Math.PI/180,modelViewProjectionMatrix:W.modelViewProjectionMatrix,projectionMatrix:W.projectionMatrix,shaderData:{variantName:Z.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Z.shaderPreludeCode.vertexSource}`,define:Z.shaderDefine},defaultProjectionData:ee},re=F.renderingMode?F.renderingMode:"2d";if(x.renderPass==="offscreen"){const ae=F.prerender;ae&&(x.setCustomLayerDefaults(),B.setColorMode(x.colorModeForRenderPass()),ae.call(F,B.gl,Q),B.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),B.setColorMode(x.colorModeForRenderPass()),B.setStencilMode(dr.disabled);const ae=re==="3d"?x.getDepthModeFor3D():x.getDepthModeForSublayer(0,Yt.ReadOnly);B.setDepthMode(ae),F.render(B.gl,Q),B.setDirty(),x.setBaseState(),B.bindFramebuffer.set(null)}}(r,0,d,y))}saveTileTexture(r){const o=this._tileTextures[r.size[0]];o?o.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const o=this._tileTextures[r];return o&&o.length>0?o.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const o=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!o||!d}useProgram(r,o,d=!1){this.cache=this.cache||{};const h=!!this.style.map.terrain,y=this.style.projection,x=r+(o?o.cacheKey:"")+`/${d?Tl:y.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(h?"/terrain":"");return this.cache[x]||(this.cache[x]=new fm(this.context,qi[r],o,Cu[r],this._showOverdrawInspector,h,d?qi.projectionMercator:y.shaderPreludeCode,d?fr:y.shaderDefine)),this.cache[x]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ve(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:o}=this.context.gl;return this.width!==r||this.height!==o}}function Bu(_,r){let o,d=!1,h=null,y=null;const x=()=>{h=null,d&&(_.apply(y,o),h=setTimeout(x,r),d=!1)};return(...C)=>(d=!0,y=this,o=C,h||x(),h)}class Vo{constructor(r){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let d;return o.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(d=h)}),(d&&d[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(!this._isValidHash(o))return!1;const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:d,pitch:+(o[4]||0)}),!0},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const d=o.join("/");let h=d;h.split("&").length>0&&(h=h.split("&")[0]),this._hashName&&(h=`${this._hashName}=${d}`);let y=window.location.hash.replace(h,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let x=window.location.href.replace(/(#.+)?$/,y);x=x.replace("&&","&"),window.history.replaceState(window.history.state,null,x)},this._updateHash=Bu(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const o=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,h=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,h),x=Math.round(o.lng*y)/y,C=Math.round(o.lat*y)/y,T=this._map.getBearing(),M=this._map.getPitch();let R="";if(R+=r?`/${x}/${C}/${d}`:`${d}/${C}/${x}`,(T||M)&&(R+="/"+Math.round(10*T)/10),M&&(R+=`/${Math.round(M)}`),this._hashName){const B=this._hashName;let F=!1;const Z=window.location.hash.slice(1).split("&").map(W=>{const ee=W.split("=")[0];return ee===B?(F=!0,`${ee}=${R}`):W}).filter(W=>W);return F||Z.push(`${B}=${R}`),`#${Z.join("&")}`}return`#${R}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new l.Q(+r[2],+r[1])}catch{return!1}const o=+r[0],d=+(r[3]||0),h=+(r[4]||0);return o>=this._map.getMinZoom()&&o<=this._map.getMaxZoom()&&d>=-180&&d<=180&&h>=this._map.getMinPitch()&&h<=this._map.getMaxPitch()}}const ta={linearity:.3,easing:l.c8(0,0,.3,1)},af=l.e({deceleration:2500,maxSpeed:1400},ta),lf=l.e({deceleration:20,maxSpeed:1400},ta),cf=l.e({deceleration:1e3,maxSpeed:360},ta),uf=l.e({deceleration:1e3,maxSpeed:90},ta),df=l.e({deceleration:1e3,maxSpeed:360},ta);class hf{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:z.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,o=z.now();for(;r.length>0&&o-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,roll:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)o.zoom+=y.zoomDelta||0,o.bearing+=y.bearingDelta||0,o.pitch+=y.pitchDelta||0,o.roll+=y.rollDelta||0,y.panDelta&&o.pan._add(y.panDelta),y.around&&(o.around=y.around),y.pinchAround&&(o.pinchAround=y.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,h={};if(o.pan.mag()){const y=ra(o.pan.mag(),d,l.e({},af,r||{})),x=o.pan.mult(y.amount/o.pan.mag()),C=this._map.cameraHelper.handlePanInertia(x,this._map.transform);h.center=C.easingCenter,h.offset=C.easingOffset,Uo(h,y)}if(o.zoom){const y=ra(o.zoom,d,lf);h.zoom=this._map.transform.zoom+y.amount,Uo(h,y)}if(o.bearing){const y=ra(o.bearing,d,cf);h.bearing=this._map.transform.bearing+l.ad(y.amount,-179,179),Uo(h,y)}if(o.pitch){const y=ra(o.pitch,d,uf);h.pitch=this._map.transform.pitch+y.amount,Uo(h,y)}if(o.roll){const y=ra(o.roll,d,df);h.roll=this._map.transform.roll+l.ad(y.amount,-179,179),Uo(h,y)}if(h.zoom||h.bearing){const y=o.pinchAround===void 0?o.around:o.pinchAround;h.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),l.e(h,{noMoveStart:!0})}}function Uo(_,r){(!_.duration||_.duration<r.duration)&&(_.duration=r.duration,_.easing=r.easing)}function ra(_,r,o){const{maxSpeed:d,linearity:h,deceleration:y}=o,x=l.ad(_*h/(r/1e3),-d,d),C=Math.abs(x)/(y*h);return{easing:o.easing,duration:1e3*C,amount:x*(C/2)}}class an extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,o,d,h={}){const y=D.mousePos(o.getCanvas(),d),x=o.unproject(y);super(r,l.e({point:y,lngLat:x,originalEvent:d},h)),this._defaultPrevented=!1,this.target=o}}class hi extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,o,d){const h=r==="touchend"?d.changedTouches:d.touches,y=D.touchPos(o.getCanvasContainer(),h),x=y.map(T=>o.unproject(T)),C=y.reduce((T,M,R,B)=>T.add(M.div(B.length)),new l.P(0,0));super(r,{points:y,point:C,lngLats:x,lngLat:o.unproject(C),originalEvent:d}),this._defaultPrevented=!1}}class Fu extends l.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,o,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class ao{constructor(r,o){this._map=r,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Fu(r.type,this._map,r))}mousedown(r,o){return this._mousedownPos=o,this._firePreventable(new an(r.type,this._map,r))}mouseup(r){this._map.fire(new an(r.type,this._map,r))}click(r,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new an(r.type,this._map,r))}dblclick(r){return this._firePreventable(new an(r.type,this._map,r))}mouseover(r){this._map.fire(new an(r.type,this._map,r))}mouseout(r){this._map.fire(new an(r.type,this._map,r))}touchstart(r){return this._firePreventable(new hi(r.type,this._map,r))}touchmove(r){this._map.fire(new hi(r.type,this._map,r))}touchend(r){this._map.fire(new hi(r.type,this._map,r))}touchcancel(r){this._map.fire(new hi(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class na{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new an(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new an("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new an(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ga{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(l.P.convert(r),this._map.terrain)}}class ff{constructor(r,o){this._map=r,this._tr=new Ga(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,o){this.isEnabled()&&r.shiftKey&&r.button===0&&(D.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(r,o){if(!this._active)return;const d=o;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const h=this._startPos;this._lastPos=d,this._box||(this._box=D.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const y=Math.min(h.x,d.x),x=Math.max(h.x,d.x),C=Math.min(h.y,d.y),T=Math.max(h.y,d.y);D.setTransform(this._box,`translate(${y}px,${C}px)`),this._box.style.width=x-y+"px",this._box.style.height=T-C+"px"}mouseupWindow(r,o){if(!this._active||r.button!==0)return;const d=this._startPos,h=o;if(this.reset(),D.suppressClick(),d.x!==h.x||d.y!==h.y)return this._map.fire(new l.l("boxzoomend",{originalEvent:r})),{cameraAnimation:y=>y.fitScreenCoordinates(d,h,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(D.remove(this._box),this._box=null),D.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,o){return this._map.fire(new l.l(r,{originalEvent:o}))}}function Nu(_,r){if(_.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${r.length}`);const o={};for(let d=0;d<_.length;d++)o[_[d].identifier]=r[d];return o}class Tm{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,o,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(h){const y=new l.P(0,0);for(const x of h)y._add(x);return y.div(h.length)}(o),this.touches=Nu(d,o)))}touchmove(r,o,d){if(this.aborted||!this.centroid)return;const h=Nu(d,o);for(const y in this.touches){const x=h[y];(!x||x.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(r,o,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const h=!this.aborted&&this.centroid;if(this.reset(),h)return h}}}class ec{constructor(r){this.singleTap=new Tm(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,o,d){this.singleTap.touchstart(r,o,d)}touchmove(r,o,d){this.singleTap.touchmove(r,o,d)}touchend(r,o,d){const h=this.singleTap.touchend(r,o,d);if(h){const y=r.timeStamp-this.lastTime<500,x=!this.lastTap||this.lastTap.dist(h)<30;if(y&&x||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=h,this.count===this.numTaps)return this.reset(),h}}}class Wa{constructor(r){this._tr=new Ga(r),this._zoomIn=new ec({numTouches:1,numTaps:2}),this._zoomOut=new ec({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,o,d){this._zoomIn.touchstart(r,o,d),this._zoomOut.touchstart(r,o,d)}touchmove(r,o,d){this._zoomIn.touchmove(r,o,d),this._zoomOut.touchmove(r,o,d)}touchend(r,o,d){const h=this._zoomIn.touchend(r,o,d),y=this._zoomOut.touchend(r,o,d),x=this._tr;return h?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:x.zoom+1,around:x.unproject(h)},{originalEvent:r})}):y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:x.zoom-1,around:x.unproject(y)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vi{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const o=this._moveFunction(...r);if(o.bearingDelta||o.pitchDelta||o.rollDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(r,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(o)?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,o){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const h=Array.isArray(o)?o[0]:o;return!this._moved&&h.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=h,this._move(d,h))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&D.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ct={0:1,2:2};class ia{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const o=D.mouseButton(r);this._eventButton=o}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(o,d){const h=Ct[d];return o.buttons===void 0||(o.buttons&h)!==h}(r,this._eventButton)}isValidEndEvent(r){return D.mouseButton(r)===this._eventButton}}class ju{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class pf{constructor(r=new ia({checkCorrectEvent:()=>!0}),o=new ju){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=o}_executeRelevantHandler(r,o,d){return r instanceof MouseEvent?o(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?d(r):void 0}startMove(r){this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.startMove(o),o=>this.oneFingerTouchMoveStateManager.startMove(o))}endMove(r){this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.endMove(o),o=>this.oneFingerTouchMoveStateManager.endMove(o))}isValidStartEvent(r){return this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.isValidStartEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidStartEvent(o))}isValidMoveEvent(r){return this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.isValidMoveEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(o))}isValidEndEvent(r){return this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.isValidEndEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidEndEvent(o))}}const Zo=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=r=>{r.preventDefault()}};class Ha{constructor(r,o){this._clickTolerance=r.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,o,d){return this._calculateTransform(r,o,d)}touchmove(r,o,d){if(this._active){if(!this._shouldBePrevented(d.length))return r.preventDefault(),this._calculateTransform(r,o,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,o,d){this._calculateTransform(r,o,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,o,d){d.length>0&&(this._active=!0);const h=Nu(d,o),y=new l.P(0,0),x=new l.P(0,0);let C=0;for(const M in h){const R=h[M],B=this._touches[M];B&&(y._add(R),x._add(R.sub(B)),C++,h[M]=R)}if(this._touches=h,this._shouldBePrevented(C)||!x.mag())return;const T=x.div(C);return this._sum._add(T),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(C),panDelta:T}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class tc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,o,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([o[0],o[1]]))}touchmove(r,o,d){if(!this._firstTwoTouches)return;r.preventDefault();const[h,y]=this._firstTwoTouches,x=nr(d,o,h),C=nr(d,o,y);if(!x||!C)return;const T=this._aroundCenter?null:x.add(C).div(2);return this._move([x,C],T,r)}touchend(r,o,d){if(!this._firstTwoTouches)return;const[h,y]=this._firstTwoTouches,x=nr(d,o,h),C=nr(d,o,y);x&&C||(this._active&&D.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function nr(_,r,o){for(let d=0;d<_.length;d++)if(_[d].identifier===o)return r[d]}function rc(_,r){return Math.log(_/r)/Math.LN2}class mf extends tc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,o){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(rc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:rc(this._distance,d),pinchAround:o}}}function nc(_,r){return 180*_.angleWith(r)/Math.PI}class gf extends tc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,o,d){const h=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nc(this._vector,h),pinchAround:o}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const o=25/(Math.PI*this._minDiameter)*360,d=nc(r,this._startVector);return Math.abs(d)<o}}function Vu(_){return Math.abs(_.y)>Math.abs(_.x)}class Uu extends tc{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,o,d){super.touchstart(r,o,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Vu(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,o,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const h=r[0].sub(this._lastPoints[0]),y=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(h,y,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(h.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(r,o,d){if(this._valid!==void 0)return this._valid;const h=r.mag()>=2,y=o.mag()>=2;if(!h&&!y)return;if(!h||!y)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const x=r.y>0==o.y>0;return Vu(r)&&Vu(o)&&x}}const Zu={panStep:100,bearingStep:15,pitchStep:10};class Gu{constructor(r){this._tr=new Ga(r);const o=Zu;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let o=0,d=0,h=0,y=0,x=0;switch(r.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),y=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),y=1);break;case 38:r.shiftKey?h=1:(r.preventDefault(),x=-1);break;case 40:r.shiftKey?h=-1:(r.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(d=0,h=0),{cameraAnimation:C=>{const T=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:Pm,zoom:o?Math.round(T.zoom)+o*(r.shiftKey?2:1):T.zoom,bearing:T.bearing+d*this._bearingStep,pitch:T.pitch+h*this._pitchStep,offset:[-y*this._panStep,-x*this._panStep],center:T.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Pm(_){return _*(2-_)}const Wu=4.000244140625;class _f{constructor(r,o){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new Ga(r),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let o=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=z.now(),h=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,o!==0&&o%Wu==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":h>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(h*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),r.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=r,this._delta-=o,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=D.mousePos(this._map.getCanvas(),r),d=this._tr;this._aroundPoint=this._aroundCenter?d.transform.locationToScreenPoint(l.Q.convert(d.center)):o,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const C=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=C),typeof this._targetZoom=="number"&&(this._targetZoom+=C)}if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>Wu?this._wheelZoomRate:this._defaultZoomRate;let T=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&T!==0&&(T=1/T);const M=typeof this._targetZoom!="number"?r.scale:l.aH(this._targetZoom);this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,l.aa(M*T))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,d=this._startZoom,h=this._easing;let y,x=!1;if(this._type==="wheel"&&d&&h){const C=z.now()-this._lastWheelEventTime,T=Math.min((C+5)/200,1),M=h(T);y=l.B.number(d,o,M),T<1?this._frameId||(this._frameId=!0):x=!0}else y=o,x=!0;return this._active=!0,x&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=y,{noInertia:!0,needsRenderFrame:!x,zoomDelta:y-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let o=l.ca;if(this._prevEase){const d=this._prevEase,h=(z.now()-d.start)/d.duration,y=d.easing(h+.01)-d.easing(h),x=.27/Math.sqrt(y*y+1e-4)*.01,C=Math.sqrt(.0729-x*x);o=l.c8(x,C,.25,1)}return this._prevEase={start:z.now(),duration:r,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class yf{constructor(r,o){this._clickZoom=r,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Go{constructor(r){this._tr=new Ga(r),this.reset()}reset(){this._active=!1}dblclick(r,o){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jr{constructor(){this._tap=new ec({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,o,d){if(!this._swipePoint)if(this._tapTime){const h=o[0],y=r.timeStamp-this._tapTime<500,x=this._tapPoint.dist(h)<30;y&&x?d.length>0&&(this._swipePoint=h,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,o,d)}touchmove(r,o,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const h=o[0],y=h.y-this._swipePoint.y;return this._swipePoint=h,r.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(r,o,d)}touchend(r,o,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const h=this._tap.touchend(r,o,d);h&&(this._tapTime=r.timeStamp,this._tapPoint=h)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qa{constructor(r,o,d){this._el=r,this._mousePan=o,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ic{constructor(r,o,d,h){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=o,this._mousePitch=d,this._mouseRoll=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Hu{constructor(r,o,d,h){this._el=r,this._touchZoom=o,this._touchRotate=d,this._tapDragZoom=h,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class qu{constructor(r,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=D.create("div","maplibregl-cooperative-gesture-screen",r);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),h=document.createElement("div");h.className="maplibregl-desktop-message",h.textContent=o,this._container.appendChild(h);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=d,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(D.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,o){this._enabled&&(this._map.fire(new l.l("cooperativegestureprevented",{gestureType:r,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Ka=_=>_.zoom||_.drag||_.roll||_.pitch||_.rotate;class Im extends l.l{}function Ni(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta||_.rollDelta}class oc{constructor(r,o){this.handleWindowEvent=h=>{this.handleEvent(h,`${h.type}Window`)},this.handleEvent=(h,y)=>{if(h.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const x=h.type==="renderFrame"?void 0:h,C={needsRenderFrame:!1},T={},M={},R=h.touches,B=R?this._getMapTouches(R):void 0,F=B?D.touchPos(this._map.getCanvas(),B):D.mousePos(this._map.getCanvas(),h);for(const{handlerName:ee,handler:Q,allowed:re}of this._handlers){if(!Q.isEnabled())continue;let ae;this._blockedByActive(M,re,ee)?Q.reset():Q[y||h.type]&&(ae=Q[y||h.type](h,F,B),this.mergeHandlerResult(C,T,ae,ee,x),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||Q.isActive())&&(M[ee]=Q)}const Z={};for(const ee in this._previousActiveHandlers)M[ee]||(Z[ee]=x);this._previousActiveHandlers=M,(Object.keys(Z).length||Ni(C))&&(this._changes.push([C,T,Z]),this._triggerRenderFrame()),(Object.keys(M).length||Ni(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=C;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hf(r),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[h,y,x]of this._listeners)D.addEventListener(h,y,h===document?this.handleWindowEvent:this.handleEvent,x)}destroy(){for(const[r,o,d]of this._listeners)D.removeEventListener(r,o,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const o=this._map,d=o.getCanvasContainer();this._add("mapEvent",new ao(o,r));const h=o.boxZoom=new ff(o,r);this._add("boxZoom",h),r.interactive&&r.boxZoom&&h.enable();const y=o.cooperativeGestures=new qu(o,r.cooperativeGestures);this._add("cooperativeGestures",y),r.cooperativeGestures&&y.enable();const x=new Wa(o),C=new Go(o);o.doubleClickZoom=new yf(C,x),this._add("tapZoom",x),this._add("clickZoom",C),r.interactive&&r.doubleClickZoom&&o.doubleClickZoom.enable();const T=new Jr;this._add("tapDragZoom",T);const M=o.touchPitch=new Uu(o);this._add("touchPitch",M),r.interactive&&r.touchPitch&&o.touchPitch.enable(r.touchPitch);const R=()=>o.project(o.getCenter()),B=function({enable:fe,clickTolerance:me,aroundCenter:ve=!0,minPixelCenterThreshold:_e=100,rotateDegreesPerPixelMoved:Re=.8},ze){const Ge=new ia({checkCorrectEvent:qe=>D.mouseButton(qe)===0&&qe.ctrlKey||D.mouseButton(qe)===2&&!qe.ctrlKey});return new vi({clickTolerance:me,move:(qe,Ue)=>{const gt=ze();if(ve&&Math.abs(gt.y-qe.y)>_e)return{bearingDelta:l.c9(new l.P(qe.x,Ue.y),Ue,gt)};let pt=(Ue.x-qe.x)*Re;return ve&&Ue.y<gt.y&&(pt=-pt),{bearingDelta:pt}},moveStateManager:Ge,enable:fe,assignEvents:Zo})}(r,R),F=function({enable:fe,clickTolerance:me,pitchDegreesPerPixelMoved:ve=-.5}){const _e=new ia({checkCorrectEvent:Re=>D.mouseButton(Re)===0&&Re.ctrlKey||D.mouseButton(Re)===2});return new vi({clickTolerance:me,move:(Re,ze)=>({pitchDelta:(ze.y-Re.y)*ve}),moveStateManager:_e,enable:fe,assignEvents:Zo})}(r),Z=function({enable:fe,clickTolerance:me,rollDegreesPerPixelMoved:ve=.3},_e){const Re=new ia({checkCorrectEvent:ze=>D.mouseButton(ze)===2&&ze.ctrlKey});return new vi({clickTolerance:me,move:(ze,Ge)=>{const qe=_e();let Ue=(Ge.x-ze.x)*ve;return Ge.y<qe.y&&(Ue=-Ue),{rollDelta:Ue}},moveStateManager:Re,enable:fe,assignEvents:Zo})}(r,R);o.dragRotate=new ic(r,B,F,Z),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",F,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Z,["mousePitch"]),r.interactive&&r.dragRotate&&o.dragRotate.enable();const W=function({enable:fe,clickTolerance:me}){const ve=new ia({checkCorrectEvent:_e=>D.mouseButton(_e)===0&&!_e.ctrlKey});return new vi({clickTolerance:me,move:(_e,Re)=>({around:Re,panDelta:Re.sub(_e)}),activateOnStart:!0,moveStateManager:ve,enable:fe,assignEvents:Zo})}(r),ee=new Ha(r,o);o.dragPan=new qa(d,W,ee),this._add("mousePan",W),this._add("touchPan",ee,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&o.dragPan.enable(r.dragPan);const Q=new gf,re=new mf;o.touchZoomRotate=new Hu(d,re,Q,T),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",re,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&o.touchZoomRotate.enable(r.touchZoomRotate);const ae=o.scrollZoom=new _f(o,()=>this._triggerRenderFrame());this._add("scrollZoom",ae,["mousePan"]),r.interactive&&r.scrollZoom&&o.scrollZoom.enable(r.scrollZoom);const he=o.keyboard=new Gu(o);this._add("keyboard",he),r.interactive&&r.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new na(o))}_add(r,o,d){this._handlers.push({handlerName:r,handler:o,allowed:d}),this._handlersById[r]=o}stop(r){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ka(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,o,d){for(const h in r)if(h!==d&&(!o||o.indexOf(h)<0))return!0;return!1}_getMapTouches(r){const o=[];for(const d of r)this._el.contains(d.target)&&o.push(d);return o}mergeHandlerResult(r,o,d,h,y){if(!d)return;l.e(r,d);const x={handlerName:h,originalEvent:d.originalEvent||y};d.zoomDelta!==void 0&&(o.zoom=x),d.panDelta!==void 0&&(o.drag=x),d.rollDelta!==void 0&&(o.roll=x),d.pitchDelta!==void 0&&(o.pitch=x),d.bearingDelta!==void 0&&(o.rotate=x)}_applyChanges(){const r={},o={},d={};for(const[h,y,x]of this._changes)h.panDelta&&(r.panDelta=(r.panDelta||new l.P(0,0))._add(h.panDelta)),h.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+h.zoomDelta),h.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+h.bearingDelta),h.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+h.pitchDelta),h.rollDelta&&(r.rollDelta=(r.rollDelta||0)+h.rollDelta),h.around!==void 0&&(r.around=h.around),h.pinchAround!==void 0&&(r.pinchAround=h.pinchAround),h.noInertia&&(r.noInertia=h.noInertia),l.e(o,y),l.e(d,x);this._updateMapTransform(r,o,d),this._changes=[]}_updateMapTransform(r,o,d){const h=this._map,y=h._getTransformForUpdate(),x=h.terrain;if(!(Ni(r)||x&&this._terrainMovement))return this._fireEvents(o,d,!0);h._stop(!0);let{panDelta:C,zoomDelta:T,bearingDelta:M,pitchDelta:R,rollDelta:B,around:F,pinchAround:Z}=r;Z!==void 0&&(F=Z),F=F||h.transform.centerPoint,x&&!y.isPointOnMapSurface(F)&&(F=y.centerPoint);const W={panDelta:C,zoomDelta:T,rollDelta:B,pitchDelta:R,bearingDelta:M,around:F};this._map.cameraHelper.useGlobeControls&&!y.isPointOnMapSurface(F)&&(F=y.centerPoint);const ee=F.distSqr(y.centerPoint)<.01?y.center:y.screenPointToLocation(C?F.sub(C):F);x?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(W,y),this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?y.setCenter(y.screenPointToLocation(y.centerPoint.sub(C))):this._map.cameraHelper.handleMapControlsPan(W,y,ee):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(W,y,ee))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(W,y),this._map.cameraHelper.handleMapControlsPan(W,y,ee)),h._applyUpdatedTransform(y),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(o,d,!0)}_fireEvents(r,o,d){const h=Ka(this._eventsInProgress),y=Ka(r),x={};for(const B in r){const{originalEvent:F}=r[B];this._eventsInProgress[B]||(x[`${B}start`]=F),this._eventsInProgress[B]=r[B]}!h&&y&&this._fireEvent("movestart",y.originalEvent);for(const B in x)this._fireEvent(B,x[B]);y&&this._fireEvent("move",y.originalEvent);for(const B in r){const{originalEvent:F}=r[B];this._fireEvent(B,F)}const C={};let T;for(const B in this._eventsInProgress){const{handlerName:F,originalEvent:Z}=this._eventsInProgress[B];this._handlersById[F].isActive()||(delete this._eventsInProgress[B],T=o[F]||Z,C[`${B}end`]=T)}for(const B in C)this._fireEvent(B,C[B]);const M=Ka(this._eventsInProgress),R=(h||y)&&!M;if(R&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const B=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&B.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(B)}if(d&&R){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),F=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;!B||!B.essential&&z.prefersReducedMotion?(this._map.fire(new l.l("moveend",{originalEvent:T})),F(this._map.getBearing())&&this._map.resetNorth()):(F(B.bearing||this._map.getBearing())&&(B.bearing=0),B.freezeElevation=!0,this._map.easeTo(B,{originalEvent:T})),this._updatingCamera=!1}}_fireEvent(r,o){this._map.fire(new l.l(r,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Im("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Dt extends l.E{constructor(r,o,d){super(),this._renderFrameCallback=()=>{const h=Math.min((z.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(h)),h<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=d.bearingSnap,this.cameraHelper=o,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,o){r.apply(this.transform),this.transform=r,this.cameraHelper=o}getCenter(){return new l.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(r,o){return this.jumpTo({center:r},o)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,o){return this.jumpTo({elevation:r},o),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,o,d){return r=l.P.convert(r).mult(-1),this.panTo(this.transform.center,l.e({offset:r},o),d)}panTo(r,o,d){return this.easeTo(l.e({center:r},o),d)}getZoom(){return this.transform.zoom}setZoom(r,o){return this.jumpTo({zoom:r},o),this}zoomTo(r,o,d){return this.easeTo(l.e({zoom:r},o),d)}zoomIn(r,o){return this.zoomTo(this.getZoom()+1,r,o),this}zoomOut(r,o){return this.zoomTo(this.getZoom()-1,r,o),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,o){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new l.l("movestart",o)).fire(new l.l("move",o)).fire(new l.l("moveend",o))),this}getBearing(){return this.transform.bearing}setBearing(r,o){return this.jumpTo({bearing:r},o),this}getPadding(){return this.transform.padding}setPadding(r,o){return this.jumpTo({padding:r},o),this}rotateTo(r,o,d){return this.easeTo(l.e({bearing:r},o),d)}resetNorth(r,o){return this.rotateTo(0,l.e({duration:1e3},r),o),this}resetNorthPitch(r,o){return this.easeTo(l.e({bearing:0,pitch:0,roll:0,duration:1e3},r),o),this}snapToNorth(r,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,o):this}getPitch(){return this.transform.pitch}setPitch(r,o){return this.jumpTo({pitch:r},o),this}getRoll(){return this.transform.roll}setRoll(r,o){return this.jumpTo({roll:r},o),this}cameraForBounds(r,o){r=Le.convert(r).adjustAntiMeridian();const d=o&&o.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,o)}_cameraForBoxAndBearing(r,o,d,h){const y={top:0,bottom:0,right:0,left:0};if(typeof(h=l.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},h)).padding=="number"){const M=h.padding;h.padding={top:M,bottom:M,right:M,left:M}}const x=l.e(y,h.padding);h.padding=x;const C=this.transform,T=new Le(r,o);return this.cameraHelper.cameraForBoxAndBearing(h,x,T,d,C)}fitBounds(r,o,d){return this._fitInternal(this.cameraForBounds(r,o),o,d)}fitScreenCoordinates(r,o,d,h,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(l.P.convert(r)),this.transform.screenPointToLocation(l.P.convert(o)),d,h),h,y)}_fitInternal(r,o,d){return r?(delete(o=l.e(r,o)).padding,o.linear?this.easeTo(o,d):this.flyTo(o,d)):this}jumpTo(r,o){this.stop();const d=this._getTransformForUpdate();let h=!1,y=!1,x=!1;const C=d.zoom;this.cameraHelper.handleJumpToCenterZoom(d,r);const T=d.zoom!==C;return"elevation"in r&&d.elevation!==+r.elevation&&d.setElevation(+r.elevation),"bearing"in r&&d.bearing!==+r.bearing&&(h=!0,d.setBearing(+r.bearing)),"pitch"in r&&d.pitch!==+r.pitch&&(y=!0,d.setPitch(+r.pitch)),"roll"in r&&d.roll!==+r.roll&&(x=!0,d.setRoll(+r.roll)),r.padding==null||d.isPaddingEqual(r.padding)||d.setPadding(r.padding),this._applyUpdatedTransform(d),this.fire(new l.l("movestart",o)).fire(new l.l("move",o)),T&&this.fire(new l.l("zoomstart",o)).fire(new l.l("zoom",o)).fire(new l.l("zoomend",o)),h&&this.fire(new l.l("rotatestart",o)).fire(new l.l("rotate",o)).fire(new l.l("rotateend",o)),y&&this.fire(new l.l("pitchstart",o)).fire(new l.l("pitch",o)).fire(new l.l("pitchend",o)),x&&this.fire(new l.l("rollstart",o)).fire(new l.l("roll",o)).fire(new l.l("rollend",o)),this.fire(new l.l("moveend",o))}calculateCameraOptionsFromTo(r,o,d,h=0){const y=l.$.fromLngLat(r,o),x=l.$.fromLngLat(d,h),C=x.x-y.x,T=x.y-y.y,M=x.z-y.z,R=Math.hypot(C,T,M);if(R===0)throw new Error("Can't calculate camera options with same From and To");const B=Math.hypot(C,T),F=l.aa(this.transform.cameraToCenterDistance/R/this.transform.tileSize),Z=180*Math.atan2(C,-T)/Math.PI;let W=180*Math.acos(B/R)/Math.PI;return W=M<0?90-W:90+W,{center:x.toLngLat(),elevation:h,zoom:F,pitch:W,bearing:Z}}calculateCameraOptionsFromCameraLngLatAltRotation(r,o,d,h,y){const x=this.transform.calculateCenterFromCameraLngLatAlt(r,o,d,h);return{center:x.center,elevation:x.elevation,zoom:x.zoom,bearing:d,pitch:h,roll:y}}easeTo(r,o){this._stop(!1,r.easeId),((r=l.e({offset:[0,0],duration:500,easing:l.ca},r)).animate===!1||!r.essential&&z.prefersReducedMotion)&&(r.duration=0);const d=this._getTransformForUpdate(),h=this.getBearing(),y=d.pitch,x=d.roll,C="bearing"in r?this._normalizeBearing(r.bearing,h):h,T="pitch"in r?+r.pitch:y,M="roll"in r?this._normalizeBearing(r.roll,x):x,R="padding"in r?r.padding:d.padding,B=l.P.convert(r.offset);let F,Z;r.around&&(F=l.Q.convert(r.around),Z=d.locationToScreenPoint(F));const W={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ee=this.cameraHelper.handleEaseTo(d,{bearing:C,pitch:T,roll:M,padding:R,around:F,aroundPoint:Z,offsetAsPoint:B,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||h!==C,this._pitching=this._pitching||T!==y,this._rolling=this._rolling||M!==x,this._padding=!d.isPaddingEqual(R),this._zooming=this._zooming||ee.isZooming,this._easeId=r.easeId,this._prepareEase(o,r.noMoveStart,W),this.terrain&&this._prepareElevation(ee.elevationCenter),this._ease(Q=>{ee.easeFunc(Q),this.terrain&&!r.freezeElevation&&this._updateElevation(Q),this._applyUpdatedTransform(d),this._fireMoveEvents(o)},Q=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(o,Q)},r),this}_prepareEase(r,o,d={}){this._moving=!0,o||d.moving||this.fire(new l.l("movestart",r)),this._zooming&&!d.zooming&&this.fire(new l.l("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new l.l("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new l.l("pitchstart",r)),this._rolling&&!d.rolling&&this.fire(new l.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&o!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(o-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=o}this.transform.setElevation(l.B.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const o=r.getCameraLngLat(),d=r.getCameraAltitude(),h=this.terrain?this.terrain.getElevationForLngLatZoom(o,r.zoom):0;if(d<h){const y=this.calculateCameraOptionsFromTo(o,h,r.center,r.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(r){const o=[];if(o.push(h=>this._elevateCameraIfInsideTerrain(h)),this.transformCameraUpdate&&o.push(h=>this.transformCameraUpdate(h)),!o.length)return;const d=r.clone();for(const h of o){const y=d.clone(),{center:x,zoom:C,roll:T,pitch:M,bearing:R,elevation:B}=h(y);x&&y.setCenter(x),B!==void 0&&y.setElevation(B),C!==void 0&&y.setZoom(C),T!==void 0&&y.setRoll(T),M!==void 0&&y.setPitch(M),R!==void 0&&y.setBearing(R),d.apply(y)}this.transform.apply(d)}_fireMoveEvents(r){this.fire(new l.l("move",r)),this._zooming&&this.fire(new l.l("zoom",r)),this._rotating&&this.fire(new l.l("rotate",r)),this._pitching&&this.fire(new l.l("pitch",r)),this._rolling&&this.fire(new l.l("roll",r))}_afterEase(r,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const d=this._zooming,h=this._rotating,y=this._pitching,x=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,d&&this.fire(new l.l("zoomend",r)),h&&this.fire(new l.l("rotateend",r)),y&&this.fire(new l.l("pitchend",r)),x&&this.fire(new l.l("rollend",r)),this.fire(new l.l("moveend",r))}flyTo(r,o){if(!r.essential&&z.prefersReducedMotion){const Ue=l.O(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Ue,o)}this.stop(),r=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.ca},r);const d=this._getTransformForUpdate(),h=d.bearing,y=d.pitch,x=d.roll,C=d.padding,T="bearing"in r?this._normalizeBearing(r.bearing,h):h,M="pitch"in r?+r.pitch:y,R="roll"in r?this._normalizeBearing(r.roll,x):x,B="padding"in r?r.padding:d.padding,F=l.P.convert(r.offset);let Z=d.centerPoint.add(F);const W=d.screenPointToLocation(Z),ee=this.cameraHelper.handleFlyTo(d,{bearing:T,pitch:M,roll:R,padding:B,locationAtOffset:W,offsetAsPoint:F,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let Q=r.curve;const re=Math.max(d.width,d.height),ae=re/ee.scaleOfZoom,he=ee.pixelPathLength;typeof ee.scaleOfMinZoom=="number"&&(Q=Math.sqrt(re/ee.scaleOfMinZoom/he*2));const fe=Q*Q;function me(Ue){const gt=(ae*ae-re*re+(Ue?-1:1)*fe*fe*he*he)/(2*(Ue?ae:re)*fe*he);return Math.log(Math.sqrt(gt*gt+1)-gt)}function ve(Ue){return(Math.exp(Ue)-Math.exp(-Ue))/2}function _e(Ue){return(Math.exp(Ue)+Math.exp(-Ue))/2}const Re=me(!1);let ze=function(Ue){return _e(Re)/_e(Re+Q*Ue)},Ge=function(Ue){return re*((_e(Re)*(ve(gt=Re+Q*Ue)/_e(gt))-ve(Re))/fe)/he;var gt},qe=(me(!0)-Re)/Q;if(Math.abs(he)<2e-6||!isFinite(qe)){if(Math.abs(re-ae)<1e-6)return this.easeTo(r,o);const Ue=ae<re?-1:1;qe=Math.abs(Math.log(ae/re))/Q,Ge=()=>0,ze=gt=>Math.exp(Ue*Q*gt)}return r.duration="duration"in r?+r.duration:1e3*qe/("screenSpeed"in r?+r.screenSpeed/Q:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=h!==T,this._pitching=M!==y,this._rolling=R!==x,this._padding=!d.isPaddingEqual(B),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(ee.targetCenter),this._ease(Ue=>{const gt=Ue*qe,pt=1/ze(gt),ot=Ge(gt);this._rotating&&d.setBearing(l.B.number(h,T,Ue)),this._pitching&&d.setPitch(l.B.number(y,M,Ue)),this._rolling&&d.setRoll(l.B.number(x,R,Ue)),this._padding&&(d.interpolatePadding(C,B,Ue),Z=d.centerPoint.add(F)),ee.easeFunc(Ue,pt,ot,Z),this.terrain&&!r.freezeElevation&&this._updateElevation(Ue),this._applyUpdatedTransform(d),this._fireMoveEvents(o)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,o){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,o)}return r||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(r,o,d){d.animate===!1||d.duration===0?(r(1),o()):(this._easeStart=z.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,o){r=l.aK(r,-180,180);const d=Math.abs(r-o);return Math.abs(r-360-o)<d&&(r-=360),Math.abs(r+360-o)<d&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(l.Q.convert(r),this.transform.tileZoom):null}}const jt={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ya{constructor(r=jt){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=D.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=D.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=D.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){D.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._sanitizedAttributionHTML=void 0}_setElementTitle(r,o){const d=this._map._getUIString(`AttributionControl.${o}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(h=>typeof h!="string"?"":h)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const h=this._map.style.stylesheet;this.styleOwner=h.owner,this.styleId=h.id}const o=this._map.style.sourceCaches;for(const h in o){const y=o[h];if(y.used||y.usedForTerrain){const x=y.getSource();x.attribution&&r.indexOf(x.attribution)<0&&r.push(x.attribution)}}r=r.filter(h=>String(h).trim()),r.sort((h,y)=>h.length-y.length),r=r.filter((h,y)=>{for(let x=y+1;x<r.length;x++)if(r[x].indexOf(h)>=0)return!1;return!0});const d=r.join(" | ");d!==this._sanitizedAttributionHTML&&(this._sanitizedAttributionHTML=D.sanitize(d),r.length?(this._innerContainer.innerHTML=this._sanitizedAttributionHTML,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class sc{constructor(r={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const d=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=D.create("div","maplibregl-ctrl");const o=D.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){D.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ku{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const o=++this._id;return this._queue.push({callback:r,id:o,cancelled:!1}),o}remove(r){const o=this._currentlyRunning,d=o?this._queue.concat(o):this._queue;for(const h of d)if(h.id===r)return void(h.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const d of o)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var fi=l.aC([{name:"a_pos3d",type:"Int16",components:3}]);class bf extends l.E{constructor(r){super(),this._lastTilesetChange=z.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,o){this.sourceCache.update(r,o),this._renderableTilesKeys=[];const d={};for(const h of Te(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))d[h.key]=!0,this._renderableTilesKeys.push(h.key),this._tiles[h.key]||(h.terrainRttPosMatrix32f=new Float64Array(16),l.bN(h.terrainRttPosMatrix32f,0,l.Z,l.Z,0,0,1),this._tiles[h.key]=new Fr(h,this.tileSize),this._lastTilesetChange=z.now());for(const h in this._tiles)d[h]||delete this._tiles[h]}freeRtt(r){for(const o in this._tiles){const d=this._tiles[o];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const o={};for(const d of this._renderableTilesKeys){const h=this._tiles[d].tileID,y=r.clone(),x=l.b1();if(h.canonical.equals(r.canonical))l.bN(x,0,l.Z,l.Z,0,0,1);else if(h.canonical.isChildOf(r.canonical)){const C=h.canonical.z-r.canonical.z,T=h.canonical.x-(h.canonical.x>>C<<C),M=h.canonical.y-(h.canonical.y>>C<<C),R=l.Z>>C;l.bN(x,0,R,R,0,0,1),l.L(x,x,[-T*R,-M*R,0])}else{if(!r.canonical.isChildOf(h.canonical))continue;{const C=r.canonical.z-h.canonical.z,T=r.canonical.x-(r.canonical.x>>C<<C),M=r.canonical.y-(r.canonical.y>>C<<C),R=l.Z>>C;l.bN(x,0,l.Z,l.Z,0,0,1),l.L(x,x,[T*R,M*R,0]),l.M(x,x,[1/2**C,1/2**C,0])}}y.terrainRttPosMatrix32f=new Float32Array(x),o[d]=y}return o}getSourceTile(r,o){const d=this.sourceCache._source;let h=r.overscaledZ-this.deltaZoom;if(h>d.maxzoom&&(h=d.maxzoom),h<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(h).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!y||!y.dem)&&o)for(;h>=d.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(r.scaledTo(h--).key);return y}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}}class lo{constructor(r,o,d){this._meshCache={},this.painter=r,this.sourceCache=new bf(o),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,o,d,h=l.Z){var y;if(!(o>=0&&o<h&&d>=0&&d<h))return 0;const x=this.getTerrainData(r),C=(y=x.tile)===null||y===void 0?void 0:y.dem;if(!C)return 0;const T=l.cb([],[o/h*l.Z,d/h*l.Z],x.u_terrain_matrix),M=[T[0]*C.dim,T[1]*C.dim],R=Math.floor(M[0]),B=Math.floor(M[1]),F=M[0]-R,Z=M[1]-B;return C.get(R,B)*(1-F)*(1-Z)+C.get(R+1,B)*F*(1-Z)+C.get(R,B+1)*(1-F)*Z+C.get(R+1,B+1)*F*Z}getElevationForLngLatZoom(r,o){if(!l.cc(o,r.wrap()))return 0;const{tileID:d,mercatorX:h,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(r,o);return this.getElevation(d,h%l.Z,y%l.Z,l.Z)}getElevation(r,o,d,h=l.Z){return this.getDEMElevation(r,o,d,h)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const h=this.painter.context,y=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ve(h,y,h.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ve(h,new l.R({width:1,height:1}),h.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.as([])}const o=this.sourceCache.getSourceTile(r,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const h=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new Ve(h,o.dem.getPixels(),h.gl.RGBA,{premultiply:!1}),o.demTexture.bind(h.gl.NEAREST,h.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const d=o&&o+o.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const h=this.sourceCache.sourceCache._source.maxzoom;let y=r.canonical.z-o.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=h?y=r.canonical.z-h:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const x=r.canonical.x-(r.canonical.x>>y<<y),C=r.canonical.y-(r.canonical.y>>y<<y),T=l.cd(new Float64Array(16),[1/(l.Z<<y),1/(l.Z<<y),0]);l.L(T,T,[x*l.Z,C*l.Z,0]),this._demMatrixCache[r.key]={matrix:T,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(r){const o=this.painter,d=o.width/devicePixelRatio,h=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===h||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ve(o.context,{width:d,height:h,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ve(o.context,{width:d,height:h,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(d,h,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,d,h))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,x=0;y<this._coordsTextureSize;y++)for(let C=0;C<this._coordsTextureSize;C++,x+=4)o[x+0]=255&C,o[x+1]=255&y,o[x+2]=C>>8<<4|y>>8,o[x+3]=0;const d=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),h=new Ve(r,d,r.gl.RGBA,{premultiply:!1});return h.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=h,h}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),d=this.painter.context,h=d.gl,y=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),x=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),C=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),h.readPixels(y,C-x-1,1,1,h.RGBA,h.UNSIGNED_BYTE,o),d.bindFramebuffer.set(null);const T=o[0]+(o[2]>>4<<8),M=o[1]+((15&o[2])<<8),R=this.coordsIndex[255-o[3]],B=R&&this.sourceCache.getTileByID(R);if(!B)return null;const F=this._coordsTextureSize,Z=(1<<B.tileID.canonical.z)*F;return new l.$((B.tileID.canonical.x*F+T)/Z+B.tileID.wrap,(B.tileID.canonical.y*F+M)/Z,this.getElevation(B.tileID,T,M,F))}depthAtPoint(r){const o=new Uint8Array(4),d=this.painter.context,h=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),h.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,h.RGBA,h.UNSIGNED_BYTE,o),d.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(r){var o;const d=((o=this.painter.style.projection)===null||o===void 0?void 0:o.transitionState)>0,h=d&&r.canonical.y===0,y=d&&r.canonical.y===(1<<r.canonical.z)-1,x=`m_${h?"n":""}_${y?"s":""}`;if(this._meshCache[x])return this._meshCache[x];const C=this.painter.context,T=new l.ce,M=new l.aG,R=this.meshSize,B=l.Z/R,F=R*R;for(let _e=0;_e<=R;_e++)for(let Re=0;Re<=R;Re++)T.emplaceBack(Re*B,_e*B,0);for(let _e=0;_e<F;_e+=R+1)for(let Re=0;Re<R;Re++)M.emplaceBack(Re+_e,R+Re+_e+1,R+Re+_e+2),M.emplaceBack(Re+_e,R+Re+_e+2,Re+_e+1);const Z=T.length,W=Z+(R+1),ee=(R+1)*R,Q=h?l.b8:0,re=h?0:1,ae=y?l.b9:l.Z,he=y?0:1;for(let _e=0;_e<=R;_e++)T.emplaceBack(_e*B,Q,re);for(let _e=0;_e<=R;_e++)T.emplaceBack(_e*B,ae,he);for(let _e=0;_e<R;_e++)M.emplaceBack(ee+_e,W+_e,W+_e+1),M.emplaceBack(ee+_e,W+_e+1,ee+_e+1),M.emplaceBack(0+_e,Z+_e+1,Z+_e),M.emplaceBack(0+_e,0+_e+1,Z+_e+1);const fe=T.length,me=fe+2*(R+1);for(const _e of[0,1])for(let Re=0;Re<=R;Re++)for(const ze of[0,1])T.emplaceBack(_e*l.Z,Re*B,ze);for(let _e=0;_e<2*R;_e+=2)M.emplaceBack(fe+_e,fe+_e+1,fe+_e+3),M.emplaceBack(fe+_e,fe+_e+3,fe+_e+2),M.emplaceBack(me+_e,me+_e+3,me+_e+1),M.emplaceBack(me+_e,me+_e+2,me+_e+3);const ve=new yi(C.createVertexBuffer(T,fi.members),C.createIndexBuffer(M),l.aF.simpleSegment(0,0,T.length,M.length));return this._meshCache[x]=ve,ve}getMeshFrameDelta(r){return 2*Math.PI*l.bq/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,o){var d;const{tileID:h}=this._getOverscaledTileIDFromLngLatZoom(r,o);return(d=this.getMinMaxElevation(h).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const o=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return o&&o.dem&&(d.minElevation=o.dem.min*this.exaggeration,d.maxElevation=o.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,o){const d=l.$.fromLngLat(r.wrap()),h=(1<<o)*l.Z,y=d.x*h,x=d.y*h,C=Math.floor(y/l.Z),T=Math.floor(x/l.Z);return{tileID:new l.Y(o,0,o,C,T),mercatorX:y,mercatorY:x}}}class Mm{constructor(r,o,d){this._context=r,this._size=o,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Ve(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(d.texture),{id:r,fbo:o,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>r.id!==o),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const co={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ln{constructor(r,o){this.painter=r,this.terrain=o,this.pool=new Mm(r.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(o)),this._coordsAscending={};for(const d in r.sourceCaches){this._coordsAscending[d]={};const h=r.sourceCaches[d].getVisibleCoordinates();for(const y of h){const x=this.terrain.sourceCache.getTerrainCoords(y);for(const C in x)this._coordsAscending[d][C]||(this._coordsAscending[d][C]=[]),this._coordsAscending[d][C].push(x[C])}}this._coordsAscendingStr={};for(const d of r._order){const h=r._layers[d],y=h.source;if(co[h.type]&&!this._coordsAscendingStr[y]){this._coordsAscendingStr[y]={};for(const x in this._coordsAscending[y])this._coordsAscendingStr[y][x]=this._coordsAscending[y][x].map(C=>C.key).sort().join()}}for(const d of this._renderableTiles)for(const h in this._coordsAscendingStr){const y=this._coordsAscendingStr[h][d.tileID.key];y&&y!==d.rttCoords[h]&&(d.rtt=[])}}renderLayer(r,o){if(r.isHidden(this.painter.transform.zoom))return!1;const d=Object.assign(Object.assign({},o),{isRenderingToTexture:!0}),h=r.type,y=this.painter,x=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(co[h]&&(this._prevType&&co[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(r.id),!x))return!0;if(co[this._prevType]||co[h]&&x){this._prevType=h;const C=this._stacks.length-1,T=this._stacks[C]||[];for(const M of this._renderableTiles){if(this.pool.isFull()&&(zu(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(M),M.rtt[C]){const B=this.pool.getObjectForId(M.rtt[C].id);if(B.stamp===M.rtt[C].stamp){this.pool.useObject(B);continue}}const R=this.pool.getOrCreateFreeObject();this.pool.useObject(R),this.pool.stampObject(R),M.rtt[C]={id:R.id,stamp:R.stamp},y.context.bindFramebuffer.set(R.fbo.framebuffer),y.context.clear({color:l.b6.transparent,stencil:0}),y.currentStencilSource=void 0;for(let B=0;B<T.length;B++){const F=y.style._layers[T[B]],Z=F.source?this._coordsAscending[F.source][M.tileID.key]:[M.tileID];y.context.viewport.set([0,0,R.fbo.width,R.fbo.height]),y._renderTileClippingMasks(F,Z,!0),y.renderLayer(y,y.style.sourceCaches[F.source],F,Z,d),F.source&&(M.rttCoords[F.source]=this._coordsAscendingStr[F.source][M.tileID.key])}}return zu(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects(),co[h]}return!1}}const gn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},vf=S,oa={hash:!1,interactive:!0,bearingSnap:7,attributionControl:jt,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},ac={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Yu{constructor(r,o,d=!1){this.mousedown=y=>{this.startMove(y,D.mousePos(this.element,y)),D.addEventListener(window,"mousemove",this.mousemove),D.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=y=>{this.move(y,D.mousePos(this.element,y))},this.mouseup=y=>{this._rotatePitchHanlder.dragEnd(y),this.offTemp()},this.touchstart=y=>{y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=D.touchPos(this.element,y.targetTouches)[0],this.startMove(y,this._startPos),D.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.addEventListener(window,"touchend",this.touchend))},this.touchmove=y=>{y.targetTouches.length!==1?this.reset():(this._lastPos=D.touchPos(this.element,y.targetTouches)[0],this.move(y,this._lastPos))},this.touchend=y=>{y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=o;const h=new pf;this._rotatePitchHanlder=new vi({clickTolerance:3,move:(y,x)=>{const C=o.getBoundingClientRect(),T=new l.P((C.bottom-C.top)/2,(C.right-C.left)/2);return{bearingDelta:l.c9(new l.P(y.x,x.y),x,T),pitchDelta:d?-.5*(x.y-y.y):void 0}},moveStateManager:h,enable:!0,assignEvents:()=>{}}),this.map=r,D.addEventListener(o,"mousedown",this.mousedown),D.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),D.addEventListener(o,"touchcancel",this.reset)}startMove(r,o){this._rotatePitchHanlder.dragStart(r,o),D.disableDrag()}move(r,o){const d=this.map,{bearingDelta:h,pitchDelta:y}=this._rotatePitchHanlder.dragMove(r,o)||{};h&&d.setBearing(d.getBearing()+h),y&&d.setPitch(d.getPitch()+y)}off(){const r=this.element;D.removeEventListener(r,"mousedown",this.mousedown),D.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),D.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.removeEventListener(window,"touchend",this.touchend),D.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){D.enableDrag(),D.removeEventListener(window,"mousemove",this.mousemove),D.removeEventListener(window,"mouseup",this.mouseup),D.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.removeEventListener(window,"touchend",this.touchend)}}let wo;function lc(_,r,o){const d=new l.Q(_.lng,_.lat);if(_=new l.Q(_.lng,_.lat),r){const h=new l.Q(_.lng-360,_.lat),y=new l.Q(_.lng+360,_.lat),x=o.locationToScreenPoint(_).distSqr(r);o.locationToScreenPoint(h).distSqr(r)<x?_=h:o.locationToScreenPoint(y).distSqr(r)<x&&(_=y)}for(;Math.abs(_.lng-o.center.lng)>180;){const h=o.locationToScreenPoint(_);if(h.x>=0&&h.y>=0&&h.x<=o.width&&h.y<=o.height)break;_.lng>o.center.lng?_.lng-=360:_.lng+=360}return _.lng!==d.lng&&o.isPointOnMapSurface(o.locationToScreenPoint(_))?_:d}const ys={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function cc(_,r,o){const d=_.classList;for(const h in ys)d.remove(`maplibregl-${o}-anchor-${h}`);d.add(`maplibregl-${o}-anchor-${r}`)}class Xa extends l.E{constructor(r){if(super(),this._onKeyPress=o=>{const d=o.code,h=o.charCode||o.keyCode;d!=="Space"&&d!=="Enter"&&h!==32&&h!==13||this.togglePopup()},this._onMapClick=o=>{const d=o.originalEvent.target,h=this._element;this._popup&&(d===h||h.contains(d))&&this.togglePopup()},this._update=o=>{var d;if(!this._map)return;const h=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!h)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?lc(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?x="rotateX(0deg)":this._pitchAlignment==="map"&&(x=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),D.setTransform(this._element,`${ys[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${y}`),z.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.l("dragstart"))),this.fire(new l.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.l("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=l.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=D.create("div");const o=D.createNS("http://www.w3.org/2000/svg","svg"),d=41,h=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${d}px`),o.setAttributeNS(null,"width",`${h}px`),o.setAttributeNS(null,"viewBox",`0 0 ${h} ${d}`);const y=D.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const x=D.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"fill-rule","nonzero");const C=D.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const T=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const re of T){const ae=D.createNS("http://www.w3.org/2000/svg","ellipse");ae.setAttributeNS(null,"opacity","0.04"),ae.setAttributeNS(null,"cx","10.5"),ae.setAttributeNS(null,"cy","5.80029008"),ae.setAttributeNS(null,"rx",re.rx),ae.setAttributeNS(null,"ry",re.ry),C.appendChild(ae)}const M=D.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill",this._color);const R=D.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),M.appendChild(R);const B=D.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"opacity","0.25"),B.setAttributeNS(null,"fill","#000000");const F=D.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),B.appendChild(F);const Z=D.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Z.setAttributeNS(null,"fill","#FFFFFF");const W=D.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ee=D.createNS("http://www.w3.org/2000/svg","circle");ee.setAttributeNS(null,"fill","#000000"),ee.setAttributeNS(null,"opacity","0.25"),ee.setAttributeNS(null,"cx","5.5"),ee.setAttributeNS(null,"cy","5.5"),ee.setAttributeNS(null,"r","5.4999962");const Q=D.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#FFFFFF"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962"),W.appendChild(ee),W.appendChild(Q),x.appendChild(C),x.appendChild(M),x.appendChild(B),x.appendChild(Z),x.appendChild(W),o.appendChild(x),o.setAttributeNS(null,"height",d*this._scale+"px"),o.setAttributeNS(null,"width",h*this._scale+"px"),this._element.appendChild(o),this._offset=l.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),cc(this._element,this._anchor,"marker"),r&&r.className)for(const o of r.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),D.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.Q.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const h=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[h,-1*(38.1-13.5+h)],"bottom-right":[-h,-1*(38.1-13.5+h)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var o,d;if(!(!((o=this._map)===null||o===void 0)&&o.terrain)){const B=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==B&&(this._element.style.opacity=B))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const h=this._map,y=h.terrain.depthAtPoint(this._pos),x=h.terrain.getElevationForLngLatZoom(this._lngLat,h.transform.tileZoom);if(h.transform.lngLatToCameraDepth(this._lngLat,x)-y<.006)return void(this._element.style.opacity=this._opacity);const C=-this._offset.y/h.transform.pixelsPerMeter,T=Math.sin(h.getPitch()*Math.PI/180)*C,M=h.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),R=h.transform.lngLatToCameraDepth(this._lngLat,x+T)-M>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&R&&this._popup.remove(),this._element.style.opacity=R?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=l.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,o){return(this._opacity===void 0||r===void 0&&o===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const Xu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let sa=0,bs=!1;const Ju={maxWidth:100,unit:"metric"};function uc(_,r,o){const d=o&&o.maxWidth||100,h=_._container.clientHeight/2,y=_._container.clientWidth/2,x=_.unproject([y-d/2,h]),C=_.unproject([y+d/2,h]),T=Math.round(_.project(C).x-_.project(x).x),M=Math.min(d,T,_._container.clientWidth),R=x.distanceTo(C);if(o&&o.unit==="imperial"){const B=3.2808*R;B>5280?vs(r,M,B/5280,_._getUIString("ScaleControl.Miles")):vs(r,M,B,_._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?vs(r,M,R/1852,_._getUIString("ScaleControl.NauticalMiles")):R>=1e3?vs(r,M,R/1e3,_._getUIString("ScaleControl.Kilometers")):vs(r,M,R,_._getUIString("ScaleControl.Meters"))}function vs(_,r,o,d){const h=function(y){const x=Math.pow(10,`${Math.floor(y)}`.length-1);let C=y/x;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(T){const M=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*M)/M}(C),x*C}(o);_.style.width=r*(h/o)+"px",_.innerHTML=`${h}&nbsp;${d}`}const dc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Qu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function hc(_){if(_){if(typeof _=="number"){const r=Math.round(Math.abs(_)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,_),"top-left":new l.P(r,r),"top-right":new l.P(-r,r),bottom:new l.P(0,-_),"bottom-left":new l.P(r,-r),"bottom-right":new l.P(-r,-r),left:new l.P(_,0),right:new l.P(-_,0)}}if(_ instanceof l.P||Array.isArray(_)){const r=l.P.convert(_);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.P.convert(_.center||[0,0]),top:l.P.convert(_.top||[0,0]),"top-left":l.P.convert(_["top-left"]||[0,0]),"top-right":l.P.convert(_["top-right"]||[0,0]),bottom:l.P.convert(_.bottom||[0,0]),"bottom-left":l.P.convert(_["bottom-left"]||[0,0]),"bottom-right":l.P.convert(_["bottom-right"]||[0,0]),left:l.P.convert(_.left||[0,0]),right:l.P.convert(_.right||[0,0])}}return hc(new l.P(0,0))}const fc=S;m.AJAXError=l.ci,m.Event=l.l,m.Evented=l.E,m.LngLat=l.Q,m.MercatorCoordinate=l.$,m.Point=l.P,m.addProtocol=l.cj,m.config=l.a,m.removeProtocol=l.ck,m.AttributionControl=Ya,m.BoxZoomHandler=ff,m.CanvasSource=xt,m.CooperativeGesturesHandler=qu,m.DoubleClickZoomHandler=yf,m.DragPanHandler=qa,m.DragRotateHandler=ic,m.EdgeInsets=On,m.FullscreenControl=class extends l.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var r;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=o==null?void 0:o.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){D.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=D.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);D.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=se,m.GeolocateControl=class extends l.E{constructor(_){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new l.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const o=new l.Q(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,h=this._map.getBearing(),y=l.e({bearing:h},this.options.fitBoundsOptions),x=Le.fromLngLat(o,d);this._map.fitBounds(x,y,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const o=new l.Q(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&bs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=D.create("button","maplibregl-ctrl-geolocate",this._container),D.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=D.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Xa({element:this._dotElement}),this._circleElement=D.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.l("trackuserlocationend")),this.fire(new l.l("userlocationlostfocus")))})}},this.options=l.e({},Xu,_)}onAdd(_){return this._map=_,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return l._(this,arguments,void 0,function*(r=!1){if(wo!==void 0&&!r)return wo;if(window.navigator.permissions===void 0)return wo=!!window.navigator.geolocation,wo;try{wo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{wo=!!window.navigator.geolocation}return wo})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),D.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,sa=0,bs=!1}_isOutOfMapMaxBounds(_){const r=this._map.getMaxBounds(),o=_.coords;return r&&(o.longitude<r.getWest()||o.longitude>r.getEast()||o.latitude<r.getSouth()||o.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),r=_.getSouthEast(),o=_.getNorthEast(),d=r.distanceTo(o),h=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":sa--,bs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.l("trackuserlocationstart")),this.fire(new l.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),sa++,sa>1?(_={maximumAge:6e5,timeout:0},bs=!0):(_=this.options.positionOptions,bs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.GlobeControl=class{constructor(){this._toggleProjection=()=>{var _;const r=(_=this._map.getProjection())===null||_===void 0?void 0:_.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var _;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((_=this._map.getProjection())===null||_===void 0?void 0:_.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(_){return this._map=_,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=D.create("button","maplibregl-ctrl-globe",this._container),D.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){D.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},m.Hash=Vo,m.ImageSource=Pe,m.KeyboardHandler=Gu,m.LngLatBounds=Le,m.LogoControl=sc,m.Map=class extends Dt{constructor(_){var r,o;l.cf.mark(l.cg.create);const d=Object.assign(Object.assign(Object.assign({},oa),_),{canvasContextAttributes:Object.assign(Object.assign({},oa.canvasContextAttributes),_.canvasContextAttributes)});if(d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const h=new Oi,y=new Yi;if(d.minZoom!==void 0&&h.setMinZoom(d.minZoom),d.maxZoom!==void 0&&h.setMaxZoom(d.maxZoom),d.minPitch!==void 0&&h.setMinPitch(d.minPitch),d.maxPitch!==void 0&&h.setMaxPitch(d.maxPitch),d.renderWorldCopies!==void 0&&h.setRenderWorldCopies(d.renderWorldCopies),super(h,y,{bearingSnap:d.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ku,this._controls=[],this._mapId=l.a3(),this._contextLost=C=>{C.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.l("webglcontextlost",{originalEvent:C}))},this._contextRestored=C=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.l("webglcontextrestored",{originalEvent:C}))},this._onMapScroll=C=>{if(C.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._maxTileCacheZoomLevels=d.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},d.canvasContextAttributes),this._trackResize=d.trackResize===!0,this._bearingSnap=d.bearingSnap,this._centerClampedToGround=d.centerClampedToGround,this._refreshExpiredTiles=d.refreshExpiredTiles===!0,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions===!0,this._collectResourceTiming=d.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},gn),d.locale),this._clickTolerance=d.clickTolerance,this._overridePixelRatio=d.pixelRatio,this._maxCanvasSize=d.maxCanvasSize,this.transformCameraUpdate=d.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=d.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=X.addThrottleControl(()=>this.isMoving()),this._requestManager=new we(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let C=!1;const T=Bu(M=>{this._trackResize&&!this._removed&&(this.resize(M),this.redraw())},50);this._resizeObserver=new ResizeObserver(M=>{C?T(M):C=!0}),this._resizeObserver.observe(this._container)}this.handlers=new oc(this,d),this._hash=d.hash&&new Vo(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,elevation:d.elevation,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,roll:d.roll}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,l.e({},d.fitBoundsOptions,{duration:0}))));const x=typeof d.style=="string"||((o=(r=d.style)===null||r===void 0?void 0:r.projection)===null||o===void 0?void 0:o.type)!=="globe";this.resize(null,x),this._localIdeographFontFamily=d.localIdeographFontFamily,this._validateStyle=d.validateStyle,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Ya(typeof d.attributionControl=="boolean"?void 0:d.attributionControl)),d.maplibreLogo&&this.addControl(new sc,d.logoPosition),this.on("style.load",()=>{if(x||this._resizeTransform(),this.transform.unmodified){const C=l.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(C)}}),this.on("data",C=>{this._update(C.dataType==="style"),this.fire(new l.l(`${C.dataType}data`,C))}),this.on("dataloading",C=>{this.fire(new l.l(`${C.dataType}dataloading`,C))}),this.on("dataabort",C=>{this.fire(new l.l("sourcedataabort",C))})}_getMapId(){return this._mapId}addControl(_,r){if(r===void 0&&(r=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new l.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=_.onAdd(this);this._controls.push(_);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(o,d.firstChild):d.appendChild(o),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new l.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(_);return r>-1&&this._controls.splice(r,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,r,o,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,r,o,d)}resize(_,r=!0){const[o,d]=this._containerDimensions(),h=this._getClampedPixelRatio(o,d);if(this._resizeCanvas(o,d,h),this.painter.resize(o,d,h),this.painter.overLimit()){const x=this.painter.context.gl;this._maxCanvasSize=[x.drawingBufferWidth,x.drawingBufferHeight];const C=this._getClampedPixelRatio(o,d);this._resizeCanvas(o,d,C),this.painter.resize(o,d,C)}this._resizeTransform(r);const y=!this._moving;return y&&(this.stop(),this.fire(new l.l("movestart",_)).fire(new l.l("move",_))),this.fire(new l.l("resize",_)),y&&this.fire(new l.l("moveend",_)),this}_resizeTransform(_=!0){var r;const[o,d]=this._containerDimensions();this.transform.resize(o,d,_),(r=this._requestedCameraState)===null||r===void 0||r.resize(o,d,_)}_getClampedPixelRatio(_,r){const{0:o,1:d}=this._maxCanvasSize,h=this.getPixelRatio(),y=_*h,x=r*h;return Math.min(y>o?o/y:1,x>d?d/x:1)*h}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Le.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.setMinZoom(_),this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.setMaxZoom(_),this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.setMinPitch(_),this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(_>=this.transform.minPitch)return this.transform.setMaxPitch(_),this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.setRenderWorldCopies(_),this._update()}project(_){return this.transform.locationToScreenPoint(l.Q.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.screenPointToLocation(l.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,r,o){if(_==="mouseenter"||_==="mouseover"){let d=!1;return{layers:r,listener:o,delegates:{mousemove:y=>{const x=r.filter(T=>this.getLayer(T)),C=x.length!==0?this.queryRenderedFeatures(y.point,{layers:x}):[];C.length?d||(d=!0,o.call(this,new an(_,this,y.originalEvent,{features:C}))):d=!1},mouseout:()=>{d=!1}}}}if(_==="mouseleave"||_==="mouseout"){let d=!1;return{layers:r,listener:o,delegates:{mousemove:x=>{const C=r.filter(T=>this.getLayer(T));(C.length!==0?this.queryRenderedFeatures(x.point,{layers:C}):[]).length?d=!0:d&&(d=!1,o.call(this,new an(_,this,x.originalEvent)))},mouseout:x=>{d&&(d=!1,o.call(this,new an(_,this,x.originalEvent)))}}}}{const d=h=>{const y=r.filter(C=>this.getLayer(C)),x=y.length!==0?this.queryRenderedFeatures(h.point,{layers:y}):[];x.length&&(h.features=x,o.call(this,h),delete h.features)};return{layers:r,listener:o,delegates:{[_]:d}}}}_saveDelegatedListener(_,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(r)}_removeDelegatedListener(_,r,o){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const d=this._delegatedListeners[_];for(let h=0;h<d.length;h++){const y=d[h];if(y.listener===o&&y.layers.length===r.length&&y.layers.every(x=>r.includes(x))){for(const x in y.delegates)this.off(x,y.delegates[x]);return void d.splice(h,1)}}}on(_,r,o){if(o===void 0)return super.on(_,r);const d=typeof r=="string"?[r]:r,h=this._createDelegatedListener(_,d,o);this._saveDelegatedListener(_,h);for(const y in h.delegates)this.on(y,h.delegates[y]);return{unsubscribe:()=>{this._removeDelegatedListener(_,d,o)}}}once(_,r,o){if(o===void 0)return super.once(_,r);const d=typeof r=="string"?[r]:r,h=this._createDelegatedListener(_,d,o);for(const y in h.delegates){const x=h.delegates[y];h.delegates[y]=(...C)=>{this._removeDelegatedListener(_,d,o),x(...C)}}this._saveDelegatedListener(_,h);for(const y in h.delegates)this.once(y,h.delegates[y]);return this}off(_,r,o){return o===void 0?super.off(_,r):(this._removeDelegatedListener(_,typeof r=="string"?[r]:r,o),this)}queryRenderedFeatures(_,r){if(!this.style)return[];let o;const d=_ instanceof l.P||Array.isArray(_),h=d?_:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:_)||{},h instanceof l.P||typeof h[0]=="number")o=[l.P.convert(h)];else{const y=l.P.convert(h[0]),x=l.P.convert(h[1]);o=[y,new l.P(x.x,y.y),x,new l.P(y.x,x.y),y]}return this.style.queryRenderedFeatures(o,r,this.transform)}querySourceFeatures(_,r){return this.style.querySourceFeatures(_,r)}setStyle(_,r){return(r=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(_,r))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const r=this._locale[_];if(r==null)throw new Error(`Missing UI string '${_}'`);return r}_updateStyle(_,r){var o,d;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,r));const h=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Ba(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,r,h):this.style.loadJSON(_,r,h),this):((d=(o=this.style)===null||o===void 0?void 0:o.projection)===null||d===void 0||d.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ba(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,r){if(typeof _=="string"){const o=this._requestManager.transformRequest(_,"Style");l.j(o,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new l.k(d))})}else typeof _=="object"&&this._updateDiff(_,r)}_updateDiff(_,r){try{this.style.setState(_,r)&&this._update(!0)}catch(o){l.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(_,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(_,r){return this._lazyInitEmptyStyle(),this.style.addSource(_,r),this._update(!0)}isSourceLoaded(_){const r=this.style&&this.style.sourceCaches[_];if(r!==void 0)return r.loaded();this.fire(new l.k(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const r=this.style.sourceCaches[_.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&r.reload();for(const o in this.style._layers){const d=this.style._layers[o];d.type==="hillshade"&&d.source===_.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new lo(this.painter,r,_),this.painter.renderToTexture=new ln(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=o=>{o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==_.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new l.l("terrain",{terrain:_})),this}getTerrain(){var _,r;return(r=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const r in _){const o=_[r]._tiles;for(const d in o){const h=o[d];if(h.state!=="loaded"&&h.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,r,o={}){const{pixelRatio:d=1,sdf:h=!1,stretchX:y,stretchY:x,content:C,textFitWidth:T,textFitHeight:M}=o;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||l.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new l.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:B,data:F}=r,Z=r;return this.style.addImage(_,{data:new l.R({width:R,height:B},new Uint8Array(F)),pixelRatio:d,stretchX:y,stretchY:x,content:C,textFitWidth:T,textFitHeight:M,sdf:h,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,_),this}}{const{width:R,height:B,data:F}=z.getImageData(r);this.style.addImage(_,{data:new l.R({width:R,height:B},F),pixelRatio:d,stretchX:y,stretchY:x,content:C,textFitWidth:T,textFitHeight:M,sdf:h,version:0})}}updateImage(_,r){const o=this.style.getImage(_);if(!o)return this.fire(new l.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||l.b(r)?z.getImageData(r):r,{width:h,height:y,data:x}=d;if(h===void 0||y===void 0)return this.fire(new l.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(h!==o.data.width||y!==o.data.height)return this.fire(new l.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(r instanceof HTMLImageElement||l.b(r));return o.data.replace(x,C),this.style.updateImage(_,o),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new l.k(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return X.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,r){return this._lazyInitEmptyStyle(),this.style.addLayer(_,r),this._update(!0)}moveLayer(_,r){return this.style.moveLayer(_,r),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,r,o){return this.style.setLayerZoomRange(_,r,o),this._update(!0)}setFilter(_,r,o={}){return this.style.setFilter(_,r,o),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,r,o,d={}){return this.style.setPaintProperty(_,r,o,d),this._update(!0)}getPaintProperty(_,r){return this.style.getPaintProperty(_,r)}setLayoutProperty(_,r,o,d={}){return this.style.setLayoutProperty(_,r,o,d),this._update(!0)}getLayoutProperty(_,r){return this.style.getLayoutProperty(_,r)}setGlyphs(_,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,r,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,r,o,d=>{d||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,r,o=>{o||this._update(!0)}),this}setLight(_,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(_,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(_,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,r){return this.style.setFeatureState(_,r),this._update()}removeFeatureState(_,r){return this.style.removeFeatureState(_,r),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,r=0;return this._container&&(_=this._container.clientWidth||400,r=this._container.clientHeight||300),[_,r]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const r=this._canvasContainer=D.create("div","maplibregl-canvas-container",_);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=D.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),d=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],d);const h=this._controlContainer=D.create("div","maplibregl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{y[x]=D.create("div",`maplibregl-ctrl-${x} `,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,r,o){this._canvas.width=Math.floor(o*_),this._canvas.height=Math.floor(o*r),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const _=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:_},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});let o=null;if(o=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,_):this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_),!o){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new sf(o,this.transform),H.testSupport(o)}migrateProjection(_,r){super.migrateProjection(_,r),this.painter.transform=_,this.fire(new l.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){var r,o,d,h,y;const x=this._idleTriggered?this._fadeDuration:0,C=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let T=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const B=this.transform.zoom,F=z.now();this.style.zoomHistory.update(B,F);const Z=new l.C(B,{now:F,fadeDuration:x,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),W=Z.crossFadingFactor();W===1&&W===this._crossFadingFactor||(T=!0,this._crossFadingFactor=W),this.style.update(Z)}const M=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0!==C;(d=this.style.projection)===null||d===void 0||d.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((h=this.style.projection)===null||h===void 0?void 0:h.transitionState,(y=this.style.projection)===null||y===void 0?void 0:y.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||M)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,x,this._crossSourceCollisions,M),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,showPadding:this.showPadding}),this.fire(new l.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.cf.mark(l.cg.load),this.fire(new l.l("load"))),this.style&&(this.style.hasTransitions()||T)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const R=this._sourcesDirty||this._styleDirty||this._placementDirty;return R||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.l("idle")),!this._loaded||this._fullyLoaded||R||(this._fullyLoaded=!0,l.cf.mark(l.cg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),X.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),D.remove(this._canvasContainer),D.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),l.cf.clearMetrics(),this._removed=!0,this.fire(new l.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,z.frame(this._frameRequest,_=>{l.cf.frame(_),this._frameRequest=null;try{this._render(_)}catch(r){if(!l.ch(r)&&!function(o){return o.message===Qh}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return vf}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(_){return this._lazyInitEmptyStyle(),this.style.setProjection(_),this._update(!0)}},m.MapMouseEvent=an,m.MapTouchEvent=hi,m.MapWheelEvent=Fu,m.Marker=Xa,m.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const r=this._map.getZoom(),o=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,o)=>{const d=this._map._getUIString(`NavigationControl.${o}`);r.title=d,r.setAttribute("aria-label",d)},this.options=l.e({},ac,_),this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),D.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),D.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=D.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Yu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){D.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,r){const o=D.create("button",_,this._container);return o.type="button",o.addEventListener("click",r),o}},m.Popup=class extends l.E{constructor(_){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&D.remove(this._content),this._container&&(D.remove(this._container),delete this._container),this._closeButton&&this._closeButton.removeEventListener("click",this._onClose),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var o;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=D.create("div","maplibregl-popup",this._map.getContainer()),this._tip=D.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?lc(this._lngLat,this._flatPos,this._map.transform):(o=this._lngLat)===null||o===void 0?void 0:o.wrap(),this._trackPointer&&!r)return;const d=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let h=this.options.anchor;const y=hc(this.options.offset);if(!h){const C=this._container.offsetWidth,T=this._container.offsetHeight;let M;M=d.y+y.bottom.y<T?["top"]:d.y>this._map.transform.height-T?["bottom"]:[],d.x<C/2?M.push("left"):d.x>this._map.transform.width-C/2&&M.push("right"),h=M.length===0?"bottom":M.join("-")}let x=d.add(y[h]);this.options.subpixelPositioning||(x=x.round()),D.setTransform(this._container,`${ys[h]} translate(${x.x}px,${x.y}px)`),cc(this._container,h,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(dc),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=l.Q.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const r=document.createDocumentFragment(),o=document.createElement("body");let d;for(o.innerHTML=_;d=o.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=D.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=D.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Qu);_&&_.focus()}},m.RasterDEMTileSource=te,m.RasterTileSource=ct,m.ScaleControl=class{constructor(_){this._onMove=()=>{uc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,uc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ju),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){D.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=_f,m.Style=Ba,m.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=D.create("button","maplibregl-ctrl-terrain",this._container),D.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){D.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=Uu,m.TwoFingersTouchRotateHandler=gf,m.TwoFingersTouchZoomHandler=mf,m.TwoFingersTouchZoomRotateHandler=Hu,m.VectorTileSource=st,m.VideoSource=Be,m.addSourceType=(_,r)=>l._(void 0,void 0,void 0,function*(){if(Me(_))throw new Error(`A source type called "${_}" already exists.`);((o,d)=>{it[o]=d})(_,r)}),m.clearPrewarmedResources=function(){const _=Jt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(nt),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.createTileMesh=za,m.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return Ht().getRTLTextPluginStatus()},m.getVersion=function(){return fc},m.getWorkerCount=function(){return bt.workerCount},m.getWorkerUrl=function(){return l.a.WORKER_URL},m.importScriptInWorkers=function(_){return tn().broadcast("IS",_)},m.prewarm=function(){lr().acquire(nt)},m.setMaxParallelImageRequests=function(_){l.a.MAX_PARALLEL_IMAGE_REQUESTS=_},m.setRTLTextPlugin=function(_,r){return Ht().setRTLTextPlugin(_,r)},m.setWorkerCount=function(_){bt.workerCount=_},m.setWorkerUrl=function(_){l.a.WORKER_URL=_}});var g=i;return g})}(up)),up.exports}var sB=oB();const Fg=nB(sB);function qw(e,t,i){if(e!==null)for(var c,p,g,m,l,S,I,A=0,O=0,z,D=e.type,H=D==="FeatureCollection",ue=D==="Feature",ye=H?e.features.length:1,ne=0;ne<ye;ne++){I=H?e.features[ne].geometry:ue?e.geometry:e,z=I?I.type==="GeometryCollection":!1,l=z?I.geometries.length:1;for(var xe=0;xe<l;xe++){var Ce=0,X=0;if(m=z?I.geometries[xe]:I,m!==null){S=m.coordinates;var we=m.type;switch(A=0,we){case null:break;case"Point":if(t(S,O,ne,Ce,X)===!1)return!1;O++,Ce++;break;case"LineString":case"MultiPoint":for(c=0;c<S.length;c++){if(t(S[c],O,ne,Ce,X)===!1)return!1;O++,we==="MultiPoint"&&Ce++}we==="LineString"&&Ce++;break;case"Polygon":case"MultiLineString":for(c=0;c<S.length;c++){for(p=0;p<S[c].length-A;p++){if(t(S[c][p],O,ne,Ce,X)===!1)return!1;O++}we==="MultiLineString"&&Ce++,we==="Polygon"&&X++}we==="Polygon"&&Ce++;break;case"MultiPolygon":for(c=0;c<S.length;c++){for(X=0,p=0;p<S[c].length;p++){for(g=0;g<S[c][p].length-A;g++){if(t(S[c][p][g],O,ne,Ce,X)===!1)return!1;O++}X++}Ce++}break;case"GeometryCollection":for(c=0;c<m.geometries.length;c++)if(qw(m.geometries[c],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function aB(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const i=[1/0,1/0,-1/0,-1/0];return qw(e,c=>{i[0]>c[0]&&(i[0]=c[0]),i[1]>c[1]&&(i[1]=c[1]),i[2]<c[0]&&(i[2]=c[0]),i[3]<c[1]&&(i[3]=c[1])}),i}const Ph=xP("map",()=>{const e=Xc({"weather-warnings":{id:"weather-warnings",homeMapLayerType:"fixed",title:"Weather Warnings",position:1,visible:!1,enabled:!1,icon:"icon-warning",multiTemporal:!1,legendConfig:{type:"basic",title:"Weather Warnings",items:[{name:"Extreme",color:"#d72f2a"},{name:"Severe",color:"#fe9900"},{name:"Moderate",color:"#ff0"},{name:"Minor",color:"#03ffff"}]}},"weather-forecast":{id:"weather-forecast",homeMapLayerType:"fixed",title:"Weather Forecast",position:2,visible:!1,enabled:!1,dateFormat:{currentTime:"yyyy-MM-dd HH:mm"},icon:"icon-heavy-rain",multiTemporal:!0}}),t=on(!1),i=Xt(()=>Object.values(e).filter(Xe=>Xe.enabled&&Xe.homeMapLayerType==="fixed").sort((Xe,wt)=>Xe.position-wt.position)),c=Xt(()=>Object.values(e).filter(Xe=>Xe.enabled&&Xe.homeMapLayerType==="dynamic").sort((Xe,wt)=>Xe.position-wt.position)),p=on({}),g=on({}),m=on(null),l=on({}),S=Xe=>{l.value=Xe},I=on([]),A=on(null),O=Xe=>{I.value=Xe},z=Xe=>{A.value=Xe},D=on([{label:"Voyager",value:"voyager"},{label:"Light",value:"carto-light"},{label:"Dark",value:"carto-dark"}]),H=on(D.value[0].value),ue=on(!0),ye=Xe=>{ue.value=Xe},ne=Xe=>{D.value.some(wt=>wt.value===Xe)?H.value=Xe:console.error("Invalid basemap selected")},xe=Xe=>{t.value=Xe},Ce=(Xe,wt)=>{e[Xe]?e[Xe].enabled=wt:console.warn(`Layer with ID '${Xe}' not found`)},X=(Xe,wt)=>{e[Xe]?e[Xe].visible=wt:console.warn(`Layer with ID '${Xe}' not found`)},we=(Xe,wt)=>{e[Xe]?e[Xe].title=wt:console.warn(`Layer with ID '${Xe}' not found`)},Oe=Xe=>{e["weather-forecast"]&&(e["weather-forecast"].dateFormat=Xe)},ke=(Xe,wt)=>{p.value={...p.value,[Xe]:wt}},Ve=(Xe,wt)=>{g.value={...g.value,[Xe]:wt}},We=Xe=>{m.value=Xe},ft=Xe=>e[Xe]||null,Qe=Xe=>{if(!Xe.id||e[Xe.id]){console.error("Invalid or duplicate layer ID");return}e[Xe.id]=Xe},Ye=Xt(()=>Object.values(e).filter(Xe=>Xe.visible));return{loading:t,layers:e,sortedFixedLayers:i,sortedDynamicLayers:c,visibleLayers:Ye,timeLayerDates:p,selectedTimeLayerDateIndex:g,activeTimeLayer:m,basemaps:D,selectedBasemap:H,showBoundary:ue,forecastSettings:l,zoomLocations:I,selectedZoomLocation:A,setZoomLocations:O,setSelectedZoomLocation:z,setLoading:xe,setTimeLayerDates:ke,setSelectedTimeLayerDateIndex:Ve,updateLayerState:Ce,updateLayerVisibility:X,setActiveTimeLayer:We,setWeatherForecastLayerDateFormat:Oe,getLayerById:ft,addLayer:Qe,setSelectedBasemap:ne,setShowBoundary:ye,updateLayerTitle:we,setForecastSettings:S}}),Kv=e=>{const{layerConfig:t,id:i}=e,c=t.source.tiles[0].replace("{geostore_id}","");return{source:{id:i,type:"raster",tiles:[c]},layer:{id:i,type:"raster"}}},lB=e=>{const{layerConfig:t,id:i}=e,c=t.source.tiles[0],{render:p}=t,g={source:{id:i,type:"vector",tiles:[c]},layers:[]};return p&&p.layers&&p.layers.forEach((m,l)=>{const S={id:`${i}-${l}`,...m,source:i};g.layers.push(S)}),g},Kw=(e,t)=>{const i=new URL(e),c=new URLSearchParams(i.search);return Object.keys(t).forEach(p=>{c.set(p,t[p])}),i.search=decodeURIComponent(c),decodeURIComponent(i.href)},cB=(e,t,i)=>{const c=e.getSource(t);if(c&&c.tiles){const p=c.tiles[0],g=Kw(p,i);e.getSource(t).tiles=[g],e.style.sourceCaches[t].clearTiles(),e.style.sourceCaches[t].update(e.transform),e.triggerRepaint()}},Yw=6048e5,uB=864e5,Xw=6e4,Jw=36e5,Qf=43200,Yv=1440,Xv=Symbol.for("constructDateFrom");function $o(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Xv in e?e[Xv](t):e instanceof Date?new e.constructor(t):new Date(t)}function An(e,t){return $o(t||e,e)}function dB(e,t,i){const c=An(e,i==null?void 0:i.in);return isNaN(t)?$o(e,NaN):(c.setDate(c.getDate()+t),c)}let hB={};function Ih(){return hB}function ih(e,t){var l,S,I,A;const i=Ih(),c=(t==null?void 0:t.weekStartsOn)??((S=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:S.weekStartsOn)??i.weekStartsOn??((A=(I=i.locale)==null?void 0:I.options)==null?void 0:A.weekStartsOn)??0,p=An(e,t==null?void 0:t.in),g=p.getDay(),m=(g<c?7:0)+g-c;return p.setDate(p.getDate()-m),p.setHours(0,0,0,0),p}function kp(e,t){return ih(e,{...t,weekStartsOn:1})}function Qw(e,t){const i=An(e,t==null?void 0:t.in),c=i.getFullYear(),p=$o(i,0);p.setFullYear(c+1,0,4),p.setHours(0,0,0,0);const g=kp(p),m=$o(i,0);m.setFullYear(c,0,4),m.setHours(0,0,0,0);const l=kp(m);return i.getTime()>=g.getTime()?c+1:i.getTime()>=l.getTime()?c:c-1}function Tp(e){const t=An(e),i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return i.setUTCFullYear(t.getFullYear()),+e-+i}function tm(e,...t){const i=$o.bind(null,e||t.find(c=>typeof c=="object"));return t.map(i)}function Jv(e,t){const i=An(e,t==null?void 0:t.in);return i.setHours(0,0,0,0),i}function fB(e,t,i){const[c,p]=tm(i==null?void 0:i.in,e,t),g=Jv(c),m=Jv(p),l=+g-Tp(g),S=+m-Tp(m);return Math.round((l-S)/uB)}function pB(e,t){const i=Qw(e,t),c=$o(e,0);return c.setFullYear(i,0,4),c.setHours(0,0,0,0),kp(c)}function dp(e,t){const i=+An(e)-+An(t);return i<0?-1:i>0?1:i}function mB(e){return $o(e,Date.now())}function gB(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function _B(e){return!(!gB(e)&&typeof e!="number"||isNaN(+An(e)))}function yB(e,t,i){const[c,p]=tm(i==null?void 0:i.in,e,t),g=c.getFullYear()-p.getFullYear(),m=c.getMonth()-p.getMonth();return g*12+m}function bB(e){return t=>{const c=(e?Math[e]:Math.trunc)(t);return c===0?0:c}}function vB(e,t){return+An(e)-+An(t)}function xB(e,t){const i=An(e,t==null?void 0:t.in);return i.setHours(23,59,59,999),i}function by(e,t){const i=An(e,t==null?void 0:t.in),c=i.getMonth();return i.setFullYear(i.getFullYear(),c+1,0),i.setHours(23,59,59,999),i}function wB(e,t){const i=An(e,t==null?void 0:t.in);return+xB(i,t)==+by(i,t)}function CB(e,t,i){const[c,p,g]=tm(i==null?void 0:i.in,e,e,t),m=dp(p,g),l=Math.abs(yB(p,g));if(l<1)return 0;p.getMonth()===1&&p.getDate()>27&&p.setDate(30),p.setMonth(p.getMonth()-m*l);let S=dp(p,g)===-m;wB(c)&&l===1&&dp(c,g)===1&&(S=!1);const I=m*(l-+S);return I===0?0:I}function SB(e,t,i){const c=vB(e,t)/1e3;return bB(i==null?void 0:i.roundingMethod)(c)}function kB(e,t){const i=An(e,t==null?void 0:t.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}const TB={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},PB=(e,t,i)=>{let c;const p=TB[e];return typeof p=="string"?c=p:t===1?c=p.one:c=p.other.replace("{{count}}",t.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+c:c+" ago":c};function Ng(e){return(t={})=>{const i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}const IB={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},MB={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},EB={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},AB={date:Ng({formats:IB,defaultWidth:"full"}),time:Ng({formats:MB,defaultWidth:"full"}),dateTime:Ng({formats:EB,defaultWidth:"full"})},LB={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},RB=(e,t,i,c)=>LB[e];function Cd(e){return(t,i)=>{const c=i!=null&&i.context?String(i.context):"standalone";let p;if(c==="formatting"&&e.formattingValues){const m=e.defaultFormattingWidth||e.defaultWidth,l=i!=null&&i.width?String(i.width):m;p=e.formattingValues[l]||e.formattingValues[m]}else{const m=e.defaultWidth,l=i!=null&&i.width?String(i.width):e.defaultWidth;p=e.values[l]||e.values[m]}const g=e.argumentCallback?e.argumentCallback(t):t;return p[g]}}const DB={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},OB={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zB={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$B={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},BB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},FB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NB=(e,t)=>{const i=Number(e),c=i%100;if(c>20||c<10)switch(c%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},jB={ordinalNumber:NB,era:Cd({values:DB,defaultWidth:"wide"}),quarter:Cd({values:OB,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Cd({values:zB,defaultWidth:"wide"}),day:Cd({values:$B,defaultWidth:"wide"}),dayPeriod:Cd({values:BB,defaultWidth:"wide",formattingValues:FB,defaultFormattingWidth:"wide"})};function Sd(e){return(t,i={})=>{const c=i.width,p=c&&e.matchPatterns[c]||e.matchPatterns[e.defaultMatchWidth],g=t.match(p);if(!g)return null;const m=g[0],l=c&&e.parsePatterns[c]||e.parsePatterns[e.defaultParseWidth],S=Array.isArray(l)?UB(l,O=>O.test(m)):VB(l,O=>O.test(m));let I;I=e.valueCallback?e.valueCallback(S):S,I=i.valueCallback?i.valueCallback(I):I;const A=t.slice(m.length);return{value:I,rest:A}}}function VB(e,t){for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return i}function UB(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i}function ZB(e){return(t,i={})=>{const c=t.match(e.matchPattern);if(!c)return null;const p=c[0],g=t.match(e.parsePattern);if(!g)return null;let m=e.valueCallback?e.valueCallback(g[0]):g[0];m=i.valueCallback?i.valueCallback(m):m;const l=t.slice(p.length);return{value:m,rest:l}}}const GB=/^(\d+)(th|st|nd|rd)?/i,WB=/\d+/i,HB={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qB={any:[/^b/i,/^(a|c)/i]},KB={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},YB={any:[/1/i,/2/i,/3/i,/4/i]},XB={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},JB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},QB={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},eF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},tF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nF={ordinalNumber:ZB({matchPattern:GB,parsePattern:WB,valueCallback:e=>parseInt(e,10)}),era:Sd({matchPatterns:HB,defaultMatchWidth:"wide",parsePatterns:qB,defaultParseWidth:"any"}),quarter:Sd({matchPatterns:KB,defaultMatchWidth:"wide",parsePatterns:YB,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Sd({matchPatterns:XB,defaultMatchWidth:"wide",parsePatterns:JB,defaultParseWidth:"any"}),day:Sd({matchPatterns:QB,defaultMatchWidth:"wide",parsePatterns:eF,defaultParseWidth:"any"}),dayPeriod:Sd({matchPatterns:tF,defaultMatchWidth:"any",parsePatterns:rF,defaultParseWidth:"any"})},e2={code:"en-US",formatDistance:PB,formatLong:AB,formatRelative:RB,localize:jB,match:nF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function iF(e,t){const i=An(e,t==null?void 0:t.in);return fB(i,kB(i))+1}function oF(e,t){const i=An(e,t==null?void 0:t.in),c=+kp(i)-+pB(i);return Math.round(c/Yw)+1}function t2(e,t){var A,O,z,D;const i=An(e,t==null?void 0:t.in),c=i.getFullYear(),p=Ih(),g=(t==null?void 0:t.firstWeekContainsDate)??((O=(A=t==null?void 0:t.locale)==null?void 0:A.options)==null?void 0:O.firstWeekContainsDate)??p.firstWeekContainsDate??((D=(z=p.locale)==null?void 0:z.options)==null?void 0:D.firstWeekContainsDate)??1,m=$o((t==null?void 0:t.in)||e,0);m.setFullYear(c+1,0,g),m.setHours(0,0,0,0);const l=ih(m,t),S=$o((t==null?void 0:t.in)||e,0);S.setFullYear(c,0,g),S.setHours(0,0,0,0);const I=ih(S,t);return+i>=+l?c+1:+i>=+I?c:c-1}function sF(e,t){var l,S,I,A;const i=Ih(),c=(t==null?void 0:t.firstWeekContainsDate)??((S=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:S.firstWeekContainsDate)??i.firstWeekContainsDate??((A=(I=i.locale)==null?void 0:I.options)==null?void 0:A.firstWeekContainsDate)??1,p=t2(e,t),g=$o((t==null?void 0:t.in)||e,0);return g.setFullYear(p,0,c),g.setHours(0,0,0,0),ih(g,t)}function aF(e,t){const i=An(e,t==null?void 0:t.in),c=+ih(i,t)-+sF(i,t);return Math.round(c/Yw)+1}function Vr(e,t){const i=e<0?"-":"",c=Math.abs(e).toString().padStart(t,"0");return i+c}const pa={y(e,t){const i=e.getFullYear(),c=i>0?i:1-i;return Vr(t==="yy"?c%100:c,t.length)},M(e,t){const i=e.getMonth();return t==="M"?String(i+1):Vr(i+1,2)},d(e,t){return Vr(e.getDate(),t.length)},a(e,t){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h(e,t){return Vr(e.getHours()%12||12,t.length)},H(e,t){return Vr(e.getHours(),t.length)},m(e,t){return Vr(e.getMinutes(),t.length)},s(e,t){return Vr(e.getSeconds(),t.length)},S(e,t){const i=t.length,c=e.getMilliseconds(),p=Math.trunc(c*Math.pow(10,i-3));return Vr(p,t.length)}},Lc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Qv={G:function(e,t,i){const c=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(c,{width:"abbreviated"});case"GGGGG":return i.era(c,{width:"narrow"});case"GGGG":default:return i.era(c,{width:"wide"})}},y:function(e,t,i){if(t==="yo"){const c=e.getFullYear(),p=c>0?c:1-c;return i.ordinalNumber(p,{unit:"year"})}return pa.y(e,t)},Y:function(e,t,i,c){const p=t2(e,c),g=p>0?p:1-p;if(t==="YY"){const m=g%100;return Vr(m,2)}return t==="Yo"?i.ordinalNumber(g,{unit:"year"}):Vr(g,t.length)},R:function(e,t){const i=Qw(e);return Vr(i,t.length)},u:function(e,t){const i=e.getFullYear();return Vr(i,t.length)},Q:function(e,t,i){const c=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(c);case"QQ":return Vr(c,2);case"Qo":return i.ordinalNumber(c,{unit:"quarter"});case"QQQ":return i.quarter(c,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(c,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(c,{width:"wide",context:"formatting"})}},q:function(e,t,i){const c=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(c);case"qq":return Vr(c,2);case"qo":return i.ordinalNumber(c,{unit:"quarter"});case"qqq":return i.quarter(c,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(c,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(c,{width:"wide",context:"standalone"})}},M:function(e,t,i){const c=e.getMonth();switch(t){case"M":case"MM":return pa.M(e,t);case"Mo":return i.ordinalNumber(c+1,{unit:"month"});case"MMM":return i.month(c,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(c,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(c,{width:"wide",context:"formatting"})}},L:function(e,t,i){const c=e.getMonth();switch(t){case"L":return String(c+1);case"LL":return Vr(c+1,2);case"Lo":return i.ordinalNumber(c+1,{unit:"month"});case"LLL":return i.month(c,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(c,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(c,{width:"wide",context:"standalone"})}},w:function(e,t,i,c){const p=aF(e,c);return t==="wo"?i.ordinalNumber(p,{unit:"week"}):Vr(p,t.length)},I:function(e,t,i){const c=oF(e);return t==="Io"?i.ordinalNumber(c,{unit:"week"}):Vr(c,t.length)},d:function(e,t,i){return t==="do"?i.ordinalNumber(e.getDate(),{unit:"date"}):pa.d(e,t)},D:function(e,t,i){const c=iF(e);return t==="Do"?i.ordinalNumber(c,{unit:"dayOfYear"}):Vr(c,t.length)},E:function(e,t,i){const c=e.getDay();switch(t){case"E":case"EE":case"EEE":return i.day(c,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(c,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(c,{width:"short",context:"formatting"});case"EEEE":default:return i.day(c,{width:"wide",context:"formatting"})}},e:function(e,t,i,c){const p=e.getDay(),g=(p-c.weekStartsOn+8)%7||7;switch(t){case"e":return String(g);case"ee":return Vr(g,2);case"eo":return i.ordinalNumber(g,{unit:"day"});case"eee":return i.day(p,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(p,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(p,{width:"short",context:"formatting"});case"eeee":default:return i.day(p,{width:"wide",context:"formatting"})}},c:function(e,t,i,c){const p=e.getDay(),g=(p-c.weekStartsOn+8)%7||7;switch(t){case"c":return String(g);case"cc":return Vr(g,t.length);case"co":return i.ordinalNumber(g,{unit:"day"});case"ccc":return i.day(p,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(p,{width:"narrow",context:"standalone"});case"cccccc":return i.day(p,{width:"short",context:"standalone"});case"cccc":default:return i.day(p,{width:"wide",context:"standalone"})}},i:function(e,t,i){const c=e.getDay(),p=c===0?7:c;switch(t){case"i":return String(p);case"ii":return Vr(p,t.length);case"io":return i.ordinalNumber(p,{unit:"day"});case"iii":return i.day(c,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(c,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(c,{width:"short",context:"formatting"});case"iiii":default:return i.day(c,{width:"wide",context:"formatting"})}},a:function(e,t,i){const p=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(p,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(p,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(p,{width:"wide",context:"formatting"})}},b:function(e,t,i){const c=e.getHours();let p;switch(c===12?p=Lc.noon:c===0?p=Lc.midnight:p=c/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(p,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(p,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(p,{width:"wide",context:"formatting"})}},B:function(e,t,i){const c=e.getHours();let p;switch(c>=17?p=Lc.evening:c>=12?p=Lc.afternoon:c>=4?p=Lc.morning:p=Lc.night,t){case"B":case"BB":case"BBB":return i.dayPeriod(p,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(p,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(p,{width:"wide",context:"formatting"})}},h:function(e,t,i){if(t==="ho"){let c=e.getHours()%12;return c===0&&(c=12),i.ordinalNumber(c,{unit:"hour"})}return pa.h(e,t)},H:function(e,t,i){return t==="Ho"?i.ordinalNumber(e.getHours(),{unit:"hour"}):pa.H(e,t)},K:function(e,t,i){const c=e.getHours()%12;return t==="Ko"?i.ordinalNumber(c,{unit:"hour"}):Vr(c,t.length)},k:function(e,t,i){let c=e.getHours();return c===0&&(c=24),t==="ko"?i.ordinalNumber(c,{unit:"hour"}):Vr(c,t.length)},m:function(e,t,i){return t==="mo"?i.ordinalNumber(e.getMinutes(),{unit:"minute"}):pa.m(e,t)},s:function(e,t,i){return t==="so"?i.ordinalNumber(e.getSeconds(),{unit:"second"}):pa.s(e,t)},S:function(e,t){return pa.S(e,t)},X:function(e,t,i){const c=e.getTimezoneOffset();if(c===0)return"Z";switch(t){case"X":return tx(c);case"XXXX":case"XX":return cl(c);case"XXXXX":case"XXX":default:return cl(c,":")}},x:function(e,t,i){const c=e.getTimezoneOffset();switch(t){case"x":return tx(c);case"xxxx":case"xx":return cl(c);case"xxxxx":case"xxx":default:return cl(c,":")}},O:function(e,t,i){const c=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ex(c,":");case"OOOO":default:return"GMT"+cl(c,":")}},z:function(e,t,i){const c=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ex(c,":");case"zzzz":default:return"GMT"+cl(c,":")}},t:function(e,t,i){const c=Math.trunc(+e/1e3);return Vr(c,t.length)},T:function(e,t,i){return Vr(+e,t.length)}};function ex(e,t=""){const i=e>0?"-":"+",c=Math.abs(e),p=Math.trunc(c/60),g=c%60;return g===0?i+String(p):i+String(p)+t+Vr(g,2)}function tx(e,t){return e%60===0?(e>0?"-":"+")+Vr(Math.abs(e)/60,2):cl(e,t)}function cl(e,t=""){const i=e>0?"-":"+",c=Math.abs(e),p=Vr(Math.trunc(c/60),2),g=Vr(c%60,2);return i+p+t+g}const rx=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},r2=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},lF=(e,t)=>{const i=e.match(/(P+)(p+)?/)||[],c=i[1],p=i[2];if(!p)return rx(e,t);let g;switch(c){case"P":g=t.dateTime({width:"short"});break;case"PP":g=t.dateTime({width:"medium"});break;case"PPP":g=t.dateTime({width:"long"});break;case"PPPP":default:g=t.dateTime({width:"full"});break}return g.replace("{{date}}",rx(c,t)).replace("{{time}}",r2(p,t))},cF={p:r2,P:lF},uF=/^D+$/,dF=/^Y+$/,hF=["D","DD","YY","YYYY"];function fF(e){return uF.test(e)}function pF(e){return dF.test(e)}function mF(e,t,i){const c=gF(e,t,i);if(console.warn(c),hF.includes(e))throw new RangeError(c)}function gF(e,t,i){const c=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${c} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _F=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yF=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bF=/^'([^]*?)'?$/,vF=/''/g,xF=/[a-zA-Z]/;function hp(e,t,i){var A,O,z,D;const c=Ih(),p=c.locale??e2,g=c.firstWeekContainsDate??((O=(A=c.locale)==null?void 0:A.options)==null?void 0:O.firstWeekContainsDate)??1,m=c.weekStartsOn??((D=(z=c.locale)==null?void 0:z.options)==null?void 0:D.weekStartsOn)??0,l=An(e,i==null?void 0:i.in);if(!_B(l))throw new RangeError("Invalid time value");let S=t.match(yF).map(H=>{const ue=H[0];if(ue==="p"||ue==="P"){const ye=cF[ue];return ye(H,p.formatLong)}return H}).join("").match(_F).map(H=>{if(H==="''")return{isToken:!1,value:"'"};const ue=H[0];if(ue==="'")return{isToken:!1,value:wF(H)};if(Qv[ue])return{isToken:!0,value:H};if(ue.match(xF))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ue+"`");return{isToken:!1,value:H}});p.localize.preprocessor&&(S=p.localize.preprocessor(l,S));const I={firstWeekContainsDate:g,weekStartsOn:m,locale:p};return S.map(H=>{if(!H.isToken)return H.value;const ue=H.value;(pF(ue)||fF(ue))&&mF(ue,t,String(e));const ye=Qv[ue[0]];return ye(l,ue,p.localize,I)}).join("")}function wF(e){const t=e.match(bF);return t?t[1].replace(vF,"'"):e}function CF(e,t,i){const c=Ih(),p=(i==null?void 0:i.locale)??c.locale??e2,g=2520,m=dp(e,t);if(isNaN(m))throw new RangeError("Invalid time value");const l=Object.assign({},i,{addSuffix:i==null?void 0:i.addSuffix,comparison:m}),[S,I]=tm(i==null?void 0:i.in,...m>0?[t,e]:[e,t]),A=SB(I,S),O=(Tp(I)-Tp(S))/1e3,z=Math.round((A-O)/60);let D;if(z<2)return i!=null&&i.includeSeconds?A<5?p.formatDistance("lessThanXSeconds",5,l):A<10?p.formatDistance("lessThanXSeconds",10,l):A<20?p.formatDistance("lessThanXSeconds",20,l):A<40?p.formatDistance("halfAMinute",0,l):A<60?p.formatDistance("lessThanXMinutes",1,l):p.formatDistance("xMinutes",1,l):z===0?p.formatDistance("lessThanXMinutes",1,l):p.formatDistance("xMinutes",z,l);if(z<45)return p.formatDistance("xMinutes",z,l);if(z<90)return p.formatDistance("aboutXHours",1,l);if(z<Yv){const H=Math.round(z/60);return p.formatDistance("aboutXHours",H,l)}else{if(z<g)return p.formatDistance("xDays",1,l);if(z<Qf){const H=Math.round(z/Yv);return p.formatDistance("xDays",H,l)}else if(z<Qf*2)return D=Math.round(z/Qf),p.formatDistance("aboutXMonths",D,l)}if(D=CB(I,S),D<12){const H=Math.round(z/Qf);return p.formatDistance("xMonths",H,l)}else{const H=D%12,ue=Math.trunc(D/12);return H<3?p.formatDistance("aboutXYears",ue,l):H<9?p.formatDistance("overXYears",ue,l):p.formatDistance("almostXYears",ue+1,l)}}function SF(e,t){return CF(e,mB(e),t)}function kF(e,t,i){return dB(e,-2,i)}function rm(e,t){const i=()=>$o(t==null?void 0:t.in,NaN),p=MF(e);let g;if(p.date){const I=EF(p.date,2);g=AF(I.restDateString,I.year)}if(!g||isNaN(+g))return i();const m=+g;let l=0,S;if(p.time&&(l=LF(p.time),isNaN(l)))return i();if(p.timezone){if(S=RF(p.timezone),isNaN(S))return i()}else{const I=new Date(m+l),A=An(0,t==null?void 0:t.in);return A.setFullYear(I.getUTCFullYear(),I.getUTCMonth(),I.getUTCDate()),A.setHours(I.getUTCHours(),I.getUTCMinutes(),I.getUTCSeconds(),I.getUTCMilliseconds()),A}return An(m+l+S,t==null?void 0:t.in)}const ep={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},TF=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,PF=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,IF=/^([+-])(\d{2})(?::?(\d{2}))?$/;function MF(e){const t={},i=e.split(ep.dateTimeDelimiter);let c;if(i.length>2)return t;if(/:/.test(i[0])?c=i[0]:(t.date=i[0],c=i[1],ep.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ep.timeZoneDelimiter)[0],c=e.substr(t.date.length,e.length))),c){const p=ep.timezone.exec(c);p?(t.time=c.replace(p[1],""),t.timezone=p[1]):t.time=c}return t}function EF(e,t){const i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),c=e.match(i);if(!c)return{year:NaN,restDateString:""};const p=c[1]?parseInt(c[1]):null,g=c[2]?parseInt(c[2]):null;return{year:g===null?p:g*100,restDateString:e.slice((c[1]||c[2]).length)}}function AF(e,t){if(t===null)return new Date(NaN);const i=e.match(TF);if(!i)return new Date(NaN);const c=!!i[4],p=kd(i[1]),g=kd(i[2])-1,m=kd(i[3]),l=kd(i[4]),S=kd(i[5])-1;if(c)return BF(t,l,S)?DF(t,l,S):new Date(NaN);{const I=new Date(0);return!zF(t,g,m)||!$F(t,p)?new Date(NaN):(I.setUTCFullYear(t,g,Math.max(p,m)),I)}}function kd(e){return e?parseInt(e):1}function LF(e){const t=e.match(PF);if(!t)return NaN;const i=jg(t[1]),c=jg(t[2]),p=jg(t[3]);return FF(i,c,p)?i*Jw+c*Xw+p*1e3:NaN}function jg(e){return e&&parseFloat(e.replace(",","."))||0}function RF(e){if(e==="Z")return 0;const t=e.match(IF);if(!t)return 0;const i=t[1]==="+"?-1:1,c=parseInt(t[2]),p=t[3]&&parseInt(t[3])||0;return NF(c,p)?i*(c*Jw+p*Xw):NaN}function DF(e,t,i){const c=new Date(0);c.setUTCFullYear(e,0,4);const p=c.getUTCDay()||7,g=(t-1)*7+i+1-p;return c.setUTCDate(c.getUTCDate()+g),c}const OF=[31,null,31,30,31,30,31,31,30,31,30,31];function n2(e){return e%400===0||e%4===0&&e%100!==0}function zF(e,t,i){return t>=0&&t<=11&&i>=1&&i<=(OF[t]||(n2(e)?29:28))}function $F(e,t){return t>=1&&t<=(n2(e)?366:365)}function BF(e,t,i){return t>=1&&t<=53&&i>=0&&i<=6}function FF(e,t,i){return e===24?t===0&&i===0:i>=0&&i<60&&t>=0&&t<60&&e>=0&&e<25}function NF(e,t){return t>=0&&t<=59}const jF=e=>{const t=new Date;return e.find(c=>new Date(c)>t)||null},VF=e=>{const t=new Date;return[...e].reverse().find(c=>new Date(c)<t)||null},UF=(e,t)=>{let i=e[e.length-1];switch(t){case"next_to_now":const c=jF(e);c&&(i=c);break;case"previous_to_now":const p=VF(e);p&&(i=p);break;case"latest_from_source":i=e[e.length-1];break;case"earliest_from_source":i=e[0];break}return i},i2=e=>{let t;return e<=0?t=4:e>3&&e<21||e%10>3?t=0:t=e%10,e+["th","st","nd","rd",""][t]};function ZF(e){let t;typeof e=="string"?t=rm(e):t=e;const i=by(t).getDate(),c=t.getDate();return c<=5?[1,"1-5th",1]:c<=10?[2,"6-10th",6]:c<=15?[3,"11-15th",11]:c<=20?[4,"16-20th",16]:c<=25?[4,"21-25th",21]:[6,`26-${i2(i)}`,26]}function GF(e){let t;typeof e=="string"?t=rm(e):t=e;const i=by(t).getDate(),c=t.getDate();return c<=10?[1,"1-10th",1]:c<=20?[2,"11-20th",11]:[3,`21-${i2(i)}`,21]}function WF(e,t,i){let c;typeof e=="string"?c=rm(e):c=e;let p=hp(c,t);if(i){if(i==="pentadal"){const[g,m]=ZF(e);p=`${p} - P${g} ${m}`}else if(i==="dekadal"){const[g,m]=GF(e);p=`${p} - D${g} ${m}`}}return p}/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var mr=e=>e!==void 0,o2=(e,t,i)=>t in e?e[t]:e[t]=i;const oh={ELEMENT:1,TEXT:3,CDATA_SECTION:4};class HF{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,i){return nm(t,i).join("")}}function nm(e,t){return s2(e,t,[]).join("")}function s2(e,t,i){if(e.nodeType===oh.CDATA_SECTION||e.nodeType===oh.TEXT)t?i.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(e.nodeValue);else{var c;for(c=e.firstChild;c;c=c.nextSibling)s2(c,t,i)}return i}function qF(e,t,i,c){for(var p=KF(t);p;p=YF(p)){var g=p.namespaceURI||null,m=e[g];if(mr(m)){var l=m[p.localName];mr(l)&&l.call(c,p,i)}}}function KF(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==oh.ELEMENT;)t=t.nextSibling;return t}function YF(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==oh.ELEMENT;)t=t.nextSibling;return t}function ai(e,t,i){return XF(e,t,i)}function XF(e,t,i){var c=mr(i)?i:{},p,g;for(p=0,g=e.length;p<g;++p)c[e[p]]=t;return c}function a2(e,t){return function(i,c){var p=e.call(mr(t)?t:this,i,c);if(mr(p)){var g=c[c.length-1];g.push(p)}}}function ni(e,t,i,c,p){return c.push(e),qF(t,i,c,p),c.pop()}function Vt(e,t,i){return function(c,p){let g=e.call(mr(i)?i:this,c,p);if(mr(g)){var m=p[p.length-1],l=mr(t)?t:c.localName;m[l]=g}}}function Ui(e,t,i){return function(c,p){var g=e.call(mr(i)?i:this,c,p);if(mr(g)){var m=p[p.length-1],l=mr(t)?t:c.localName,S=o2(m,l,[]);S.push(g)}}}const JF=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function QF(e){return e.replace(JF,"")}function yl(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return mr(t[1])||!1}function Bc(e){return $s(nm(e,!1))}function $s(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function Vg(e){return Pp(nm(e,!1))}function Pp(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function Tr(e){return QF(nm(e,!1))}const e4="http://www.w3.org/1999/xlink";function vy(e){return e.getAttributeNS(e4,"href")}function t4(e,t){return ni({},I4,e,t)}function l2(e){return[$s(e.getAttribute("minx")),$s(e.getAttribute("miny")),$s(e.getAttribute("maxx")),$s(e.getAttribute("maxy"))]}function r4(e,t){const i=l2(e),c=[$s(e.getAttribute("resx")),$s(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:i,res:c}}function n4(e,t){const i=l2(e);if(!(!mr(i[0])||!mr(i[1])||!mr(i[2])||!mr(i[3])))return i}function i4(e,t){const i=parseFloat(e.getAttribute("min")),c=parseFloat(e.getAttribute("max"));return{min:i,max:c}}function o4(e,t){const i=ni({},M4,e,t);if(!mr(i))return;const c=i.westBoundLongitude,p=i.southBoundLatitude,g=i.eastBoundLongitude,m=i.northBoundLatitude;if(!(!mr(c)||!mr(p)||!mr(g)||!mr(m)))return[c,p,g,m]}function s4(e,t){return ni({},w4,e,t)}function a4(e,t){return ni({},C4,e,t)}function l4(e,t){return ni({},S4,e,t)}function c4(e,t){return ni({},k4,e,t)}function u4(e,t){return ni({},T4,e,t)}function d4(e,t){return ni([],P4,e,t)}function h4(e,t){const i=yl(e.getAttribute("queryable"));return ni({queryable:mr(i)?i:!1},d2,e,t)}function f4(e,t){var i=t[t.length-1];const c=ni({},d2,e,t);if(!mr(c))return;let p=yl(e.getAttribute("queryable"));mr(p)||(p=i.queryable),c.queryable=mr(p)?p:!1;let g=Pp(e.getAttribute("cascaded"));mr(g)||(g=i.cascaded),c.cascaded=g;let m=yl(e.getAttribute("opaque"));mr(m)||(m=i.opaque),c.opaque=mr(m)?m:!1;let l=yl(e.getAttribute("noSubsets"));mr(l)||(l=i.noSubsets),c.noSubsets=mr(l)?l:!1;let S=$s(e.getAttribute("fixedWidth"));mr(S)||(S=i.fixedWidth),c.fixedWidth=S;let I=$s(e.getAttribute("fixedHeight"));mr(I)||(I=i.fixedHeight),c.fixedHeight=I;const A=["Style","CRS","AuthorityURL"];for(let z=0,D=A.length;z<D;z++){const H=A[z],ue=i[H];if(mr(ue)){let ye=o2(c,H,[]);ye=ye.concat(ue),c[H]=ye}}const O=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let z=0,D=O.length;z<D;z++){const H=O[z],ue=c[H];if(!mr(ue)){const ye=i[H];c[H]=ye}}return c}function p4(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:yl(e.getAttribute("multipleValues")),nearestValue:yl(e.getAttribute("nearestValue")),current:yl(e.getAttribute("current")),values:Tr(e)}}function Bs(e,t){return ni({},O4,e,t)}function m4(e,t){return ni({},E4,e,t)}function g4(e,t){return ni({},L4,e,t)}function _4(e,t){return ni({},R4,e,t)}function Ug(e,t){return ni({},A4,e,t)}function c2(e,t){var i=Bs(e,t);if(mr(i)){const c=[Pp(e.getAttribute("width")),Pp(e.getAttribute("height"))];return i.size=c,i}}function y4(e,t){var i=Bs(e,t);if(mr(i))return i.name=e.getAttribute("name"),i}function b4(e,t){var i=Bs(e,t);if(mr(i))return i.type=e.getAttribute("type"),i}function v4(e,t){return ni({},D4,e,t)}function u2(e,t){return ni([],z4,e,t)}const li=[null,"http://www.opengis.net/wms"],x4=ai(li,{Service:Vt(a4),Capability:Vt(s4)}),w4=ai(li,{Request:Vt(m4),Exception:Vt(d4),Layer:Vt(h4)}),C4=ai(li,{Name:Vt(Tr),Title:Vt(Tr),Abstract:Vt(Tr),KeywordList:Vt(u2),OnlineResource:Vt(vy),ContactInformation:Vt(l4),Fees:Vt(Tr),AccessConstraints:Vt(Tr),LayerLimit:Vt(Vg),MaxWidth:Vt(Vg),MaxHeight:Vt(Vg)}),S4=ai(li,{ContactPersonPrimary:Vt(c4),ContactPosition:Vt(Tr),ContactAddress:Vt(u4),ContactVoiceTelephone:Vt(Tr),ContactFacsimileTelephone:Vt(Tr),ContactElectronicMailAddress:Vt(Tr)}),k4=ai(li,{ContactPerson:Vt(Tr),ContactOrganization:Vt(Tr)}),T4=ai(li,{AddressType:Vt(Tr),Address:Vt(Tr),City:Vt(Tr),StateOrProvince:Vt(Tr),PostCode:Vt(Tr),Country:Vt(Tr)}),P4=ai(li,{Format:a2(Tr)}),d2=ai(li,{Name:Vt(Tr),Title:Vt(Tr),Abstract:Vt(Tr),KeywordList:Vt(u2),CRS:Ui(Tr),SRS:Ui(Tr),EX_GeographicBoundingBox:Vt(o4),LatLonBoundingBox:Vt(n4),BoundingBox:Ui(r4),Dimension:Ui(p4),Attribution:Vt(t4),AuthorityURL:Ui(y4),Identifier:Ui(Tr),MetadataURL:Ui(b4),DataURL:Ui(Bs),FeatureListURL:Ui(Bs),Style:Ui(v4),MinScaleDenominator:Vt(Bc),MaxScaleDenominator:Vt(Bc),ScaleHint:Vt(i4),Layer:Ui(f4)}),I4=ai(li,{Title:Vt(Tr),OnlineResource:Vt(vy),LogoURL:Vt(c2)}),M4=ai(li,{westBoundLongitude:Vt(Bc),eastBoundLongitude:Vt(Bc),southBoundLatitude:Vt(Bc),northBoundLatitude:Vt(Bc)}),E4=ai(li,{GetCapabilities:Vt(Ug),GetMap:Vt(Ug),GetFeatureInfo:Vt(Ug)}),A4=ai(li,{Format:Ui(Tr),DCPType:Ui(g4)}),L4=ai(li,{HTTP:Vt(_4)}),R4=ai(li,{Get:Vt(Bs),Post:Vt(Bs)}),D4=ai(li,{Name:Vt(Tr),Title:Vt(Tr),Abstract:Vt(Tr),LegendURL:Ui(c2),StyleSheetURL:Vt(Bs),StyleURL:Vt(Bs)}),O4=ai(li,{Format:Vt(Tr),OnlineResource:Vt(vy)}),z4=ai(li,{Keyword:a2(Tr)});class $4{constructor(t,i){!i&&typeof window<"u"&&(i=window.DOMParser),this.version=void 0,this._parser=new HF(i),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let i=t.firstChild;i;i=i.nextSibling)if(i.nodeType==oh.ELEMENT)return this.readFromNode(i);return null}readFromNode(t){return this.version=t.getAttribute("version"),ni({version:this.version},x4,t,[])||null}}function h2(e){const i=/P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)S)?)?/.exec(e),c=i[1]||0,p=i[2]||0,g=i[3]||0,m=i[4]||0,l=i[5]||0,S=parseFloat(i[6])||0;return((((c*365+p*30+g)*24+m)*60+l)*60+S)*1e3}function nx(e){const t=e.split("/"),i=new Date(t[0]),c=new Date(t[1]),p=h2(t[2]);let g=i.getTime();const m=[];for(;g<c.getTime();)m.push(new Date(g).toISOString()),g+=p;return m}const B4=async(e,t,i={})=>{var m,l,S,I;const c={service:"WMS",request:"GetCapabilities",version:"1.3.0"},p=new URLSearchParams({...c,...i}).toString(),g=`${e}?${p}`;try{const A=await fetch(g).then(ye=>ye.text()),O=new $4(A).toJSON(),D=(((l=(m=O==null?void 0:O.Capability)==null?void 0:m.Layer)==null?void 0:l.Layer)||[]).find(ye=>ye.Name===t)||{},H=((I=(S=D==null?void 0:D.Dimension)==null?void 0:S.find(ye=>ye.name==="time"))==null?void 0:I.values)||[];let ue=H.split("/");if(ue.length&&ue.length>1){const ye=ue[ue.length-1];if(h2(ye)/864e5<1){const Ce=new Date(ue[1]),X=kF(Ce,2);return nx(`${X.toISOString()}/${Ce.toISOString()}/${ye}`)}return nx(H)}return H.split(",")}catch(A){return console.error(`Error fetching or parsing GetCapabilities document: ${A.message}`),[]}},F4={version:8,glyphs:"https://tiles.basemaps.cartocdn.com/fonts/{fontstack}/{range}.pbf",sources:{voyager:{type:"raster",tiles:["https://a.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png","https://b.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png","https://c.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png","https://d.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png"]},"carto-dark":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}@2x.png","https://b.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}@2x.png","https://c.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}@2x.png","https://d.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}@2x.png"]},"carto-light":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}@2x.png","https://b.basemaps.cartocdn.com/light_all/{z}/{x}/{y}@2x.png","https://c.basemaps.cartocdn.com/light_all/{z}/{x}/{y}@2x.png","https://d.basemaps.cartocdn.com/light_all/{z}/{x}/{y}@2x.png"]},wikimedia:{type:"raster",tiles:["https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png"]}},layers:[{id:"voyager",source:"voyager",type:"raster",minzoom:0,maxzoom:22,layout:{visibility:"visible"},metadata:{"mapbox:groups":"background"}},{id:"carto-light",source:"carto-light",type:"raster",minzoom:0,maxzoom:22,layout:{visibility:"none"},metadata:{"mapbox:groups":"background"}},{id:"carto-dark",source:"carto-dark",type:"raster",minzoom:0,maxzoom:22,layout:{visibility:"none"},metadata:{"mapbox:groups":"background"}}]};function sh(e){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(e)}function N4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j4(e,t){for(var i=0;i<t.length;i++){var c=t[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,U4(c.key),c)}}function V4(e,t,i){return t&&j4(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U4(e){var t=Z4(e,"string");return sh(t)=="symbol"?t:t+""}function Z4(e,t){if(sh(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(sh(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var f2=function(){function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};N4(this,e),this.element=t,this.listener=i}return V4(e,[{key:"bindScrollListener",value:function(){this.scrollableParents=XM(this.element);for(var i=0;i<this.scrollableParents.length;i++)this.scrollableParents[i].addEventListener("scroll",this.listener)}},{key:"unbindScrollListener",value:function(){if(this.scrollableParents)for(var i=0;i<this.scrollableParents.length;i++)this.scrollableParents[i].removeEventListener("scroll",this.listener)}},{key:"destroy",value:function(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}])}(),ba={_loadedStyleNames:new Set,getLoadedStyleNames:function(){return this._loadedStyleNames},isStyleNameLoaded:function(t){return this._loadedStyleNames.has(t)},setLoadedStyleName:function(t){this._loadedStyleNames.add(t)},deleteLoadedStyleName:function(t){this._loadedStyleNames.delete(t)},clearLoadedStyleNames:function(){this._loadedStyleNames.clear()}};function ah(e){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ah(e)}function ix(e,t){return q4(e)||H4(e,t)||W4(e,t)||G4()}function G4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W4(e,t){if(e){if(typeof e=="string")return ox(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ox(e,t):void 0}}function ox(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,c=Array(t);i<t;i++)c[i]=e[i];return c}function H4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var c,p,g,m,l=[],S=!0,I=!1;try{if(g=(i=i.call(e)).next,t!==0)for(;!(S=(c=g.call(i)).done)&&(l.push(c.value),l.length!==t);S=!0);}catch(A){I=!0,p=A}finally{try{if(!S&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(I)throw p}}return l}}function q4(e){if(Array.isArray(e))return e}function sx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,c)}return i}function wr(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?sx(Object(i),!0).forEach(function(c){S_(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sx(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function S_(e,t,i){return(t=K4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function K4(e){var t=Y4(e,"string");return ah(t)=="symbol"?t:t+""}function Y4(e,t){if(ah(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(ah(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sr={_getMeta:function(){return[is(arguments.length<=0?void 0:arguments[0])||arguments.length<=0?void 0:arguments[0],_o(is(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:arguments.length<=1?void 0:arguments[1])]},_getConfig:function(t,i){var c,p,g;return(c=(t==null||(p=t.instance)===null||p===void 0?void 0:p.$primevue)||(i==null||(g=i.ctx)===null||g===void 0||(g=g.appContext)===null||g===void 0||(g=g.config)===null||g===void 0||(g=g.globalProperties)===null||g===void 0?void 0:g.$primevue))===null||c===void 0?void 0:c.config},_getOptionValue:my,_getPTValue:function(){var t,i,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,S=function(){var xe=sr._getOptionValue.apply(sr,arguments);return Gi(xe)||Jp(xe)?{class:xe}:xe},I=((t=c.binding)===null||t===void 0||(t=t.value)===null||t===void 0?void 0:t.ptOptions)||((i=c.$primevueConfig)===null||i===void 0?void 0:i.ptOptions)||{},A=I.mergeSections,O=A===void 0?!0:A,z=I.mergeProps,D=z===void 0?!1:z,H=l?sr._useDefaultPT(c,c.defaultPT(),S,g,m):void 0,ue=sr._usePT(c,sr._getPT(p,c.$name),S,g,wr(wr({},m),{},{global:H||{}})),ye=sr._getPTDatasets(c,g);return O||!O&&ue?D?sr._mergeProps(c,D,H,ue,ye):wr(wr(wr({},H),ue),ye):wr(wr({},ue),ye)},_getPTDatasets:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",c="data-pc-";return wr(wr({},i==="root"&&S_({},"".concat(c,"name"),es(t.$name))),{},S_({},"".concat(c,"section"),es(i)))},_getPT:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",c=arguments.length>2?arguments[2]:void 0,p=function(m){var l,S=c?c(m):m,I=es(i);return(l=S==null?void 0:S[I])!==null&&l!==void 0?l:S};return t&&Object.hasOwn(t,"_usept")?{_usept:t._usept,originalValue:p(t.originalValue),value:p(t.value)}:p(t)},_usePT:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,p=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0,m=function(ye){return c(ye,p,g)};if(i&&Object.hasOwn(i,"_usept")){var l,S=i._usept||((l=t.$primevueConfig)===null||l===void 0?void 0:l.ptOptions)||{},I=S.mergeSections,A=I===void 0?!0:I,O=S.mergeProps,z=O===void 0?!1:O,D=m(i.originalValue),H=m(i.value);return D===void 0&&H===void 0?void 0:Gi(H)?H:Gi(D)?D:A||!A&&H?z?sr._mergeProps(t,z,D,H):wr(wr({},D),H):H}return m(i)},_useDefaultPT:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0,p=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0;return sr._usePT(t,i,c,p,g)},_loadStyles:function(){var t,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0,p=arguments.length>2?arguments[2]:void 0,g=sr._getConfig(c,p),m={nonce:g==null||(t=g.csp)===null||t===void 0?void 0:t.nonce};sr._loadCoreStyles(i,m),sr._loadThemeStyles(i,m),sr._loadScopedThemeStyles(i,m),sr._removeThemeListeners(i),i.$loadStyles=function(){return sr._loadThemeStyles(i,m)},sr._themeChangeListener(i.$loadStyles)},_loadCoreStyles:function(){var t,i,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1?arguments[1]:void 0;if(!ba.isStyleNameLoaded((t=c.$style)===null||t===void 0?void 0:t.name)&&(i=c.$style)!==null&&i!==void 0&&i.name){var g;Er.loadCSS(p),(g=c.$style)===null||g===void 0||g.loadCSS(p),ba.setLoadedStyleName(c.$style.name)}},_loadThemeStyles:function(){var t,i,c,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=arguments.length>1?arguments[1]:void 0;if(!(p!=null&&p.isUnstyled()||(p==null||(t=p.theme)===null||t===void 0?void 0:t.call(p))==="none")){if(!Zr.isStyleNameLoaded("common")){var m,l,S=((m=p.$style)===null||m===void 0||(l=m.getCommonTheme)===null||l===void 0?void 0:l.call(m))||{},I=S.primitive,A=S.semantic,O=S.global,z=S.style;Er.load(I==null?void 0:I.css,wr({name:"primitive-variables"},g)),Er.load(A==null?void 0:A.css,wr({name:"semantic-variables"},g)),Er.load(O==null?void 0:O.css,wr({name:"global-variables"},g)),Er.loadStyle(wr({name:"global-style"},g),z),Zr.setLoadedStyleName("common")}if(!Zr.isStyleNameLoaded((i=p.$style)===null||i===void 0?void 0:i.name)&&(c=p.$style)!==null&&c!==void 0&&c.name){var D,H,ue,ye,ne=((D=p.$style)===null||D===void 0||(H=D.getDirectiveTheme)===null||H===void 0?void 0:H.call(D))||{},xe=ne.css,Ce=ne.style;(ue=p.$style)===null||ue===void 0||ue.load(xe,wr({name:"".concat(p.$style.name,"-variables")},g)),(ye=p.$style)===null||ye===void 0||ye.loadStyle(wr({name:"".concat(p.$style.name,"-style")},g),Ce),Zr.setLoadedStyleName(p.$style.name)}if(!Zr.isStyleNameLoaded("layer-order")){var X,we,Oe=(X=p.$style)===null||X===void 0||(we=X.getLayerOrderThemeCSS)===null||we===void 0?void 0:we.call(X);Er.load(Oe,wr({name:"layer-order",first:!0},g)),Zr.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,c=t.preset();if(c&&t.$attrSelector){var p,g,m,l=((p=t.$style)===null||p===void 0||(g=p.getPresetTheme)===null||g===void 0?void 0:g.call(p,c,"[".concat(t.$attrSelector,"]")))||{},S=l.css,I=(m=t.$style)===null||m===void 0?void 0:m.load(S,wr({name:"".concat(t.$attrSelector,"-").concat(t.$style.name)},i));t.scopedStyleEl=I.el}},_themeChangeListener:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};ba.clearLoadedStyleNames(),si.on("theme:change",t)},_removeThemeListeners:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};si.off("theme:change",t.$loadStyles)},_hook:function(t,i,c,p,g,m){var l,S,I="on".concat(VM(i)),A=sr._getConfig(p,g),O=c==null?void 0:c.$instance,z=sr._usePT(O,sr._getPT(p==null||(l=p.value)===null||l===void 0?void 0:l.pt,t),sr._getOptionValue,"hooks.".concat(I)),D=sr._useDefaultPT(O,A==null||(S=A.pt)===null||S===void 0||(S=S.directives)===null||S===void 0?void 0:S[t],sr._getOptionValue,"hooks.".concat(I)),H={el:c,binding:p,vnode:g,prevVnode:m};z==null||z(O,H),D==null||D(O,H)},_mergeProps:function(){for(var t=arguments.length>1?arguments[1]:void 0,i=arguments.length,c=new Array(i>2?i-2:0),p=2;p<i;p++)c[p-2]=arguments[p];return Xp(t)?t.apply(void 0,c):Bt.apply(void 0,c)},_extend:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=function(l,S,I,A,O){var z,D,H,ue;S._$instances=S._$instances||{};var ye=sr._getConfig(I,A),ne=S._$instances[t]||{},xe=kh(ne)?wr(wr({},i),i==null?void 0:i.methods):{};S._$instances[t]=wr(wr({},ne),{},{$name:t,$host:S,$binding:I,$modifiers:I==null?void 0:I.modifiers,$value:I==null?void 0:I.value,$el:ne.$el||S||void 0,$style:wr({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadStyle:function(){}},i==null?void 0:i.style),$primevueConfig:ye,$attrSelector:(z=S.$pd)===null||z===void 0||(z=z[t])===null||z===void 0?void 0:z.attrSelector,defaultPT:function(){return sr._getPT(ye==null?void 0:ye.pt,void 0,function(X){var we;return X==null||(we=X.directives)===null||we===void 0?void 0:we[t]})},isUnstyled:function(){var X,we;return((X=S._$instances[t])===null||X===void 0||(X=X.$binding)===null||X===void 0||(X=X.value)===null||X===void 0?void 0:X.unstyled)!==void 0?(we=S._$instances[t])===null||we===void 0||(we=we.$binding)===null||we===void 0||(we=we.value)===null||we===void 0?void 0:we.unstyled:ye==null?void 0:ye.unstyled},theme:function(){var X;return(X=S._$instances[t])===null||X===void 0||(X=X.$primevueConfig)===null||X===void 0?void 0:X.theme},preset:function(){var X;return(X=S._$instances[t])===null||X===void 0||(X=X.$binding)===null||X===void 0||(X=X.value)===null||X===void 0?void 0:X.dt},ptm:function(){var X,we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return sr._getPTValue(S._$instances[t],(X=S._$instances[t])===null||X===void 0||(X=X.$binding)===null||X===void 0||(X=X.value)===null||X===void 0?void 0:X.pt,we,wr({},Oe))},ptmo:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return sr._getPTValue(S._$instances[t],X,we,Oe,!1)},cx:function(){var X,we,Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(X=S._$instances[t])!==null&&X!==void 0&&X.isUnstyled()?void 0:sr._getOptionValue((we=S._$instances[t])===null||we===void 0||(we=we.$style)===null||we===void 0?void 0:we.classes,Oe,wr({},ke))},sx:function(){var X,we=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Oe?sr._getOptionValue((X=S._$instances[t])===null||X===void 0||(X=X.$style)===null||X===void 0?void 0:X.inlineStyles,we,wr({},ke)):void 0}},xe),S.$instance=S._$instances[t],(D=(H=S.$instance)[l])===null||D===void 0||D.call(H,S,I,A,O),S["$".concat(t)]=S.$instance,sr._hook(t,l,S,I,A,O),S.$pd||(S.$pd={}),S.$pd[t]=wr(wr({},(ue=S.$pd)===null||ue===void 0?void 0:ue[t]),{},{name:t,instance:S._$instances[t]})},p=function(l){var S,I,A,O=l._$instances[t],z=O==null?void 0:O.watch,D=function(ye){var ne,xe=ye.newValue,Ce=ye.oldValue;return z==null||(ne=z.config)===null||ne===void 0?void 0:ne.call(O,xe,Ce)},H=function(ye){var ne,xe=ye.newValue,Ce=ye.oldValue;return z==null||(ne=z["config.ripple"])===null||ne===void 0?void 0:ne.call(O,xe,Ce)};O.$watchersCallback={config:D,"config.ripple":H},z==null||(S=z.config)===null||S===void 0||S.call(O,O==null?void 0:O.$primevueConfig),va.on("config:change",D),z==null||(I=z["config.ripple"])===null||I===void 0||I.call(O,O==null||(A=O.$primevueConfig)===null||A===void 0?void 0:A.ripple),va.on("config:ripple:change",H)},g=function(l){var S=l._$instances[t].$watchersCallback;S&&(va.off("config:change",S.config),va.off("config:ripple:change",S["config.ripple"]))};return{created:function(l,S,I,A){l.$pd||(l.$pd={}),l.$pd[t]={name:t,attrSelector:QM("pd")},c("created",l,S,I,A)},beforeMount:function(l,S,I,A){var O;sr._loadStyles((O=l.$pd[t])===null||O===void 0?void 0:O.instance,S,I),c("beforeMount",l,S,I,A),p(l)},mounted:function(l,S,I,A){var O;sr._loadStyles((O=l.$pd[t])===null||O===void 0?void 0:O.instance,S,I),c("mounted",l,S,I,A)},beforeUpdate:function(l,S,I,A){c("beforeUpdate",l,S,I,A)},updated:function(l,S,I,A){var O;sr._loadStyles((O=l.$pd[t])===null||O===void 0?void 0:O.instance,S,I),c("updated",l,S,I,A)},beforeUnmount:function(l,S,I,A){var O;g(l),sr._removeThemeListeners((O=l.$pd[t])===null||O===void 0?void 0:O.instance),c("beforeUnmount",l,S,I,A)},unmounted:function(l,S,I,A){var O;(O=l.$pd[t])===null||O===void 0||(O=O.instance)===null||O===void 0||(O=O.scopedStyleEl)===null||O===void 0||(O=O.value)===null||O===void 0||O.remove(),c("unmounted",l,S,I,A)}}},extend:function(){var t=sr._getMeta.apply(sr,arguments),i=ix(t,2),c=i[0],p=i[1];return wr({extend:function(){var m=sr._getMeta.apply(sr,arguments),l=ix(m,2),S=l[0],I=l[1];return sr.extend(S,wr(wr(wr({},p),p==null?void 0:p.methods),I))}},sr._extend(c,p))}},X4=Er.extend({name:"focustrap-directive"}),J4=sr.extend({style:X4});function lh(e){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lh(e)}function ax(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,c)}return i}function lx(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ax(Object(i),!0).forEach(function(c){Q4(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ax(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function Q4(e,t,i){return(t=e6(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function e6(e){var t=t6(e,"string");return lh(t)=="symbol"?t:t+""}function t6(e,t){if(lh(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(lh(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r6=J4.extend("focustrap",{mounted:function(t,i){var c=i.value||{},p=c.disabled;p||(this.createHiddenFocusableElements(t,i),this.bind(t,i),this.autoElementFocus(t,i)),t.setAttribute("data-pd-focustrap",!0),this.$el=t},updated:function(t,i){var c=i.value||{},p=c.disabled;p&&this.unbind(t)},unmounted:function(t){this.unbind(t)},methods:{getComputedSelector:function(t){return':not(.p-hidden-focusable):not([data-p-hidden-focusable="true"])'.concat(t??"")},bind:function(t,i){var c=this,p=i.value||{},g=p.onFocusIn,m=p.onFocusOut;t.$_pfocustrap_mutationobserver=new MutationObserver(function(l){l.forEach(function(S){if(S.type==="childList"&&!t.contains(document.activeElement)){var I=function(O){var z=Dv(O)?Dv(O,c.getComputedSelector(t.$_pfocustrap_focusableselector))?O:Oc(t,c.getComputedSelector(t.$_pfocustrap_focusableselector)):Oc(O);return xr(z)?z:O.nextSibling&&I(O.nextSibling)};io(I(S.nextSibling))}})}),t.$_pfocustrap_mutationobserver.disconnect(),t.$_pfocustrap_mutationobserver.observe(t,{childList:!0}),t.$_pfocustrap_focusinlistener=function(l){return g&&g(l)},t.$_pfocustrap_focusoutlistener=function(l){return m&&m(l)},t.addEventListener("focusin",t.$_pfocustrap_focusinlistener),t.addEventListener("focusout",t.$_pfocustrap_focusoutlistener)},unbind:function(t){t.$_pfocustrap_mutationobserver&&t.$_pfocustrap_mutationobserver.disconnect(),t.$_pfocustrap_focusinlistener&&t.removeEventListener("focusin",t.$_pfocustrap_focusinlistener)&&(t.$_pfocustrap_focusinlistener=null),t.$_pfocustrap_focusoutlistener&&t.removeEventListener("focusout",t.$_pfocustrap_focusoutlistener)&&(t.$_pfocustrap_focusoutlistener=null)},autoFocus:function(t){this.autoElementFocus(this.$el,{value:lx(lx({},t),{},{autoFocus:!0})})},autoElementFocus:function(t,i){var c=i.value||{},p=c.autoFocusSelector,g=p===void 0?"":p,m=c.firstFocusableSelector,l=m===void 0?"":m,S=c.autoFocus,I=S===void 0?!1:S,A=Oc(t,"[autofocus]".concat(this.getComputedSelector(g)));I&&!A&&(A=Oc(t,this.getComputedSelector(l))),io(A)},onFirstHiddenElementFocus:function(t){var i,c=t.currentTarget,p=t.relatedTarget,g=p===c.$_pfocustrap_lasthiddenfocusableelement||!((i=this.$el)!==null&&i!==void 0&&i.contains(p))?Oc(c.parentElement,this.getComputedSelector(c.$_pfocustrap_focusableselector)):c.$_pfocustrap_lasthiddenfocusableelement;io(g)},onLastHiddenElementFocus:function(t){var i,c=t.currentTarget,p=t.relatedTarget,g=p===c.$_pfocustrap_firsthiddenfocusableelement||!((i=this.$el)!==null&&i!==void 0&&i.contains(p))?Fw(c.parentElement,this.getComputedSelector(c.$_pfocustrap_focusableselector)):c.$_pfocustrap_firsthiddenfocusableelement;io(g)},createHiddenFocusableElements:function(t,i){var c=this,p=i.value||{},g=p.tabIndex,m=g===void 0?0:g,l=p.firstFocusableSelector,S=l===void 0?"":l,I=p.lastFocusableSelector,A=I===void 0?"":I,O=function(ue){return Bw("span",{class:"p-hidden-accessible p-hidden-focusable",tabIndex:m,role:"presentation","aria-hidden":!0,"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0,onFocus:ue==null?void 0:ue.bind(c)})},z=O(this.onFirstHiddenElementFocus),D=O(this.onLastHiddenElementFocus);z.$_pfocustrap_lasthiddenfocusableelement=D,z.$_pfocustrap_focusableselector=S,z.setAttribute("data-pc-section","firstfocusableelement"),D.$_pfocustrap_firsthiddenfocusableelement=z,D.$_pfocustrap_focusableselector=A,D.setAttribute("data-pc-section","lastfocusableelement"),t.prepend(z),t.append(D)}}}),Ad=gy(),xy={name:"Portal",props:{appendTo:{type:[String,Object],default:"body"},disabled:{type:Boolean,default:!1}},data:function(){return{mounted:!1}},mounted:function(){this.mounted=yy()},computed:{inline:function(){return this.disabled||this.appendTo==="self"}}};function n6(e,t,i,c,p,g){return g.inline?un(e.$slots,"default",{key:0}):p.mounted?(_t(),Hn(Y_,{key:1,to:i.appendTo},[un(e.$slots,"default")],8,["to"])):Lr("",!0)}xy.render=n6;var i6=({dt:e})=>`
.p-ink {
    display: block;
    position: absolute;
    background: ${e("ripple.background")};
    border-radius: 100%;
    transform: scale(0);
    pointer-events: none;
}

.p-ink-active {
    animation: ripple 0.4s linear;
}

@keyframes ripple {
    100% {
        opacity: 0;
        transform: scale(2.5);
    }
}
`,o6={root:"p-ink"},s6=Er.extend({name:"ripple-directive",style:i6,classes:o6}),a6=sr.extend({style:s6});function ch(e){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ch(e)}function l6(e){return h6(e)||d6(e)||u6(e)||c6()}function c6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u6(e,t){if(e){if(typeof e=="string")return k_(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?k_(e,t):void 0}}function d6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function h6(e){if(Array.isArray(e))return k_(e)}function k_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,c=Array(t);i<t;i++)c[i]=e[i];return c}function cx(e,t,i){return(t=f6(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function f6(e){var t=p6(e,"string");return ch(t)=="symbol"?t:t+""}function p6(e,t){if(ch(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(ch(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p2=a6.extend("ripple",{watch:{"config.ripple":function(t){t?(this.createRipple(this.$host),this.bindEvents(this.$host),this.$host.setAttribute("data-pd-ripple",!0),this.$host.style.overflow="hidden",this.$host.style.position="relative"):(this.remove(this.$host),this.$host.removeAttribute("data-pd-ripple"))}},unmounted:function(t){this.remove(t)},timeout:void 0,methods:{bindEvents:function(t){t.addEventListener("mousedown",this.onMouseDown.bind(this))},unbindEvents:function(t){t.removeEventListener("mousedown",this.onMouseDown.bind(this))},createRipple:function(t){var i=this.getInk(t);i||(i=Bw("span",cx(cx({role:"presentation","aria-hidden":!0,"data-p-ink":!0,"data-p-ink-active":!1,class:!this.isUnstyled()&&this.cx("root"),onAnimationEnd:this.onAnimationEnd.bind(this)},this.$attrSelector,""),"p-bind",this.ptm("root"))),t.appendChild(i),this.$el=i)},remove:function(t){var i=this.getInk(t);i&&(this.$host.style.overflow="",this.$host.style.position="",this.unbindEvents(t),i.removeEventListener("animationend",this.onAnimationEnd),i.remove())},onMouseDown:function(t){var i=this,c=t.currentTarget,p=this.getInk(c);if(!(!p||getComputedStyle(p,null).display==="none")){if(!this.isUnstyled()&&zg(p,"p-ink-active"),p.setAttribute("data-p-ink-active","false"),!dl(p)&&!hl(p)){var g=Math.max(zw(c),YM(c));p.style.height=g+"px",p.style.width=g+"px"}var m=x_(c),l=t.pageX-m.left+document.body.scrollTop-hl(p)/2,S=t.pageY-m.top+document.body.scrollLeft-dl(p)/2;p.style.top=S+"px",p.style.left=l+"px",!this.isUnstyled()&&Aw(p,"p-ink-active"),p.setAttribute("data-p-ink-active","true"),this.timeout=setTimeout(function(){p&&(!i.isUnstyled()&&zg(p,"p-ink-active"),p.setAttribute("data-p-ink-active","false"))},401)}},onAnimationEnd:function(t){this.timeout&&clearTimeout(this.timeout),!this.isUnstyled()&&zg(t.currentTarget,"p-ink-active"),t.currentTarget.setAttribute("data-p-ink-active","false")},getInk:function(t){return t&&t.children?l6(t.children).find(function(i){return KM(i,"data-pc-name")==="ripple"}):void 0}}});function m6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"pc",t=Bk();return"".concat(e).concat(t.replace("v-","").replaceAll("-","_"))}var ux=Er.extend({name:"common"});function uh(e){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uh(e)}function g6(e){return _2(e)||_6(e)||g2(e)||m2()}function _6(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Td(e,t){return _2(e)||y6(e,t)||g2(e,t)||m2()}function m2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g2(e,t){if(e){if(typeof e=="string")return dx(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?dx(e,t):void 0}}function dx(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,c=Array(t);i<t;i++)c[i]=e[i];return c}function y6(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var c,p,g,m,l=[],S=!0,I=!1;try{if(g=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;S=!1}else for(;!(S=(c=g.call(i)).done)&&(l.push(c.value),l.length!==t);S=!0);}catch(A){I=!0,p=A}finally{try{if(!S&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(I)throw p}}return l}}function _2(e){if(Array.isArray(e))return e}function hx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,c)}return i}function yr(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?hx(Object(i),!0).forEach(function(c){Ld(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hx(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function Ld(e,t,i){return(t=b6(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b6(e){var t=v6(e,"string");return uh(t)=="symbol"?t:t+""}function v6(e,t){if(uh(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(uh(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qc={name:"BaseComponent",props:{pt:{type:Object,default:void 0},ptOptions:{type:Object,default:void 0},unstyled:{type:Boolean,default:void 0},dt:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0}},watch:{isUnstyled:{immediate:!0,handler:function(t){si.off("theme:change",this._loadCoreStyles),t||(this._loadCoreStyles(),this._themeChangeListener(this._loadCoreStyles))}},dt:{immediate:!0,handler:function(t,i){var c=this;si.off("theme:change",this._themeScopedListener),t?(this._loadScopedThemeStyles(t),this._themeScopedListener=function(){return c._loadScopedThemeStyles(t)},this._themeChangeListener(this._themeScopedListener)):this._unloadScopedThemeStyles()}}},scopedStyleEl:void 0,rootEl:void 0,uid:void 0,$attrSelector:void 0,beforeCreate:function(){var t,i,c,p,g,m,l,S,I,A,O,z=(t=this.pt)===null||t===void 0?void 0:t._usept,D=z?(i=this.pt)===null||i===void 0||(i=i.originalValue)===null||i===void 0?void 0:i[this.$.type.name]:void 0,H=z?(c=this.pt)===null||c===void 0||(c=c.value)===null||c===void 0?void 0:c[this.$.type.name]:this.pt;(p=H||D)===null||p===void 0||(p=p.hooks)===null||p===void 0||(g=p.onBeforeCreate)===null||g===void 0||g.call(p);var ue=(m=this.$primevueConfig)===null||m===void 0||(m=m.pt)===null||m===void 0?void 0:m._usept,ye=ue?(l=this.$primevue)===null||l===void 0||(l=l.config)===null||l===void 0||(l=l.pt)===null||l===void 0?void 0:l.originalValue:void 0,ne=ue?(S=this.$primevue)===null||S===void 0||(S=S.config)===null||S===void 0||(S=S.pt)===null||S===void 0?void 0:S.value:(I=this.$primevue)===null||I===void 0||(I=I.config)===null||I===void 0?void 0:I.pt;(A=ne||ye)===null||A===void 0||(A=A[this.$.type.name])===null||A===void 0||(A=A.hooks)===null||A===void 0||(O=A.onBeforeCreate)===null||O===void 0||O.call(A),this.$attrSelector=m6(),this.uid=this.$attrs.id||this.$attrSelector.replace("pc","pv_id_")},created:function(){this._hook("onCreated")},beforeMount:function(){var t;this.rootEl=em(wl(this.$el)?this.$el:(t=this.$el)===null||t===void 0?void 0:t.parentElement,"[".concat(this.$attrSelector,"]")),this.rootEl&&(this.rootEl.$pc=yr({name:this.$.type.name,attrSelector:this.$attrSelector},this.$params)),this._loadStyles(),this._hook("onBeforeMount")},mounted:function(){this._hook("onMounted")},beforeUpdate:function(){this._hook("onBeforeUpdate")},updated:function(){this._hook("onUpdated")},beforeUnmount:function(){this._hook("onBeforeUnmount")},unmounted:function(){this._removeThemeListeners(),this._unloadScopedThemeStyles(),this._hook("onUnmounted")},methods:{_hook:function(t){if(!this.$options.hostName){var i=this._usePT(this._getPT(this.pt,this.$.type.name),this._getOptionValue,"hooks.".concat(t)),c=this._useDefaultPT(this._getOptionValue,"hooks.".concat(t));i==null||i(),c==null||c()}},_mergeProps:function(t){for(var i=arguments.length,c=new Array(i>1?i-1:0),p=1;p<i;p++)c[p-1]=arguments[p];return Xp(t)?t.apply(void 0,c):Bt.apply(void 0,c)},_load:function(){ba.isStyleNameLoaded("base")||(Er.loadCSS(this.$styleOptions),this._loadGlobalStyles(),ba.setLoadedStyleName("base")),this._loadThemeStyles()},_loadStyles:function(){this._load(),this._themeChangeListener(this._load)},_loadCoreStyles:function(){var t,i;!ba.isStyleNameLoaded((t=this.$style)===null||t===void 0?void 0:t.name)&&(i=this.$style)!==null&&i!==void 0&&i.name&&(ux.loadCSS(this.$styleOptions),this.$options.style&&this.$style.loadCSS(this.$styleOptions),ba.setLoadedStyleName(this.$style.name))},_loadGlobalStyles:function(){var t=this._useGlobalPT(this._getOptionValue,"global.css",this.$params);xr(t)&&Er.load(t,yr({name:"global"},this.$styleOptions))},_loadThemeStyles:function(){var t,i;if(!(this.isUnstyled||this.$theme==="none")){if(!Zr.isStyleNameLoaded("common")){var c,p,g=((c=this.$style)===null||c===void 0||(p=c.getCommonTheme)===null||p===void 0?void 0:p.call(c))||{},m=g.primitive,l=g.semantic,S=g.global,I=g.style;Er.load(m==null?void 0:m.css,yr({name:"primitive-variables"},this.$styleOptions)),Er.load(l==null?void 0:l.css,yr({name:"semantic-variables"},this.$styleOptions)),Er.load(S==null?void 0:S.css,yr({name:"global-variables"},this.$styleOptions)),Er.loadStyle(yr({name:"global-style"},this.$styleOptions),I),Zr.setLoadedStyleName("common")}if(!Zr.isStyleNameLoaded((t=this.$style)===null||t===void 0?void 0:t.name)&&(i=this.$style)!==null&&i!==void 0&&i.name){var A,O,z,D,H=((A=this.$style)===null||A===void 0||(O=A.getComponentTheme)===null||O===void 0?void 0:O.call(A))||{},ue=H.css,ye=H.style;(z=this.$style)===null||z===void 0||z.load(ue,yr({name:"".concat(this.$style.name,"-variables")},this.$styleOptions)),(D=this.$style)===null||D===void 0||D.loadStyle(yr({name:"".concat(this.$style.name,"-style")},this.$styleOptions),ye),Zr.setLoadedStyleName(this.$style.name)}if(!Zr.isStyleNameLoaded("layer-order")){var ne,xe,Ce=(ne=this.$style)===null||ne===void 0||(xe=ne.getLayerOrderThemeCSS)===null||xe===void 0?void 0:xe.call(ne);Er.load(Ce,yr({name:"layer-order",first:!0},this.$styleOptions)),Zr.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(t){var i,c,p,g=((i=this.$style)===null||i===void 0||(c=i.getPresetTheme)===null||c===void 0?void 0:c.call(i,t,"[".concat(this.$attrSelector,"]")))||{},m=g.css,l=(p=this.$style)===null||p===void 0?void 0:p.load(m,yr({name:"".concat(this.$attrSelector,"-").concat(this.$style.name)},this.$styleOptions));this.scopedStyleEl=l.el},_unloadScopedThemeStyles:function(){var t;(t=this.scopedStyleEl)===null||t===void 0||(t=t.value)===null||t===void 0||t.remove()},_themeChangeListener:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};ba.clearLoadedStyleNames(),si.on("theme:change",t)},_removeThemeListeners:function(){si.off("theme:change",this._loadCoreStyles),si.off("theme:change",this._load),si.off("theme:change",this._themeScopedListener)},_getHostInstance:function(t){return t?this.$options.hostName?t.$.type.name===this.$options.hostName?t:this._getHostInstance(t.$parentInstance):t.$parentInstance:void 0},_getPropValue:function(t){var i;return this[t]||((i=this._getHostInstance(this))===null||i===void 0?void 0:i[t])},_getOptionValue:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return my(t,i,c)},_getPTValue:function(){var t,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,m=/./g.test(c)&&!!p[c.split(".")[0]],l=this._getPropValue("ptOptions")||((t=this.$primevueConfig)===null||t===void 0?void 0:t.ptOptions)||{},S=l.mergeSections,I=S===void 0?!0:S,A=l.mergeProps,O=A===void 0?!1:A,z=g?m?this._useGlobalPT(this._getPTClassValue,c,p):this._useDefaultPT(this._getPTClassValue,c,p):void 0,D=m?void 0:this._getPTSelf(i,this._getPTClassValue,c,yr(yr({},p),{},{global:z||{}})),H=this._getPTDatasets(c);return I||!I&&D?O?this._mergeProps(O,z,D,H):yr(yr(yr({},z),D),H):yr(yr({},D),H)},_getPTSelf:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length,c=new Array(i>1?i-1:0),p=1;p<i;p++)c[p-1]=arguments[p];return Bt(this._usePT.apply(this,[this._getPT(t,this.$name)].concat(c)),this._usePT.apply(this,[this.$_attrsPT].concat(c)))},_getPTDatasets:function(){var t,i,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",p="data-pc-",g=c==="root"&&xr((t=this.pt)===null||t===void 0?void 0:t["data-pc-section"]);return c!=="transition"&&yr(yr({},c==="root"&&yr(yr(Ld({},"".concat(p,"name"),es(g?(i=this.pt)===null||i===void 0?void 0:i["data-pc-section"]:this.$.type.name)),g&&Ld({},"".concat(p,"extend"),es(this.$.type.name))),{},Ld({},"".concat(this.$attrSelector),""))),{},Ld({},"".concat(p,"section"),es(c)))},_getPTClassValue:function(){var t=this._getOptionValue.apply(this,arguments);return Gi(t)||Jp(t)?{class:t}:t},_getPT:function(t){var i=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",p=arguments.length>2?arguments[2]:void 0,g=function(l){var S,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=p?p(l):l,O=es(c),z=es(i.$name);return(S=I?O!==z?A==null?void 0:A[O]:void 0:A==null?void 0:A[O])!==null&&S!==void 0?S:A};return t!=null&&t.hasOwnProperty("_usept")?{_usept:t._usept,originalValue:g(t.originalValue),value:g(t.value)}:g(t,!0)},_usePT:function(t,i,c,p){var g=function(ue){return i(ue,c,p)};if(t!=null&&t.hasOwnProperty("_usept")){var m,l=t._usept||((m=this.$primevueConfig)===null||m===void 0?void 0:m.ptOptions)||{},S=l.mergeSections,I=S===void 0?!0:S,A=l.mergeProps,O=A===void 0?!1:A,z=g(t.originalValue),D=g(t.value);return z===void 0&&D===void 0?void 0:Gi(D)?D:Gi(z)?z:I||!I&&D?O?this._mergeProps(O,z,D):yr(yr({},z),D):D}return g(t)},_useGlobalPT:function(t,i,c){return this._usePT(this.globalPT,t,i,c)},_useDefaultPT:function(t,i,c){return this._usePT(this.defaultPT,t,i,c)},ptm:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._getPTValue(this.pt,t,yr(yr({},this.$params),i))},ptmi:function(){var t,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=Bt(this.$_attrsWithoutPT,this.ptm(i,c));return p!=null&&p.hasOwnProperty("id")&&((t=p.id)!==null&&t!==void 0||(p.id=this.$id)),p},ptmo:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._getPTValue(t,i,yr({instance:this},c),!1)},cx:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isUnstyled?void 0:this._getOptionValue(this.$style.classes,t,yr(yr({},this.$params),i))},sx:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(i){var p=this._getOptionValue(this.$style.inlineStyles,t,yr(yr({},this.$params),c)),g=this._getOptionValue(ux.inlineStyles,t,yr(yr({},this.$params),c));return[g,p]}}},computed:{globalPT:function(){var t,i=this;return this._getPT((t=this.$primevueConfig)===null||t===void 0?void 0:t.pt,void 0,function(c){return _o(c,{instance:i})})},defaultPT:function(){var t,i=this;return this._getPT((t=this.$primevueConfig)===null||t===void 0?void 0:t.pt,void 0,function(c){return i._getOptionValue(c,i.$name,yr({},i.$params))||_o(c,yr({},i.$params))})},isUnstyled:function(){var t;return this.unstyled!==void 0?this.unstyled:(t=this.$primevueConfig)===null||t===void 0?void 0:t.unstyled},$id:function(){return this.$attrs.id||this.uid},$inProps:function(){var t,i=Object.keys(((t=this.$.vnode)===null||t===void 0?void 0:t.props)||{});return Object.fromEntries(Object.entries(this.$props).filter(function(c){var p=Td(c,1),g=p[0];return i==null?void 0:i.includes(g)}))},$theme:function(){var t;return(t=this.$primevueConfig)===null||t===void 0?void 0:t.theme},$style:function(){return yr(yr({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadStyle:function(){}},(this._getHostInstance(this)||{}).$style),this.$options.style)},$styleOptions:function(){var t;return{nonce:(t=this.$primevueConfig)===null||t===void 0||(t=t.csp)===null||t===void 0?void 0:t.nonce}},$primevueConfig:function(){var t;return(t=this.$primevue)===null||t===void 0?void 0:t.config},$name:function(){return this.$options.hostName||this.$.type.name},$params:function(){var t=this._getHostInstance(this)||this.$parent;return{instance:this,props:this.$props,state:this.$data,attrs:this.$attrs,parent:{instance:t,props:t==null?void 0:t.$props,state:t==null?void 0:t.$data,attrs:t==null?void 0:t.$attrs}}},$_attrsPT:function(){return Object.entries(this.$attrs||{}).filter(function(t){var i=Td(t,1),c=i[0];return c==null?void 0:c.startsWith("pt:")}).reduce(function(t,i){var c=Td(i,2),p=c[0],g=c[1],m=p.split(":"),l=g6(m),S=l.slice(1);return S==null||S.reduce(function(I,A,O,z){return!I[A]&&(I[A]=O===z.length-1?g:{}),I[A]},t),t},{})},$_attrsWithoutPT:function(){return Object.entries(this.$attrs||{}).filter(function(t){var i=Td(t,1),c=i[0];return!(c!=null&&c.startsWith("pt:"))}).reduce(function(t,i){var c=Td(i,2),p=c[0],g=c[1];return t[p]=g,t},{})}}},x6=({dt:e})=>`
.p-popover {
    margin-block-start: ${e("popover.gutter")};
    background: ${e("popover.background")};
    color: ${e("popover.color")};
    border: 1px solid ${e("popover.border.color")};
    border-radius: ${e("popover.border.radius")};
    box-shadow: ${e("popover.shadow")};
}

.p-popover-content {
    padding: ${e("popover.content.padding")};
}

.p-popover-flipped {
    margin-block-start: calc(${e("popover.gutter")} * -1);
    margin-block-end: ${e("popover.gutter")};
}

.p-popover-enter-from {
    opacity: 0;
    transform: scaleY(0.8);
}

.p-popover-leave-to {
    opacity: 0;
}

.p-popover-enter-active {
    transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1), opacity 0.12s cubic-bezier(0, 0, 0.2, 1);
}

.p-popover-leave-active {
    transition: opacity 0.1s linear;
}

.p-popover:after,
.p-popover:before {
    bottom: 100%;
    left: calc(${e("popover.arrow.offset")} + ${e("popover.arrow.left")});
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.p-popover:after {
    border-width: calc(${e("popover.gutter")} - 2px);
    margin-left: calc(-1 * (${e("popover.gutter")} - 2px));
    border-style: solid;
    border-color: transparent;
    border-bottom-color: ${e("popover.background")};
}

.p-popover:before {
    border-width: ${e("popover.gutter")};
    margin-left: calc(-1 * ${e("popover.gutter")});
    border-style: solid;
    border-color: transparent;
    border-bottom-color: ${e("popover.border.color")};
}

.p-popover-flipped:after,
.p-popover-flipped:before {
    bottom: auto;
    top: 100%;
}

.p-popover.p-popover-flipped:after {
    border-bottom-color: transparent;
    border-top-color: ${e("popover.background")};
}

.p-popover.p-popover-flipped:before {
    border-bottom-color: transparent;
    border-top-color: ${e("popover.border.color")};
}
`,w6={root:"p-popover p-component",content:"p-popover-content"},C6=Er.extend({name:"popover",style:x6,classes:w6}),S6={name:"BasePopover",extends:Qc,props:{dismissable:{type:Boolean,default:!0},appendTo:{type:[String,Object],default:"body"},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},breakpoints:{type:Object,default:null},closeOnEscape:{type:Boolean,default:!0}},style:C6,provide:function(){return{$pcPopover:this,$parentInstance:this}}},y2={name:"Popover",extends:S6,inheritAttrs:!1,emits:["show","hide"],data:function(){return{visible:!1}},watch:{dismissable:{immediate:!0,handler:function(t){t?this.bindOutsideClickListener():this.unbindOutsideClickListener()}}},selfClick:!1,target:null,eventTarget:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,styleElement:null,overlayEventListener:null,documentKeydownListener:null,beforeUnmount:function(){this.dismissable&&this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.destroyStyle(),this.unbindResizeListener(),this.target=null,this.container&&this.autoZIndex&&Zc.clear(this.container),this.overlayEventListener&&(Ad.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null),this.container=null},mounted:function(){this.breakpoints&&this.createStyle()},methods:{toggle:function(t,i){this.visible?this.hide():this.show(t,i)},show:function(t,i){this.visible=!0,this.eventTarget=t.currentTarget,this.target=i||t.currentTarget},hide:function(){this.visible=!1},onContentClick:function(){this.selfClick=!0},onEnter:function(t){var i=this;Ow(t,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),this.dismissable&&this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.autoZIndex&&Zc.set("overlay",t,this.baseZIndex+this.$primevue.config.zIndex.overlay),this.overlayEventListener=function(c){i.container.contains(c.target)&&(i.selfClick=!0)},this.focus(),Ad.on("overlay-click",this.overlayEventListener),this.$emit("show"),this.closeOnEscape&&this.bindDocumentKeyDownListener()},onLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.unbindDocumentKeyDownListener(),Ad.off("overlay-click",this.overlayEventListener),this.overlayEventListener=null,this.$emit("hide")},onAfterLeave:function(t){this.autoZIndex&&Zc.clear(t)},alignOverlay:function(){Dw(this.container,this.target,!1);var t=x_(this.container),i=x_(this.target),c=0;t.left<i.left&&(c=i.left-t.left),this.container.style.setProperty(cE("popover.arrow.left").name,"".concat(c,"px")),t.top<i.top&&(this.container.setAttribute("data-p-popover-flipped","true"),!this.isUnstyled&&Aw(this.container,"p-popover-flipped"))},onContentKeydown:function(t){t.code==="Escape"&&this.closeOnEscape&&(this.hide(),io(this.target))},onButtonKeydown:function(t){switch(t.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":t.preventDefault()}},focus:function(){var t=this.container.querySelector("[autofocus]");t&&t.focus()},onKeyDown:function(t){t.code==="Escape"&&this.closeOnEscape&&(this.visible=!1)},bindDocumentKeyDownListener:function(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeyDownListener:function(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},bindOutsideClickListener:function(){var t=this;!this.outsideClickListener&&yy()&&(this.outsideClickListener=function(i){t.visible&&!t.selfClick&&!t.isTargetClicked(i)&&(t.visible=!1),t.selfClick=!1},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null,this.selfClick=!1)},bindScrollListener:function(){var t=this;this.scrollHandler||(this.scrollHandler=new f2(this.target,function(){t.visible&&(t.visible=!1)})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var t=this;this.resizeListener||(this.resizeListener=function(){t.visible&&!jw()&&(t.visible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isTargetClicked:function(t){return this.eventTarget&&(this.eventTarget===t.target||this.eventTarget.contains(t.target))},containerRef:function(t){this.container=t},createStyle:function(){if(!this.styleElement&&!this.isUnstyled){var t;this.styleElement=document.createElement("style"),this.styleElement.type="text/css",Vw(this.styleElement,"nonce",(t=this.$primevue)===null||t===void 0||(t=t.config)===null||t===void 0||(t=t.csp)===null||t===void 0?void 0:t.nonce),document.head.appendChild(this.styleElement);var i="";for(var c in this.breakpoints)i+=`
                        @media screen and (max-width: `.concat(c,`) {
                            .p-popover[`).concat(this.$attrSelector,`] {
                                width: `).concat(this.breakpoints[c],` !important;
                            }
                        }
                    `);this.styleElement.innerHTML=i}},destroyStyle:function(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},onOverlayClick:function(t){Ad.emit("overlay-click",{originalEvent:t,target:this.target})}},directives:{focustrap:r6,ripple:p2},components:{Portal:xy}},k6=["aria-modal"];function T6(e,t,i,c,p,g){var m=no("Portal"),l=z1("focustrap");return _t(),Hn(m,{appendTo:e.appendTo},{default:Jo(function(){return[br(aw,Bt({name:"p-popover",onEnter:g.onEnter,onLeave:g.onLeave,onAfterLeave:g.onAfterLeave},e.ptm("transition")),{default:Jo(function(){return[p.visible?w1((_t(),Tt("div",Bt({key:0,ref:g.containerRef,role:"dialog","aria-modal":p.visible,onClick:t[3]||(t[3]=function(){return g.onOverlayClick&&g.onOverlayClick.apply(g,arguments)}),class:e.cx("root")},e.ptmi("root")),[e.$slots.container?un(e.$slots,"container",{key:0,closeCallback:g.hide,keydownCallback:function(I){return g.onButtonKeydown(I)}}):(_t(),Tt("div",Bt({key:1,class:e.cx("content"),onClick:t[0]||(t[0]=function(){return g.onContentClick&&g.onContentClick.apply(g,arguments)}),onMousedown:t[1]||(t[1]=function(){return g.onContentClick&&g.onContentClick.apply(g,arguments)}),onKeydown:t[2]||(t[2]=function(){return g.onContentKeydown&&g.onContentKeydown.apply(g,arguments)})},e.ptm("content")),[un(e.$slots,"default")],16))],16,k6)),[[l]]):Lr("",!0)]}),_:3},16,["onEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo"])}y2.render=T6;const Bo=(e,t)=>{const i=e.__vccOpts||e;for(const[c,p]of t)i[c]=p;return i},P6={class:"layer-icon"},I6=["xlink:href"],M6={class:"layer-title"},E6={__name:"LayerItem",props:{id:{type:String,required:!0},homeMapLayerType:{type:String,required:!0},position:{type:Number,required:!0},title:{type:String,required:!0},icon:{type:String,required:!1},enabled:{type:Boolean,required:!1,default:!1},visible:{type:Boolean,required:!1,default:!1},multiTemporal:{type:Boolean,required:!1,default:!1}},emits:["update:toggleLayer"],setup(e,{emit:t}){const i=e,c=t,p=on(i.visible),g=on(i.enabled);Kn(()=>i.visible,l=>{p.value=l}),Kn(()=>i.enabled,l=>{g.value=l});const m=()=>{p.value=!p.value,c("update:toggleLayer",{layerId:i.id,visible:p.value})};return(l,S)=>g.value?(_t(),Tt("div",{key:0,class:Ao(["layer-control",{active:e.visible}]),onClick:m},[lt("div",P6,[(_t(),Tt("svg",null,[lt("use",{"xlink:href":e.icon?`#${e.icon}`:"#icon-layers"},null,8,I6)]))]),lt("div",M6,ar(e.title),1)],2)):Lr("",!0)}},fx=Bo(E6,[["__scopeId","data-v-55faac78"]]);function A6(e){return F_()?(e1(e),!0):!1}const Zg=new WeakMap,L6=(...e)=>{var t;const i=e[0],c=(t=zo())==null?void 0:t.proxy;if(c==null&&!ey())throw new Error("injectLocal must be called in setup");return c&&Zg.has(c)&&i in Zg.get(c)?Zg.get(c)[i]:_l(...e)},R6=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const D6=Object.prototype.toString,O6=e=>D6.call(e)==="[object Object]";function z6(e,t){var i;if(typeof e=="number")return e+t;const c=((i=e.match(/^-?\d+\.?\d*/))==null?void 0:i[0])||"",p=e.slice(c.length),g=Number.parseFloat(c)+t;return Number.isNaN(g)?e:g+p}function Vd(e){return e.endsWith("rem")?Number.parseFloat(e)*16:Number.parseFloat(e)}function Gg(e){return Array.isArray(e)?e:[e]}function $6(e){return zo()}function B6(e,t=!0,i){$6()?Ia(e,i):t?e():wh(e)}function F6(e,t,i){return Kn(e,t,{...i,immediate:!0})}const wy=R6?window:void 0;function N6(e){var t;const i=Sa(e);return(t=i==null?void 0:i.$el)!=null?t:i}function j6(...e){const t=[],i=()=>{t.forEach(l=>l()),t.length=0},c=(l,S,I,A)=>(l.addEventListener(S,I,A),()=>l.removeEventListener(S,I,A)),p=Xt(()=>{const l=Gg(Sa(e[0])).filter(S=>S!=null);return l.every(S=>typeof S!="string")?l:void 0}),g=F6(()=>{var l,S;return[(S=(l=p.value)==null?void 0:l.map(I=>N6(I)))!=null?S:[wy].filter(I=>I!=null),Gg(Sa(p.value?e[1]:e[0])),Gg(Br(p.value?e[2]:e[1])),Sa(p.value?e[3]:e[2])]},([l,S,I,A])=>{if(i(),!(l!=null&&l.length)||!(S!=null&&S.length)||!(I!=null&&I.length))return;const O=O6(A)?{...A}:A;t.push(...l.flatMap(z=>S.flatMap(D=>I.map(H=>c(z,D,H,O)))))},{flush:"post"}),m=()=>{g(),i()};return A6(i),m}function V6(){const e=Ca(!1),t=zo();return t&&Ia(()=>{e.value=!0},t),e}function U6(e){const t=V6();return Xt(()=>(t.value,!!e()))}const Z6=Symbol("vueuse-ssr-width");function b2(){const e=ey()?L6(Z6,null):null;return typeof e=="number"?e:void 0}function Pd(e,t={}){const{window:i=wy,ssrWidth:c=b2()}=t,p=U6(()=>i&&"matchMedia"in i&&typeof i.matchMedia=="function"),g=Ca(typeof c=="number"),m=Ca(),l=Ca(!1),S=I=>{l.value=I.matches};return yT(()=>{if(g.value){g.value=!p.value;const I=Sa(e).split(",");l.value=I.some(A=>{const O=A.includes("not all"),z=A.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),D=A.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let H=!!(z||D);return z&&H&&(H=c>=Vd(z[1])),D&&H&&(H=c<=Vd(D[1])),O?!H:H});return}p.value&&(m.value=i.matchMedia(Sa(e)),l.value=m.value.matches)}),j6(m,"change",S,{passive:!0}),Xt(()=>l.value)}const v2={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function x2(e,t={}){function i(D,H){let ue=Sa(e[Sa(D)]);return H!=null&&(ue=z6(ue,H)),typeof ue=="number"&&(ue=`${ue}px`),ue}const{window:c=wy,strategy:p="min-width",ssrWidth:g=b2()}=t,m=typeof g=="number",l=m?Ca(!1):{value:!0};m&&B6(()=>l.value=!!c);function S(D,H){return!l.value&&m?D==="min"?g>=Vd(H):g<=Vd(H):c?c.matchMedia(`(${D}-width: ${H})`).matches:!1}const I=D=>Pd(()=>`(min-width: ${i(D)})`,t),A=D=>Pd(()=>`(max-width: ${i(D)})`,t),O=Object.keys(e).reduce((D,H)=>(Object.defineProperty(D,H,{get:()=>p==="min-width"?I(H):A(H),enumerable:!0,configurable:!0}),D),{});function z(){const D=Object.keys(e).map(H=>[H,O[H],Vd(i(H))]).sort((H,ue)=>H[2]-ue[2]);return Xt(()=>D.filter(([,H])=>H.value).map(([H])=>H))}return Object.assign(O,{greaterOrEqual:I,smallerOrEqual:A,greater(D){return Pd(()=>`(min-width: ${i(D,.1)})`,t)},smaller(D){return Pd(()=>`(max-width: ${i(D,-.1)})`,t)},between(D,H){return Pd(()=>`(min-width: ${i(D)}) and (max-width: ${i(H,-.1)})`,t)},isGreater(D){return S("min",i(D,.1))},isGreaterOrEqual(D){return S("min",i(D))},isSmaller(D){return S("max",i(D,-.1))},isSmallerOrEqual(D){return S("max",i(D))},isInBetween(D,H){return S("min",i(D))&&S("max",i(H,-.1))},current:z,active(){const D=z();return Xt(()=>D.value.length===0?"":D.value.at(p==="min-width"?-1:0))}})}const G6={key:0,class:"time-picker"},W6=["disabled"],H6={class:"date-display"},q6=["disabled"],K6={__name:"DateNavigator",setup(e){const t=Ph(),i=Xt(()=>{const D=t.activeTimeLayer;return D?t.timeLayerDates[D]||[]:[]}),c=Xt(()=>{const D=t.activeTimeLayer,H=D&&t.getLayerById(D);return H&&H.dateFormat?H.dateFormat:{currentTime:"yyyy-MM-dd HH:mm"}}),p=Xt(()=>{const D=t.activeTimeLayer;return D&&t.selectedTimeLayerDateIndex[D]||0}),g=Xt(()=>i.value[p.value]),m=Xt(()=>{if(g.value&&c.value){const{currentTime:D,asPeriod:H}=c.value;return WF(new Date(g.value),D,H)}return""}),l=Xt(()=>p.value>=i.value.length-1),S=Xt(()=>p.value<=0),I=()=>{if(!l.value){const D=p.value+1;t.setSelectedTimeLayerDateIndex(t.activeTimeLayer,D)}},A=()=>{if(!S.value){const D=p.value-1;t.setSelectedTimeLayerDateIndex(t.activeTimeLayer,D)}},z=x2(v2).greater("md");return(D,H)=>(_t(),Hn(Y_,{to:"#datepicker-mobile",disabled:Br(z)},[i.value.length?(_t(),Tt("div",G6,[lt("button",{onClick:A,disabled:S.value,class:"nav-button"},"◄",8,W6),lt("span",H6,ar(m.value),1),lt("button",{onClick:I,disabled:l.value,class:"nav-button"},"►",8,q6)])):Lr("",!0)],8,["disabled"]))}},Y6=Bo(K6,[["__scopeId","data-v-f0b81be5"]]),X6={key:0,class:"m-legend-item"},J6={class:"legend-title"},Q6={class:"item-wrapper"},e8={class:"item-label"},t8={__name:"LegendItemTypeBasic",props:{legendConfig:{type:Object,required:!1},title:{type:String,required:!1}},setup(e){const t=e,i=Xt(()=>t.legendConfig&&t.legendConfig.type==="basic"&&t.legendConfig.items&&t.legendConfig.items.length>0);return(c,p)=>i.value?(_t(),Tt("div",X6,[lt("div",J6,ar(t.title),1),lt("ul",null,[(_t(!0),Tt(Ar,null,Oo(t.legendConfig.items,g=>(_t(),Tt("li",Q6,[lt("div",{class:"item-color",style:ns({backgroundColor:g.color})},null,4),lt("div",e8,ar(g.name),1)]))),256))])])):Lr("",!0)}},r8=Bo(t8,[["__scopeId","data-v-e6813172"]]);var T_="http://www.w3.org/1999/xhtml";const px={svg:"http://www.w3.org/2000/svg",xhtml:T_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function w2(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),px.hasOwnProperty(t)?{space:px[t],local:e}:e}function n8(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===T_&&t.documentElement.namespaceURI===T_?t.createElement(e):t.createElementNS(i,e)}}function i8(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Cy(e){var t=w2(e);return(t.local?i8:n8)(t)}function o8(){}function C2(e){return e==null?o8:function(){return this.querySelector(e)}}function s8(e){typeof e!="function"&&(e=C2(e));for(var t=this._groups,i=t.length,c=new Array(i),p=0;p<i;++p)for(var g=t[p],m=g.length,l=c[p]=new Array(m),S,I,A=0;A<m;++A)(S=g[A])&&(I=e.call(S,S.__data__,A,g))&&("__data__"in S&&(I.__data__=S.__data__),l[A]=I);return new vo(c,this._parents)}function a8(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function l8(){return[]}function c8(e){return e==null?l8:function(){return this.querySelectorAll(e)}}function u8(e){return function(){return a8(e.apply(this,arguments))}}function d8(e){typeof e=="function"?e=u8(e):e=c8(e);for(var t=this._groups,i=t.length,c=[],p=[],g=0;g<i;++g)for(var m=t[g],l=m.length,S,I=0;I<l;++I)(S=m[I])&&(c.push(e.call(S,S.__data__,I,m)),p.push(S));return new vo(c,p)}function h8(e){return function(){return this.matches(e)}}function S2(e){return function(t){return t.matches(e)}}var f8=Array.prototype.find;function p8(e){return function(){return f8.call(this.children,e)}}function m8(){return this.firstElementChild}function g8(e){return this.select(e==null?m8:p8(typeof e=="function"?e:S2(e)))}var _8=Array.prototype.filter;function y8(){return Array.from(this.children)}function b8(e){return function(){return _8.call(this.children,e)}}function v8(e){return this.selectAll(e==null?y8:b8(typeof e=="function"?e:S2(e)))}function x8(e){typeof e!="function"&&(e=h8(e));for(var t=this._groups,i=t.length,c=new Array(i),p=0;p<i;++p)for(var g=t[p],m=g.length,l=c[p]=[],S,I=0;I<m;++I)(S=g[I])&&e.call(S,S.__data__,I,g)&&l.push(S);return new vo(c,this._parents)}function k2(e){return new Array(e.length)}function w8(){return new vo(this._enter||this._groups.map(k2),this._parents)}function Ip(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ip.prototype={constructor:Ip,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function C8(e){return function(){return e}}function S8(e,t,i,c,p,g){for(var m=0,l,S=t.length,I=g.length;m<I;++m)(l=t[m])?(l.__data__=g[m],c[m]=l):i[m]=new Ip(e,g[m]);for(;m<S;++m)(l=t[m])&&(p[m]=l)}function k8(e,t,i,c,p,g,m){var l,S,I=new Map,A=t.length,O=g.length,z=new Array(A),D;for(l=0;l<A;++l)(S=t[l])&&(z[l]=D=m.call(S,S.__data__,l,t)+"",I.has(D)?p[l]=S:I.set(D,S));for(l=0;l<O;++l)D=m.call(e,g[l],l,g)+"",(S=I.get(D))?(c[l]=S,S.__data__=g[l],I.delete(D)):i[l]=new Ip(e,g[l]);for(l=0;l<A;++l)(S=t[l])&&I.get(z[l])===S&&(p[l]=S)}function T8(e){return e.__data__}function P8(e,t){if(!arguments.length)return Array.from(this,T8);var i=t?k8:S8,c=this._parents,p=this._groups;typeof e!="function"&&(e=C8(e));for(var g=p.length,m=new Array(g),l=new Array(g),S=new Array(g),I=0;I<g;++I){var A=c[I],O=p[I],z=O.length,D=I8(e.call(A,A&&A.__data__,I,c)),H=D.length,ue=l[I]=new Array(H),ye=m[I]=new Array(H),ne=S[I]=new Array(z);i(A,O,ue,ye,ne,D,t);for(var xe=0,Ce=0,X,we;xe<H;++xe)if(X=ue[xe]){for(xe>=Ce&&(Ce=xe+1);!(we=ye[Ce])&&++Ce<H;);X._next=we||null}}return m=new vo(m,c),m._enter=l,m._exit=S,m}function I8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function M8(){return new vo(this._exit||this._groups.map(k2),this._parents)}function E8(e,t,i){var c=this.enter(),p=this,g=this.exit();return typeof e=="function"?(c=e(c),c&&(c=c.selection())):c=c.append(e+""),t!=null&&(p=t(p),p&&(p=p.selection())),i==null?g.remove():i(g),c&&p?c.merge(p).order():p}function A8(e){for(var t=e.selection?e.selection():e,i=this._groups,c=t._groups,p=i.length,g=c.length,m=Math.min(p,g),l=new Array(p),S=0;S<m;++S)for(var I=i[S],A=c[S],O=I.length,z=l[S]=new Array(O),D,H=0;H<O;++H)(D=I[H]||A[H])&&(z[H]=D);for(;S<p;++S)l[S]=i[S];return new vo(l,this._parents)}function L8(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var c=e[t],p=c.length-1,g=c[p],m;--p>=0;)(m=c[p])&&(g&&m.compareDocumentPosition(g)^4&&g.parentNode.insertBefore(m,g),g=m);return this}function R8(e){e||(e=D8);function t(O,z){return O&&z?e(O.__data__,z.__data__):!O-!z}for(var i=this._groups,c=i.length,p=new Array(c),g=0;g<c;++g){for(var m=i[g],l=m.length,S=p[g]=new Array(l),I,A=0;A<l;++A)(I=m[A])&&(S[A]=I);S.sort(t)}return new vo(p,this._parents).order()}function D8(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function O8(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function z8(){return Array.from(this)}function $8(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var c=e[t],p=0,g=c.length;p<g;++p){var m=c[p];if(m)return m}return null}function B8(){let e=0;for(const t of this)++e;return e}function F8(){return!this.node()}function N8(e){for(var t=this._groups,i=0,c=t.length;i<c;++i)for(var p=t[i],g=0,m=p.length,l;g<m;++g)(l=p[g])&&e.call(l,l.__data__,g,p);return this}function j8(e){return function(){this.removeAttribute(e)}}function V8(e){return function(){this.removeAttributeNS(e.space,e.local)}}function U8(e,t){return function(){this.setAttribute(e,t)}}function Z8(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function G8(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function W8(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function H8(e,t){var i=w2(e);if(arguments.length<2){var c=this.node();return i.local?c.getAttributeNS(i.space,i.local):c.getAttribute(i)}return this.each((t==null?i.local?V8:j8:typeof t=="function"?i.local?W8:G8:i.local?Z8:U8)(i,t))}function T2(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function q8(e){return function(){this.style.removeProperty(e)}}function K8(e,t,i){return function(){this.style.setProperty(e,t,i)}}function Y8(e,t,i){return function(){var c=t.apply(this,arguments);c==null?this.style.removeProperty(e):this.style.setProperty(e,c,i)}}function X8(e,t,i){return arguments.length>1?this.each((t==null?q8:typeof t=="function"?Y8:K8)(e,t,i??"")):J8(this.node(),e)}function J8(e,t){return e.style.getPropertyValue(t)||T2(e).getComputedStyle(e,null).getPropertyValue(t)}function Q8(e){return function(){delete this[e]}}function eN(e,t){return function(){this[e]=t}}function tN(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function rN(e,t){return arguments.length>1?this.each((t==null?Q8:typeof t=="function"?tN:eN)(e,t)):this.node()[e]}function P2(e){return e.trim().split(/^|\s+/)}function Sy(e){return e.classList||new I2(e)}function I2(e){this._node=e,this._names=P2(e.getAttribute("class")||"")}I2.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function M2(e,t){for(var i=Sy(e),c=-1,p=t.length;++c<p;)i.add(t[c])}function E2(e,t){for(var i=Sy(e),c=-1,p=t.length;++c<p;)i.remove(t[c])}function nN(e){return function(){M2(this,e)}}function iN(e){return function(){E2(this,e)}}function oN(e,t){return function(){(t.apply(this,arguments)?M2:E2)(this,e)}}function sN(e,t){var i=P2(e+"");if(arguments.length<2){for(var c=Sy(this.node()),p=-1,g=i.length;++p<g;)if(!c.contains(i[p]))return!1;return!0}return this.each((typeof t=="function"?oN:t?nN:iN)(i,t))}function aN(){this.textContent=""}function lN(e){return function(){this.textContent=e}}function cN(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function uN(e){return arguments.length?this.each(e==null?aN:(typeof e=="function"?cN:lN)(e)):this.node().textContent}function dN(){this.innerHTML=""}function hN(e){return function(){this.innerHTML=e}}function fN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function pN(e){return arguments.length?this.each(e==null?dN:(typeof e=="function"?fN:hN)(e)):this.node().innerHTML}function mN(){this.nextSibling&&this.parentNode.appendChild(this)}function gN(){return this.each(mN)}function _N(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yN(){return this.each(_N)}function bN(e){var t=typeof e=="function"?e:Cy(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function vN(){return null}function xN(e,t){var i=typeof e=="function"?e:Cy(e),c=t==null?vN:typeof t=="function"?t:C2(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),c.apply(this,arguments)||null)})}function wN(){var e=this.parentNode;e&&e.removeChild(this)}function CN(){return this.each(wN)}function SN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TN(e){return this.select(e?kN:SN)}function PN(e){return arguments.length?this.property("__data__",e):this.node().__data__}function IN(e){return function(t){e.call(this,t,this.__data__)}}function MN(e){return e.trim().split(/^|\s+/).map(function(t){var i="",c=t.indexOf(".");return c>=0&&(i=t.slice(c+1),t=t.slice(0,c)),{type:t,name:i}})}function EN(e){return function(){var t=this.__on;if(t){for(var i=0,c=-1,p=t.length,g;i<p;++i)g=t[i],(!e.type||g.type===e.type)&&g.name===e.name?this.removeEventListener(g.type,g.listener,g.options):t[++c]=g;++c?t.length=c:delete this.__on}}}function AN(e,t,i){return function(){var c=this.__on,p,g=IN(t);if(c){for(var m=0,l=c.length;m<l;++m)if((p=c[m]).type===e.type&&p.name===e.name){this.removeEventListener(p.type,p.listener,p.options),this.addEventListener(p.type,p.listener=g,p.options=i),p.value=t;return}}this.addEventListener(e.type,g,i),p={type:e.type,name:e.name,value:t,listener:g,options:i},c?c.push(p):this.__on=[p]}}function LN(e,t,i){var c=MN(e+""),p,g=c.length,m;if(arguments.length<2){var l=this.node().__on;if(l){for(var S=0,I=l.length,A;S<I;++S)for(p=0,A=l[S];p<g;++p)if((m=c[p]).type===A.type&&m.name===A.name)return A.value}return}for(l=t?AN:EN,p=0;p<g;++p)this.each(l(c[p],t,i));return this}function A2(e,t,i){var c=T2(e),p=c.CustomEvent;typeof p=="function"?p=new p(t,i):(p=c.document.createEvent("Event"),i?(p.initEvent(t,i.bubbles,i.cancelable),p.detail=i.detail):p.initEvent(t,!1,!1)),e.dispatchEvent(p)}function RN(e,t){return function(){return A2(this,e,t)}}function DN(e,t){return function(){return A2(this,e,t.apply(this,arguments))}}function ON(e,t){return this.each((typeof t=="function"?DN:RN)(e,t))}function*zN(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var c=e[t],p=0,g=c.length,m;p<g;++p)(m=c[p])&&(yield m)}var $N=[null];function vo(e,t){this._groups=e,this._parents=t}function BN(){return this}vo.prototype={constructor:vo,select:s8,selectAll:d8,selectChild:g8,selectChildren:v8,filter:x8,data:P8,enter:w8,exit:M8,join:E8,merge:A8,selection:BN,order:L8,sort:R8,call:O8,nodes:z8,node:$8,size:B8,empty:F8,each:N8,attr:H8,style:X8,property:rN,classed:sN,text:uN,html:pN,raise:gN,lower:yN,append:bN,insert:xN,remove:CN,clone:TN,datum:PN,on:LN,dispatch:ON,[Symbol.iterator]:zN};function FN(e){return typeof e=="string"?new vo([[document.querySelector(e)]],[document.documentElement]):new vo([[e]],$N)}function NN(e){return FN(Cy(e).call(document.documentElement))}function Gc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jN(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function L2(e){let t,i,c;e.length!==2?(t=Gc,i=(l,S)=>Gc(e(l),S),c=(l,S)=>e(l)-S):(t=e===Gc||e===jN?e:VN,i=e,c=e);function p(l,S,I=0,A=l.length){if(I<A){if(t(S,S)!==0)return A;do{const O=I+A>>>1;i(l[O],S)<0?I=O+1:A=O}while(I<A)}return I}function g(l,S,I=0,A=l.length){if(I<A){if(t(S,S)!==0)return A;do{const O=I+A>>>1;i(l[O],S)<=0?I=O+1:A=O}while(I<A)}return I}function m(l,S,I=0,A=l.length){const O=p(l,S,I,A-1);return O>I&&c(l[O-1],S)>-c(l[O],S)?O-1:O}return{left:p,center:m,right:g}}function VN(){return 0}function UN(e){return e===null?NaN:+e}function*ZN(e,t){for(let i of e)i!=null&&(i=+i)>=i&&(yield i)}const GN=L2(Gc),R2=GN.right;L2(UN).center;class mx extends Map{constructor(t,i=qN){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[c,p]of t)this.set(c,p)}get(t){return super.get(gx(this,t))}has(t){return super.has(gx(this,t))}set(t,i){return super.set(WN(this,t),i)}delete(t){return super.delete(HN(this,t))}}function gx({_intern:e,_key:t},i){const c=t(i);return e.has(c)?e.get(c):i}function WN({_intern:e,_key:t},i){const c=t(i);return e.has(c)?e.get(c):(e.set(c,i),i)}function HN({_intern:e,_key:t},i){const c=t(i);return e.has(c)&&(i=e.get(c),e.delete(c)),i}function qN(e){return e!==null&&typeof e=="object"?e.valueOf():e}function KN(e=Gc){if(e===Gc)return D2;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,i)=>{const c=e(t,i);return c||c===0?c:(e(i,i)===0)-(e(t,t)===0)}}function D2(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const YN=Math.sqrt(50),XN=Math.sqrt(10),JN=Math.sqrt(2);function Mp(e,t,i){const c=(t-e)/Math.max(0,i),p=Math.floor(Math.log10(c)),g=c/Math.pow(10,p),m=g>=YN?10:g>=XN?5:g>=JN?2:1;let l,S,I;return p<0?(I=Math.pow(10,-p)/m,l=Math.round(e*I),S=Math.round(t*I),l/I<e&&++l,S/I>t&&--S,I=-I):(I=Math.pow(10,p)*m,l=Math.round(e/I),S=Math.round(t/I),l*I<e&&++l,S*I>t&&--S),S<l&&.5<=i&&i<2?Mp(e,t,i*2):[l,S,I]}function QN(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const c=t<e,[p,g,m]=c?Mp(t,e,i):Mp(e,t,i);if(!(g>=p))return[];const l=g-p+1,S=new Array(l);if(c)if(m<0)for(let I=0;I<l;++I)S[I]=(g-I)/-m;else for(let I=0;I<l;++I)S[I]=(g-I)*m;else if(m<0)for(let I=0;I<l;++I)S[I]=(p+I)/-m;else for(let I=0;I<l;++I)S[I]=(p+I)*m;return S}function P_(e,t,i){return t=+t,e=+e,i=+i,Mp(e,t,i)[2]}function ej(e,t,i){t=+t,e=+e,i=+i;const c=t<e,p=c?P_(t,e,i):P_(e,t,i);return(c?-1:1)*(p<0?1/-p:p)}function _x(e,t){let i;for(const c of e)c!=null&&(i<c||i===void 0&&c>=c)&&(i=c);return i}function yx(e,t){let i;for(const c of e)c!=null&&(i>c||i===void 0&&c>=c)&&(i=c);return i}function O2(e,t,i=0,c=1/0,p){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),c=Math.floor(Math.min(e.length-1,c)),!(i<=t&&t<=c))return e;for(p=p===void 0?D2:KN(p);c>i;){if(c-i>600){const S=c-i+1,I=t-i+1,A=Math.log(S),O=.5*Math.exp(2*A/3),z=.5*Math.sqrt(A*O*(S-O)/S)*(I-S/2<0?-1:1),D=Math.max(i,Math.floor(t-I*O/S+z)),H=Math.min(c,Math.floor(t+(S-I)*O/S+z));O2(e,t,D,H,p)}const g=e[t];let m=i,l=c;for(Id(e,i,t),p(e[c],g)>0&&Id(e,i,c);m<l;){for(Id(e,m,l),++m,--l;p(e[m],g)<0;)++m;for(;p(e[l],g)>0;)--l}p(e[i],g)===0?Id(e,i,l):(++l,Id(e,l,c)),l<=t&&(i=l+1),t<=l&&(c=l-1)}return e}function Id(e,t,i){const c=e[t];e[t]=e[i],e[i]=c}function tj(e,t,i){if(e=Float64Array.from(ZN(e)),!(!(c=e.length)||isNaN(t=+t))){if(t<=0||c<2)return yx(e);if(t>=1)return _x(e);var c,p=(c-1)*t,g=Math.floor(p),m=_x(O2(e,g).subarray(0,g+1)),l=yx(e.subarray(g+1));return m+(l-m)*(p-g)}}function I_(e,t,i){e=+e,t=+t,i=(p=arguments.length)<2?(t=e,e=0,1):p<3?1:+i;for(var c=-1,p=Math.max(0,Math.ceil((t-e)/i))|0,g=new Array(p);++c<p;)g[c]=e+c*i;return g}function ky(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function z2(e,t){var i=Object.create(e.prototype);for(var c in t)i[c]=t[c];return i}function Mh(){}var dh=.7,Ep=1/dh,Wc="\\s*([+-]?\\d+)\\s*",hh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rj=/^#([0-9a-f]{3,8})$/,nj=new RegExp(`^rgb\\(${Wc},${Wc},${Wc}\\)$`),ij=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),oj=new RegExp(`^rgba\\(${Wc},${Wc},${Wc},${hh}\\)$`),sj=new RegExp(`^rgba\\(${rs},${rs},${rs},${hh}\\)$`),aj=new RegExp(`^hsl\\(${hh},${rs},${rs}\\)$`),lj=new RegExp(`^hsla\\(${hh},${rs},${rs},${hh}\\)$`),bx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ky(Mh,fh,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vx,formatHex:vx,formatHex8:cj,formatHsl:uj,formatRgb:xx,toString:xx});function vx(){return this.rgb().formatHex()}function cj(){return this.rgb().formatHex8()}function uj(){return $2(this).formatHsl()}function xx(){return this.rgb().formatRgb()}function fh(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=rj.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?wx(t):i===3?new Zi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?tp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?tp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nj.exec(e))?new Zi(t[1],t[2],t[3],1):(t=ij.exec(e))?new Zi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oj.exec(e))?tp(t[1],t[2],t[3],t[4]):(t=sj.exec(e))?tp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=aj.exec(e))?kx(t[1],t[2]/100,t[3]/100,1):(t=lj.exec(e))?kx(t[1],t[2]/100,t[3]/100,t[4]):bx.hasOwnProperty(e)?wx(bx[e]):e==="transparent"?new Zi(NaN,NaN,NaN,0):null}function wx(e){return new Zi(e>>16&255,e>>8&255,e&255,1)}function tp(e,t,i,c){return c<=0&&(e=t=i=NaN),new Zi(e,t,i,c)}function dj(e){return e instanceof Mh||(e=fh(e)),e?(e=e.rgb(),new Zi(e.r,e.g,e.b,e.opacity)):new Zi}function M_(e,t,i,c){return arguments.length===1?dj(e):new Zi(e,t,i,c??1)}function Zi(e,t,i,c){this.r=+e,this.g=+t,this.b=+i,this.opacity=+c}ky(Zi,M_,z2(Mh,{brighter(e){return e=e==null?Ep:Math.pow(Ep,e),new Zi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dh:Math.pow(dh,e),new Zi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zi(bl(this.r),bl(this.g),bl(this.b),Ap(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cx,formatHex:Cx,formatHex8:hj,formatRgb:Sx,toString:Sx}));function Cx(){return`#${pl(this.r)}${pl(this.g)}${pl(this.b)}`}function hj(){return`#${pl(this.r)}${pl(this.g)}${pl(this.b)}${pl((isNaN(this.opacity)?1:this.opacity)*255)}`}function Sx(){const e=Ap(this.opacity);return`${e===1?"rgb(":"rgba("}${bl(this.r)}, ${bl(this.g)}, ${bl(this.b)}${e===1?")":`, ${e})`}`}function Ap(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pl(e){return e=bl(e),(e<16?"0":"")+e.toString(16)}function kx(e,t,i,c){return c<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new Eo(e,t,i,c)}function $2(e){if(e instanceof Eo)return new Eo(e.h,e.s,e.l,e.opacity);if(e instanceof Mh||(e=fh(e)),!e)return new Eo;if(e instanceof Eo)return e;e=e.rgb();var t=e.r/255,i=e.g/255,c=e.b/255,p=Math.min(t,i,c),g=Math.max(t,i,c),m=NaN,l=g-p,S=(g+p)/2;return l?(t===g?m=(i-c)/l+(i<c)*6:i===g?m=(c-t)/l+2:m=(t-i)/l+4,l/=S<.5?g+p:2-g-p,m*=60):l=S>0&&S<1?0:m,new Eo(m,l,S,e.opacity)}function fj(e,t,i,c){return arguments.length===1?$2(e):new Eo(e,t,i,c??1)}function Eo(e,t,i,c){this.h=+e,this.s=+t,this.l=+i,this.opacity=+c}ky(Eo,fj,z2(Mh,{brighter(e){return e=e==null?Ep:Math.pow(Ep,e),new Eo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dh:Math.pow(dh,e),new Eo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,c=i+(i<.5?i:1-i)*t,p=2*i-c;return new Zi(Wg(e>=240?e-240:e+120,p,c),Wg(e,p,c),Wg(e<120?e+240:e-120,p,c),this.opacity)},clamp(){return new Eo(Tx(this.h),rp(this.s),rp(this.l),Ap(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ap(this.opacity);return`${e===1?"hsl(":"hsla("}${Tx(this.h)}, ${rp(this.s)*100}%, ${rp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Tx(e){return e=(e||0)%360,e<0?e+360:e}function rp(e){return Math.max(0,Math.min(1,e||0))}function Wg(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const Ty=e=>()=>e;function pj(e,t){return function(i){return e+i*t}}function mj(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(c){return Math.pow(e+c*t,i)}}function gj(e){return(e=+e)==1?B2:function(t,i){return i-t?mj(t,i,e):Ty(isNaN(t)?i:t)}}function B2(e,t){var i=t-e;return i?pj(e,i):Ty(isNaN(e)?t:e)}const Px=function e(t){var i=gj(t);function c(p,g){var m=i((p=M_(p)).r,(g=M_(g)).r),l=i(p.g,g.g),S=i(p.b,g.b),I=B2(p.opacity,g.opacity);return function(A){return p.r=m(A),p.g=l(A),p.b=S(A),p.opacity=I(A),p+""}}return c.gamma=e,c}(1);function _j(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,c=t.slice(),p;return function(g){for(p=0;p<i;++p)c[p]=e[p]*(1-g)+t[p]*g;return c}}function yj(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bj(e,t){var i=t?t.length:0,c=e?Math.min(i,e.length):0,p=new Array(c),g=new Array(i),m;for(m=0;m<c;++m)p[m]=ph(e[m],t[m]);for(;m<i;++m)g[m]=t[m];return function(l){for(m=0;m<c;++m)g[m]=p[m](l);return g}}function vj(e,t){var i=new Date;return e=+e,t=+t,function(c){return i.setTime(e*(1-c)+t*c),i}}function Lp(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function xj(e,t){var i={},c={},p;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(p in t)p in e?i[p]=ph(e[p],t[p]):c[p]=t[p];return function(g){for(p in i)c[p]=i[p](g);return c}}var E_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hg=new RegExp(E_.source,"g");function wj(e){return function(){return e}}function Cj(e){return function(t){return e(t)+""}}function Sj(e,t){var i=E_.lastIndex=Hg.lastIndex=0,c,p,g,m=-1,l=[],S=[];for(e=e+"",t=t+"";(c=E_.exec(e))&&(p=Hg.exec(t));)(g=p.index)>i&&(g=t.slice(i,g),l[m]?l[m]+=g:l[++m]=g),(c=c[0])===(p=p[0])?l[m]?l[m]+=p:l[++m]=p:(l[++m]=null,S.push({i:m,x:Lp(c,p)})),i=Hg.lastIndex;return i<t.length&&(g=t.slice(i),l[m]?l[m]+=g:l[++m]=g),l.length<2?S[0]?Cj(S[0].x):wj(t):(t=S.length,function(I){for(var A=0,O;A<t;++A)l[(O=S[A]).i]=O.x(I);return l.join("")})}function ph(e,t){var i=typeof t,c;return t==null||i==="boolean"?Ty(t):(i==="number"?Lp:i==="string"?(c=fh(t))?(t=c,Px):Sj:t instanceof fh?Px:t instanceof Date?vj:yj(t)?_j:Array.isArray(t)?bj:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?xj:Lp)(e,t)}function F2(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}function Ix(e,t){for(var i=new Array(t),c=0;c<t;++c)i[c]=e(c/(t-1));return i}function im(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Mx=Symbol("implicit");function N2(){var e=new mx,t=[],i=[],c=Mx;function p(g){let m=e.get(g);if(m===void 0){if(c!==Mx)return c;e.set(g,m=t.push(g)-1)}return i[m%i.length]}return p.domain=function(g){if(!arguments.length)return t.slice();t=[],e=new mx;for(const m of g)e.has(m)||e.set(m,t.push(m)-1);return p},p.range=function(g){return arguments.length?(i=Array.from(g),p):i.slice()},p.unknown=function(g){return arguments.length?(c=g,p):c},p.copy=function(){return N2(t,i).unknown(c)},im.apply(p,arguments),p}function j2(){var e=N2().unknown(void 0),t=e.domain,i=e.range,c=0,p=1,g,m,l=!1,S=0,I=0,A=.5;delete e.unknown;function O(){var z=t().length,D=p<c,H=D?p:c,ue=D?c:p;g=(ue-H)/Math.max(1,z-S+I*2),l&&(g=Math.floor(g)),H+=(ue-H-g*(z-S))*A,m=g*(1-S),l&&(H=Math.round(H),m=Math.round(m));var ye=I_(z).map(function(ne){return H+g*ne});return i(D?ye.reverse():ye)}return e.domain=function(z){return arguments.length?(t(z),O()):t()},e.range=function(z){return arguments.length?([c,p]=z,c=+c,p=+p,O()):[c,p]},e.rangeRound=function(z){return[c,p]=z,c=+c,p=+p,l=!0,O()},e.bandwidth=function(){return m},e.step=function(){return g},e.round=function(z){return arguments.length?(l=!!z,O()):l},e.padding=function(z){return arguments.length?(S=Math.min(1,I=+z),O()):S},e.paddingInner=function(z){return arguments.length?(S=Math.min(1,z),O()):S},e.paddingOuter=function(z){return arguments.length?(I=+z,O()):I},e.align=function(z){return arguments.length?(A=Math.max(0,Math.min(1,z)),O()):A},e.copy=function(){return j2(t(),[c,p]).round(l).paddingInner(S).paddingOuter(I).align(A)},im.apply(O(),arguments)}function kj(e){return function(){return e}}function Tj(e){return+e}var Ex=[0,1];function Fc(e){return e}function A_(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:kj(isNaN(t)?NaN:.5)}function Pj(e,t){var i;return e>t&&(i=e,e=t,t=i),function(c){return Math.max(e,Math.min(t,c))}}function Ij(e,t,i){var c=e[0],p=e[1],g=t[0],m=t[1];return p<c?(c=A_(p,c),g=i(m,g)):(c=A_(c,p),g=i(g,m)),function(l){return g(c(l))}}function Mj(e,t,i){var c=Math.min(e.length,t.length)-1,p=new Array(c),g=new Array(c),m=-1;for(e[c]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++m<c;)p[m]=A_(e[m],e[m+1]),g[m]=i(t[m],t[m+1]);return function(l){var S=R2(e,l,1,c)-1;return g[S](p[S](l))}}function Ej(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Aj(){var e=Ex,t=Ex,i=ph,c,p,g,m=Fc,l,S,I;function A(){var z=Math.min(e.length,t.length);return m!==Fc&&(m=Pj(e[0],e[z-1])),l=z>2?Mj:Ij,S=I=null,O}function O(z){return z==null||isNaN(z=+z)?g:(S||(S=l(e.map(c),t,i)))(c(m(z)))}return O.invert=function(z){return m(p((I||(I=l(t,e.map(c),Lp)))(z)))},O.domain=function(z){return arguments.length?(e=Array.from(z,Tj),A()):e.slice()},O.range=function(z){return arguments.length?(t=Array.from(z),A()):t.slice()},O.rangeRound=function(z){return t=Array.from(z),i=F2,A()},O.clamp=function(z){return arguments.length?(m=z?!0:Fc,A()):m!==Fc},O.interpolate=function(z){return arguments.length?(i=z,A()):i},O.unknown=function(z){return arguments.length?(g=z,O):g},function(z,D){return c=z,p=D,A()}}function Lj(){return Aj()(Fc,Fc)}function Rj(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Rp(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,c=e.slice(0,i);return[c.length>1?c[0]+c.slice(2):c,+e.slice(i+1)]}function Yc(e){return e=Rp(Math.abs(e)),e?e[1]:NaN}function Dj(e,t){return function(i,c){for(var p=i.length,g=[],m=0,l=e[0],S=0;p>0&&l>0&&(S+l+1>c&&(l=Math.max(1,c-S)),g.push(i.substring(p-=l,p+l)),!((S+=l+1)>c));)l=e[m=(m+1)%e.length];return g.reverse().join(t)}}function Oj(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var zj=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dp(e){if(!(t=zj.exec(e)))throw new Error("invalid format: "+e);var t;return new Py({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Dp.prototype=Py.prototype;function Py(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Py.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $j(e){e:for(var t=e.length,i=1,c=-1,p;i<t;++i)switch(e[i]){case".":c=p=i;break;case"0":c===0&&(c=i),p=i;break;default:if(!+e[i])break e;c>0&&(c=0);break}return c>0?e.slice(0,c)+e.slice(p+1):e}var V2;function Bj(e,t){var i=Rp(e,t);if(!i)return e+"";var c=i[0],p=i[1],g=p-(V2=Math.max(-8,Math.min(8,Math.floor(p/3)))*3)+1,m=c.length;return g===m?c:g>m?c+new Array(g-m+1).join("0"):g>0?c.slice(0,g)+"."+c.slice(g):"0."+new Array(1-g).join("0")+Rp(e,Math.max(0,t+g-1))[0]}function Ax(e,t){var i=Rp(e,t);if(!i)return e+"";var c=i[0],p=i[1];return p<0?"0."+new Array(-p).join("0")+c:c.length>p+1?c.slice(0,p+1)+"."+c.slice(p+1):c+new Array(p-c.length+2).join("0")}const Lx={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Rj,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ax(e*100,t),r:Ax,s:Bj,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Rx(e){return e}var Dx=Array.prototype.map,Ox=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Fj(e){var t=e.grouping===void 0||e.thousands===void 0?Rx:Dj(Dx.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",c=e.currency===void 0?"":e.currency[1]+"",p=e.decimal===void 0?".":e.decimal+"",g=e.numerals===void 0?Rx:Oj(Dx.call(e.numerals,String)),m=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",S=e.nan===void 0?"NaN":e.nan+"";function I(O){O=Dp(O);var z=O.fill,D=O.align,H=O.sign,ue=O.symbol,ye=O.zero,ne=O.width,xe=O.comma,Ce=O.precision,X=O.trim,we=O.type;we==="n"?(xe=!0,we="g"):Lx[we]||(Ce===void 0&&(Ce=12),X=!0,we="g"),(ye||z==="0"&&D==="=")&&(ye=!0,z="0",D="=");var Oe=ue==="$"?i:ue==="#"&&/[boxX]/.test(we)?"0"+we.toLowerCase():"",ke=ue==="$"?c:/[%p]/.test(we)?m:"",Ve=Lx[we],We=/[defgprs%]/.test(we);Ce=Ce===void 0?6:/[gprs]/.test(we)?Math.max(1,Math.min(21,Ce)):Math.max(0,Math.min(20,Ce));function ft(Qe){var Ye=Oe,Xe=ke,wt,Kt,vt;if(we==="c")Xe=Ve(Qe)+Xe,Qe="";else{Qe=+Qe;var At=Qe<0||1/Qe<0;if(Qe=isNaN(Qe)?S:Ve(Math.abs(Qe),Ce),X&&(Qe=$j(Qe)),At&&+Qe==0&&H!=="+"&&(At=!1),Ye=(At?H==="("?H:l:H==="-"||H==="("?"":H)+Ye,Xe=(we==="s"?Ox[8+V2/3]:"")+Xe+(At&&H==="("?")":""),We){for(wt=-1,Kt=Qe.length;++wt<Kt;)if(vt=Qe.charCodeAt(wt),48>vt||vt>57){Xe=(vt===46?p+Qe.slice(wt+1):Qe.slice(wt))+Xe,Qe=Qe.slice(0,wt);break}}}xe&&!ye&&(Qe=t(Qe,1/0));var Ut=Ye.length+Qe.length+Xe.length,et=Ut<ne?new Array(ne-Ut+1).join(z):"";switch(xe&&ye&&(Qe=t(et+Qe,et.length?ne-Xe.length:1/0),et=""),D){case"<":Qe=Ye+Qe+Xe+et;break;case"=":Qe=Ye+et+Qe+Xe;break;case"^":Qe=et.slice(0,Ut=et.length>>1)+Ye+Qe+Xe+et.slice(Ut);break;default:Qe=et+Ye+Qe+Xe;break}return g(Qe)}return ft.toString=function(){return O+""},ft}function A(O,z){var D=I((O=Dp(O),O.type="f",O)),H=Math.max(-8,Math.min(8,Math.floor(Yc(z)/3)))*3,ue=Math.pow(10,-H),ye=Ox[8+H/3];return function(ne){return D(ue*ne)+ye}}return{format:I,formatPrefix:A}}var np,U2,Z2;Nj({thousands:",",grouping:[3],currency:["$",""]});function Nj(e){return np=Fj(e),U2=np.format,Z2=np.formatPrefix,np}function jj(e){return Math.max(0,-Yc(Math.abs(e)))}function Vj(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yc(t)/3)))*3-Yc(Math.abs(e)))}function Uj(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Yc(t)-Yc(e))+1}function Zj(e,t,i,c){var p=ej(e,t,i),g;switch(c=Dp(c??",f"),c.type){case"s":{var m=Math.max(Math.abs(e),Math.abs(t));return c.precision==null&&!isNaN(g=Vj(p,m))&&(c.precision=g),Z2(c,m)}case"":case"e":case"g":case"p":case"r":{c.precision==null&&!isNaN(g=Uj(p,Math.max(Math.abs(e),Math.abs(t))))&&(c.precision=g-(c.type==="e"));break}case"f":case"%":{c.precision==null&&!isNaN(g=jj(p))&&(c.precision=g-(c.type==="%")*2);break}}return U2(c)}function Gj(e){var t=e.domain;return e.ticks=function(i){var c=t();return QN(c[0],c[c.length-1],i??10)},e.tickFormat=function(i,c){var p=t();return Zj(p[0],p[p.length-1],i??10,c)},e.nice=function(i){i==null&&(i=10);var c=t(),p=0,g=c.length-1,m=c[p],l=c[g],S,I,A=10;for(l<m&&(I=m,m=l,l=I,I=p,p=g,g=I);A-- >0;){if(I=P_(m,l,i),I===S)return c[p]=m,c[g]=l,t(c);if(I>0)m=Math.floor(m/I)*I,l=Math.ceil(l/I)*I;else if(I<0)m=Math.ceil(m*I)/I,l=Math.floor(l*I)/I;else break;S=I}return e},e}function G2(){var e=Lj();return e.copy=function(){return Ej(e,G2())},im.apply(e,arguments),Gj(e)}function W2(){var e=[.5],t=[0,1],i,c=1;function p(g){return g!=null&&g<=g?t[R2(e,g,0,c)]:i}return p.domain=function(g){return arguments.length?(e=Array.from(g),c=Math.min(e.length,t.length-1),p):e.slice()},p.range=function(g){return arguments.length?(t=Array.from(g),c=Math.min(e.length,t.length-1),p):t.slice()},p.invertExtent=function(g){var m=t.indexOf(g);return[e[m-1],e[m]]},p.unknown=function(g){return arguments.length?(i=g,p):i},p.copy=function(){return W2().domain(e).range(t).unknown(i)},im.apply(p,arguments)}function Wj(e){return e}var Hj=3,zx=1e-6;function qj(e){return"translate("+e+",0)"}function Kj(e){return t=>+e(t)}function Yj(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),i=>+e(i)+t}function Xj(){return!this.__axis}function Jj(e,t){var i=[],c=null,p=null,g=6,m=6,l=3,S=typeof window<"u"&&window.devicePixelRatio>1?0:.5,I=1,A="y",O=qj;function z(D){var H=c??(t.ticks?t.ticks.apply(t,i):t.domain()),ue=p??(t.tickFormat?t.tickFormat.apply(t,i):Wj),ye=Math.max(g,0)+l,ne=t.range(),xe=+ne[0]+S,Ce=+ne[ne.length-1]+S,X=(t.bandwidth?Yj:Kj)(t.copy(),S),we=D.selection?D.selection():D,Oe=we.selectAll(".domain").data([null]),ke=we.selectAll(".tick").data(H,t).order(),Ve=ke.exit(),We=ke.enter().append("g").attr("class","tick"),ft=ke.select("line"),Qe=ke.select("text");Oe=Oe.merge(Oe.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),ke=ke.merge(We),ft=ft.merge(We.append("line").attr("stroke","currentColor").attr(A+"2",I*g)),Qe=Qe.merge(We.append("text").attr("fill","currentColor").attr(A,I*ye).attr("dy","0.71em")),D!==we&&(Oe=Oe.transition(D),ke=ke.transition(D),ft=ft.transition(D),Qe=Qe.transition(D),Ve=Ve.transition(D).attr("opacity",zx).attr("transform",function(Ye){return isFinite(Ye=X(Ye))?O(Ye+S):this.getAttribute("transform")}),We.attr("opacity",zx).attr("transform",function(Ye){var Xe=this.parentNode.__axis;return O((Xe&&isFinite(Xe=Xe(Ye))?Xe:X(Ye))+S)})),Ve.remove(),Oe.attr("d",m?"M"+xe+","+I*m+"V"+S+"H"+Ce+"V"+I*m:"M"+xe+","+S+"H"+Ce),ke.attr("opacity",1).attr("transform",function(Ye){return O(X(Ye)+S)}),ft.attr(A+"2",I*g),Qe.attr(A,I*ye).text(ue),we.filter(Xj).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),we.each(function(){this.__axis=X})}return z.scale=function(D){return arguments.length?(t=D,z):t},z.ticks=function(){return i=Array.from(arguments),z},z.tickArguments=function(D){return arguments.length?(i=D==null?[]:Array.from(D),z):i.slice()},z.tickValues=function(D){return arguments.length?(c=D==null?null:Array.from(D),z):c&&c.slice()},z.tickFormat=function(D){return arguments.length?(p=D,z):p},z.tickSize=function(D){return arguments.length?(g=m=+D,z):g},z.tickSizeInner=function(D){return arguments.length?(g=+D,z):g},z.tickSizeOuter=function(D){return arguments.length?(m=+D,z):m},z.tickPadding=function(D){return arguments.length?(l=+D,z):l},z.offset=function(D){return arguments.length?(S=+D,z):S},z}function Qj(e){return Jj(Hj,e)}function e7(e,{title:t,tickSize:i=6,width:c=240,height:p=44+i,marginTop:g=18,marginRight:m=0,marginBottom:l=16+i,marginLeft:S=0,ticks:I=c/64,tickFormat:A,tickValues:O,strokeColor:z="rgba(0,0,0,.15)"}={}){function D(ne,xe=256){const Ce=document.createElement("canvas");Ce.width=xe,Ce.height=1;const X=Ce.getContext("2d");for(let we=0;we<xe;++we)X.fillStyle=ne(we/(xe-1)),X.fillRect(we,0,1,1);return Ce}const H=NN("svg").attr("width",c).attr("height",p).attr("viewBox",[0,0,c,p]).style("overflow","visible").style("display","block");let ue=ne=>ne.selectAll(".tick line").attr("y1",g+l-p),ye;if(e.interpolate){const ne=Math.min(e.domain().length,e.range().length);ye=e.copy().rangeRound(Ix(ph(S,c-m),ne)),H.append("image").attr("x",S).attr("y",g).attr("width",c-S-m).attr("height",p-g-l).attr("preserveAspectRatio","none").attr("xlink:href",D(e.copy().domain(Ix(ph(0,1),ne))).toDataURL())}else if(e.interpolator){if(ye=Object.assign(e.copy().interpolator(F2(S,c-m)),{range(){return[S,c-m]}}),H.append("image").attr("x",S).attr("y",g).attr("width",c-S-m).attr("height",p-g-l).attr("preserveAspectRatio","none").attr("xlink:href",D(e.interpolator()).toDataURL()),!ye.ticks){if(O===void 0){const ne=Math.round(I+1);O=I_(ne).map(xe=>tj(e.domain(),xe/(ne-1)))}typeof A!="function"&&(A=format(A===void 0?",f":A))}}else if(e.invertExtent){const ne=e.thresholds?e.thresholds():e.quantiles?e.quantiles():e.domain(),xe=A===void 0?Ce=>Ce:typeof A=="string"?format(A):A;ye=G2().domain([-1,e.range().length-1]).rangeRound([S,c-m]),H.append("g").selectAll("rect").data(e.range()).join("rect").attr("x",(Ce,X)=>ye(X-1)).attr("y",g).attr("width",(Ce,X)=>ye(X)-ye(X-1)).attr("height",p-g-l).attr("fill",Ce=>Ce).attr("stroke",z),O=I_(ne.length),A=Ce=>xe(ne[Ce],Ce)}else ye=j2().domain(e.domain()).rangeRound([S,c-m]),H.append("g").selectAll("rect").data(e.domain()).join("rect").attr("x",ye).attr("y",g).attr("width",Math.max(0,ye.bandwidth()-1)).attr("height",p-g-l).attr("fill",e).attr("stroke",z),ue=()=>{};return H.append("g").attr("transform",`translate(0,${p-l})`).call(Qj(ye).ticks(I,typeof A=="string"?A:void 0).tickFormat(typeof A=="function"?A:void 0).tickSize(i).tickValues(O)).call(ue).call(ne=>ne.select(".domain").remove()).call(ne=>ne.append("text").attr("x",S).attr("y",g+l-p-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(t)),H.node()}const t7=e=>{const{type:t,items:i,...c}=e;if(t==="choropleth"&&i&&i.length){const p=i.map(m=>m.value||m.name),g=i.map(m=>m.color);return e7(W2(p,g),{tickSize:0,...c})}return null},r7={key:0,class:"m-legend-item"},n7={class:"legend-title"},i7=["innerHTML"],o7={__name:"LegendItemTypeChoroplethHorizontal",props:{legendConfig:{type:Object,required:!1},title:{type:String,required:!1}},setup(e){const t=e,i=Xt(()=>t.legendConfig&&t.legendConfig.type==="choropleth"&&t.legendConfig.items&&t.legendConfig.items.length>0),c=Xt(()=>i?t7(t.legendConfig):null);return(p,g)=>i.value?(_t(),Tt("div",r7,[lt("div",n7,ar(t.title),1),lt("div",{innerHTML:c.value.outerHTML},null,8,i7)])):Lr("",!0)}},s7=Bo(o7,[["__scopeId","data-v-853a7ec5"]]),a7={key:0,class:"m-legend-item"},l7={class:"legend-title"},c7={__name:"LegendItemTypeChoroplethVertical",props:{legendConfig:{type:Object,required:!1},title:{type:String,required:!1}},setup(e){const t=e,i=Xt(()=>t.legendConfig&&t.legendConfig.type==="choropleth_vertical"&&t.legendConfig.items&&t.legendConfig.items.length>0);return(c,p)=>i.value?(_t(),Tt("div",a7,[lt("div",l7,ar(t.title),1),lt("table",null,[lt("tbody",null,[(_t(!0),Tt(Ar,null,Oo(t.legendConfig.items,g=>(_t(),Tt("tr",null,[lt("th",null,[lt("span",{style:ns({backgroundColor:g.color})},null,4)]),lt("td",null,ar(g.name),1)]))),256))])])])):Lr("",!0)}},u7=Bo(c7,[["__scopeId","data-v-9735ecfd"]]),d7={key:0,class:"m-legend-item"},h7={class:"legend-title"},f7={class:"legend-gradient-icon"},p7={__name:"LegendItemTypeGradientHorizontal",props:{legendConfig:{type:Object,required:!1},title:{type:String,required:!1}},setup(e){const t=e,i=Xt(()=>t.legendConfig&&t.legendConfig.type==="gradient"&&t.legendConfig.items&&t.legendConfig.items.length>0),c=Xt(()=>i.value?t.legendConfig.items.filter(I=>I.color!=="transparent"):[]),p=Xt(()=>i.value?t.legendConfig.items.find(I=>I.color==="transparent"):null),g=Xt(()=>i.value?t.legendConfig.items.map(I=>I.color).join(","):""),m=Xt(()=>p.value?1/t.legendConfig.items.length*100:0),l=Xt(()=>c.value.length?c.value.length/t.legendConfig.items.length*100:0),S=Xt(()=>i?`linear-gradient(to right, ${g.value})`:"");return(I,A)=>i.value?(_t(),Tt("div",d7,[lt("div",h7,ar(t.title),1),lt("div",f7,[p.value?(_t(),Tt("div",{key:0,class:"icon-gradient-transparent",style:ns({width:m.value})},null,4)):Lr("",!0),lt("div",{class:"icon-gradient",style:ns({width:l.value,backgroundImage:S.value})},null,4)])])):Lr("",!0)}},m7=Bo(p7,[["__scopeId","data-v-f4a168ad"]]),g7={key:0,class:"m-legend-item"},_7={class:"legend-title"},y7={class:"legend-gradient-icon"},b7={key:0,class:"icon-gradient-transparent",style:{width:12,height:24}},v7={class:"name"},x7={__name:"LegendItemTypeGradientVertical",props:{legendConfig:{type:Object,required:!1},title:{type:String,required:!1}},setup(e){const t=e,i=Xt(()=>t.legendConfig&&t.legendConfig.type==="gradient_vertical"&&t.legendConfig.items&&t.legendConfig.items.length>0),c=Xt(()=>i.value?t.legendConfig.items.filter(S=>S.color!=="transparent"):[]),p=Xt(()=>i.value?t.legendConfig.items.find(S=>S.color==="transparent"):null),g=Xt(()=>i.value?t.legendConfig.items.map(S=>S.color).join(","):"");Xt(()=>p.value?1/t.legendConfig.items.length*100:0);const m=Xt(()=>c.value.length?`${c.value.length*24}px`:0),l=Xt(()=>i?`linear-gradient(to bottom, ${g.value})`:"");return(S,I)=>i.value?(_t(),Tt("div",g7,[lt("div",_7,ar(t.title),1),lt("div",y7,[p.value?(_t(),Tt("div",b7)):Lr("",!0),lt("div",{class:"icon-gradient",style:ns({height:m.value,backgroundImage:l.value})},null,4),lt("ul",null,[(_t(!0),Tt(Ar,null,Oo(c.value,A=>(_t(),Tt("li",{key:A.value},[lt("span",v7,ar(A.name||A.value),1)]))),128))])])])):Lr("",!0)}},w7=Bo(x7,[["__scopeId","data-v-7fefba09"]]),C7={__name:"LegendItem",props:{legendConfig:{type:Object,required:!1},title:{type:String,required:!1}},setup(e){const t=e;return(i,c)=>(_t(),Tt(Ar,null,[br(r8,{"legend-config":t.legendConfig,title:t.title},null,8,["legend-config","title"]),br(s7,{"legend-config":t.legendConfig,title:t.title},null,8,["legend-config","title"]),br(u7,{"legend-config":t.legendConfig,title:t.title},null,8,["legend-config","title"]),br(m7,{"legend-config":t.legendConfig,title:t.title},null,8,["legend-config","title"]),br(w7,{"legend-config":t.legendConfig,title:t.title},null,8,["legend-config","title"])],64))}},S7={"aria-hidden":"true",style:{position:"absolute",width:"0",height:"0",overflow:"hidden"}},k7={key:0},T7={key:0,class:"m-legend-wrapper"},P7={__name:"Legend",setup(e){const t=Ph(),{t:i}=Jc({locale:"en",messages:{en:{legend:{title:"Legend"}},fr:{legend:{title:"Légende"}},ar:{legend:{title:"مفتاح الخريطة"}},am:{legend:{title:"ምስክር"}},es:{legend:{title:"Leyenda"}},sw:{legend:{title:"Maelezo ya Ramani"}}}}),c=Xt(()=>t.visibleLayers.some(l=>l.legendConfig)),g=x2(v2).greater("md"),m=on(!1);return(l,S)=>c.value?(_t(),Tt("div",{key:0,class:Ao(["m-legend",{"m-legend-collapsed":m.value,mobile:!Br(g)}])},[(_t(),Tt("svg",S7,S[2]||(S[2]=[lt("defs",null,[lt("symbol",{id:"icon-arrow-down",viewBox:"0 0 38 32"},[lt("title",null,"arrow-down"),lt("path",{d:"M22.2 18.636l9.879-9.879 5.121 4.243-18 18-18-18 5.121-4.243 9.879 9.879v-17.636h6v17.636z"})]),lt("symbol",{id:"icon-arrow-up",viewBox:"0 0 38 32"},[lt("title",null,"arrow-up"),lt("path",{d:"M22.2 13.364l9.879 9.879 5.121-4.243-18-18-18 18 5.121 4.243 9.879-9.879v17.636h6v-17.636z"})])],-1)]))),lt("div",null,[m.value?Lr("",!0):(_t(),Tt("div",k7,[lt("button",{class:"legend-collapse",onClick:S[0]||(S[0]=I=>m.value=!m.value)},S[3]||(S[3]=[lt("svg",{class:"legend-collapse-icon"},[lt("use",{"xlink:href":"#icon-arrow-down"})],-1)]))])),m.value?(_t(),Tt("button",{key:1,class:"legend-expand",onClick:S[1]||(S[1]=I=>m.value=!m.value)},[lt("span",null,ar(Br(i)("legend.title")),1),S[4]||(S[4]=lt("svg",{class:"legend-expand-icon"},[lt("use",{"xlink:href":"#icon-arrow-up"})],-1))])):Lr("",!0)]),m.value?Lr("",!0):(_t(),Tt("div",T7,[(_t(!0),Tt(Ar,null,Oo(Br(t).visibleLayers,I=>(_t(),Tt("div",null,[br(C7,{"legend-config":I.legendConfig,title:I.title},null,8,["legend-config","title"])]))),256))]))],2)):Lr("",!0)}};var I7={name:"BaseEditableHolder",extends:Qc,emits:["update:modelValue","value-change"],props:{modelValue:{type:null,default:void 0},defaultValue:{type:null,default:void 0},name:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},formControl:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0},$pcForm:{default:void 0},$pcFormField:{default:void 0}},data:function(){return{d_value:this.defaultValue||this.modelValue}},watch:{modelValue:function(t){this.d_value=t},defaultValue:function(t){this.d_value=t},$formName:{immediate:!0,handler:function(t){var i,c;this.formField=((i=this.$pcForm)===null||i===void 0||(c=i.register)===null||c===void 0?void 0:c.call(i,t,this.$formControl))||{}}},$formControl:{immediate:!0,handler:function(t){var i,c;this.formField=((i=this.$pcForm)===null||i===void 0||(c=i.register)===null||c===void 0?void 0:c.call(i,this.$formName,t))||{}}},$formDefaultValue:{immediate:!0,handler:function(t){this.d_value!==t&&(this.d_value=t)}},$formValue:{immediate:!1,handler:function(t){var i;(i=this.$pcForm)!==null&&i!==void 0&&i.getFieldState(this.$formName)&&t!==this.d_value&&(this.d_value=t)}}},formField:{},methods:{writeValue:function(t,i){var c,p;this.controlled&&(this.d_value=t,this.$emit("update:modelValue",t)),this.$emit("value-change",t),(c=(p=this.formField).onChange)===null||c===void 0||c.call(p,{originalEvent:i,value:t})},findNonEmpty:function(){for(var t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return i.find(xr)}},computed:{$filled:function(){return xr(this.d_value)},$invalid:function(){var t,i;return!this.$formNovalidate&&this.findNonEmpty(this.invalid,(t=this.$pcFormField)===null||t===void 0||(t=t.$field)===null||t===void 0?void 0:t.invalid,(i=this.$pcForm)===null||i===void 0||(i=i.getFieldState(this.$formName))===null||i===void 0?void 0:i.invalid)},$formName:function(){var t;return this.$formNovalidate?void 0:this.name||((t=this.$formControl)===null||t===void 0?void 0:t.name)},$formControl:function(){var t;return this.formControl||((t=this.$pcFormField)===null||t===void 0?void 0:t.formControl)},$formNovalidate:function(){var t;return(t=this.$formControl)===null||t===void 0?void 0:t.novalidate},$formDefaultValue:function(){var t,i;return this.findNonEmpty(this.d_value,(t=this.$pcFormField)===null||t===void 0?void 0:t.initialValue,(i=this.$pcForm)===null||i===void 0||(i=i.initialValues)===null||i===void 0?void 0:i[this.$formName])},$formValue:function(){var t,i;return this.findNonEmpty((t=this.$pcFormField)===null||t===void 0||(t=t.$field)===null||t===void 0?void 0:t.value,(i=this.$pcForm)===null||i===void 0||(i=i.getFieldState(this.$formName))===null||i===void 0?void 0:i.value)},controlled:function(){return this.$inProps.hasOwnProperty("modelValue")||!this.$inProps.hasOwnProperty("modelValue")&&!this.$inProps.hasOwnProperty("defaultValue")},filled:function(){return this.$filled}}},om={name:"BaseInput",extends:I7,props:{size:{type:String,default:null},fluid:{type:Boolean,default:null},variant:{type:String,default:null}},inject:{$parentInstance:{default:void 0},$pcFluid:{default:void 0}},computed:{$variant:function(){var t;return(t=this.variant)!==null&&t!==void 0?t:this.$primevue.config.inputStyle||this.$primevue.config.inputVariant},$fluid:function(){var t;return(t=this.fluid)!==null&&t!==void 0?t:!!this.$pcFluid},hasFluid:function(){return this.$fluid}}},M7=({dt:e})=>`
.p-radiobutton {
    position: relative;
    display: inline-flex;
    user-select: none;
    vertical-align: bottom;
    width: ${e("radiobutton.width")};
    height: ${e("radiobutton.height")};
}

.p-radiobutton-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    top: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border: 1px solid transparent;
    border-radius: 50%;
}

.p-radiobutton-box {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    border: 1px solid ${e("radiobutton.border.color")};
    background: ${e("radiobutton.background")};
    width: ${e("radiobutton.width")};
    height: ${e("radiobutton.height")};
    transition: background ${e("radiobutton.transition.duration")}, color ${e("radiobutton.transition.duration")}, border-color ${e("radiobutton.transition.duration")}, box-shadow ${e("radiobutton.transition.duration")}, outline-color ${e("radiobutton.transition.duration")};
    outline-color: transparent;
    box-shadow: ${e("radiobutton.shadow")};
}

.p-radiobutton-icon {
    transition-duration: ${e("radiobutton.transition.duration")};
    background: transparent;
    font-size: ${e("radiobutton.icon.size")};
    width: ${e("radiobutton.icon.size")};
    height: ${e("radiobutton.icon.size")};
    border-radius: 50%;
    backface-visibility: hidden;
    transform: translateZ(0) scale(0.1);
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:hover) .p-radiobutton-box {
    border-color: ${e("radiobutton.hover.border.color")};
}

.p-radiobutton-checked .p-radiobutton-box {
    border-color: ${e("radiobutton.checked.border.color")};
    background: ${e("radiobutton.checked.background")};
}

.p-radiobutton-checked .p-radiobutton-box .p-radiobutton-icon {
    background: ${e("radiobutton.icon.checked.color")};
    transform: translateZ(0) scale(1, 1);
    visibility: visible;
}

.p-radiobutton-checked:not(.p-disabled):has(.p-radiobutton-input:hover) .p-radiobutton-box {
    border-color: ${e("radiobutton.checked.hover.border.color")};
    background: ${e("radiobutton.checked.hover.background")};
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:hover).p-radiobutton-checked .p-radiobutton-box .p-radiobutton-icon {
    background: ${e("radiobutton.icon.checked.hover.color")};
}

.p-radiobutton:not(.p-disabled):has(.p-radiobutton-input:focus-visible) .p-radiobutton-box {
    border-color: ${e("radiobutton.focus.border.color")};
    box-shadow: ${e("radiobutton.focus.ring.shadow")};
    outline: ${e("radiobutton.focus.ring.width")} ${e("radiobutton.focus.ring.style")} ${e("radiobutton.focus.ring.color")};
    outline-offset: ${e("radiobutton.focus.ring.offset")};
}

.p-radiobutton-checked:not(.p-disabled):has(.p-radiobutton-input:focus-visible) .p-radiobutton-box {
    border-color: ${e("radiobutton.checked.focus.border.color")};
}

.p-radiobutton.p-invalid > .p-radiobutton-box {
    border-color: ${e("radiobutton.invalid.border.color")};
}

.p-radiobutton.p-variant-filled .p-radiobutton-box {
    background: ${e("radiobutton.filled.background")};
}

.p-radiobutton.p-variant-filled.p-radiobutton-checked .p-radiobutton-box {
    background: ${e("radiobutton.checked.background")};
}

.p-radiobutton.p-variant-filled:not(.p-disabled):has(.p-radiobutton-input:hover).p-radiobutton-checked .p-radiobutton-box {
    background: ${e("radiobutton.checked.hover.background")};
}

.p-radiobutton.p-disabled {
    opacity: 1;
}

.p-radiobutton.p-disabled .p-radiobutton-box {
    background: ${e("radiobutton.disabled.background")};
    border-color: ${e("radiobutton.checked.disabled.border.color")};
}

.p-radiobutton-checked.p-disabled .p-radiobutton-box .p-radiobutton-icon {
    background: ${e("radiobutton.icon.disabled.color")};
}

.p-radiobutton-sm,
.p-radiobutton-sm .p-radiobutton-box {
    width: ${e("radiobutton.sm.width")};
    height: ${e("radiobutton.sm.height")};
}

.p-radiobutton-sm .p-radiobutton-icon {
    font-size: ${e("radiobutton.icon.sm.size")};
    width: ${e("radiobutton.icon.sm.size")};
    height: ${e("radiobutton.icon.sm.size")};
}

.p-radiobutton-lg,
.p-radiobutton-lg .p-radiobutton-box {
    width: ${e("radiobutton.lg.width")};
    height: ${e("radiobutton.lg.height")};
}

.p-radiobutton-lg .p-radiobutton-icon {
    font-size: ${e("radiobutton.icon.lg.size")};
    width: ${e("radiobutton.icon.lg.size")};
    height: ${e("radiobutton.icon.lg.size")};
}
`,E7={root:function(t){var i=t.instance,c=t.props;return["p-radiobutton p-component",{"p-radiobutton-checked":i.checked,"p-disabled":c.disabled,"p-invalid":i.$pcRadioButtonGroup?i.$pcRadioButtonGroup.$invalid:i.$invalid,"p-variant-filled":i.$variant==="filled","p-radiobutton-sm p-inputfield-sm":c.size==="small","p-radiobutton-lg p-inputfield-lg":c.size==="large"}]},box:"p-radiobutton-box",input:"p-radiobutton-input",icon:"p-radiobutton-icon"},A7=Er.extend({name:"radiobutton",style:M7,classes:E7}),L7={name:"BaseRadioButton",extends:om,props:{value:null,binary:Boolean,readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:A7,provide:function(){return{$pcRadioButton:this,$parentInstance:this}}};function mh(e){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mh(e)}function R7(e,t,i){return(t=D7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function D7(e){var t=O7(e,"string");return mh(t)=="symbol"?t:t+""}function O7(e,t){if(mh(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(mh(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H2={name:"RadioButton",extends:L7,inheritAttrs:!1,emits:["change","focus","blur"],inject:{$pcRadioButtonGroup:{default:void 0}},methods:{getPTOptions:function(t){var i=t==="root"?this.ptmi:this.ptm;return i(t,{context:{checked:this.checked,disabled:this.disabled}})},onChange:function(t){if(!this.disabled&&!this.readonly){var i=this.binary?!this.checked:this.value;this.$pcRadioButtonGroup?this.$pcRadioButtonGroup.writeValue(i,t):this.writeValue(i,t),this.$emit("change",t)}},onFocus:function(t){this.$emit("focus",t)},onBlur:function(t){var i,c;this.$emit("blur",t),(i=(c=this.formField).onBlur)===null||i===void 0||i.call(c,t)}},computed:{groupName:function(){return this.$pcRadioButtonGroup?this.$pcRadioButtonGroup.groupName:this.$formName},checked:function(){var t=this.$pcRadioButtonGroup?this.$pcRadioButtonGroup.d_value:this.d_value;return t!=null&&(this.binary?!!t:Th(t,this.value))},dataP:function(){return Qp(R7({invalid:this.$invalid,checked:this.checked,disabled:this.disabled,filled:this.$variant==="filled"},this.size,this.size))}}},z7=["data-p-checked","data-p-disabled","data-p"],$7=["id","value","name","checked","tabindex","disabled","readonly","aria-labelledby","aria-label","aria-invalid"],B7=["data-p"],F7=["data-p"];function N7(e,t,i,c,p,g){return _t(),Tt("div",Bt({class:e.cx("root")},g.getPTOptions("root"),{"data-p-checked":g.checked,"data-p-disabled":e.disabled,"data-p":g.dataP}),[lt("input",Bt({id:e.inputId,type:"radio",class:[e.cx("input"),e.inputClass],style:e.inputStyle,value:e.value,name:g.groupName,checked:g.checked,tabindex:e.tabindex,disabled:e.disabled,readonly:e.readonly,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,"aria-invalid":e.invalid||void 0,onFocus:t[0]||(t[0]=function(){return g.onFocus&&g.onFocus.apply(g,arguments)}),onBlur:t[1]||(t[1]=function(){return g.onBlur&&g.onBlur.apply(g,arguments)}),onChange:t[2]||(t[2]=function(){return g.onChange&&g.onChange.apply(g,arguments)})},g.getPTOptions("input")),null,16,$7),lt("div",Bt({class:e.cx("box")},g.getPTOptions("box"),{"data-p":g.dataP}),[lt("div",Bt({class:e.cx("icon")},g.getPTOptions("icon"),{"data-p":g.dataP}),null,16,F7)],16,B7)],16,z7)}H2.render=N7;var j7=`
.p-icon {
    display: inline-block;
    vertical-align: baseline;
}

.p-icon-spin {
    -webkit-animation: p-icon-spin 2s infinite linear;
    animation: p-icon-spin 2s infinite linear;
}

@-webkit-keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}

@keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}
`,V7=Er.extend({name:"baseicon",css:j7});function gh(e){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gh(e)}function $x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,c)}return i}function Bx(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?$x(Object(i),!0).forEach(function(c){U7(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$x(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function U7(e,t,i){return(t=Z7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Z7(e){var t=G7(e,"string");return gh(t)=="symbol"?t:t+""}function G7(e,t){if(gh(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(gh(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cl={name:"BaseIcon",extends:Qc,props:{label:{type:String,default:void 0},spin:{type:Boolean,default:!1}},style:V7,provide:function(){return{$pcIcon:this,$parentInstance:this}},methods:{pti:function(){var t=kh(this.label);return Bx(Bx({},!this.isUnstyled&&{class:["p-icon",{"p-icon-spin":this.spin}]}),{},{role:t?void 0:"img","aria-label":t?void 0:this.label,"aria-hidden":t})}}},Iy={name:"CheckIcon",extends:Cl};function W7(e,t,i,c,p,g){return _t(),Tt("svg",Bt({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),t[0]||(t[0]=[lt("path",{d:"M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z",fill:"currentColor"},null,-1)]),16)}Iy.render=W7;var q2={name:"MinusIcon",extends:Cl};function H7(e,t,i,c,p,g){return _t(),Tt("svg",Bt({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),t[0]||(t[0]=[lt("path",{d:"M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z",fill:"currentColor"},null,-1)]),16)}q2.render=H7;var q7=({dt:e})=>`
.p-checkbox {
    position: relative;
    display: inline-flex;
    user-select: none;
    vertical-align: bottom;
    width: ${e("checkbox.width")};
    height: ${e("checkbox.height")};
}

.p-checkbox-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    inset-block-start: 0;
    inset-inline-start: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border: 1px solid transparent;
    border-radius: ${e("checkbox.border.radius")};
}

.p-checkbox-box {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: ${e("checkbox.border.radius")};
    border: 1px solid ${e("checkbox.border.color")};
    background: ${e("checkbox.background")};
    width: ${e("checkbox.width")};
    height: ${e("checkbox.height")};
    transition: background ${e("checkbox.transition.duration")}, color ${e("checkbox.transition.duration")}, border-color ${e("checkbox.transition.duration")}, box-shadow ${e("checkbox.transition.duration")}, outline-color ${e("checkbox.transition.duration")};
    outline-color: transparent;
    box-shadow: ${e("checkbox.shadow")};
}

.p-checkbox-icon {
    transition-duration: ${e("checkbox.transition.duration")};
    color: ${e("checkbox.icon.color")};
    font-size: ${e("checkbox.icon.size")};
    width: ${e("checkbox.icon.size")};
    height: ${e("checkbox.icon.size")};
}

.p-checkbox:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    border-color: ${e("checkbox.hover.border.color")};
}

.p-checkbox-checked .p-checkbox-box {
    border-color: ${e("checkbox.checked.border.color")};
    background: ${e("checkbox.checked.background")};
}

.p-checkbox-checked .p-checkbox-icon {
    color: ${e("checkbox.icon.checked.color")};
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    background: ${e("checkbox.checked.hover.background")};
    border-color: ${e("checkbox.checked.hover.border.color")};
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-icon {
    color: ${e("checkbox.icon.checked.hover.color")};
}

.p-checkbox:not(.p-disabled):has(.p-checkbox-input:focus-visible) .p-checkbox-box {
    border-color: ${e("checkbox.focus.border.color")};
    box-shadow: ${e("checkbox.focus.ring.shadow")};
    outline: ${e("checkbox.focus.ring.width")} ${e("checkbox.focus.ring.style")} ${e("checkbox.focus.ring.color")};
    outline-offset: ${e("checkbox.focus.ring.offset")};
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:focus-visible) .p-checkbox-box {
    border-color: ${e("checkbox.checked.focus.border.color")};
}

.p-checkbox.p-invalid > .p-checkbox-box {
    border-color: ${e("checkbox.invalid.border.color")};
}

.p-checkbox.p-variant-filled .p-checkbox-box {
    background: ${e("checkbox.filled.background")};
}

.p-checkbox-checked.p-variant-filled .p-checkbox-box {
    background: ${e("checkbox.checked.background")};
}

.p-checkbox-checked.p-variant-filled:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    background: ${e("checkbox.checked.hover.background")};
}

.p-checkbox.p-disabled {
    opacity: 1;
}

.p-checkbox.p-disabled .p-checkbox-box {
    background: ${e("checkbox.disabled.background")};
    border-color: ${e("checkbox.checked.disabled.border.color")};
}

.p-checkbox.p-disabled .p-checkbox-box .p-checkbox-icon {
    color: ${e("checkbox.icon.disabled.color")};
}

.p-checkbox-sm,
.p-checkbox-sm .p-checkbox-box {
    width: ${e("checkbox.sm.width")};
    height: ${e("checkbox.sm.height")};
}

.p-checkbox-sm .p-checkbox-icon {
    font-size: ${e("checkbox.icon.sm.size")};
    width: ${e("checkbox.icon.sm.size")};
    height: ${e("checkbox.icon.sm.size")};
}

.p-checkbox-lg,
.p-checkbox-lg .p-checkbox-box {
    width: ${e("checkbox.lg.width")};
    height: ${e("checkbox.lg.height")};
}

.p-checkbox-lg .p-checkbox-icon {
    font-size: ${e("checkbox.icon.lg.size")};
    width: ${e("checkbox.icon.lg.size")};
    height: ${e("checkbox.icon.lg.size")};
}
`,K7={root:function(t){var i=t.instance,c=t.props;return["p-checkbox p-component",{"p-checkbox-checked":i.checked,"p-disabled":c.disabled,"p-invalid":i.$pcCheckboxGroup?i.$pcCheckboxGroup.$invalid:i.$invalid,"p-variant-filled":i.$variant==="filled","p-checkbox-sm p-inputfield-sm":c.size==="small","p-checkbox-lg p-inputfield-lg":c.size==="large"}]},box:"p-checkbox-box",input:"p-checkbox-input",icon:"p-checkbox-icon"},Y7=Er.extend({name:"checkbox",style:q7,classes:K7}),X7={name:"BaseCheckbox",extends:om,props:{value:null,binary:Boolean,indeterminate:{type:Boolean,default:!1},trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},tabindex:{type:Number,default:null},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:Y7,provide:function(){return{$pcCheckbox:this,$parentInstance:this}}};function _h(e){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_h(e)}function J7(e,t,i){return(t=Q7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Q7(e){var t=eV(e,"string");return _h(t)=="symbol"?t:t+""}function eV(e,t){if(_h(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(_h(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tV(e){return oV(e)||iV(e)||nV(e)||rV()}function rV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nV(e,t){if(e){if(typeof e=="string")return L_(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?L_(e,t):void 0}}function iV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oV(e){if(Array.isArray(e))return L_(e)}function L_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,c=Array(t);i<t;i++)c[i]=e[i];return c}var K2={name:"Checkbox",extends:X7,inheritAttrs:!1,emits:["change","focus","blur","update:indeterminate"],inject:{$pcCheckboxGroup:{default:void 0}},data:function(){return{d_indeterminate:this.indeterminate}},watch:{indeterminate:function(t){this.d_indeterminate=t}},methods:{getPTOptions:function(t){var i=t==="root"?this.ptmi:this.ptm;return i(t,{context:{checked:this.checked,indeterminate:this.d_indeterminate,disabled:this.disabled}})},onChange:function(t){var i=this;if(!this.disabled&&!this.readonly){var c=this.$pcCheckboxGroup?this.$pcCheckboxGroup.d_value:this.d_value,p;this.binary?p=this.d_indeterminate?this.trueValue:this.checked?this.falseValue:this.trueValue:this.checked||this.d_indeterminate?p=c.filter(function(g){return!Th(g,i.value)}):p=c?[].concat(tV(c),[this.value]):[this.value],this.d_indeterminate&&(this.d_indeterminate=!1,this.$emit("update:indeterminate",this.d_indeterminate)),this.$pcCheckboxGroup?this.$pcCheckboxGroup.writeValue(p,t):this.writeValue(p,t),this.$emit("change",t)}},onFocus:function(t){this.$emit("focus",t)},onBlur:function(t){var i,c;this.$emit("blur",t),(i=(c=this.formField).onBlur)===null||i===void 0||i.call(c,t)}},computed:{groupName:function(){return this.$pcCheckboxGroup?this.$pcCheckboxGroup.groupName:this.$formName},checked:function(){var t=this.$pcCheckboxGroup?this.$pcCheckboxGroup.d_value:this.d_value;return this.d_indeterminate?!1:this.binary?t===this.trueValue:$M(this.value,t)},dataP:function(){return Qp(J7({invalid:this.$invalid,checked:this.checked,disabled:this.disabled,filled:this.$variant==="filled"},this.size,this.size))}},components:{CheckIcon:Iy,MinusIcon:q2}},sV=["data-p-checked","data-p-indeterminate","data-p-disabled","data-p"],aV=["id","value","name","checked","tabindex","disabled","readonly","required","aria-labelledby","aria-label","aria-invalid","aria-checked"],lV=["data-p"];function cV(e,t,i,c,p,g){var m=no("CheckIcon"),l=no("MinusIcon");return _t(),Tt("div",Bt({class:e.cx("root")},g.getPTOptions("root"),{"data-p-checked":g.checked,"data-p-indeterminate":p.d_indeterminate||void 0,"data-p-disabled":e.disabled,"data-p":g.dataP}),[lt("input",Bt({id:e.inputId,type:"checkbox",class:[e.cx("input"),e.inputClass],style:e.inputStyle,value:e.value,name:g.groupName,checked:g.checked,tabindex:e.tabindex,disabled:e.disabled,readonly:e.readonly,required:e.required,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,"aria-invalid":e.invalid||void 0,"aria-checked":p.d_indeterminate?"mixed":void 0,onFocus:t[0]||(t[0]=function(){return g.onFocus&&g.onFocus.apply(g,arguments)}),onBlur:t[1]||(t[1]=function(){return g.onBlur&&g.onBlur.apply(g,arguments)}),onChange:t[2]||(t[2]=function(){return g.onChange&&g.onChange.apply(g,arguments)})},g.getPTOptions("input")),null,16,aV),lt("div",Bt({class:e.cx("box")},g.getPTOptions("box"),{"data-p":g.dataP}),[un(e.$slots,"icon",{checked:g.checked,indeterminate:p.d_indeterminate,class:Ao(e.cx("icon"))},function(){return[g.checked?(_t(),Hn(m,Bt({key:0,class:e.cx("icon")},g.getPTOptions("icon"),{"data-p":g.dataP}),null,16,["class","data-p"])):p.d_indeterminate?(_t(),Hn(l,Bt({key:1,class:e.cx("icon")},g.getPTOptions("icon"),{"data-p":g.dataP}),null,16,["class","data-p"])):Lr("",!0)]})],16,lV)],16,sV)}K2.render=cV;var Y2={name:"BlankIcon",extends:Cl};function uV(e,t,i,c,p,g){return _t(),Tt("svg",Bt({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),t[0]||(t[0]=[lt("rect",{width:"1",height:"1",fill:"currentColor","fill-opacity":"0"},null,-1)]),16)}Y2.render=uV;var X2={name:"ChevronDownIcon",extends:Cl};function dV(e,t,i,c,p,g){return _t(),Tt("svg",Bt({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),t[0]||(t[0]=[lt("path",{d:"M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z",fill:"currentColor"},null,-1)]),16)}X2.render=dV;var J2={name:"SearchIcon",extends:Cl};function hV(e,t,i,c,p,g){return _t(),Tt("svg",Bt({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),t[0]||(t[0]=[lt("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.67602 11.0265C3.6661 11.688 4.83011 12.0411 6.02086 12.0411C6.81149 12.0411 7.59438 11.8854 8.32483 11.5828C8.87005 11.357 9.37808 11.0526 9.83317 10.6803L12.9769 13.8241C13.0323 13.8801 13.0983 13.9245 13.171 13.9548C13.2438 13.985 13.3219 14.0003 13.4007 14C13.4795 14.0003 13.5575 13.985 13.6303 13.9548C13.7031 13.9245 13.7691 13.8801 13.8244 13.8241C13.9367 13.7116 13.9998 13.5592 13.9998 13.4003C13.9998 13.2414 13.9367 13.089 13.8244 12.9765L10.6807 9.8328C11.053 9.37773 11.3573 8.86972 11.5831 8.32452C11.8857 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0268 2.67572C10.3652 1.68564 9.42494 0.913972 8.32483 0.45829C7.22472 0.00260857 6.01418 -0.116618 4.84631 0.115686C3.67844 0.34799 2.60568 0.921393 1.76369 1.76338C0.921698 2.60537 0.348296 3.67813 0.115991 4.84601C-0.116313 6.01388 0.00291375 7.22441 0.458595 8.32452C0.914277 9.42464 1.68595 10.3649 2.67602 11.0265ZM3.35565 2.0158C4.14456 1.48867 5.07206 1.20731 6.02086 1.20731C7.29317 1.20731 8.51338 1.71274 9.41304 2.6124C10.3127 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5368 7.88088 10.0096 8.66978C9.48251 9.45868 8.73328 10.0736 7.85669 10.4367C6.98011 10.7997 6.01554 10.8947 5.08496 10.7096C4.15439 10.5245 3.2996 10.0676 2.62869 9.39674C1.95778 8.72583 1.50089 7.87104 1.31579 6.94046C1.13068 6.00989 1.22568 5.04532 1.58878 4.16874C1.95187 3.29215 2.56675 2.54292 3.35565 2.0158Z",fill:"currentColor"},null,-1)]),16)}J2.render=hV;var My={name:"SpinnerIcon",extends:Cl};function fV(e,t,i,c,p,g){return _t(),Tt("svg",Bt({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),t[0]||(t[0]=[lt("path",{d:"M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z",fill:"currentColor"},null,-1)]),16)}My.render=fV;var Q2={name:"TimesIcon",extends:Cl};function pV(e,t,i,c,p,g){return _t(),Tt("svg",Bt({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),t[0]||(t[0]=[lt("path",{d:"M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z",fill:"currentColor"},null,-1)]),16)}Q2.render=pV;var mV=({dt:e})=>`
.p-iconfield {
    position: relative;
}

.p-inputicon {
    position: absolute;
    top: 50%;
    margin-top: calc(-1 * (${e("icon.size")} / 2));
    color: ${e("iconfield.icon.color")};
    line-height: 1;
    z-index: 1;
}

.p-iconfield .p-inputicon:first-child {
    inset-inline-start: ${e("form.field.padding.x")};
}

.p-iconfield .p-inputicon:last-child {
    inset-inline-end: ${e("form.field.padding.x")};
}

.p-iconfield .p-inputtext:not(:first-child),
.p-iconfield .p-inputwrapper:not(:first-child) .p-inputtext {
    padding-inline-start: calc((${e("form.field.padding.x")} * 2) + ${e("icon.size")});
}

.p-iconfield .p-inputtext:not(:last-child) {
    padding-inline-end: calc((${e("form.field.padding.x")} * 2) + ${e("icon.size")});
}

.p-iconfield:has(.p-inputfield-sm) .p-inputicon {
    font-size: ${e("form.field.sm.font.size")};
    width: ${e("form.field.sm.font.size")};
    height: ${e("form.field.sm.font.size")};
    margin-top: calc(-1 * (${e("form.field.sm.font.size")} / 2));
}

.p-iconfield:has(.p-inputfield-lg) .p-inputicon {
    font-size: ${e("form.field.lg.font.size")};
    width: ${e("form.field.lg.font.size")};
    height: ${e("form.field.lg.font.size")};
    margin-top: calc(-1 * (${e("form.field.lg.font.size")} / 2));
}
`,gV={root:"p-iconfield"},_V=Er.extend({name:"iconfield",style:mV,classes:gV}),yV={name:"BaseIconField",extends:Qc,style:_V,provide:function(){return{$pcIconField:this,$parentInstance:this}}},eC={name:"IconField",extends:yV,inheritAttrs:!1};function bV(e,t,i,c,p,g){return _t(),Tt("div",Bt({class:e.cx("root")},e.ptmi("root")),[un(e.$slots,"default")],16)}eC.render=bV;var vV={root:"p-inputicon"},xV=Er.extend({name:"inputicon",classes:vV}),wV={name:"BaseInputIcon",extends:Qc,style:xV,props:{class:null},provide:function(){return{$pcInputIcon:this,$parentInstance:this}}},tC={name:"InputIcon",extends:wV,inheritAttrs:!1,computed:{containerClass:function(){return[this.cx("root"),this.class]}}};function CV(e,t,i,c,p,g){return _t(),Tt("span",Bt({class:g.containerClass},e.ptmi("root")),[un(e.$slots,"default")],16)}tC.render=CV;var SV=({dt:e})=>`
.p-inputtext {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: ${e("inputtext.color")};
    background: ${e("inputtext.background")};
    padding-block: ${e("inputtext.padding.y")};
    padding-inline: ${e("inputtext.padding.x")};
    border: 1px solid ${e("inputtext.border.color")};
    transition: background ${e("inputtext.transition.duration")}, color ${e("inputtext.transition.duration")}, border-color ${e("inputtext.transition.duration")}, outline-color ${e("inputtext.transition.duration")}, box-shadow ${e("inputtext.transition.duration")};
    appearance: none;
    border-radius: ${e("inputtext.border.radius")};
    outline-color: transparent;
    box-shadow: ${e("inputtext.shadow")};
}

.p-inputtext:enabled:hover {
    border-color: ${e("inputtext.hover.border.color")};
}

.p-inputtext:enabled:focus {
    border-color: ${e("inputtext.focus.border.color")};
    box-shadow: ${e("inputtext.focus.ring.shadow")};
    outline: ${e("inputtext.focus.ring.width")} ${e("inputtext.focus.ring.style")} ${e("inputtext.focus.ring.color")};
    outline-offset: ${e("inputtext.focus.ring.offset")};
}

.p-inputtext.p-invalid {
    border-color: ${e("inputtext.invalid.border.color")};
}

.p-inputtext.p-variant-filled {
    background: ${e("inputtext.filled.background")};
}

.p-inputtext.p-variant-filled:enabled:hover {
    background: ${e("inputtext.filled.hover.background")};
}

.p-inputtext.p-variant-filled:enabled:focus {
    background: ${e("inputtext.filled.focus.background")};
}

.p-inputtext:disabled {
    opacity: 1;
    background: ${e("inputtext.disabled.background")};
    color: ${e("inputtext.disabled.color")};
}

.p-inputtext::placeholder {
    color: ${e("inputtext.placeholder.color")};
}

.p-inputtext.p-invalid::placeholder {
    color: ${e("inputtext.invalid.placeholder.color")};
}

.p-inputtext-sm {
    font-size: ${e("inputtext.sm.font.size")};
    padding-block: ${e("inputtext.sm.padding.y")};
    padding-inline: ${e("inputtext.sm.padding.x")};
}

.p-inputtext-lg {
    font-size: ${e("inputtext.lg.font.size")};
    padding-block: ${e("inputtext.lg.padding.y")};
    padding-inline: ${e("inputtext.lg.padding.x")};
}

.p-inputtext-fluid {
    width: 100%;
}
`,kV={root:function(t){var i=t.instance,c=t.props;return["p-inputtext p-component",{"p-filled":i.$filled,"p-inputtext-sm p-inputfield-sm":c.size==="small","p-inputtext-lg p-inputfield-lg":c.size==="large","p-invalid":i.$invalid,"p-variant-filled":i.$variant==="filled","p-inputtext-fluid":i.$fluid}]}},TV=Er.extend({name:"inputtext",style:SV,classes:kV}),PV={name:"BaseInputText",extends:om,style:TV,provide:function(){return{$pcInputText:this,$parentInstance:this}}};function yh(e){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yh(e)}function IV(e,t,i){return(t=MV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function MV(e){var t=EV(e,"string");return yh(t)=="symbol"?t:t+""}function EV(e,t){if(yh(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(yh(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rC={name:"InputText",extends:PV,inheritAttrs:!1,methods:{onInput:function(t){this.writeValue(t.target.value,t)}},computed:{attrs:function(){return Bt(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return Qp(IV({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},AV=["value","name","disabled","aria-invalid","data-p"];function LV(e,t,i,c,p,g){return _t(),Tt("input",Bt({type:"text",class:e.cx("root"),value:e.d_value,name:e.name,disabled:e.disabled,"aria-invalid":e.$invalid||void 0,"data-p":g.dataP,onInput:t[0]||(t[0]=function(){return g.onInput&&g.onInput.apply(g,arguments)})},g.attrs),null,16,AV)}rC.render=LV;var RV=({dt:e})=>`
.p-virtualscroller-loader {
    background: ${e("virtualscroller.loader.mask.background")};
    color: ${e("virtualscroller.loader.mask.color")};
}

.p-virtualscroller-loading-icon {
    font-size: ${e("virtualscroller.loader.icon.size")};
    width: ${e("virtualscroller.loader.icon.size")};
    height: ${e("virtualscroller.loader.icon.size")};
}
`,DV=`
.p-virtualscroller {
    position: relative;
    overflow: auto;
    contain: strict;
    transform: translateZ(0);
    will-change: scroll-position;
    outline: 0 none;
}

.p-virtualscroller-content {
    position: absolute;
    top: 0;
    left: 0;
    min-height: 100%;
    min-width: 100%;
    will-change: transform;
}

.p-virtualscroller-spacer {
    position: absolute;
    top: 0;
    left: 0;
    height: 1px;
    width: 1px;
    transform-origin: 0 0;
    pointer-events: none;
}

.p-virtualscroller-loader {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-virtualscroller-loader-mask {
    display: flex;
    align-items: center;
    justify-content: center;
}

.p-virtualscroller-horizontal > .p-virtualscroller-content {
    display: flex;
}

.p-virtualscroller-inline .p-virtualscroller-content {
    position: static;
}
`,Fx=Er.extend({name:"virtualscroller",css:DV,style:RV}),OV={name:"BaseVirtualScroller",extends:Qc,props:{id:{type:String,default:null},style:null,class:null,items:{type:Array,default:null},itemSize:{type:[Number,Array],default:0},scrollHeight:null,scrollWidth:null,orientation:{type:String,default:"vertical"},numToleratedItems:{type:Number,default:null},delay:{type:Number,default:0},resizeDelay:{type:Number,default:10},lazy:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loaderDisabled:{type:Boolean,default:!1},columns:{type:Array,default:null},loading:{type:Boolean,default:!1},showSpacer:{type:Boolean,default:!0},showLoader:{type:Boolean,default:!1},tabindex:{type:Number,default:0},inline:{type:Boolean,default:!1},step:{type:Number,default:0},appendOnly:{type:Boolean,default:!1},autoSize:{type:Boolean,default:!1}},style:Fx,provide:function(){return{$pcVirtualScroller:this,$parentInstance:this}},beforeMount:function(){var t;Fx.loadCSS({nonce:(t=this.$primevueConfig)===null||t===void 0||(t=t.csp)===null||t===void 0?void 0:t.nonce})}};function bh(e){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bh(e)}function Nx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,c)}return i}function Md(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Nx(Object(i),!0).forEach(function(c){nC(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Nx(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function nC(e,t,i){return(t=zV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function zV(e){var t=$V(e,"string");return bh(t)=="symbol"?t:t+""}function $V(e,t){if(bh(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(bh(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iC={name:"VirtualScroller",extends:OV,inheritAttrs:!1,emits:["update:numToleratedItems","scroll","scroll-index-change","lazy-load"],data:function(){var t=this.isBoth();return{first:t?{rows:0,cols:0}:0,last:t?{rows:0,cols:0}:0,page:t?{rows:0,cols:0}:0,numItemsInViewport:t?{rows:0,cols:0}:0,lastScrollPos:t?{top:0,left:0}:0,d_numToleratedItems:this.numToleratedItems,d_loading:this.loading,loaderArr:[],spacerStyle:{},contentStyle:{}}},element:null,content:null,lastScrollPos:null,scrollTimeout:null,resizeTimeout:null,defaultWidth:0,defaultHeight:0,defaultContentWidth:0,defaultContentHeight:0,isRangeChanged:!1,lazyLoadState:{},resizeListener:null,initialized:!1,watch:{numToleratedItems:function(t){this.d_numToleratedItems=t},loading:function(t,i){this.lazy&&t!==i&&t!==this.d_loading&&(this.d_loading=t)},items:{handler:function(t,i){(!i||i.length!==(t||[]).length)&&(this.init(),this.calculateAutoSize())},deep:!0},itemSize:function(){this.init(),this.calculateAutoSize()},orientation:function(){this.lastScrollPos=this.isBoth()?{top:0,left:0}:0},scrollHeight:function(){this.init(),this.calculateAutoSize()},scrollWidth:function(){this.init(),this.calculateAutoSize()}},mounted:function(){this.viewInit(),this.lastScrollPos=this.isBoth()?{top:0,left:0}:0,this.lazyLoadState=this.lazyLoadState||{}},updated:function(){!this.initialized&&this.viewInit()},unmounted:function(){this.unbindResizeListener(),this.initialized=!1},methods:{viewInit:function(){Cp(this.element)&&(this.setContentEl(this.content),this.init(),this.calculateAutoSize(),this.bindResizeListener(),this.defaultWidth=hl(this.element),this.defaultHeight=dl(this.element),this.defaultContentWidth=hl(this.content),this.defaultContentHeight=dl(this.content),this.initialized=!0)},init:function(){this.disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize())},isVertical:function(){return this.orientation==="vertical"},isHorizontal:function(){return this.orientation==="horizontal"},isBoth:function(){return this.orientation==="both"},scrollTo:function(t){this.element&&this.element.scrollTo(t)},scrollToIndex:function(t){var i=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"auto",p=this.isBoth(),g=this.isHorizontal(),m=p?t.every(function(ke){return ke>-1}):t>-1;if(m){var l=this.first,S=this.element,I=S.scrollTop,A=I===void 0?0:I,O=S.scrollLeft,z=O===void 0?0:O,D=this.calculateNumItems(),H=D.numToleratedItems,ue=this.getContentPosition(),ye=this.itemSize,ne=function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,We=arguments.length>1?arguments[1]:void 0;return Ve<=We?0:Ve},xe=function(Ve,We,ft){return Ve*We+ft},Ce=function(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return i.scrollTo({left:Ve,top:We,behavior:c})},X=p?{rows:0,cols:0}:0,we=!1,Oe=!1;p?(X={rows:ne(t[0],H[0]),cols:ne(t[1],H[1])},Ce(xe(X.cols,ye[1],ue.left),xe(X.rows,ye[0],ue.top)),Oe=this.lastScrollPos.top!==A||this.lastScrollPos.left!==z,we=X.rows!==l.rows||X.cols!==l.cols):(X=ne(t,H),g?Ce(xe(X,ye,ue.left),A):Ce(z,xe(X,ye,ue.top)),Oe=this.lastScrollPos!==(g?z:A),we=X!==l),this.isRangeChanged=we,Oe&&(this.first=X)}},scrollInView:function(t,i){var c=this,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"auto";if(i){var g=this.isBoth(),m=this.isHorizontal(),l=g?t.every(function(ye){return ye>-1}):t>-1;if(l){var S=this.getRenderedRange(),I=S.first,A=S.viewport,O=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return c.scrollTo({left:ne,top:xe,behavior:p})},z=i==="to-start",D=i==="to-end";if(z){if(g)A.first.rows-I.rows>t[0]?O(A.first.cols*this.itemSize[1],(A.first.rows-1)*this.itemSize[0]):A.first.cols-I.cols>t[1]&&O((A.first.cols-1)*this.itemSize[1],A.first.rows*this.itemSize[0]);else if(A.first-I>t){var H=(A.first-1)*this.itemSize;m?O(H,0):O(0,H)}}else if(D){if(g)A.last.rows-I.rows<=t[0]+1?O(A.first.cols*this.itemSize[1],(A.first.rows+1)*this.itemSize[0]):A.last.cols-I.cols<=t[1]+1&&O((A.first.cols+1)*this.itemSize[1],A.first.rows*this.itemSize[0]);else if(A.last-I<=t+1){var ue=(A.first+1)*this.itemSize;m?O(ue,0):O(0,ue)}}}}else this.scrollToIndex(t,p)},getRenderedRange:function(){var t=function(O,z){return Math.floor(O/(z||O))},i=this.first,c=0;if(this.element){var p=this.isBoth(),g=this.isHorizontal(),m=this.element,l=m.scrollTop,S=m.scrollLeft;if(p)i={rows:t(l,this.itemSize[0]),cols:t(S,this.itemSize[1])},c={rows:i.rows+this.numItemsInViewport.rows,cols:i.cols+this.numItemsInViewport.cols};else{var I=g?S:l;i=t(I,this.itemSize),c=i+this.numItemsInViewport}}return{first:this.first,last:this.last,viewport:{first:i,last:c}}},calculateNumItems:function(){var t=this.isBoth(),i=this.isHorizontal(),c=this.itemSize,p=this.getContentPosition(),g=this.element?this.element.offsetWidth-p.left:0,m=this.element?this.element.offsetHeight-p.top:0,l=function(z,D){return Math.ceil(z/(D||z))},S=function(z){return Math.ceil(z/2)},I=t?{rows:l(m,c[0]),cols:l(g,c[1])}:l(i?g:m,c),A=this.d_numToleratedItems||(t?[S(I.rows),S(I.cols)]:S(I));return{numItemsInViewport:I,numToleratedItems:A}},calculateOptions:function(){var t=this,i=this.isBoth(),c=this.first,p=this.calculateNumItems(),g=p.numItemsInViewport,m=p.numToleratedItems,l=function(A,O,z){var D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.getLast(A+O+(A<z?2:3)*z,D)},S=i?{rows:l(c.rows,g.rows,m[0]),cols:l(c.cols,g.cols,m[1],!0)}:l(c,g,m);this.last=S,this.numItemsInViewport=g,this.d_numToleratedItems=m,this.$emit("update:numToleratedItems",this.d_numToleratedItems),this.showLoader&&(this.loaderArr=i?Array.from({length:g.rows}).map(function(){return Array.from({length:g.cols})}):Array.from({length:g})),this.lazy&&Promise.resolve().then(function(){var I;t.lazyLoadState={first:t.step?i?{rows:0,cols:c.cols}:0:c,last:Math.min(t.step?t.step:S,((I=t.items)===null||I===void 0?void 0:I.length)-1||0)},t.$emit("lazy-load",t.lazyLoadState)})},calculateAutoSize:function(){var t=this;this.autoSize&&!this.d_loading&&Promise.resolve().then(function(){if(t.content){var i=t.isBoth(),c=t.isHorizontal(),p=t.isVertical();t.content.style.minHeight=t.content.style.minWidth="auto",t.content.style.position="relative",t.element.style.contain="none";var g=[hl(t.element),dl(t.element)],m=g[0],l=g[1];(i||c)&&(t.element.style.width=m<t.defaultWidth?m+"px":t.scrollWidth||t.defaultWidth+"px"),(i||p)&&(t.element.style.height=l<t.defaultHeight?l+"px":t.scrollHeight||t.defaultHeight+"px"),t.content.style.minHeight=t.content.style.minWidth="",t.content.style.position="",t.element.style.contain=""}})},getLast:function(){var t,i,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,p=arguments.length>1?arguments[1]:void 0;return this.items?Math.min(p?((t=this.columns||this.items[0])===null||t===void 0?void 0:t.length)||0:((i=this.items)===null||i===void 0?void 0:i.length)||0,c):0},getContentPosition:function(){if(this.content){var t=getComputedStyle(this.content),i=parseFloat(t.paddingLeft)+Math.max(parseFloat(t.left)||0,0),c=parseFloat(t.paddingRight)+Math.max(parseFloat(t.right)||0,0),p=parseFloat(t.paddingTop)+Math.max(parseFloat(t.top)||0,0),g=parseFloat(t.paddingBottom)+Math.max(parseFloat(t.bottom)||0,0);return{left:i,right:c,top:p,bottom:g,x:i+c,y:p+g}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}},setSize:function(){var t=this;if(this.element){var i=this.isBoth(),c=this.isHorizontal(),p=this.element.parentElement,g=this.scrollWidth||"".concat(this.element.offsetWidth||p.offsetWidth,"px"),m=this.scrollHeight||"".concat(this.element.offsetHeight||p.offsetHeight,"px"),l=function(I,A){return t.element.style[I]=A};i||c?(l("height",m),l("width",g)):l("height",m)}},setSpacerSize:function(){var t=this,i=this.items;if(i){var c=this.isBoth(),p=this.isHorizontal(),g=this.getContentPosition(),m=function(S,I,A){var O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return t.spacerStyle=Md(Md({},t.spacerStyle),nC({},"".concat(S),(I||[]).length*A+O+"px"))};c?(m("height",i,this.itemSize[0],g.y),m("width",this.columns||i[1],this.itemSize[1],g.x)):p?m("width",this.columns||i,this.itemSize,g.x):m("height",i,this.itemSize,g.y)}},setContentPosition:function(t){var i=this;if(this.content&&!this.appendOnly){var c=this.isBoth(),p=this.isHorizontal(),g=t?t.first:this.first,m=function(A,O){return A*O},l=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return i.contentStyle=Md(Md({},i.contentStyle),{transform:"translate3d(".concat(A,"px, ").concat(O,"px, 0)")})};if(c)l(m(g.cols,this.itemSize[1]),m(g.rows,this.itemSize[0]));else{var S=m(g,this.itemSize);p?l(S,0):l(0,S)}}},onScrollPositionChange:function(t){var i=this,c=t.target,p=this.isBoth(),g=this.isHorizontal(),m=this.getContentPosition(),l=function(Qe,Ye){return Qe?Qe>Ye?Qe-Ye:Qe:0},S=function(Qe,Ye){return Math.floor(Qe/(Ye||Qe))},I=function(Qe,Ye,Xe,wt,Kt,vt){return Qe<=Kt?Kt:vt?Xe-wt-Kt:Ye+Kt-1},A=function(Qe,Ye,Xe,wt,Kt,vt,At,Ut){if(Qe<=vt)return 0;var et=Math.max(0,At?Qe<Ye?Xe:Qe-vt:Qe>Ye?Xe:Qe-2*vt),mt=i.getLast(et,Ut);return et>mt?mt-Kt:et},O=function(Qe,Ye,Xe,wt,Kt,vt){var At=Ye+wt+2*Kt;return Qe>=Kt&&(At+=Kt+1),i.getLast(At,vt)},z=l(c.scrollTop,m.top),D=l(c.scrollLeft,m.left),H=p?{rows:0,cols:0}:0,ue=this.last,ye=!1,ne=this.lastScrollPos;if(p){var xe=this.lastScrollPos.top<=z,Ce=this.lastScrollPos.left<=D;if(!this.appendOnly||this.appendOnly&&(xe||Ce)){var X={rows:S(z,this.itemSize[0]),cols:S(D,this.itemSize[1])},we={rows:I(X.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],xe),cols:I(X.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],Ce)};H={rows:A(X.rows,we.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],xe),cols:A(X.cols,we.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],Ce,!0)},ue={rows:O(X.rows,H.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:O(X.cols,H.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},ye=H.rows!==this.first.rows||ue.rows!==this.last.rows||H.cols!==this.first.cols||ue.cols!==this.last.cols||this.isRangeChanged,ne={top:z,left:D}}}else{var Oe=g?D:z,ke=this.lastScrollPos<=Oe;if(!this.appendOnly||this.appendOnly&&ke){var Ve=S(Oe,this.itemSize),We=I(Ve,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,ke);H=A(Ve,We,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,ke),ue=O(Ve,H,this.last,this.numItemsInViewport,this.d_numToleratedItems),ye=H!==this.first||ue!==this.last||this.isRangeChanged,ne=Oe}}return{first:H,last:ue,isRangeChanged:ye,scrollPos:ne}},onScrollChange:function(t){var i=this.onScrollPositionChange(t),c=i.first,p=i.last,g=i.isRangeChanged,m=i.scrollPos;if(g){var l={first:c,last:p};if(this.setContentPosition(l),this.first=c,this.last=p,this.lastScrollPos=m,this.$emit("scroll-index-change",l),this.lazy&&this.isPageChanged(c)){var S,I,A={first:this.step?Math.min(this.getPageByFirst(c)*this.step,(((S=this.items)===null||S===void 0?void 0:S.length)||0)-this.step):c,last:Math.min(this.step?(this.getPageByFirst(c)+1)*this.step:p,((I=this.items)===null||I===void 0?void 0:I.length)-1||0)},O=this.lazyLoadState.first!==A.first||this.lazyLoadState.last!==A.last;O&&this.$emit("lazy-load",A),this.lazyLoadState=A}}},onScroll:function(t){var i=this;if(this.$emit("scroll",t),this.delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.isPageChanged()){if(!this.d_loading&&this.showLoader){var c=this.onScrollPositionChange(t),p=c.isRangeChanged,g=p||(this.step?this.isPageChanged():!1);g&&(this.d_loading=!0)}this.scrollTimeout=setTimeout(function(){i.onScrollChange(t),i.d_loading&&i.showLoader&&(!i.lazy||i.loading===void 0)&&(i.d_loading=!1,i.page=i.getPageByFirst())},this.delay)}}else this.onScrollChange(t)},onResize:function(){var t=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){if(Cp(t.element)){var i=t.isBoth(),c=t.isVertical(),p=t.isHorizontal(),g=[hl(t.element),dl(t.element)],m=g[0],l=g[1],S=m!==t.defaultWidth,I=l!==t.defaultHeight,A=i?S||I:p?S:c?I:!1;A&&(t.d_numToleratedItems=t.numToleratedItems,t.defaultWidth=m,t.defaultHeight=l,t.defaultContentWidth=hl(t.content),t.defaultContentHeight=dl(t.content),t.init())}},this.resizeDelay)},bindResizeListener:function(){this.resizeListener||(this.resizeListener=this.onResize.bind(this),window.addEventListener("resize",this.resizeListener),window.addEventListener("orientationchange",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),window.removeEventListener("orientationchange",this.resizeListener),this.resizeListener=null)},getOptions:function(t){var i=(this.items||[]).length,c=this.isBoth()?this.first.rows+t:this.first+t;return{index:c,count:i,first:c===0,last:c===i-1,even:c%2===0,odd:c%2!==0}},getLoaderOptions:function(t,i){var c=this.loaderArr.length;return Md({index:t,count:c,first:t===0,last:t===c-1,even:t%2===0,odd:t%2!==0},i)},getPageByFirst:function(t){return Math.floor(((t??this.first)+this.d_numToleratedItems*4)/(this.step||1))},isPageChanged:function(t){return this.step&&!this.lazy?this.page!==this.getPageByFirst(t??this.first):!0},setContentEl:function(t){this.content=t||this.content||em(this.element,'[data-pc-section="content"]')},elementRef:function(t){this.element=t},contentRef:function(t){this.content=t}},computed:{containerClass:function(){return["p-virtualscroller",this.class,{"p-virtualscroller-inline":this.inline,"p-virtualscroller-both p-both-scroll":this.isBoth(),"p-virtualscroller-horizontal p-horizontal-scroll":this.isHorizontal()}]},contentClass:function(){return["p-virtualscroller-content",{"p-virtualscroller-loading":this.d_loading}]},loaderClass:function(){return["p-virtualscroller-loader",{"p-virtualscroller-loader-mask":!this.$slots.loader}]},loadedItems:function(){var t=this;return this.items&&!this.d_loading?this.isBoth()?this.items.slice(this.appendOnly?0:this.first.rows,this.last.rows).map(function(i){return t.columns?i:i.slice(t.appendOnly?0:t.first.cols,t.last.cols)}):this.isHorizontal()&&this.columns?this.items:this.items.slice(this.appendOnly?0:this.first,this.last):[]},loadedRows:function(){return this.d_loading?this.loaderDisabled?this.loaderArr:[]:this.loadedItems},loadedColumns:function(){if(this.columns){var t=this.isBoth(),i=this.isHorizontal();if(t||i)return this.d_loading&&this.loaderDisabled?t?this.loaderArr[0]:this.loaderArr:this.columns.slice(t?this.first.cols:this.first,t?this.last.cols:this.last)}return this.columns}},components:{SpinnerIcon:My}},BV=["tabindex"];function FV(e,t,i,c,p,g){var m=no("SpinnerIcon");return e.disabled?(_t(),Tt(Ar,{key:1},[un(e.$slots,"default"),un(e.$slots,"content",{items:e.items,rows:e.items,columns:g.loadedColumns})],64)):(_t(),Tt("div",Bt({key:0,ref:g.elementRef,class:g.containerClass,tabindex:e.tabindex,style:e.style,onScroll:t[0]||(t[0]=function(){return g.onScroll&&g.onScroll.apply(g,arguments)})},e.ptmi("root")),[un(e.$slots,"content",{styleClass:g.contentClass,items:g.loadedItems,getItemOptions:g.getOptions,loading:p.d_loading,getLoaderOptions:g.getLoaderOptions,itemSize:e.itemSize,rows:g.loadedRows,columns:g.loadedColumns,contentRef:g.contentRef,spacerStyle:p.spacerStyle,contentStyle:p.contentStyle,vertical:g.isVertical(),horizontal:g.isHorizontal(),both:g.isBoth()},function(){return[lt("div",Bt({ref:g.contentRef,class:g.contentClass,style:p.contentStyle},e.ptm("content")),[(_t(!0),Tt(Ar,null,Oo(g.loadedItems,function(l,S){return un(e.$slots,"item",{key:S,item:l,options:g.getOptions(S)})}),128))],16)]}),e.showSpacer?(_t(),Tt("div",Bt({key:0,class:"p-virtualscroller-spacer",style:p.spacerStyle},e.ptm("spacer")),null,16)):Lr("",!0),!e.loaderDisabled&&e.showLoader&&p.d_loading?(_t(),Tt("div",Bt({key:1,class:g.loaderClass},e.ptm("loader")),[e.$slots&&e.$slots.loader?(_t(!0),Tt(Ar,{key:0},Oo(p.loaderArr,function(l,S){return un(e.$slots,"loader",{key:S,options:g.getLoaderOptions(S,g.isBoth()&&{numCols:e.d_numItemsInViewport.cols})})}),128)):Lr("",!0),un(e.$slots,"loadingicon",{},function(){return[br(m,Bt({spin:"",class:"p-virtualscroller-loading-icon"},e.ptm("loadingIcon")),null,16)]})],16)):Lr("",!0)],16,BV))}iC.render=FV;var NV=({dt:e})=>`
.p-select {
    display: inline-flex;
    cursor: pointer;
    position: relative;
    user-select: none;
    background: ${e("select.background")};
    border: 1px solid ${e("select.border.color")};
    transition: background ${e("select.transition.duration")}, color ${e("select.transition.duration")}, border-color ${e("select.transition.duration")},
        outline-color ${e("select.transition.duration")}, box-shadow ${e("select.transition.duration")};
    border-radius: ${e("select.border.radius")};
    outline-color: transparent;
    box-shadow: ${e("select.shadow")};
}

.p-select:not(.p-disabled):hover {
    border-color: ${e("select.hover.border.color")};
}

.p-select:not(.p-disabled).p-focus {
    border-color: ${e("select.focus.border.color")};
    box-shadow: ${e("select.focus.ring.shadow")};
    outline: ${e("select.focus.ring.width")} ${e("select.focus.ring.style")} ${e("select.focus.ring.color")};
    outline-offset: ${e("select.focus.ring.offset")};
}

.p-select.p-variant-filled {
    background: ${e("select.filled.background")};
}

.p-select.p-variant-filled:not(.p-disabled):hover {
    background: ${e("select.filled.hover.background")};
}

.p-select.p-variant-filled:not(.p-disabled).p-focus {
    background: ${e("select.filled.focus.background")};
}

.p-select.p-invalid {
    border-color: ${e("select.invalid.border.color")};
}

.p-select.p-disabled {
    opacity: 1;
    background: ${e("select.disabled.background")};
}

.p-select-clear-icon {
    position: absolute;
    top: 50%;
    margin-top: -0.5rem;
    color: ${e("select.clear.icon.color")};
    inset-inline-end: ${e("select.dropdown.width")};
}

.p-select-dropdown {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    background: transparent;
    color: ${e("select.dropdown.color")};
    width: ${e("select.dropdown.width")};
    border-start-end-radius: ${e("select.border.radius")};
    border-end-end-radius: ${e("select.border.radius")};
}

.p-select-label {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    flex: 1 1 auto;
    width: 1%;
    padding: ${e("select.padding.y")} ${e("select.padding.x")};
    text-overflow: ellipsis;
    cursor: pointer;
    color: ${e("select.color")};
    background: transparent;
    border: 0 none;
    outline: 0 none;
}

.p-select-label.p-placeholder {
    color: ${e("select.placeholder.color")};
}

.p-select.p-invalid .p-select-label.p-placeholder {
    color: ${e("select.invalid.placeholder.color")};
}

.p-select:has(.p-select-clear-icon) .p-select-label {
    padding-inline-end: calc(1rem + ${e("select.padding.x")});
}

.p-select.p-disabled .p-select-label {
    color: ${e("select.disabled.color")};
}

.p-select-label-empty {
    overflow: hidden;
    opacity: 0;
}

input.p-select-label {
    cursor: default;
}

.p-select .p-select-overlay {
    min-width: 100%;
}

.p-select-overlay {
    position: absolute;
    top: 0;
    left: 0;
    background: ${e("select.overlay.background")};
    color: ${e("select.overlay.color")};
    border: 1px solid ${e("select.overlay.border.color")};
    border-radius: ${e("select.overlay.border.radius")};
    box-shadow: ${e("select.overlay.shadow")};
}

.p-select-header {
    padding: ${e("select.list.header.padding")};
}

.p-select-filter {
    width: 100%;
}

.p-select-list-container {
    overflow: auto;
}

.p-select-option-group {
    cursor: auto;
    margin: 0;
    padding: ${e("select.option.group.padding")};
    background: ${e("select.option.group.background")};
    color: ${e("select.option.group.color")};
    font-weight: ${e("select.option.group.font.weight")};
}

.p-select-list {
    margin: 0;
    padding: 0;
    list-style-type: none;
    padding: ${e("select.list.padding")};
    gap: ${e("select.list.gap")};
    display: flex;
    flex-direction: column;
}

.p-select-option {
    cursor: pointer;
    font-weight: normal;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    padding: ${e("select.option.padding")};
    border: 0 none;
    color: ${e("select.option.color")};
    background: transparent;
    transition: background ${e("select.transition.duration")}, color ${e("select.transition.duration")}, border-color ${e("select.transition.duration")},
            box-shadow ${e("select.transition.duration")}, outline-color ${e("select.transition.duration")};
    border-radius: ${e("select.option.border.radius")};
}

.p-select-option:not(.p-select-option-selected):not(.p-disabled).p-focus {
    background: ${e("select.option.focus.background")};
    color: ${e("select.option.focus.color")};
}

.p-select-option.p-select-option-selected {
    background: ${e("select.option.selected.background")};
    color: ${e("select.option.selected.color")};
}

.p-select-option.p-select-option-selected.p-focus {
    background: ${e("select.option.selected.focus.background")};
    color: ${e("select.option.selected.focus.color")};
}

.p-select-option-blank-icon {
    flex-shrink: 0;
}

.p-select-option-check-icon {
    position: relative;
    flex-shrink: 0;
    margin-inline-start: ${e("select.checkmark.gutter.start")};
    margin-inline-end: ${e("select.checkmark.gutter.end")};
    color: ${e("select.checkmark.color")};
}

.p-select-empty-message {
    padding: ${e("select.empty.message.padding")};
}

.p-select-fluid {
    display: flex;
    width: 100%;
}

.p-select-sm .p-select-label {
    font-size: ${e("select.sm.font.size")};
    padding-block: ${e("select.sm.padding.y")};
    padding-inline: ${e("select.sm.padding.x")};
}

.p-select-sm .p-select-dropdown .p-icon {
    font-size: ${e("select.sm.font.size")};
    width: ${e("select.sm.font.size")};
    height: ${e("select.sm.font.size")};
}

.p-select-lg .p-select-label {
    font-size: ${e("select.lg.font.size")};
    padding-block: ${e("select.lg.padding.y")};
    padding-inline: ${e("select.lg.padding.x")};
}

.p-select-lg .p-select-dropdown .p-icon {
    font-size: ${e("select.lg.font.size")};
    width: ${e("select.lg.font.size")};
    height: ${e("select.lg.font.size")};
}
`,jV={root:function(t){var i=t.instance,c=t.props,p=t.state;return["p-select p-component p-inputwrapper",{"p-disabled":c.disabled,"p-invalid":i.$invalid,"p-variant-filled":i.$variant==="filled","p-focus":p.focused,"p-inputwrapper-filled":i.$filled,"p-inputwrapper-focus":p.focused||p.overlayVisible,"p-select-open":p.overlayVisible,"p-select-fluid":i.$fluid,"p-select-sm p-inputfield-sm":c.size==="small","p-select-lg p-inputfield-lg":c.size==="large"}]},label:function(t){var i=t.instance,c=t.props;return["p-select-label",{"p-placeholder":!c.editable&&i.label===c.placeholder,"p-select-label-empty":!c.editable&&!i.$slots.value&&(i.label==="p-emptylabel"||i.label.length===0)}]},clearIcon:"p-select-clear-icon",dropdown:"p-select-dropdown",loadingicon:"p-select-loading-icon",dropdownIcon:"p-select-dropdown-icon",overlay:"p-select-overlay p-component",header:"p-select-header",pcFilter:"p-select-filter",listContainer:"p-select-list-container",list:"p-select-list",optionGroup:"p-select-option-group",optionGroupLabel:"p-select-option-group-label",option:function(t){var i=t.instance,c=t.props,p=t.state,g=t.option,m=t.focusedOption;return["p-select-option",{"p-select-option-selected":i.isSelected(g)&&c.highlightOnSelect,"p-focus":p.focusedOptionIndex===m,"p-disabled":i.isOptionDisabled(g)}]},optionLabel:"p-select-option-label",optionCheckIcon:"p-select-option-check-icon",optionBlankIcon:"p-select-option-blank-icon",emptyMessage:"p-select-empty-message"},VV=Er.extend({name:"select",style:NV,classes:jV}),UV={name:"BaseSelect",extends:om,props:{options:Array,optionLabel:[String,Function],optionValue:[String,Function],optionDisabled:[String,Function],optionGroupLabel:[String,Function],optionGroupChildren:[String,Function],scrollHeight:{type:String,default:"14rem"},filter:Boolean,filterPlaceholder:String,filterLocale:String,filterMatchMode:{type:String,default:"contains"},filterFields:{type:Array,default:null},editable:Boolean,placeholder:{type:String,default:null},dataKey:null,showClear:{type:Boolean,default:!1},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},labelId:{type:String,default:null},labelClass:{type:[String,Object],default:null},labelStyle:{type:Object,default:null},panelClass:{type:[String,Object],default:null},overlayStyle:{type:Object,default:null},overlayClass:{type:[String,Object],default:null},panelStyle:{type:Object,default:null},appendTo:{type:[String,Object],default:"body"},loading:{type:Boolean,default:!1},clearIcon:{type:String,default:void 0},dropdownIcon:{type:String,default:void 0},filterIcon:{type:String,default:void 0},loadingIcon:{type:String,default:void 0},resetFilterOnHide:{type:Boolean,default:!1},resetFilterOnClear:{type:Boolean,default:!1},virtualScrollerOptions:{type:Object,default:null},autoOptionFocus:{type:Boolean,default:!1},autoFilterFocus:{type:Boolean,default:!1},selectOnFocus:{type:Boolean,default:!1},focusOnHover:{type:Boolean,default:!0},highlightOnSelect:{type:Boolean,default:!0},checkmark:{type:Boolean,default:!1},filterMessage:{type:String,default:null},selectionMessage:{type:String,default:null},emptySelectionMessage:{type:String,default:null},emptyFilterMessage:{type:String,default:null},emptyMessage:{type:String,default:null},tabindex:{type:Number,default:0},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:VV,provide:function(){return{$pcSelect:this,$parentInstance:this}}};function vh(e){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vh(e)}function ZV(e){return qV(e)||HV(e)||WV(e)||GV()}function GV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WV(e,t){if(e){if(typeof e=="string")return R_(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?R_(e,t):void 0}}function HV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qV(e){if(Array.isArray(e))return R_(e)}function R_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,c=Array(t);i<t;i++)c[i]=e[i];return c}function jx(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(e,p).enumerable})),i.push.apply(i,c)}return i}function Vx(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?jx(Object(i),!0).forEach(function(c){oC(e,c,i[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jx(Object(i)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(i,c))})}return e}function oC(e,t,i){return(t=KV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function KV(e){var t=YV(e,"string");return vh(t)=="symbol"?t:t+""}function YV(e,t){if(vh(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var c=i.call(e,t);if(vh(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sC={name:"Select",extends:UV,inheritAttrs:!1,emits:["change","focus","blur","before-show","before-hide","show","hide","filter"],outsideClickListener:null,scrollHandler:null,resizeListener:null,labelClickListener:null,matchMediaOrientationListener:null,overlay:null,list:null,virtualScroller:null,searchTimeout:null,searchValue:null,isModelValueChanged:!1,data:function(){return{clicked:!1,focused:!1,focusedOptionIndex:-1,filterValue:null,overlayVisible:!1,queryOrientation:null}},watch:{modelValue:function(){this.isModelValueChanged=!0},options:function(){this.autoUpdateModel()}},mounted:function(){this.autoUpdateModel(),this.bindLabelClickListener(),this.bindMatchMediaOrientationListener()},updated:function(){this.overlayVisible&&this.isModelValueChanged&&this.scrollInView(this.findSelectedOptionIndex()),this.isModelValueChanged=!1},beforeUnmount:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindLabelClickListener(),this.unbindMatchMediaOrientationListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&(Zc.clear(this.overlay),this.overlay=null)},methods:{getOptionIndex:function(t,i){return this.virtualScrollerDisabled?t:i&&i(t).index},getOptionLabel:function(t){return this.optionLabel?As(t,this.optionLabel):t},getOptionValue:function(t){return this.optionValue?As(t,this.optionValue):t},getOptionRenderKey:function(t,i){return(this.dataKey?As(t,this.dataKey):this.getOptionLabel(t))+"_"+i},getPTItemOptions:function(t,i,c,p){return this.ptm(p,{context:{option:t,index:c,selected:this.isSelected(t),focused:this.focusedOptionIndex===this.getOptionIndex(c,i),disabled:this.isOptionDisabled(t)}})},isOptionDisabled:function(t){return this.optionDisabled?As(t,this.optionDisabled):!1},isOptionGroup:function(t){return this.optionGroupLabel&&t.optionGroup&&t.group},getOptionGroupLabel:function(t){return As(t,this.optionGroupLabel)},getOptionGroupChildren:function(t){return As(t,this.optionGroupChildren)},getAriaPosInset:function(t){var i=this;return(this.optionGroupLabel?t-this.visibleOptions.slice(0,t).filter(function(c){return i.isOptionGroup(c)}).length:t)+1},show:function(t){this.$emit("before-show"),this.overlayVisible=!0,this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex(),t&&io(this.$refs.focusInput)},hide:function(t){var i=this,c=function(){i.$emit("before-hide"),i.overlayVisible=!1,i.clicked=!1,i.focusedOptionIndex=-1,i.searchValue="",i.resetFilterOnHide&&(i.filterValue=null),t&&io(i.$refs.focusInput)};setTimeout(function(){c()},0)},onFocus:function(t){this.disabled||(this.focused=!0,this.overlayVisible&&(this.focusedOptionIndex=this.focusedOptionIndex!==-1?this.focusedOptionIndex:this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex(),this.scrollInView(this.focusedOptionIndex)),this.$emit("focus",t))},onBlur:function(t){var i,c;this.focused=!1,this.focusedOptionIndex=-1,this.searchValue="",this.$emit("blur",t),(i=(c=this.formField).onBlur)===null||i===void 0||i.call(c,t)},onKeyDown:function(t){if(this.disabled||JM()){t.preventDefault();return}var i=t.metaKey||t.ctrlKey;switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t,this.editable);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(t,this.editable);break;case"Home":this.onHomeKey(t,this.editable);break;case"End":this.onEndKey(t,this.editable);break;case"PageDown":this.onPageDownKey(t);break;case"PageUp":this.onPageUpKey(t);break;case"Space":this.onSpaceKey(t,this.editable);break;case"Enter":case"NumpadEnter":this.onEnterKey(t);break;case"Escape":this.onEscapeKey(t);break;case"Tab":this.onTabKey(t);break;case"Backspace":this.onBackspaceKey(t,this.editable);break;case"ShiftLeft":case"ShiftRight":break;default:!i&&NM(t.key)&&(!this.overlayVisible&&this.show(),!this.editable&&this.searchOptions(t,t.key));break}this.clicked=!1},onEditableInput:function(t){var i=t.target.value;this.searchValue="";var c=this.searchOptions(t,i);!c&&(this.focusedOptionIndex=-1),this.updateModel(t,i),!this.overlayVisible&&xr(i)&&this.show()},onContainerClick:function(t){this.disabled||this.loading||t.target.tagName==="INPUT"||t.target.getAttribute("data-pc-section")==="clearicon"||t.target.closest('[data-pc-section="clearicon"]')||((!this.overlay||!this.overlay.contains(t.target))&&(this.overlayVisible?this.hide(!0):this.show(!0)),this.clicked=!0)},onClearClick:function(t){this.updateModel(t,null),this.resetFilterOnClear&&(this.filterValue=null)},onFirstHiddenFocus:function(t){var i=t.relatedTarget===this.$refs.focusInput?Oc(this.overlay,':not([data-p-hidden-focusable="true"])'):this.$refs.focusInput;io(i)},onLastHiddenFocus:function(t){var i=t.relatedTarget===this.$refs.focusInput?Fw(this.overlay,':not([data-p-hidden-focusable="true"])'):this.$refs.focusInput;io(i)},onOptionSelect:function(t,i){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=this.getOptionValue(i);this.updateModel(t,p),c&&this.hide(!0)},onOptionMouseMove:function(t,i){this.focusOnHover&&this.changeFocusedOptionIndex(t,i)},onFilterChange:function(t){var i=t.target.value;this.filterValue=i,this.focusedOptionIndex=-1,this.$emit("filter",{originalEvent:t,value:i}),!this.virtualScrollerDisabled&&this.virtualScroller.scrollToIndex(0)},onFilterKeyDown:function(t){if(!t.isComposing)switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(t,!0);break;case"Home":this.onHomeKey(t,!0);break;case"End":this.onEndKey(t,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(t);break;case"Escape":this.onEscapeKey(t);break;case"Tab":this.onTabKey(t,!0);break}},onFilterBlur:function(){this.focusedOptionIndex=-1},onFilterUpdated:function(){this.overlayVisible&&this.alignOverlay()},onOverlayClick:function(t){Ad.emit("overlay-click",{originalEvent:t,target:this.$el})},onOverlayKeyDown:function(t){switch(t.code){case"Escape":this.onEscapeKey(t);break}},onArrowDownKey:function(t){if(!this.overlayVisible)this.show(),this.editable&&this.changeFocusedOptionIndex(t,this.findSelectedOptionIndex());else{var i=this.focusedOptionIndex!==-1?this.findNextOptionIndex(this.focusedOptionIndex):this.clicked?this.findFirstOptionIndex():this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(t,i)}t.preventDefault()},onArrowUpKey:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.altKey&&!i)this.focusedOptionIndex!==-1&&this.onOptionSelect(t,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(),t.preventDefault();else{var c=this.focusedOptionIndex!==-1?this.findPrevOptionIndex(this.focusedOptionIndex):this.clicked?this.findLastOptionIndex():this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(t,c),!this.overlayVisible&&this.show(),t.preventDefault()}},onArrowLeftKey:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;i&&(this.focusedOptionIndex=-1)},onHomeKey:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i){var c=t.currentTarget;t.shiftKey?c.setSelectionRange(0,t.target.selectionStart):(c.setSelectionRange(0,0),this.focusedOptionIndex=-1)}else this.changeFocusedOptionIndex(t,this.findFirstOptionIndex()),!this.overlayVisible&&this.show();t.preventDefault()},onEndKey:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i){var c=t.currentTarget;if(t.shiftKey)c.setSelectionRange(t.target.selectionStart,c.value.length);else{var p=c.value.length;c.setSelectionRange(p,p),this.focusedOptionIndex=-1}}else this.changeFocusedOptionIndex(t,this.findLastOptionIndex()),!this.overlayVisible&&this.show();t.preventDefault()},onPageUpKey:function(t){this.scrollInView(0),t.preventDefault()},onPageDownKey:function(t){this.scrollInView(this.visibleOptions.length-1),t.preventDefault()},onEnterKey:function(t){this.overlayVisible?(this.focusedOptionIndex!==-1&&this.onOptionSelect(t,this.visibleOptions[this.focusedOptionIndex]),this.hide()):(this.focusedOptionIndex=-1,this.onArrowDownKey(t)),t.preventDefault()},onSpaceKey:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;!i&&this.onEnterKey(t)},onEscapeKey:function(t){this.overlayVisible&&this.hide(!0),t.preventDefault(),t.stopPropagation()},onTabKey:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;i||(this.overlayVisible&&this.hasFocusableElements()?(io(this.$refs.firstHiddenFocusableElementOnOverlay),t.preventDefault()):(this.focusedOptionIndex!==-1&&this.onOptionSelect(t,this.visibleOptions[this.focusedOptionIndex]),this.overlayVisible&&this.hide(this.filter)))},onBackspaceKey:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;i&&!this.overlayVisible&&this.show()},onOverlayEnter:function(t){var i=this;Zc.set("overlay",t,this.$primevue.config.zIndex.overlay),Ow(t,{position:"absolute",top:"0",left:"0"}),this.alignOverlay(),this.scrollInView(),setTimeout(function(){i.autoFilterFocus&&i.filter&&io(i.$refs.filterInput.$el),i.autoUpdateModel()},1)},onOverlayAfterEnter:function(){this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$emit("show")},onOverlayLeave:function(){var t=this;this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener(),this.autoFilterFocus&&this.filter&&!this.editable&&this.$nextTick(function(){t.$refs.filterInput&&io(t.$refs.filterInput.$el)}),this.$emit("hide"),this.overlay=null},onOverlayAfterLeave:function(t){Zc.clear(t)},alignOverlay:function(){this.appendTo==="self"?WM(this.overlay,this.$el):this.overlay&&(this.overlay.style.minWidth=zw(this.$el)+"px",Dw(this.overlay,this.$el))},bindOutsideClickListener:function(){var t=this;this.outsideClickListener||(this.outsideClickListener=function(i){t.overlayVisible&&t.overlay&&!t.$el.contains(i.target)&&!t.overlay.contains(i.target)&&t.hide()},document.addEventListener("click",this.outsideClickListener,!0))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener,!0),this.outsideClickListener=null)},bindScrollListener:function(){var t=this;this.scrollHandler||(this.scrollHandler=new f2(this.$refs.container,function(){t.overlayVisible&&t.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var t=this;this.resizeListener||(this.resizeListener=function(){t.overlayVisible&&!jw()&&t.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},bindLabelClickListener:function(){var t=this;if(!this.editable&&!this.labelClickListener){var i=document.querySelector('label[for="'.concat(this.labelId,'"]'));i&&Cp(i)&&(this.labelClickListener=function(){io(t.$refs.focusInput)},i.addEventListener("click",this.labelClickListener))}},unbindLabelClickListener:function(){if(this.labelClickListener){var t=document.querySelector('label[for="'.concat(this.labelId,'"]'));t&&Cp(t)&&t.removeEventListener("click",this.labelClickListener)}},bindMatchMediaOrientationListener:function(){var t=this;if(!this.matchMediaOrientationListener){var i=matchMedia("(orientation: portrait)");this.queryOrientation=i,this.matchMediaOrientationListener=function(){t.alignOverlay()},this.queryOrientation.addEventListener("change",this.matchMediaOrientationListener)}},unbindMatchMediaOrientationListener:function(){this.matchMediaOrientationListener&&(this.queryOrientation.removeEventListener("change",this.matchMediaOrientationListener),this.queryOrientation=null,this.matchMediaOrientationListener=null)},hasFocusableElements:function(){return _y(this.overlay,':not([data-p-hidden-focusable="true"])').length>0},isOptionExactMatched:function(t){var i;return this.isValidOption(t)&&typeof this.getOptionLabel(t)=="string"&&((i=this.getOptionLabel(t))===null||i===void 0?void 0:i.toLocaleLowerCase(this.filterLocale))==this.searchValue.toLocaleLowerCase(this.filterLocale)},isOptionStartsWith:function(t){var i;return this.isValidOption(t)&&typeof this.getOptionLabel(t)=="string"&&((i=this.getOptionLabel(t))===null||i===void 0?void 0:i.toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale)))},isValidOption:function(t){return xr(t)&&!(this.isOptionDisabled(t)||this.isOptionGroup(t))},isValidSelectedOption:function(t){return this.isValidOption(t)&&this.isSelected(t)},isSelected:function(t){return Th(this.d_value,this.getOptionValue(t),this.equalityKey)},findFirstOptionIndex:function(){var t=this;return this.visibleOptions.findIndex(function(i){return t.isValidOption(i)})},findLastOptionIndex:function(){var t=this;return Lv(this.visibleOptions,function(i){return t.isValidOption(i)})},findNextOptionIndex:function(t){var i=this,c=t<this.visibleOptions.length-1?this.visibleOptions.slice(t+1).findIndex(function(p){return i.isValidOption(p)}):-1;return c>-1?c+t+1:t},findPrevOptionIndex:function(t){var i=this,c=t>0?Lv(this.visibleOptions.slice(0,t),function(p){return i.isValidOption(p)}):-1;return c>-1?c:t},findSelectedOptionIndex:function(){var t=this;return this.$filled?this.visibleOptions.findIndex(function(i){return t.isValidSelectedOption(i)}):-1},findFirstFocusedOptionIndex:function(){var t=this.findSelectedOptionIndex();return t<0?this.findFirstOptionIndex():t},findLastFocusedOptionIndex:function(){var t=this.findSelectedOptionIndex();return t<0?this.findLastOptionIndex():t},searchOptions:function(t,i){var c=this;this.searchValue=(this.searchValue||"")+i;var p=-1,g=!1;return xr(this.searchValue)&&(p=this.visibleOptions.findIndex(function(m){return c.isOptionExactMatched(m)}),p===-1&&(p=this.visibleOptions.findIndex(function(m){return c.isOptionStartsWith(m)})),p!==-1&&(g=!0),p===-1&&this.focusedOptionIndex===-1&&(p=this.findFirstFocusedOptionIndex()),p!==-1&&this.changeFocusedOptionIndex(t,p)),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){c.searchValue="",c.searchTimeout=null},500),g},changeFocusedOptionIndex:function(t,i){this.focusedOptionIndex!==i&&(this.focusedOptionIndex=i,this.scrollInView(),this.selectOnFocus&&this.onOptionSelect(t,this.visibleOptions[i],!1))},scrollInView:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;this.$nextTick(function(){var c=i!==-1?"".concat(t.$id,"_").concat(i):t.focusedOptionId,p=em(t.list,'li[id="'.concat(c,'"]'));p?p.scrollIntoView&&p.scrollIntoView({block:"nearest",inline:"nearest"}):t.virtualScrollerDisabled||t.virtualScroller&&t.virtualScroller.scrollToIndex(i!==-1?i:t.focusedOptionIndex)})},autoUpdateModel:function(){this.autoOptionFocus&&(this.focusedOptionIndex=this.findFirstFocusedOptionIndex()),this.selectOnFocus&&this.autoOptionFocus&&!this.$filled&&this.onOptionSelect(null,this.visibleOptions[this.focusedOptionIndex],!1)},updateModel:function(t,i){this.writeValue(i,t),this.$emit("change",{originalEvent:t,value:i})},flatOptions:function(t){var i=this;return(t||[]).reduce(function(c,p,g){c.push({optionGroup:p,group:!0,index:g});var m=i.getOptionGroupChildren(p);return m&&m.forEach(function(l){return c.push(l)}),c},[])},overlayRef:function(t){this.overlay=t},listRef:function(t,i){this.list=t,i&&i(t)},virtualScrollerRef:function(t){this.virtualScroller=t}},computed:{visibleOptions:function(){var t=this,i=this.optionGroupLabel?this.flatOptions(this.options):this.options||[];if(this.filterValue){var c=hE.filter(i,this.searchFields,this.filterValue,this.filterMatchMode,this.filterLocale);if(this.optionGroupLabel){var p=this.options||[],g=[];return p.forEach(function(m){var l=t.getOptionGroupChildren(m),S=l.filter(function(I){return c.includes(I)});S.length>0&&g.push(Vx(Vx({},m),{},oC({},typeof t.optionGroupChildren=="string"?t.optionGroupChildren:"items",ZV(S))))}),this.flatOptions(g)}return c}return i},hasSelectedOption:function(){return this.$filled},label:function(){var t=this.findSelectedOptionIndex();return t!==-1?this.getOptionLabel(this.visibleOptions[t]):this.placeholder||"p-emptylabel"},editableInputValue:function(){var t=this.findSelectedOptionIndex();return t!==-1?this.getOptionLabel(this.visibleOptions[t]):this.d_value||""},equalityKey:function(){return this.optionValue?null:this.dataKey},searchFields:function(){return this.filterFields||[this.optionLabel]},filterResultMessageText:function(){return xr(this.visibleOptions)?this.filterMessageText.replaceAll("{0}",this.visibleOptions.length):this.emptyFilterMessageText},filterMessageText:function(){return this.filterMessage||this.$primevue.config.locale.searchMessage||""},emptyFilterMessageText:function(){return this.emptyFilterMessage||this.$primevue.config.locale.emptySearchMessage||this.$primevue.config.locale.emptyFilterMessage||""},emptyMessageText:function(){return this.emptyMessage||this.$primevue.config.locale.emptyMessage||""},selectionMessageText:function(){return this.selectionMessage||this.$primevue.config.locale.selectionMessage||""},emptySelectionMessageText:function(){return this.emptySelectionMessage||this.$primevue.config.locale.emptySelectionMessage||""},selectedMessageText:function(){return this.$filled?this.selectionMessageText.replaceAll("{0}","1"):this.emptySelectionMessageText},focusedOptionId:function(){return this.focusedOptionIndex!==-1?"".concat(this.$id,"_").concat(this.focusedOptionIndex):null},ariaSetSize:function(){var t=this;return this.visibleOptions.filter(function(i){return!t.isOptionGroup(i)}).length},isClearIconVisible:function(){return this.showClear&&this.d_value!=null&&xr(this.options)},virtualScrollerDisabled:function(){return!this.virtualScrollerOptions}},directives:{ripple:p2},components:{InputText:rC,VirtualScroller:iC,Portal:xy,InputIcon:tC,IconField:eC,TimesIcon:Q2,ChevronDownIcon:X2,SpinnerIcon:My,SearchIcon:J2,CheckIcon:Iy,BlankIcon:Y2}},XV=["id"],JV=["name","id","value","placeholder","tabindex","disabled","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","aria-invalid"],QV=["name","id","tabindex","aria-label","aria-labelledby","aria-expanded","aria-controls","aria-activedescendant","aria-invalid","aria-disabled"],e9=["id"],t9=["id"],r9=["id","aria-label","aria-selected","aria-disabled","aria-setsize","aria-posinset","onClick","onMousemove","data-p-selected","data-p-focused","data-p-disabled"];function n9(e,t,i,c,p,g){var m=no("SpinnerIcon"),l=no("InputText"),S=no("SearchIcon"),I=no("InputIcon"),A=no("IconField"),O=no("CheckIcon"),z=no("BlankIcon"),D=no("VirtualScroller"),H=no("Portal"),ue=z1("ripple");return _t(),Tt("div",Bt({ref:"container",id:e.$id,class:e.cx("root"),onClick:t[11]||(t[11]=function(){return g.onContainerClick&&g.onContainerClick.apply(g,arguments)})},e.ptmi("root")),[e.editable?(_t(),Tt("input",Bt({key:0,ref:"focusInput",name:e.name,id:e.labelId||e.inputId,type:"text",class:[e.cx("label"),e.inputClass,e.labelClass],style:[e.inputStyle,e.labelStyle],value:g.editableInputValue,placeholder:e.placeholder,tabindex:e.disabled?-1:e.tabindex,disabled:e.disabled,autocomplete:"off",role:"combobox","aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledby,"aria-haspopup":"listbox","aria-expanded":p.overlayVisible,"aria-controls":e.$id+"_list","aria-activedescendant":p.focused?g.focusedOptionId:void 0,"aria-invalid":e.invalid||void 0,onFocus:t[0]||(t[0]=function(){return g.onFocus&&g.onFocus.apply(g,arguments)}),onBlur:t[1]||(t[1]=function(){return g.onBlur&&g.onBlur.apply(g,arguments)}),onKeydown:t[2]||(t[2]=function(){return g.onKeyDown&&g.onKeyDown.apply(g,arguments)}),onInput:t[3]||(t[3]=function(){return g.onEditableInput&&g.onEditableInput.apply(g,arguments)})},e.ptm("label")),null,16,JV)):(_t(),Tt("span",Bt({key:1,ref:"focusInput",name:e.name,id:e.labelId||e.inputId,class:[e.cx("label"),e.inputClass,e.labelClass],style:[e.inputStyle,e.labelStyle],tabindex:e.disabled?-1:e.tabindex,role:"combobox","aria-label":e.ariaLabel||(g.label==="p-emptylabel"?void 0:g.label),"aria-labelledby":e.ariaLabelledby,"aria-haspopup":"listbox","aria-expanded":p.overlayVisible,"aria-controls":e.$id+"_list","aria-activedescendant":p.focused?g.focusedOptionId:void 0,"aria-invalid":e.invalid||void 0,"aria-disabled":e.disabled,onFocus:t[4]||(t[4]=function(){return g.onFocus&&g.onFocus.apply(g,arguments)}),onBlur:t[5]||(t[5]=function(){return g.onBlur&&g.onBlur.apply(g,arguments)}),onKeydown:t[6]||(t[6]=function(){return g.onKeyDown&&g.onKeyDown.apply(g,arguments)})},e.ptm("label")),[un(e.$slots,"value",{value:e.d_value,placeholder:e.placeholder},function(){var ye;return[ap(ar(g.label==="p-emptylabel"?" ":(ye=g.label)!==null&&ye!==void 0?ye:"empty"),1)]})],16,QV)),g.isClearIconVisible?un(e.$slots,"clearicon",{key:2,class:Ao(e.cx("clearIcon")),clearCallback:g.onClearClick},function(){return[(_t(),Hn(e_(e.clearIcon?"i":"TimesIcon"),Bt({ref:"clearIcon",class:[e.cx("clearIcon"),e.clearIcon],onClick:g.onClearClick},e.ptm("clearIcon"),{"data-pc-section":"clearicon"}),null,16,["class","onClick"]))]}):Lr("",!0),lt("div",Bt({class:e.cx("dropdown")},e.ptm("dropdown")),[e.loading?un(e.$slots,"loadingicon",{key:0,class:Ao(e.cx("loadingIcon"))},function(){return[e.loadingIcon?(_t(),Tt("span",Bt({key:0,class:[e.cx("loadingIcon"),"pi-spin",e.loadingIcon],"aria-hidden":"true"},e.ptm("loadingIcon")),null,16)):(_t(),Hn(m,Bt({key:1,class:e.cx("loadingIcon"),spin:"","aria-hidden":"true"},e.ptm("loadingIcon")),null,16,["class"]))]}):un(e.$slots,"dropdownicon",{key:1,class:Ao(e.cx("dropdownIcon"))},function(){return[(_t(),Hn(e_(e.dropdownIcon?"span":"ChevronDownIcon"),Bt({class:[e.cx("dropdownIcon"),e.dropdownIcon],"aria-hidden":"true"},e.ptm("dropdownIcon")),null,16,["class"]))]})],16),br(H,{appendTo:e.appendTo},{default:Jo(function(){return[br(aw,Bt({name:"p-connected-overlay",onEnter:g.onOverlayEnter,onAfterEnter:g.onOverlayAfterEnter,onLeave:g.onOverlayLeave,onAfterLeave:g.onOverlayAfterLeave},e.ptm("transition")),{default:Jo(function(){return[p.overlayVisible?(_t(),Tt("div",Bt({key:0,ref:g.overlayRef,class:[e.cx("overlay"),e.panelClass,e.overlayClass],style:[e.panelStyle,e.overlayStyle],onClick:t[9]||(t[9]=function(){return g.onOverlayClick&&g.onOverlayClick.apply(g,arguments)}),onKeydown:t[10]||(t[10]=function(){return g.onOverlayKeyDown&&g.onOverlayKeyDown.apply(g,arguments)})},e.ptm("overlay")),[lt("span",Bt({ref:"firstHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:t[7]||(t[7]=function(){return g.onFirstHiddenFocus&&g.onFirstHiddenFocus.apply(g,arguments)})},e.ptm("hiddenFirstFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16),un(e.$slots,"header",{value:e.d_value,options:g.visibleOptions}),e.filter?(_t(),Tt("div",Bt({key:0,class:e.cx("header")},e.ptm("header")),[br(A,{unstyled:e.unstyled,pt:e.ptm("pcFilterContainer")},{default:Jo(function(){return[br(l,{ref:"filterInput",type:"text",value:p.filterValue,onVnodeMounted:g.onFilterUpdated,onVnodeUpdated:g.onFilterUpdated,class:Ao(e.cx("pcFilter")),placeholder:e.filterPlaceholder,variant:e.variant,unstyled:e.unstyled,role:"searchbox",autocomplete:"off","aria-owns":e.$id+"_list","aria-activedescendant":g.focusedOptionId,onKeydown:g.onFilterKeyDown,onBlur:g.onFilterBlur,onInput:g.onFilterChange,pt:e.ptm("pcFilter"),formControl:{novalidate:!0}},null,8,["value","onVnodeMounted","onVnodeUpdated","class","placeholder","variant","unstyled","aria-owns","aria-activedescendant","onKeydown","onBlur","onInput","pt"]),br(I,{unstyled:e.unstyled,pt:e.ptm("pcFilterIconContainer")},{default:Jo(function(){return[un(e.$slots,"filtericon",{},function(){return[e.filterIcon?(_t(),Tt("span",Bt({key:0,class:e.filterIcon},e.ptm("filterIcon")),null,16)):(_t(),Hn(S,Kx(Bt({key:1},e.ptm("filterIcon"))),null,16))]})]}),_:3},8,["unstyled","pt"])]}),_:3},8,["unstyled","pt"]),lt("span",Bt({role:"status","aria-live":"polite",class:"p-hidden-accessible"},e.ptm("hiddenFilterResult"),{"data-p-hidden-accessible":!0}),ar(g.filterResultMessageText),17)],16)):Lr("",!0),lt("div",Bt({class:e.cx("listContainer"),style:{"max-height":g.virtualScrollerDisabled?e.scrollHeight:""}},e.ptm("listContainer")),[br(D,Bt({ref:g.virtualScrollerRef},e.virtualScrollerOptions,{items:g.visibleOptions,style:{height:e.scrollHeight},tabindex:-1,disabled:g.virtualScrollerDisabled,pt:e.ptm("virtualScroller")}),Yk({content:Jo(function(ye){var ne=ye.styleClass,xe=ye.contentRef,Ce=ye.items,X=ye.getItemOptions,we=ye.contentStyle,Oe=ye.itemSize;return[lt("ul",Bt({ref:function(Ve){return g.listRef(Ve,xe)},id:e.$id+"_list",class:[e.cx("list"),ne],style:we,role:"listbox"},e.ptm("list")),[(_t(!0),Tt(Ar,null,Oo(Ce,function(ke,Ve){return _t(),Tt(Ar,{key:g.getOptionRenderKey(ke,g.getOptionIndex(Ve,X))},[g.isOptionGroup(ke)?(_t(),Tt("li",Bt({key:0,id:e.$id+"_"+g.getOptionIndex(Ve,X),style:{height:Oe?Oe+"px":void 0},class:e.cx("optionGroup"),role:"option",ref_for:!0},e.ptm("optionGroup")),[un(e.$slots,"optiongroup",{option:ke.optionGroup,index:g.getOptionIndex(Ve,X)},function(){return[lt("span",Bt({class:e.cx("optionGroupLabel"),ref_for:!0},e.ptm("optionGroupLabel")),ar(g.getOptionGroupLabel(ke.optionGroup)),17)]})],16,t9)):w1((_t(),Tt("li",Bt({key:1,id:e.$id+"_"+g.getOptionIndex(Ve,X),class:e.cx("option",{option:ke,focusedOption:g.getOptionIndex(Ve,X)}),style:{height:Oe?Oe+"px":void 0},role:"option","aria-label":g.getOptionLabel(ke),"aria-selected":g.isSelected(ke),"aria-disabled":g.isOptionDisabled(ke),"aria-setsize":g.ariaSetSize,"aria-posinset":g.getAriaPosInset(g.getOptionIndex(Ve,X)),onClick:function(ft){return g.onOptionSelect(ft,ke)},onMousemove:function(ft){return g.onOptionMouseMove(ft,g.getOptionIndex(Ve,X))},"data-p-selected":g.isSelected(ke),"data-p-focused":p.focusedOptionIndex===g.getOptionIndex(Ve,X),"data-p-disabled":g.isOptionDisabled(ke),ref_for:!0},g.getPTItemOptions(ke,X,Ve,"option")),[e.checkmark?(_t(),Tt(Ar,{key:0},[g.isSelected(ke)?(_t(),Hn(O,Bt({key:0,class:e.cx("optionCheckIcon"),ref_for:!0},e.ptm("optionCheckIcon")),null,16,["class"])):(_t(),Hn(z,Bt({key:1,class:e.cx("optionBlankIcon"),ref_for:!0},e.ptm("optionBlankIcon")),null,16,["class"]))],64)):Lr("",!0),un(e.$slots,"option",{option:ke,selected:g.isSelected(ke),index:g.getOptionIndex(Ve,X)},function(){return[lt("span",Bt({class:e.cx("optionLabel"),ref_for:!0},e.ptm("optionLabel")),ar(g.getOptionLabel(ke)),17)]})],16,r9)),[[ue]])],64)}),128)),p.filterValue&&(!Ce||Ce&&Ce.length===0)?(_t(),Tt("li",Bt({key:0,class:e.cx("emptyMessage"),role:"option"},e.ptm("emptyMessage"),{"data-p-hidden-accessible":!0}),[un(e.$slots,"emptyfilter",{},function(){return[ap(ar(g.emptyFilterMessageText),1)]})],16)):!e.options||e.options&&e.options.length===0?(_t(),Tt("li",Bt({key:1,class:e.cx("emptyMessage"),role:"option"},e.ptm("emptyMessage"),{"data-p-hidden-accessible":!0}),[un(e.$slots,"empty",{},function(){return[ap(ar(g.emptyMessageText),1)]})],16)):Lr("",!0)],16,e9)]}),_:2},[e.$slots.loader?{name:"loader",fn:Jo(function(ye){var ne=ye.options;return[un(e.$slots,"loader",{options:ne})]}),key:"0"}:void 0]),1040,["items","style","disabled","pt"])],16),un(e.$slots,"footer",{value:e.d_value,options:g.visibleOptions}),!e.options||e.options&&e.options.length===0?(_t(),Tt("span",Bt({key:1,role:"status","aria-live":"polite",class:"p-hidden-accessible"},e.ptm("hiddenEmptyMessage"),{"data-p-hidden-accessible":!0}),ar(g.emptyMessageText),17)):Lr("",!0),lt("span",Bt({role:"status","aria-live":"polite",class:"p-hidden-accessible"},e.ptm("hiddenSelectedMessage"),{"data-p-hidden-accessible":!0}),ar(g.selectedMessageText),17),lt("span",Bt({ref:"lastHiddenFocusableElementOnOverlay",role:"presentation","aria-hidden":"true",class:"p-hidden-accessible p-hidden-focusable",tabindex:0,onFocus:t[8]||(t[8]=function(){return g.onLastHiddenFocus&&g.onLastHiddenFocus.apply(g,arguments)})},e.ptm("hiddenLastFocusableEl"),{"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0}),null,16)],16)):Lr("",!0)]}),_:3},16,["onEnter","onAfterEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo"])],16,XV)}sC.render=n9;const i9={class:"map-options"},o9={class:"basemap-options"},s9=["for"],a9={class:"boundary-check"},l9={for:"boundary",class:"boundary-label"},c9={key:0,class:"zoom-locations"},u9={__name:"MapOptions",setup(e){const t=Ph(),{t:i}=Jc({locale:"en",messages:{en:{mapOptions:{boundaries:"Boundaries"}},fr:{mapOptions:{boundaries:"Frontières"}},ar:{mapOptions:{boundaries:"الحدود"}},am:{mapOptions:{boundaries:"ድንበሮች"}},es:{mapOptions:{boundaries:"Fronteras"}},sw:{mapOptions:{boundaries:"Mipaka"}}}});return(c,p)=>(_t(),Tt("div",i9,[lt("div",o9,[(_t(!0),Tt(Ar,null,Oo(Br(t).basemaps,g=>(_t(),Tt("div",{key:g.value,class:"basemap-item"},[br(Br(H2),{modelValue:Br(t).selectedBasemap,"onUpdate:modelValue":p[0]||(p[0]=m=>Br(t).selectedBasemap=m),inputId:g.value,name:"basemap",value:g.value,class:"basemap-input"},null,8,["modelValue","inputId","value"]),lt("label",{for:g.value},ar(g.label),9,s9)]))),128))]),p[4]||(p[4]=lt("div",{class:"divisor"},null,-1)),lt("div",a9,[br(Br(K2),{modelValue:Br(t).showBoundary,"onUpdate:modelValue":p[1]||(p[1]=g=>Br(t).showBoundary=g),inputId:"boundary",name:"boundary",value:"yes",binary:""},null,8,["modelValue"]),lt("label",l9,ar(Br(i)("mapOptions.boundaries")),1)]),p[5]||(p[5]=lt("div",{class:"divisor"},null,-1)),Br(t).zoomLocations?(_t(),Tt("div",c9,[p[3]||(p[3]=lt("label",{class:"zoom-locations-label",for:"zoom_location"},"Zoom Locations",-1)),br(Br(sC),{inputId:"zoom_location",modelValue:Br(t).selectedZoomLocation,"onUpdate:modelValue":p[2]||(p[2]=g=>Br(t).selectedZoomLocation=g),options:Br(t).zoomLocations,optionLabel:"name",optionValue:"id",size:"small",placeholder:"Select location"},null,8,["modelValue","options"])])):Lr("",!0)]))}},d9=Bo(u9,[["__scopeId","data-v-c04de151"]]),h9={class:"popup"},f9={class:"alert-severity-label"},p9={class:"alert-meta"},m9={class:"alert-meta-item"},g9={class:"alert-meta-label"},_9={class:"alert-meta-value"},y9={class:"alert-meta-item"},b9={class:"alert-meta-label"},v9={class:"alert-meta-value"},x9={class:"alert-meta-item"},w9={class:"alert-meta-label"},C9={class:"alert-meta-value"},S9={class:"alert-meta-item"},k9={class:"alert-meta-label"},T9={class:"alert-meta-value"},P9={class:"alert-meta-item"},I9={class:"alert-meta-label"},M9={class:"alert-meta-value"},E9={class:"alert-detail"},A9={class:"alert-event"},L9={class:"alert-headline"},R9=["href"],D9={__name:"CAPWarningPopup",props:{properties:{type:Object,required:!0}},setup(e){const t=e,{t:i}=Jc({locale:"en",messages:{en:{alert:{certainty:"Certainty",urgency:"Urgency",sent:"Sent",onset:"Onset",expires:"Expires",event:"Event",headline:"Headline",moreDetail:"More Detail"}},fr:{alert:{certainty:"Certitude",urgency:"Urgence",sent:"Envoyé",onset:"Début",expires:"Expire",event:"Événement",headline:"Titre",moreDetail:"Plus de détails"}},ar:{alert:{certainty:"اليقين",urgency:"الاستعجال",sent:"تم الإرسال",onset:"البداية",expires:"تنتهي",event:"الحدث",headline:"العنوان",moreDetail:"مزيد من التفاصيل"}},am:{alert:{certainty:"እርግጠኝነት",urgency:"አስቸኳይነት",sent:"ተልኳል",onset:"መጀመሪያ",expires:"ጊዜው ያበቃል",event:"ክስተት",headline:"ርዕስ",moreDetail:"ተጨማሪ መረጃ"}},es:{alert:{certainty:"Certeza",urgency:"Urgencia",sent:"Enviado",onset:"Comienzo",expires:"Expira",event:"Evento",headline:"Titular",moreDetail:"Más detalles"}},sw:{alert:{certainty:"Uhakika",urgency:"Uharaka",sent:"Imetumwa",onset:"Mwanzo",expires:"Inaisha",event:"Tukio",headline:"Kichwa cha Habari",moreDetail:"Maelezo Zaidi"}}}}),c=Xt(()=>{const p={...t.properties};if(p){if(p.sent){const g=rm(p.sent);if(p.sent=SF(g,{addSuffix:!0}),p.onset){const m=Date.parse(p.onset),l=new Date(m);p.onset=hp(l,"MMM dd yyyy, HH:MM")}else p.onset=hp(g,"MMM dd yyyy, HH:MM")}if(p.expires){const g=Date.parse(p.expires),m=new Date(g);p.expires=hp(m,"MMM dd yyyy, HH:MM")}return p}return null});return(p,g)=>(_t(),Tt("div",h9,[lt("div",{class:"alert-severity",style:ns({backgroundColor:c.value.severity_color})},[g[0]||(g[0]=lt("div",{class:"alert-icon"},[lt("svg",null,[lt("use",{"xlink:href":"#icon-warning"})])],-1)),lt("div",f9,ar(c.value.severity),1)],4),lt("div",p9,[lt("div",m9,[lt("div",g9,ar(Br(i)("alert.certainty")),1),lt("div",_9,ar(c.value.certainty),1)]),lt("div",y9,[lt("div",b9,ar(Br(i)("alert.urgency")),1),lt("div",v9,ar(c.value.urgency),1)]),lt("div",x9,[lt("div",w9,ar(Br(i)("alert.sent")),1),lt("div",C9,ar(c.value.sent),1)]),lt("div",S9,[lt("div",k9,ar(Br(i)("alert.onset")),1),lt("div",T9,ar(c.value.onset),1)]),lt("div",P9,[lt("div",I9,ar(Br(i)("alert.expires")),1),lt("div",M9,ar(c.value.expires),1)])]),lt("div",E9,[lt("div",A9,ar(c.value.event),1),lt("div",L9,ar(c.value.headline),1)]),c.value.web?(_t(),Tt("a",{key:0,href:c.value.web,target:"_blank",class:"alert-link"},ar(Br(i)("alert.moreDetail")),9,R9)):Lr("",!0)]))}},O9=Bo(D9,[["__scopeId","data-v-0a2dfbc5"]]),z9={key:0,class:"popup"},$9={class:"location-name"},B9=["href"],F9={key:1},N9={key:0,class:"condition"},j9={class:"condition-icon"},V9=["src"],U9={class:"condition-label"},Z9={class:"forecast-data-table"},G9={class:"forecast-name"},W9={class:"forecast-value"},H9={__name:"LocationForecastPopup",props:{properties:{type:Object,required:!0},locationForecastDetailUrl:{type:String,required:!1}},setup(e){const t=e,i=Ph(),c=Xt(()=>{var g;return(g=i.forecastSettings)==null?void 0:g.parameters.reduce((m,l)=>(m[l.parameter]=l,m),{})}),p=Xt(()=>{if(!c.value)return null;const g={data:[]},m=t.properties.city,l=t.properties.city_slug,S=t.properties.condition_label;t.locationForecastDetailUrl&&l&&(g.detailUrl=cityDetailUrl+l),S&&(g.condition={label:S,icon:t.properties.condition_symbol_url}),m&&(g.city=m);for(const I in c.value){const A=t.properties[I];if(A){const O=A,z=c.value[I].parameter_unit;g.data.push({value:O,name:c.value[I].name,unit:z,valueWithUnit:O?`${O} ${z}`:null})}}return g});return(g,m)=>p.value?(_t(),Tt("div",z9,[lt("div",$9,[p.value.detailUrl?(_t(),Tt("a",{key:0,href:p.value.detailUrl,target:"_blank",class:"location-detail-url"},ar(p.value.city),9,B9)):(_t(),Tt("span",F9,ar(p.value.city),1))]),p.value.condition?(_t(),Tt("div",N9,[lt("figure",j9,[lt("img",{src:p.value.condition.icon,alt:"Condition Icon"},null,8,V9)]),lt("div",U9,ar(p.value.condition.label),1)])):Lr("",!0),lt("div",Z9,[lt("table",null,[lt("tbody",null,[(_t(!0),Tt(Ar,null,Oo(p.value.data,(l,S)=>(_t(),Tt("tr",{key:S},[lt("td",G9,ar(l.name),1),lt("td",W9,ar(l.valueWithUnit),1)]))),128))])])])])):Lr("",!0)}},q9=Bo(H9,[["__scopeId","data-v-cc96c7ab"]]),K9={class:"basemap-control"},Y9={class:"fixed-layer-control"},X9={class:"dynamic-layer-control"},J9={class:"date-navigator-control"},Q9={class:"legend-control"},eU={key:0,class:"overlay-loader"},tU={__name:"Map",props:{mapSettingsUrl:{type:String,required:!0},initialBounds:{type:String,required:!1},locationForecastDetailUrl:{type:String,required:!1}},setup(e){const t=e,i=Ph(),c=Ca(null),p=on();let g=on([]),m;const l=["admin-boundary-fill","admin-boundary-line","admin-boundary-line-1","weather-warnings","weather-forecast"],S=on(null),I=on(null),A=on(!1),O=Ca(null),z=on({}),D=Xt(()=>{const et=i.activeTimeLayer;return et?i.timeLayerDates[et]||[]:[]}),H=Xt(()=>{const et=i.activeTimeLayer;return et&&i.selectedTimeLayerDateIndex[et]||0}),ue=Xt(()=>D.value[H.value]),ye=async()=>(await fetch(t.mapSettingsUrl)).json(),ne=async()=>{const et={container:c.value,style:F4,center:[0,0],zoom:4,scrollZoom:!1,attributionControl:!1};if(t.initialBounds)try{const nt=JSON.parse(t.initialBounds);et.bounds=[[nt[0],nt[1]],[nt[2],nt[3]]],et.fitBoundsOptions={padding:20}}catch(nt){console.error("Error parsing initial bounds",nt)}m=new Fg.Map(et),m.addControl(new Fg.AttributionControl({customAttribution:'<a href="https://maplibre.org" target="_blank">MapLibre</a>   &copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> &copy; <a href="https://carto.com/attributions" target="_blank">CARTO</a>',compact:!1}),"bottom-left"),m.on("load",async()=>{i.setLoading(!0);try{const nt=await ye();i.setLoading(!1),xe(nt)}catch(nt){console.log("Error fetching map settings",nt),i.setLoading(!1)}});const mt=["weather-warnings","weather-forecast"];mt.forEach(nt=>{m.on("mouseenter",nt,()=>{m.getCanvas().style.cursor="pointer"}),m.on("mouseleave",nt,()=>{m.getCanvas().style.cursor=""})}),m.on("click",nt=>{I.value&&(I.value.remove(),I.value=null);const bt=mt.filter(Qt=>i.visibleLayers.find(lr=>lr.id===Qt)),ir=m.queryRenderedFeatures(nt.point,{layers:bt}),Jt=ir&&!!ir.length&&ir[0];if(Jt){const Qt=Jt.layer.id;Qt==="weather-warnings"?(O.value=O9,z.value={properties:Jt.properties}):Qt==="weather-forecast"&&(O.value=q9,z.value={properties:Jt.properties,locationForecastDetailUrl:t.locationForecastDetailUrl}),A.value=!0,wh(()=>{I.value&&I.value.remove(),I.value=new Fg.Popup().setDOMContent(S.value).setLngLat(nt.lngLat).addTo(m),I.value.on("close",()=>{A.value=!1,I.value.remove(),I.value=null})})}})},xe=async et=>{const{boundaryTilesUrl:mt,showWarningsLayer:nt,capWarningsLayerDisplayName:bt,capGeojsonUrl:ir,showLocationForecastLayer:Jt,locationForecastLayerDisplayName:Qt,locationForecastDateDisplayFormat:lr,homeForecastDataUrl:Yr,weatherIconsUrl:tn,forecastClusterConfig:Pr,dynamicMapLayers:Gr,forecastSettingsUrl:Dr,zoomLocations:ce}=et;if(ce){i.setZoomLocations(ce);const ge=ce.find(Le=>Le.default);ge&&i.setSelectedZoomLocation(ge.id)}if(Ce(mt),nt&&(i.updateLayerTitle("weather-warnings",bt),X(ir)),Jt){i.updateLayerTitle("weather-forecast",Qt),i.updateLayerState("weather-forecast",!0),i.setWeatherForecastLayerDateFormat({currentTime:lr});try{const ge=await fetch(Dr).then(Le=>Le.json());i.setForecastSettings(ge),we(Yr,tn,Pr)}catch(ge){console.log("Error fetching forecast settings",ge)}}if(Gr&&Gr.length){Gr.forEach(Le=>{var ct,te;const ut=(te=(ct=Le.paramsSelectorConfig)==null?void 0:ct.find(se=>se.key==="time"))==null?void 0:te.dateFormat,st={...Le,title:Le.display_name||Le.name,homeMapLayerType:"dynamic",visible:!1,enabled:!0,icon:Le.icon?`icon-${Le.icon}`:"icon-layers",dateFormat:ut};We(st)});const ge=Gr.find(Le=>Le.show_by_default);ge&&!nt&&!Jt&&(ft(ge.id,!0),i.setActiveTimeLayer(ge.id),i.updateLayerVisibility(ge.id,!0))}},Ce=et=>{m.addSource("admin-boundary-source",{type:"vector",tiles:[et]}),m.addLayer({id:"admin-boundary-fill",type:"fill",source:"admin-boundary-source","source-layer":"default",filter:["==","level",0],paint:{"fill-color":"#fff","fill-opacity":0},metadata:{"mapbox:groups":"boundary"}}),m.addLayer({id:"admin-boundary-line",type:"line",source:"admin-boundary-source","source-layer":"default",filter:["==","level",0],paint:{"line-color":"#C0FF24","line-width":1,"line-offset":1},metadata:{"mapbox:groups":"boundary"}}),m.addLayer({id:"admin-boundary-line-1",type:"line",source:"admin-boundary-source","source-layer":"default",filter:["==","level",0],paint:{"line-color":"#000","line-width":1.5},metadata:{"mapbox:groups":"boundary"}})},X=et=>{fetch(et).then(mt=>mt.json()).then(mt=>{if(mt.features.length>0){i.updateLayerState("weather-warnings",!0);const nt=aB(mt);m.fitBounds(nt,{padding:50}),m.addSource("weather-warnings",{type:"geojson",data:mt});let bt;m.getLayer("weather-forecast")&&(bt="weather-forecast"),m.addLayer({id:"weather-warnings",type:"fill",source:"weather-warnings",paint:{"fill-color":["case",["==",["get","severity"],"Extreme"],"#d72f2a",["==",["get","severity"],"Severe"],"#f89904",["==",["get","severity"],"Moderate"],"#e4e616",["==",["get","severity"],"Minor"],"#53ffff",["==",["get","severity"],"Unknown"],"#3366ff","black"],"fill-opacity":.7,"fill-outline-color":"#000"}},bt),i.updateLayerVisibility("weather-warnings",!0)}})},we=(et,mt,nt)=>{m.addSource("weather-forecast",{type:"geojson",data:{type:"FeatureCollection",features:[]},...nt}),m.addLayer({id:"weather-forecast",type:"symbol",layout:{"icon-image":["get","condition"],"icon-size":.3,"icon-allow-overlap":!0},source:"weather-forecast"}),i.setLoading(!0),fetch(et).then(bt=>bt.json()).then(bt=>{Oe(mt),ke(bt);const{data:ir}=bt;ir&&ir.length&&i.updateLayerVisibility("weather-forecast",!0),i.setLoading(!1)}).catch(bt=>{i.setLoading(!1)})},Oe=et=>{fetch(et).then(mt=>mt.json()).then(mt=>{mt&&Array.isArray(mt)&&mt.forEach(nt=>{m.loadImage(nt.url).then(bt=>{m.addImage(nt.id,bt.data)})})})},ke=et=>{const{multi_period:mt,data:nt}=et;g.value=nt;const bt=new Date,ir=nt.reduce((Jt,Qt)=>{const lr=new Date(Qt.datetime);return mt&&lr.toDateString()===bt.toDateString()&&lr.getHours()<bt.getHours()||Jt.push(Qt.datetime),Jt},[]);i.setActiveTimeLayer("weather-forecast"),i.setSelectedTimeLayerDateIndex("weather-forecast",0),i.setTimeLayerDates("weather-forecast",ir)},Ve=et=>{const mt=g.value.find(nt=>nt.datetime===et);mt&&m.getSource("weather-forecast").setData(mt)},We=et=>{const{layerType:mt}=et;if(mt==="raster_file")et.mapLayerConfig=Kv(et),i.addLayer(et);else if(mt==="wms"){const{getCapabilitiesUrl:nt,getCapabilitiesLayerName:bt}=et;nt&&bt&&(et.mapLayerConfig=Kv(et),i.addLayer(et))}else mt==="vector_tile"?(et.mapLayerConfig=lB(et),i.addLayer(et)):console.error("Unsupported layer type:",mt)},ft=(et,mt)=>{const nt=i.getLayerById(et),{layerType:bt}=nt;if(mt)(bt==="raster_file"||bt==="wms"||bt==="vector_tile")&&Xe(nt.id);else{if(bt==="vector_tile"){const{layers:ir}=nt.mapLayerConfig;ir&&ir.forEach(Jt=>{m.getLayer(Jt.id)&&m.removeLayer(Jt.id)})}else m.getLayer(et)&&m.removeLayer(et);m.getSource(et)&&m.removeSource(et)}},Qe=(et,mt="timestamps")=>fetch(et).then(nt=>nt.json()).then(nt=>nt[mt]),Ye=et=>{const{layerType:mt}=et;if(mt==="raster_file"||mt==="vector_tile"){const{tileJsonUrl:nt,timestampsResponseObjectKey:bt}=et;return Qe(nt,bt)}else if(mt==="wms"){const{getCapabilitiesUrl:nt,getCapabilitiesLayerName:bt}=et;return B4(nt,bt)}else console.error("Unsupported layer type:",mt);return[]},Xe=async et=>{const mt=i.getLayerById(et),{mapLayerConfig:nt,layerType:bt,paramsSelectorConfig:ir}=mt,{currentTimeMethod:Jt}=mt;try{i.setLoading(!0);const Qt=await Ye(mt),lr=Qt.sort((Yr,tn)=>new Date(Yr)-new Date(tn));if(lr&&lr.length){const Yr=UF([...lr],Jt),tn=lr.indexOf(Yr);i.setSelectedTimeLayerDateIndex(mt.id,tn),i.setTimeLayerDates(mt.id,Qt);const Pr=nt.source.id;let Gr;const Dr=ir.find(ce=>ce.key==="time");if(Dr){let ce="time";const{url_param:ge}=Dr;ge&&(ce=ge),Gr=Kw(nt.source.tiles[0],{[ce]:Yr})}if(Gr){if(m.getSource(Pr)||m.addSource(Pr,{...nt.source,tiles:[Gr]}),bt==="raster_file"||bt==="wms")m.getLayer(et)||m.addLayer({id:et,type:"raster",source:Pr});else if(bt==="vector_tile"){const{layers:ce}=nt;ce&&ce.forEach(ge=>{m.getLayer(ge.id)||m.addLayer({...ge,source:Pr})})}l.forEach(ce=>{m.getLayer(ce)&&m.moveLayer(ce)})}}i.setLoading(!1)}catch(Qt){console.log("Error adding dynamic layer",Qt),i.setLoading(!1)}},wt=()=>m==null?void 0:m.zoomIn(),Kt=()=>m==null?void 0:m.zoomOut(),vt=et=>{p.value.toggle(et)},At=({layerId:et,visible:mt})=>{i.updateLayerVisibility(et,mt);const nt=i.getLayerById(et),{homeMapLayerType:bt}=nt;bt==="fixed"&&m.getLayer(et)&&m.setLayoutProperty(et,"visibility",mt?"visible":"none"),nt.multiTemporal&&(mt?(i.activeTimeLayer&&(i.updateLayerVisibility(i.activeTimeLayer,!1),m.getLayer(i.activeTimeLayer)&&m.setLayoutProperty(i.activeTimeLayer,"visibility","none"),i.activeTimeLayer!=="weather-forecast"&&ft(i.activeTimeLayer,!1)),i.setActiveTimeLayer(et)):i.setActiveTimeLayer(null)),bt==="dynamic"&&ft(et,mt)},Ut=(et,mt)=>{const{layerType:nt,mapLayerConfig:bt,paramsSelectorConfig:ir}=et;if(nt==="raster_file"||nt==="wms"||nt==="vector_tile"){const Jt=ir.find(lr=>lr.key==="time");let Qt="time";if(Jt){const{url_param:lr}=Jt;lr&&(Qt=lr)}bt&&cB(m,bt.source.id,{[Qt]:mt})}};return Kn(ue,et=>{const mt=i.activeTimeLayer;if(mt){const nt=i.getLayerById(mt),{homeMapLayerType:bt}=nt;bt==="fixed"?mt==="weather-forecast"&&Ve(et):Ut(nt,et)}}),Kn(()=>i.selectedBasemap,et=>{m.getStyle().layers.filter(bt=>bt.metadata&&bt.metadata["mapbox:groups"]==="background").forEach(bt=>{bt.id===et?m.setLayoutProperty(bt.id,"visibility","visible"):m.setLayoutProperty(bt.id,"visibility","none")})}),Kn(()=>i.showBoundary,et=>{m.getStyle().layers.filter(bt=>bt.metadata&&bt.metadata["mapbox:groups"]==="boundary").forEach(bt=>{et?m.setLayoutProperty(bt.id,"visibility","visible"):m.setLayoutProperty(bt.id,"visibility","none")})}),Kn(()=>i.selectedZoomLocation,et=>{const mt=i.zoomLocations.find(nt=>nt.id===et);if(mt&&mt.bounds){const nt=mt.bounds;m.fitBounds([[nt[0],nt[1]],[nt[2],nt[3]]],{padding:50})}}),Ia(()=>ne()),Zp(()=>m==null?void 0:m.remove()),(et,mt)=>(_t(),Tt(Ar,null,[lt("div",{ref_key:"mapContainer",ref:c,class:"map-container"},null,512),lt("div",{class:"zoom-controls"},[lt("button",{onClick:wt},"+"),lt("button",{onClick:Kt},"−")]),lt("div",K9,[lt("div",{class:"basemap-icon icon",onClick:vt},mt[0]||(mt[0]=[lt("svg",null,[lt("use",{"xlink:href":"#icon-layer-group"})],-1)])),br(Br(y2),{ref_key:"basemapChooserRef",ref:p},{default:Jo(()=>[br(d9)]),_:1},512)]),mt[2]||(mt[2]=lt("div",{id:"datepicker-mobile"},null,-1)),lt("div",Y9,[(_t(!0),Tt(Ar,null,Oo(Br(i).sortedFixedLayers,nt=>(_t(),Hn(fx,{key:nt.id,title:nt.title,enabled:nt.enabled,visible:nt.visible,"home-map-layer-type":nt.homeMapLayerType,position:nt.position,id:nt.id,icon:nt.icon,"onUpdate:toggleLayer":At},null,8,["title","enabled","visible","home-map-layer-type","position","id","icon"]))),128))]),lt("div",X9,[(_t(!0),Tt(Ar,null,Oo(Br(i).sortedDynamicLayers,nt=>(_t(),Hn(fx,{key:nt.id,title:nt.title,enabled:nt.enabled,visible:nt.visible,"home-map-layer-type":nt.homeMapLayerType,position:nt.position,id:nt.id,icon:nt.icon,"onUpdate:toggleLayer":At},null,8,["title","enabled","visible","home-map-layer-type","position","id","icon"]))),128))]),lt("div",J9,[br(Y6)]),lt("div",Q9,[br(P7)]),Br(i).loading?(_t(),Tt("div",eU,mt[1]||(mt[1]=[lt("div",{class:"spinner"},null,-1)]))):Lr("",!0),A.value?(_t(),Hn(Y_,{key:1,to:"body"},[lt("div",{ref_key:"popupContent",ref:S},[(_t(),Hn(e_(O.value),Kx(rw(z.value)),null,16))],512)])):Lr("",!0)],64))}},rU=Bo(tU,[["__scopeId","data-v-2eae1d77"]]),Ux={__name:"HomeMap",props:{mapSettingsUrl:{type:String,required:!0},initialBounds:{type:String,required:!1},locationForecastDetailUrl:{type:String,required:!1},languageCode:{type:String,required:!1,default:"en"},homeMapAlertsUrl:{type:String,required:!1}},setup(e){const t=e,i=()=>{const c=document.getElementById("alerts-container");c&&t.homeMapAlertsUrl&&fetch(t.homeMapAlertsUrl).then(p=>{if(!p.ok)throw new Error("Error fetching alerts");return p.text()}).then(p=>{const g=new DOMParser().parseFromString(p,"text/html").body;g&&c.append(g)}).catch(p=>{console.error("Error loading alerts:",p)})};return Ia(()=>i()),(c,p)=>(_t(),Hn(rU,{initialBounds:e.initialBounds,mapSettingsUrl:e.mapSettingsUrl,locationForecastDetailUrl:e.locationForecastDetailUrl},null,8,["initialBounds","mapSettingsUrl","locationForecastDetailUrl"]))}},nU=mP(),ip=document.getElementById("home-map");if(ip){const e=AM({dataset:{...ip.dataset},component:Ux});let t=(e==null?void 0:e.languageCode)||"en";const i=bM({legacy:!1,locale:t,fallbackLocale:"en"}),c=hP(Ux,e);c.use(BE,{theme:{preset:rB}}),c.use(nU),c.use(i),c.use(EM,{rootElement:ip}),c.mount(ip)}
