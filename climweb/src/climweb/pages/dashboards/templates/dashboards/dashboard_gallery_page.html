{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags static lazyimages_tags %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock extra_css %}

{% block content %}

<section id="page-hero" class="hero is-small">
    <div class="hero-body is-align-items-center" style="display:flex">
        <div class="container">            
            {% block banner_title %}
                <h1 class="title page-title"
                    style="font-weight:300">
                    {{ page.title }}
                </h1>
            {% endblock %}
            {% block page_subtitle %}
                <div class="columns" style="margin: 0">
                    <div class="column is-8 is-full-mobile" style="padding: 0;">
                        <div class="page-description">
                            {{ page.description|richtext }}</div>
                    </div>
                </div>
            {% endblock %}
        </div>
    </div>

</section>
<main>

<section class="section">
  <div class="container">
    <div class="columns is-multiline">
      {% for dashboard in page.get_children.specific %}
        <div class="column is-3" style="--banner-background-color: {{ dashboard.banner_background_color }}">
          {% if dashboard.banner_image %}{% image dashboard.banner_image original as banner_img %}{% endif %}
          <a href="{{ dashboard.url }}">
            <div class="card dashboard-card px-4 py-6 is-align-items-center is-justify-content-center {% if dashboard.banner_image %}progressive__bg progressive--not-loaded{% endif %}"
                style="min-height:200px; {% if dashboard.banner_image %}background-image: url({% lazy_image_url banner_img %});background-repeat:no-repeat; background-size:cover;position:relative {% else %} background-color: {{ dashboard.banner_background_color }}{% endif %}"
                data-progressive="{% if dashboard.banner_image %}{{ banner_img.url }}{% endif %}">
                <div class="card-content" style="position:absolute">
                    <h4 class="title is-6 has-text-white">{{ dashboard.banner_title }}</h4>
                </div>
            </div>
        </a>
        </div>
      {% empty %}
        <p>No dashboards available yet.</p>
      {% endfor %}
    </div>
  </div>
</section>

</main>
{% endblock %}
