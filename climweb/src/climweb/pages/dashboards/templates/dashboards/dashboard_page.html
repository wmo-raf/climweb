{% extends 'base.html' %}
{% load i18n static lazyimages_tags wagtailcore_tags wagtailiconchooser_tags bulma_tags wagtailiconchooser_tags nmhs_cms_tags %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock extra_css %}

{% block content %}
    <main class="is-index">
        <div class="hero-header">
                <section id="page-hero" class="hero is-small" style="background-color:{{page.banner_background_color}}">
                    <div class="hero-body is-align-items-center" style="display:flex">
                        <div class="container">
                            {% block banner_title %}
                                <h1 class="title page-title has-text-white"
                                    style="font-weight:300;  color: #ffffff;">
                                    {{ page.banner_title }}
                                </h1>
                            {% endblock %}
                            {% block page_subtitle %}
                                <div class="columns" style="margin: 0">
                                    <div class="column is-full-desktop" style="padding: 0;">
                                        <div class="page-description has-text-white"
                                            style="color: #ffffff;">
                                            {{ page.banner_description|richtext }}</div>
                                    </div>
                                </div>
                            {% endblock %}
                        </div>
                    </div>
    
                </section>

                {% if page.body %}

                    {% for block in page.body %}
                        <section class="feature-block-section my-6">
                            <div class="container" style="text-align:left">
                            <h1 class="my-4" style="color:{{page.banner_background_color}}">{{ block.value.section_title }}</h1>

                            {% for item in block.value.content %}
                                {% if item.block_type == 'title_text' %}
                                    {% include_block item %}
                                {% elif item.block_type == 'title_text_image' %}
                                    {% include_block item %}
                                {% elif item.block_type == 'chart' %}
                                    {% include_block item with section=forloop.parentloop.counter %}
                                {% elif item.block_type == 'map' %}
                                    {% include_block item with section=forloop.parentloop.counter %}
                                {% elif item.block_type == 'table' %}
                                    {% include_block item %}
                                {% endif %}
                            {% endfor %}
                            </div>
                        </section>
                    {% endfor %}
                {% endif %}        
            </div>
        
    </main>
{% endblock content %}