{% load wagtailiconchooser_tags %}

<div class="columns is-multiline my-4">
    {% for chart in charts %}
    <div class="column is-half chart-column">
        <div class="card elevation-1">
            <header class="card-header elevation-0">
                <p class="card-header-title">{{ chart.title }}{% if admin_level != 0 %} in {{chart.area_desc}}{% endif %}</p>
                <a class="card-header-icon" aria-label="more options" href="{{chart.mapviewer_map_url}}" target="_blank" rel="noopener">
                  <div class="icon is-small">
                      {% svg_icon "layer-group" %}
                  </div>
                </a>
                <button class="card-header-icon" aria-label="more options">
                  <div class="icon is-small">
                      {% svg_icon "info-circle" %}
                  </div>
                </button>
            </header>
            <div class="card-content">
                {% if chart.chart_type == "stripes" %}
                    <div
                        class="warming-stripes-chart"
                        id="stripes-{{ section_index }}-{{ index|add:forloop.counter0 }}"
                        data-layer-id="{{ chart.dataset.id }}"
                        data-admin-path="{{ chart.admin_path }}"
                        data-datetime-format="{{ chart.dataset.date_format|default:'yyyy-MM-dd HH:mm' }}"
                    ></div>
                {% else %}
                    <div
                        class="chart-container"
                        id="chart-{{ section_index }}-{{ index|add:forloop.counter0 }}"
                        data-layer-id="{{ chart.dataset.id }}"
                        data-title="{{ chart.title }}"
                        data-color="{{ chart.chart_color|default:'#0b76e1' }}"
                        data-unit="{{ chart.data_unit|default:'Value' }}"
                        data-type="{{ chart.chart_type|default:'line' }}"
                        data-area-desc="{{ chart.area_desc }}"
                        data-admin-level="{{ chart.admin_level }}"
                        data-admin-path="{{chart.admin_path}}"
                        data-datetime-format="{{ chart.dataset.date_format|default:'yyyy-MM-dd HH:mm' }}"
                    ></div>
                {% endif %}
            </div>
            <footer class="card-footer">
                <div style="width: 100%" class="m-2">
                    <input
                        class="flatpickr flatpickr-input input is-small"
                        type="text"
                        placeholder="Select Date Range"
                        id="{% if chart.chart_type == 'stripes' %}date-stripes-{% else %}date-chart-{% endif %}{{ section_index }}-{{ index|add:forloop.counter0 }}"
                    />
                </div>
            </footer>
        </div>
    </div>
    {% endfor %}
</div>
