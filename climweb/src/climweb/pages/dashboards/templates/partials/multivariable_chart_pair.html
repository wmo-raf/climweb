{% load wagtailiconchooser_tags %}
<div class="columns is-multiline my-4">
    {% for multivariable_chart in multivariable_charts %}
    <div class="column is-half chart-column">
        <div class="card elevation-1">
            <header class="card-header elevation-0" style="align-items: center;">
                <p class="card-header-title">
                    {{ multivariable_chart.title }}{% if multivariable_chart.admin_level != 0 %} in {{multivariable_chart.area_desc}}{% endif %}
                </p>
                {% if multivariable_chart.metadata %}
                <button class="card-header-icon js-modal-trigger" aria-label="more options" data-target="modal-{{ section_index }}-{{ index|add:forloop.counter }}-{{block_index}}">
                    <div class="icon is-small">{% svg_icon "info-circle" %}</div>
                </button>
                {% endif %}
                
            </header>
            <div class="card-content">
                <div class="multivariable-chart-container"
                    id="multichart-{{ section_index }}-{{ index|add:forloop.counter }}-{{block_index}}"
                    data-title="{{ multivariable_chart.title }}"
                    data-datasets='{{ multivariable_chart.multivariable_chart_data|safe }}'
                    data-area-desc="{{ multivariable_chart.area_desc }}"
                    data-admin-level="{{ multivariable_chart.admin_level }}"
                    data-geostore-id="{{ multivariable_chart.geostore_id|stringformat:"s" }}"
                    data-gid0="{% if multivariable_chart.gid0 %}{{ multivariable_chart.gid0 }}{% else %}{% endif %}"
                    data-gid1="{% if multivariable_chart.gid1 %}{{ multivariable_chart.gid1 }}{% else %}{% endif %}"
                    data-gid2="{% if multivariable_chart.gid2 %}{{ multivariable_chart.gid2 }}{% else %}{% endif %}"
                ></div>
            </div>
            <footer class="card-footer">
                <div style="width: 100%" class="m-2">
                    <div class="field is-grouped">
                        <div class="control">
                            <input class="datepicker-input input is-small" type="text" placeholder="Start Date" id="date-start-multichart-{{ section_index }}-{{ index|add:forloop.counter }}-{{block_index }}" />
                        </div>
                        <div class="control">
                            <input class="datepicker-input input is-small" type="text" placeholder="End Date" id="date-end-multichart-{{ section_index }}-{{ index|add:forloop.counter }}-{{block_index }}" />
                        </div>
                    </div>
                    <div class="params" id="paramsContainer-multichart-{{ section_index }}-{{ index|add:forloop.counter }}-{{block_index }}"></div>
                </div>
            </footer>
        </div>
    </div>
    {% endfor %}
</div>
